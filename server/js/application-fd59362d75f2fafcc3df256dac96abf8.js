function MediumEditor(t,e){"use strict";return this.init(t,e)}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e=t.length,i=re.type(t);return"function"===i||re.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t}function n(t,e,i){if(re.isFunction(e))return re.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return re.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(de.test(e))return re.filter(e,t,i);e=re.filter(e,t)}return re.grep(t,function(t){return re.inArray(t,e)>=0!==i})}function r(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function o(t){var e=we[t]={};return re.each(t.match(ye)||[],function(t,i){e[i]=!0}),e}function s(){fe.addEventListener?(fe.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1)):(fe.detachEvent("onreadystatechange",a),t.detachEvent("onload",a))}function a(){(fe.addEventListener||"load"===event.type||"complete"===fe.readyState)&&(s(),re.ready())}function l(t,e,i){if(void 0===i&&1===t.nodeType){var n="data-"+e.replace($e,"-$1").toLowerCase();if(i=t.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:ke.test(i)?re.parseJSON(i):i}catch(r){}re.data(t,e,i)}else i=void 0}return i}function c(t){var e;for(e in t)if(("data"!==e||!re.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function u(t,e,i,n){if(re.acceptData(t)){var r,o,s=re.expando,a=t.nodeType,l=a?re.cache:t,c=a?t[s]:t[s]&&s;if(c&&l[c]&&(n||l[c].data)||void 0!==i||"string"!=typeof e)return c||(c=a?t[s]=K.pop()||re.guid++:s),l[c]||(l[c]=a?{}:{toJSON:re.noop}),("object"==typeof e||"function"==typeof e)&&(n?l[c]=re.extend(l[c],e):l[c].data=re.extend(l[c].data,e)),o=l[c],n||(o.data||(o.data={}),o=o.data),void 0!==i&&(o[re.camelCase(e)]=i),"string"==typeof e?(r=o[e],null==r&&(r=o[re.camelCase(e)])):r=o,r}}function h(t,e,i){if(re.acceptData(t)){var n,r,o=t.nodeType,s=o?re.cache:t,a=o?t[re.expando]:re.expando;if(s[a]){if(e&&(n=i?s[a]:s[a].data)){re.isArray(e)?e=e.concat(re.map(e,re.camelCase)):e in n?e=[e]:(e=re.camelCase(e),e=e in n?[e]:e.split(" ")),r=e.length;for(;r--;)delete n[e[r]];if(i?!c(n):!re.isEmptyObject(n))return}(i||(delete s[a].data,c(s[a])))&&(o?re.cleanData([t],!0):ie.deleteExpando||s!=s.window?delete s[a]:s[a]=null)}}}function d(){return!0}function p(){return!1}function f(){try{return fe.activeElement}catch(t){}}function m(t){var e=je.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function g(t,e){var i,n,r=0,o=typeof t.getElementsByTagName!==Ce?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==Ce?t.querySelectorAll(e||"*"):void 0;if(!o)for(o=[],i=t.childNodes||t;null!=(n=i[r]);r++)!e||re.nodeName(n,e)?o.push(n):re.merge(o,g(n,e));return void 0===e||e&&re.nodeName(t,e)?re.merge([t],o):o}function v(t){De.test(t.type)&&(t.defaultChecked=t.checked)}function b(t,e){return re.nodeName(t,"table")&&re.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function y(t){return t.type=(null!==re.find.attr(t,"type"))+"/"+t.type,t}function w(t){var e=Qe.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function x(t,e){for(var i,n=0;null!=(i=t[n]);n++)re._data(i,"globalEval",!e||re._data(e[n],"globalEval"))}function _(t,e){if(1===e.nodeType&&re.hasData(t)){var i,n,r,o=re._data(t),s=re._data(e,o),a=o.events;if(a){delete s.handle,s.events={};for(i in a)for(n=0,r=a[i].length;r>n;n++)re.event.add(e,i,a[i][n])}s.data&&(s.data=re.extend({},s.data))}}function C(t,e){var i,n,r;if(1===e.nodeType){if(i=e.nodeName.toLowerCase(),!ie.noCloneEvent&&e[re.expando]){r=re._data(e);for(n in r.events)re.removeEvent(e,n,r.handle);e.removeAttribute(re.expando)}"script"===i&&e.text!==t.text?(y(e).text=t.text,w(e)):"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),ie.html5Clone&&t.innerHTML&&!re.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&De.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.defaultSelected=e.selected=t.defaultSelected:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}}function k(e,i){var n,r=re(i.createElement(e)).appendTo(i.body),o=t.getDefaultComputedStyle&&(n=t.getDefaultComputedStyle(r[0]))?n.display:re.css(r[0],"display");return r.detach(),o}function $(t){var e=fe,i=Ze[t];return i||(i=k(t,e),"none"!==i&&i||(Je=(Je||re("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Je[0].contentWindow||Je[0].contentDocument).document,e.write(),e.close(),i=k(t,e),Je.detach()),Ze[t]=i),i}function T(t,e){return{get:function(){var i=t();if(null!=i)return i?void delete this.get:(this.get=e).apply(this,arguments)}}}function E(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=e,r=di.length;r--;)if(e=di[r]+i,e in t)return e;return n}function A(t,e){for(var i,n,r,o=[],s=0,a=t.length;a>s;s++)n=t[s],n.style&&(o[s]=re._data(n,"olddisplay"),i=n.style.display,e?(o[s]||"none"!==i||(n.style.display=""),""===n.style.display&&Ae(n)&&(o[s]=re._data(n,"olddisplay",$(n.nodeName)))):(r=Ae(n),(i&&"none"!==i||!r)&&re._data(n,"olddisplay",r?i:re.css(n,"display"))));for(s=0;a>s;s++)n=t[s],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?o[s]||"":"none"));return t}function S(t,e,i){var n=li.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function D(t,e,i,n,r){for(var o=i===(n?"border":"content")?4:"width"===e?1:0,s=0;4>o;o+=2)"margin"===i&&(s+=re.css(t,i+Ee[o],!0,r)),n?("content"===i&&(s-=re.css(t,"padding"+Ee[o],!0,r)),"margin"!==i&&(s-=re.css(t,"border"+Ee[o]+"Width",!0,r))):(s+=re.css(t,"padding"+Ee[o],!0,r),"padding"!==i&&(s+=re.css(t,"border"+Ee[o]+"Width",!0,r)));return s}function N(t,e,i){var n=!0,r="width"===e?t.offsetWidth:t.offsetHeight,o=ti(t),s=ie.boxSizing&&"border-box"===re.css(t,"boxSizing",!1,o);if(0>=r||null==r){if(r=ei(t,e,o),(0>r||null==r)&&(r=t.style[e]),ni.test(r))return r;n=s&&(ie.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+D(t,e,i||(s?"border":"content"),n,o)+"px"}function I(t,e,i,n,r){return new I.prototype.init(t,e,i,n,r)}function M(){return setTimeout(function(){pi=void 0}),pi=re.now()}function P(t,e){var i,n={height:t},r=0;for(e=e?1:0;4>r;r+=2-e)i=Ee[r],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function B(t,e,i){for(var n,r=(yi[e]||[]).concat(yi["*"]),o=0,s=r.length;s>o;o++)if(n=r[o].call(i,e,t))return n}function j(t,e,i){var n,r,o,s,a,l,c,u,h=this,d={},p=t.style,f=t.nodeType&&Ae(t),m=re._data(t,"fxshow");i.queue||(a=re._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,re.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],c=re.css(t,"display"),u="none"===c?re._data(t,"olddisplay")||$(t.nodeName):c,"inline"===u&&"none"===re.css(t,"float")&&(ie.inlineBlockNeedsLayout&&"inline"!==$(t.nodeName)?p.zoom=1:p.display="inline-block")),i.overflow&&(p.overflow="hidden",ie.shrinkWrapBlocks()||h.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in e)if(r=e[n],mi.exec(r)){if(delete e[n],o=o||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[n])continue;f=!0}d[n]=m&&m[n]||re.style(t,n)}else c=void 0;if(re.isEmptyObject(d))"inline"===("none"===c?$(t.nodeName):c)&&(p.display=c);else{m?"hidden"in m&&(f=m.hidden):m=re._data(t,"fxshow",{}),o&&(m.hidden=!f),f?re(t).show():h.done(function(){re(t).hide()}),h.done(function(){var e;re._removeData(t,"fxshow");for(e in d)re.style(t,e,d[e])});for(n in d)s=B(f?m[n]:0,n,h),n in m||(m[n]=s.start,f&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}}function R(t,e){var i,n,r,o,s;for(i in t)if(n=re.camelCase(i),r=e[n],o=t[i],re.isArray(o)&&(r=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),s=re.cssHooks[n],s&&"expand"in s){o=s.expand(o),delete t[n];for(i in o)i in t||(t[i]=o[i],e[i]=r)}else e[n]=r}function L(t,e,i){var n,r,o=0,s=bi.length,a=re.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=pi||M(),i=Math.max(0,c.startTime+c.duration-e),n=i/c.duration||0,o=1-n,s=0,l=c.tweens.length;l>s;s++)c.tweens[s].run(o);return a.notifyWith(t,[c,o,i]),1>o&&l?i:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:re.extend({},e),opts:re.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:pi||M(),duration:i.duration,tweens:[],createTween:function(e,i){var n=re.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(r)return this;for(r=!0;n>i;i++)c.tweens[i].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),u=c.props;for(R(u,c.opts.specialEasing);s>o;o++)if(n=bi[o].call(c,t,u,c.opts))return n;return re.map(u,B,c),re.isFunction(c.opts.start)&&c.opts.start.call(t,c),re.fx.timer(re.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function O(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,r=0,o=e.toLowerCase().match(ye)||[];if(re.isFunction(i))for(;n=o[r++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function F(t,e,i,n){function r(a){var l;return o[a]=!0,re.each(t[a]||[],function(t,a){var c=a(e,i,n);return"string"!=typeof c||s||o[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),r(c),!1)}),l}var o={},s=t===qi;return r(e.dataTypes[0])||!o["*"]&&r("*")}function H(t,e){var i,n,r=re.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&re.extend(!0,t,i),t}function z(t,e,i){for(var n,r,o,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(s in a)if(a[s]&&a[s].test(r)){l.unshift(s);break}if(l[0]in i)o=l[0];else{for(s in i){if(!l[0]||t.converters[s+" "+l[0]]){o=s;break}n||(n=s)}o=o||n}return o?(o!==l[0]&&l.unshift(o),i[o]):void 0}function q(t,e,i,n){var r,o,s,a,l,c={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(o=u.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=c[l+" "+o]||c["* "+o],!s)for(r in c)if(a=r.split(" "),a[1]===o&&(s=c[l+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[r]:c[r]!==!0&&(o=a[0],u.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function U(t,e,i,n){var r;if(re.isArray(e))re.each(e,function(e,r){i||Qi.test(t)?n(t,r):U(t+"["+("object"==typeof r?e:"")+"]",r,i,n)});else if(i||"object"!==re.type(e))n(t,e);else for(r in e)U(t+"["+r+"]",e[r],i,n)}function V(){try{return new t.XMLHttpRequest}catch(e){}}function W(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function Q(t){return re.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var K=[],Y=K.slice,G=K.concat,X=K.push,J=K.indexOf,Z={},te=Z.toString,ee=Z.hasOwnProperty,ie={},ne="1.11.1",re=function(t,e){return new re.fn.init(t,e)},oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/^-ms-/,ae=/-([\da-z])/gi,le=function(t,e){return e.toUpperCase()};re.fn=re.prototype={jquery:ne,constructor:re,selector:"",length:0,toArray:function(){return Y.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:Y.call(this)},pushStack:function(t){var e=re.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return re.each(this,t,e)},map:function(t){return this.pushStack(re.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(Y.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:X,sort:K.sort,splice:K.splice},re.extend=re.fn.extend=function(){var t,e,i,n,r,o,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||re.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(r=arguments[a]))for(n in r)t=s[n],i=r[n],s!==i&&(c&&i&&(re.isPlainObject(i)||(e=re.isArray(i)))?(e?(e=!1,o=t&&re.isArray(t)?t:[]):o=t&&re.isPlainObject(t)?t:{},s[n]=re.extend(c,o,i)):void 0!==i&&(s[n]=i));return s},re.extend({expando:"jQuery"+(ne+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===re.type(t)},isArray:Array.isArray||function(t){return"array"===re.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!re.isArray(t)&&t-parseFloat(t)>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==re.type(t)||t.nodeType||re.isWindow(t))return!1;try{if(t.constructor&&!ee.call(t,"constructor")&&!ee.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(ie.ownLast)for(e in t)return ee.call(t,e);for(e in t);return void 0===e||ee.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Z[te.call(t)]||"object":typeof t},globalEval:function(e){e&&re.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(se,"ms-").replace(ae,le)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var r,o=0,s=t.length,a=i(t);if(n){if(a)for(;s>o&&(r=e.apply(t[o],n),r!==!1);o++);else for(o in t)if(r=e.apply(t[o],n),r===!1)break}else if(a)for(;s>o&&(r=e.call(t[o],o,t[o]),r!==!1);o++);else for(o in t)if(r=e.call(t[o],o,t[o]),r===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(oe,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?re.merge(n,"string"==typeof t?[t]:t):X.call(n,t)),n},inArray:function(t,e,i){var n;if(e){if(J)return J.call(e,t,i);for(n=e.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;i>n;)t[r++]=e[n++];if(i!==i)for(;void 0!==e[n];)t[r++]=e[n++];return t.length=r,t},grep:function(t,e,i){for(var n,r=[],o=0,s=t.length,a=!i;s>o;o++)n=!e(t[o],o),n!==a&&r.push(t[o]);return r},map:function(t,e,n){var r,o=0,s=t.length,a=i(t),l=[];if(a)for(;s>o;o++)r=e(t[o],o,n),null!=r&&l.push(r);else for(o in t)r=e(t[o],o,n),null!=r&&l.push(r);return G.apply([],l)},guid:1,proxy:function(t,e){var i,n,r;return"string"==typeof e&&(r=t[e],e=t,t=r),re.isFunction(t)?(i=Y.call(arguments,2),n=function(){return t.apply(e||this,i.concat(Y.call(arguments)))},n.guid=t.guid=t.guid||re.guid++,n):void 0},now:function(){return+new Date},support:ie}),re.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Z["[object "+e+"]"]=e.toLowerCase()});var ce=function(t){function e(t,e,i,n){var r,o,s,a,l,c,h,p,f,m;if((e?e.ownerDocument||e:F)!==I&&N(e),e=e||I,i=i||[],!t||"string"!=typeof t)return i;if(1!==(a=e.nodeType)&&9!==a)return[];if(P&&!n){if(r=be.exec(t))if(s=r[1]){if(9===a){if(o=e.getElementById(s),!o||!o.parentNode)return i;if(o.id===s)return i.push(o),i}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(s))&&L(e,o)&&o.id===s)return i.push(o),i}else{if(r[2])return Z.apply(i,e.getElementsByTagName(t)),i;if((s=r[3])&&x.getElementsByClassName&&e.getElementsByClassName)return Z.apply(i,e.getElementsByClassName(s)),i}if(x.qsa&&(!B||!B.test(t))){if(p=h=O,f=e,m=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=$(t),(h=e.getAttribute("id"))?p=h.replace(we,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+d(c[l]);f=ye.test(t)&&u(e.parentNode)||e,m=c.join(",")}if(m)try{return Z.apply(i,f.querySelectorAll(m)),i}catch(g){}finally{h||e.removeAttribute("id")}}}return E(t.replace(le,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>_.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[O]=!0,t}function r(t){var e=I.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var i=t.split("|"),n=t.length;n--;)_.attrHandle[i[n]]=e}function s(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||K)-(~t.sourceIndex||K);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function l(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function c(t){return n(function(e){return e=+e,n(function(i,n){for(var r,o=t([],i.length,e),s=o.length;s--;)i[r=o[s]]&&(i[r]=!(n[r]=i[r]))})})}function u(t){return t&&typeof t.getElementsByTagName!==Q&&t}function h(){}function d(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function p(t,e,i){var n=e.dir,r=i&&"parentNode"===n,o=z++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||r)return t(e,i,o)}:function(e,i,s){var a,l,c=[H,o];if(s){for(;e=e[n];)if((1===e.nodeType||r)&&t(e,i,s))return!0}else for(;e=e[n];)if(1===e.nodeType||r){if(l=e[O]||(e[O]={}),(a=l[n])&&a[0]===H&&a[1]===o)return c[2]=a[2];if(l[n]=c,c[2]=t(e,i,s))return!0}}}function f(t){return t.length>1?function(e,i,n){for(var r=t.length;r--;)if(!t[r](e,i,n))return!1;return!0}:t[0]}function m(t,i,n){for(var r=0,o=i.length;o>r;r++)e(t,i[r],n);return n}function g(t,e,i,n,r){for(var o,s=[],a=0,l=t.length,c=null!=e;l>a;a++)(o=t[a])&&(!i||i(o,n,r))&&(s.push(o),c&&e.push(a));return s}function v(t,e,i,r,o,s){return r&&!r[O]&&(r=v(r)),o&&!o[O]&&(o=v(o,s)),n(function(n,s,a,l){var c,u,h,d=[],p=[],f=s.length,v=n||m(e||"*",a.nodeType?[a]:a,[]),b=!t||!n&&e?v:g(v,d,t,a,l),y=i?o||(n?t:f||r)?[]:s:b;if(i&&i(b,y,a,l),r)for(c=g(y,p),r(c,[],a,l),u=c.length;u--;)(h=c[u])&&(y[p[u]]=!(b[p[u]]=h));if(n){if(o||t){if(o){for(c=[],u=y.length;u--;)(h=y[u])&&c.push(b[u]=h);o(null,y=[],c,l)}for(u=y.length;u--;)(h=y[u])&&(c=o?ee.call(n,h):d[u])>-1&&(n[c]=!(s[c]=h))}}else y=g(y===s?y.splice(f,y.length):y),o?o(null,s,y,l):Z.apply(s,y)})}function b(t){for(var e,i,n,r=t.length,o=_.relative[t[0].type],s=o||_.relative[" "],a=o?1:0,l=p(function(t){return t===e},s,!0),c=p(function(t){return ee.call(e,t)>-1},s,!0),u=[function(t,i,n){return!o&&(n||i!==A)||((e=i).nodeType?l(t,i,n):c(t,i,n))}];r>a;a++)if(i=_.relative[t[a].type])u=[p(f(u),i)];else{if(i=_.filter[t[a].type].apply(null,t[a].matches),i[O]){for(n=++a;r>n&&!_.relative[t[n].type];n++);return v(a>1&&f(u),a>1&&d(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(le,"$1"),i,n>a&&b(t.slice(a,n)),r>n&&b(t=t.slice(n)),r>n&&d(t))}u.push(i)}return f(u)}function y(t,i){var r=i.length>0,o=t.length>0,s=function(n,s,a,l,c){var u,h,d,p=0,f="0",m=n&&[],v=[],b=A,y=n||o&&_.find.TAG("*",c),w=H+=null==b?1:Math.random()||.1,x=y.length;for(c&&(A=s!==I&&s);f!==x&&null!=(u=y[f]);f++){if(o&&u){for(h=0;d=t[h++];)if(d(u,s,a)){l.push(u);break}c&&(H=w)}r&&((u=!d&&u)&&p--,n&&m.push(u))}if(p+=f,r&&f!==p){for(h=0;d=i[h++];)d(m,v,s,a);if(n){if(p>0)for(;f--;)m[f]||v[f]||(v[f]=X.call(l));v=g(v)}Z.apply(l,v),c&&!n&&v.length>0&&p+i.length>1&&e.uniqueSort(l)}return c&&(H=w,A=b),m};return r?n(s):s}var w,x,_,C,k,$,T,E,A,S,D,N,I,M,P,B,j,R,L,O="sizzle"+-new Date,F=t.document,H=0,z=0,q=i(),U=i(),V=i(),W=function(t,e){return t===e&&(D=!0),0},Q="undefined",K=1<<31,Y={}.hasOwnProperty,G=[],X=G.pop,J=G.push,Z=G.push,te=G.slice,ee=G.indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(this[e]===t)return e;return-1},ie="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=re.replace("w","w#"),se="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ne+"*\\]",ae=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+se+")*)|.*)\\)|)",le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ce=new RegExp("^"+ne+"*,"+ne+"*"),ue=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),he=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(ae),pe=new RegExp("^"+oe+"$"),fe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+se),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+ie+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,be=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,we=/'|\\/g,xe=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),_e=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Z.apply(G=te.call(F.childNodes),F.childNodes),G[F.childNodes.length].nodeType}catch(Ce){Z={apply:G.length?function(t,e){J.apply(t,te.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}x=e.support={},k=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},N=e.setDocument=function(t){var e,i=t?t.ownerDocument||t:F,n=i.defaultView;return i!==I&&9===i.nodeType&&i.documentElement?(I=i,M=i.documentElement,P=!k(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){N()},!1):n.attachEvent&&n.attachEvent("onunload",function(){N()})),x.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),x.getElementsByTagName=r(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),x.getElementsByClassName=ve.test(i.getElementsByClassName)&&r(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),x.getById=r(function(t){return M.appendChild(t).id=O,!i.getElementsByName||!i.getElementsByName(O).length}),x.getById?(_.find.ID=function(t,e){if(typeof e.getElementById!==Q&&P){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},_.filter.ID=function(t){var e=t.replace(xe,_e);return function(t){return t.getAttribute("id")===e}}):(delete _.find.ID,_.filter.ID=function(t){var e=t.replace(xe,_e);return function(t){var i=typeof t.getAttributeNode!==Q&&t.getAttributeNode("id");return i&&i.value===e}}),_.find.TAG=x.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==Q?e.getElementsByTagName(t):void 0}:function(t,e){var i,n=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},_.find.CLASS=x.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==Q&&P?e.getElementsByClassName(t):void 0},j=[],B=[],(x.qsa=ve.test(i.querySelectorAll))&&(r(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&B.push("[*^$]="+ne+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||B.push("\\["+ne+"*(?:value|"+ie+")"),t.querySelectorAll(":checked").length||B.push(":checked")}),r(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&B.push("name"+ne+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||B.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),B.push(",.*:")})),(x.matchesSelector=ve.test(R=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&r(function(t){x.disconnectedMatch=R.call(t,"div"),R.call(t,"[s!='']:x"),j.push("!=",ae)}),B=B.length&&new RegExp(B.join("|")),j=j.length&&new RegExp(j.join("|")),e=ve.test(M.compareDocumentPosition),L=e||ve.test(M.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},W=e?function(t,e){if(t===e)return D=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!x.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===F&&L(F,t)?-1:e===i||e.ownerDocument===F&&L(F,e)?1:S?ee.call(S,t)-ee.call(S,e):0:4&n?-1:1)}:function(t,e){if(t===e)return D=!0,0;var n,r=0,o=t.parentNode,a=e.parentNode,l=[t],c=[e];if(!o||!a)return t===i?-1:e===i?1:o?-1:a?1:S?ee.call(S,t)-ee.call(S,e):0;if(o===a)return s(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;l[r]===c[r];)r++;return r?s(l[r],c[r]):l[r]===F?-1:c[r]===F?1:0},i):I},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==I&&N(t),i=i.replace(he,"='$1']"),!(!x.matchesSelector||!P||j&&j.test(i)||B&&B.test(i)))try{var n=R.call(t,i);if(n||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(r){}return e(i,I,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==I&&N(t),L(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==I&&N(t);var i=_.attrHandle[e.toLowerCase()],n=i&&Y.call(_.attrHandle,e.toLowerCase())?i(t,e,!P):void 0;return void 0!==n?n:x.attributes||!P?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,r=0;if(D=!x.detectDuplicates,S=!x.sortStable&&t.slice(0),t.sort(W),D){for(;e=t[r++];)e===t[r]&&(n=i.push(r));for(;n--;)t.splice(i[n],1)}return S=null,t},C=e.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=C(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=C(e);return i},_=e.selectors={cacheLength:50,createPseudo:n,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(xe,_e),t[3]=(t[3]||t[4]||t[5]||"").replace(xe,_e),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return fe.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&de.test(i)&&(e=$(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(xe,_e).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=q[t+" "];return e||(e=new RegExp("(^|"+ne+")"+t+"("+ne+"|$)"))&&q(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==Q&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(r){var o=e.attr(r,t);return null==o?"!="===i:i?(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o+" ").indexOf(n)>-1:"|="===i?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,i,n,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,i,l){var c,u,h,d,p,f,m=o!==s?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),b=!l&&!a;if(g){if(o){for(;m;){for(h=e;h=h[m];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&b){for(u=g[O]||(g[O]={}),c=u[t]||[],p=c[0]===H&&c[1],d=c[0]===H&&c[2],h=p&&g.childNodes[p];h=++p&&h&&h[m]||(d=p=0)||f.pop();)if(1===h.nodeType&&++d&&h===e){u[t]=[H,p,d];break}}else if(b&&(c=(e[O]||(e[O]={}))[t])&&c[0]===H)d=c[1];else for(;(h=++p&&h&&h[m]||(d=p=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++d||(b&&((h[O]||(h[O]={}))[t]=[H,d]),h!==e)););return d-=r,d===n||d%n===0&&d/n>=0}}},PSEUDO:function(t,i){var r,o=_.pseudos[t]||_.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[O]?o(i):o.length>1?(r=[t,t,"",i],_.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,r=o(t,i),s=r.length;s--;)n=ee.call(t,r[s]),t[n]=!(e[n]=r[s])}):function(t){return o(t,0,r)}):o}},pseudos:{not:n(function(t){var e=[],i=[],r=T(t.replace(le,"$1"));return r[O]?n(function(t,e,i,n){for(var o,s=r(t,null,n,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,n,o){return e[0]=t,r(e,null,o,i),!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return function(e){return(e.textContent||e.innerText||C(e)).indexOf(t)>-1}}),lang:n(function(t){return pe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(xe,_e).toLowerCase(),function(e){var i;do if(i=P?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===M},focus:function(t){return t===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!_.pseudos.empty(t)},header:function(t){return ge.test(t.nodeName)},input:function(t){return me.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,i){return[0>i?i+e:i]}),even:c(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:c(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:c(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:c(function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t})}},_.pseudos.nth=_.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[w]=a(w);for(w in{submit:!0,reset:!0})_.pseudos[w]=l(w);return h.prototype=_.filters=_.pseudos,_.setFilters=new h,$=e.tokenize=function(t,i){var n,r,o,s,a,l,c,u=U[t+" "];if(u)return i?0:u.slice(0);for(a=t,l=[],c=_.preFilter;a;){(!n||(r=ce.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),n=!1,(r=ue.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(le," ")}),a=a.slice(n.length));for(s in _.filter)!(r=fe[s].exec(a))||c[s]&&!(r=c[s](r))||(n=r.shift(),o.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):U(t,l).slice(0)},T=e.compile=function(t,e){var i,n=[],r=[],o=V[t+" "];if(!o){for(e||(e=$(t)),i=e.length;i--;)o=b(e[i]),o[O]?n.push(o):r.push(o);o=V(t,y(r,n)),o.selector=t}return o},E=e.select=function(t,e,i,n){var r,o,s,a,l,c="function"==typeof t&&t,h=!n&&$(t=c.selector||t);if(i=i||[],1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&x.getById&&9===e.nodeType&&P&&_.relative[o[1].type]){if(e=(_.find.ID(s.matches[0].replace(xe,_e),e)||[])[0],!e)return i;c&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=fe.needsContext.test(t)?0:o.length;r--&&(s=o[r],!_.relative[a=s.type]);)if((l=_.find[a])&&(n=l(s.matches[0].replace(xe,_e),ye.test(o[0].type)&&u(e.parentNode)||e))){if(o.splice(r,1),t=n.length&&d(o),!t)return Z.apply(i,n),i;
break}}return(c||T(t,h))(n,e,!P,i,ye.test(t)&&u(e.parentNode)||e),i},x.sortStable=O.split("").sort(W).join("")===O,x.detectDuplicates=!!D,N(),x.sortDetached=r(function(t){return 1&t.compareDocumentPosition(I.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),x.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o(ie,function(t,e,i){var n;return i?void 0:t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);re.find=ce,re.expr=ce.selectors,re.expr[":"]=re.expr.pseudos,re.unique=ce.uniqueSort,re.text=ce.getText,re.isXMLDoc=ce.isXML,re.contains=ce.contains;var ue=re.expr.match.needsContext,he=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,de=/^.[^:#\[\.,]*$/;re.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?re.find.matchesSelector(n,t)?[n]:[]:re.find.matches(t,re.grep(e,function(t){return 1===t.nodeType}))},re.fn.extend({find:function(t){var e,i=[],n=this,r=n.length;if("string"!=typeof t)return this.pushStack(re(t).filter(function(){for(e=0;r>e;e++)if(re.contains(n[e],this))return!0}));for(e=0;r>e;e++)re.find(t,n[e],i);return i=this.pushStack(r>1?re.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&ue.test(t)?re(t):t||[],!1).length}});var pe,fe=t.document,me=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ge=re.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:me.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||pe).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof re?e[0]:e,re.merge(this,re.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:fe,!0)),he.test(i[1])&&re.isPlainObject(e))for(i in e)re.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if(n=fe.getElementById(i[2]),n&&n.parentNode){if(n.id!==i[2])return pe.find(t);this.length=1,this[0]=n}return this.context=fe,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):re.isFunction(t)?"undefined"!=typeof pe.ready?pe.ready(t):t(re):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),re.makeArray(t,this))};ge.prototype=re.fn,pe=re(fe);var ve=/^(?:parents|prev(?:Until|All))/,be={children:!0,contents:!0,next:!0,prev:!0};re.extend({dir:function(t,e,i){for(var n=[],r=t[e];r&&9!==r.nodeType&&(void 0===i||1!==r.nodeType||!re(r).is(i));)1===r.nodeType&&n.push(r),r=r[e];return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),re.fn.extend({has:function(t){var e,i=re(t,this),n=i.length;return this.filter(function(){for(e=0;n>e;e++)if(re.contains(this,i[e]))return!0})},closest:function(t,e){for(var i,n=0,r=this.length,o=[],s=ue.test(t)||"string"!=typeof t?re(t,e||this.context):0;r>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&re.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?re.unique(o):o)},index:function(t){return t?"string"==typeof t?re.inArray(this[0],re(t)):re.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(re.unique(re.merge(this.get(),re(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),re.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return re.dir(t,"parentNode")},parentsUntil:function(t,e,i){return re.dir(t,"parentNode",i)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return re.dir(t,"nextSibling")},prevAll:function(t){return re.dir(t,"previousSibling")},nextUntil:function(t,e,i){return re.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return re.dir(t,"previousSibling",i)},siblings:function(t){return re.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return re.sibling(t.firstChild)},contents:function(t){return re.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:re.merge([],t.childNodes)}},function(t,e){re.fn[t]=function(i,n){var r=re.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=re.filter(n,r)),this.length>1&&(be[t]||(r=re.unique(r)),ve.test(t)&&(r=r.reverse())),this.pushStack(r)}});var ye=/\S+/g,we={};re.Callbacks=function(t){t="string"==typeof t?we[t]||o(t):re.extend({},t);var e,i,n,r,s,a,l=[],c=!t.once&&[],u=function(o){for(i=t.memory&&o,n=!0,s=a||0,a=0,r=l.length,e=!0;l&&r>s;s++)if(l[s].apply(o[0],o[1])===!1&&t.stopOnFalse){i=!1;break}e=!1,l&&(c?c.length&&u(c.shift()):i?l=[]:h.disable())},h={add:function(){if(l){var n=l.length;!function o(e){re.each(e,function(e,i){var n=re.type(i);"function"===n?t.unique&&h.has(i)||l.push(i):i&&i.length&&"string"!==n&&o(i)})}(arguments),e?r=l.length:i&&(a=n,u(i))}return this},remove:function(){return l&&re.each(arguments,function(t,i){for(var n;(n=re.inArray(i,l,n))>-1;)l.splice(n,1),e&&(r>=n&&r--,s>=n&&s--)}),this},has:function(t){return t?re.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],r=0,this},disable:function(){return l=c=i=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,i||h.disable(),this},locked:function(){return!c},fireWith:function(t,i){return!l||n&&!c||(i=i||[],i=[t,i.slice?i.slice():i],e?c.push(i):u(i)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h},re.extend({Deferred:function(t){var e=[["resolve","done",re.Callbacks("once memory"),"resolved"],["reject","fail",re.Callbacks("once memory"),"rejected"],["notify","progress",re.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return re.Deferred(function(i){re.each(e,function(e,o){var s=re.isFunction(t[e])&&t[e];r[o[1]](function(){var t=s&&s.apply(this,arguments);t&&re.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o[0]+"With"](this===n?i.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?re.extend(t,n):n}},r={};return n.pipe=n.then,re.each(e,function(t,o){var s=o[2],a=o[3];n[o[1]]=s.add,a&&s.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?n:this,arguments),this},r[o[0]+"With"]=s.fireWith}),n.promise(r),t&&t.call(r,r),r},when:function(t){var e,i,n,r=0,o=Y.call(arguments),s=o.length,a=1!==s||t&&re.isFunction(t.promise)?s:0,l=1===a?t:re.Deferred(),c=function(t,i,n){return function(r){i[t]=this,n[t]=arguments.length>1?Y.call(arguments):r,n===e?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(s>1)for(e=new Array(s),i=new Array(s),n=new Array(s);s>r;r++)o[r]&&re.isFunction(o[r].promise)?o[r].promise().done(c(r,n,o)).fail(l.reject).progress(c(r,i,e)):--a;return a||l.resolveWith(n,o),l.promise()}});var xe;re.fn.ready=function(t){return re.ready.promise().done(t),this},re.extend({isReady:!1,readyWait:1,holdReady:function(t){t?re.readyWait++:re.ready(!0)},ready:function(t){if(t===!0?!--re.readyWait:!re.isReady){if(!fe.body)return setTimeout(re.ready);re.isReady=!0,t!==!0&&--re.readyWait>0||(xe.resolveWith(fe,[re]),re.fn.triggerHandler&&(re(fe).triggerHandler("ready"),re(fe).off("ready")))}}}),re.ready.promise=function(e){if(!xe)if(xe=re.Deferred(),"complete"===fe.readyState)setTimeout(re.ready);else if(fe.addEventListener)fe.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1);else{fe.attachEvent("onreadystatechange",a),t.attachEvent("onload",a);var i=!1;try{i=null==t.frameElement&&fe.documentElement}catch(n){}i&&i.doScroll&&!function r(){if(!re.isReady){try{i.doScroll("left")}catch(t){return setTimeout(r,50)}s(),re.ready()}}()}return xe.promise(e)};var _e,Ce="undefined";for(_e in re(ie))break;ie.ownLast="0"!==_e,ie.inlineBlockNeedsLayout=!1,re(function(){var t,e,i,n;i=fe.getElementsByTagName("body")[0],i&&i.style&&(e=fe.createElement("div"),n=fe.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),typeof e.style.zoom!==Ce&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ie.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(i.style.zoom=1)),i.removeChild(n))}),function(){var t=fe.createElement("div");if(null==ie.deleteExpando){ie.deleteExpando=!0;try{delete t.test}catch(e){ie.deleteExpando=!1}}t=null}(),re.acceptData=function(t){var e=re.noData[(t.nodeName+" ").toLowerCase()],i=+t.nodeType||1;return 1!==i&&9!==i?!1:!e||e!==!0&&t.getAttribute("classid")===e};var ke=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,$e=/([A-Z])/g;re.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?re.cache[t[re.expando]]:t[re.expando],!!t&&!c(t)},data:function(t,e,i){return u(t,e,i)},removeData:function(t,e){return h(t,e)},_data:function(t,e,i){return u(t,e,i,!0)},_removeData:function(t,e){return h(t,e,!0)}}),re.fn.extend({data:function(t,e){var i,n,r,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(r=re.data(o),1===o.nodeType&&!re._data(o,"parsedAttrs"))){for(i=s.length;i--;)s[i]&&(n=s[i].name,0===n.indexOf("data-")&&(n=re.camelCase(n.slice(5)),l(o,n,r[n])));re._data(o,"parsedAttrs",!0)}return r}return"object"==typeof t?this.each(function(){re.data(this,t)}):arguments.length>1?this.each(function(){re.data(this,t,e)}):o?l(o,t,re.data(o,t)):void 0},removeData:function(t){return this.each(function(){re.removeData(this,t)})}}),re.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=re._data(t,e),i&&(!n||re.isArray(i)?n=re._data(t,e,re.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=re.queue(t,e),n=i.length,r=i.shift(),o=re._queueHooks(t,e),s=function(){re.dequeue(t,e)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete o.stop,r.call(t,s,o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return re._data(t,i)||re._data(t,i,{empty:re.Callbacks("once memory").add(function(){re._removeData(t,e+"queue"),re._removeData(t,i)})})}}),re.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?re.queue(this[0],t):void 0===e?this:this.each(function(){var i=re.queue(this,t,e);re._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&re.dequeue(this,t)})},dequeue:function(t){return this.each(function(){re.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=re.Deferred(),o=this,s=this.length,a=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)i=re._data(o[s],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(e)}});var Te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ee=["Top","Right","Bottom","Left"],Ae=function(t,e){return t=e||t,"none"===re.css(t,"display")||!re.contains(t.ownerDocument,t)},Se=re.access=function(t,e,i,n,r,o,s){var a=0,l=t.length,c=null==i;if("object"===re.type(i)){r=!0;for(a in i)re.access(t,e,a,i[a],!0,o,s)}else if(void 0!==n&&(r=!0,re.isFunction(n)||(s=!0),c&&(s?(e.call(t,n),e=null):(c=e,e=function(t,e,i){return c.call(re(t),i)})),e))for(;l>a;a++)e(t[a],i,s?n:n.call(t[a],a,e(t[a],i)));return r?t:c?e.call(t):l?e(t[0],i):o},De=/^(?:checkbox|radio)$/i;!function(){var t=fe.createElement("input"),e=fe.createElement("div"),i=fe.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ie.leadingWhitespace=3===e.firstChild.nodeType,ie.tbody=!e.getElementsByTagName("tbody").length,ie.htmlSerialize=!!e.getElementsByTagName("link").length,ie.html5Clone="<:nav></:nav>"!==fe.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,i.appendChild(t),ie.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,i.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",ie.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,ie.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){ie.noCloneEvent=!1}),e.cloneNode(!0).click()),null==ie.deleteExpando){ie.deleteExpando=!0;try{delete e.test}catch(n){ie.deleteExpando=!1}}}(),function(){var e,i,n=fe.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})i="on"+e,(ie[e+"Bubbles"]=i in t)||(n.setAttribute(i,"t"),ie[e+"Bubbles"]=n.attributes[i].expando===!1);n=null}();var Ne=/^(?:input|select|textarea)$/i,Ie=/^key/,Me=/^(?:mouse|pointer|contextmenu)|click/,Pe=/^(?:focusinfocus|focusoutblur)$/,Be=/^([^.]*)(?:\.(.+)|)$/;re.event={global:{},add:function(t,e,i,n,r){var o,s,a,l,c,u,h,d,p,f,m,g=re._data(t);if(g){for(i.handler&&(l=i,i=l.handler,r=l.selector),i.guid||(i.guid=re.guid++),(s=g.events)||(s=g.events={}),(u=g.handle)||(u=g.handle=function(t){return typeof re===Ce||t&&re.event.triggered===t.type?void 0:re.event.dispatch.apply(u.elem,arguments)},u.elem=t),e=(e||"").match(ye)||[""],a=e.length;a--;)o=Be.exec(e[a])||[],p=m=o[1],f=(o[2]||"").split(".").sort(),p&&(c=re.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,c=re.event.special[p]||{},h=re.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&re.expr.match.needsContext.test(r),namespace:f.join(".")},l),(d=s[p])||(d=s[p]=[],d.delegateCount=0,c.setup&&c.setup.call(t,n,f,u)!==!1||(t.addEventListener?t.addEventListener(p,u,!1):t.attachEvent&&t.attachEvent("on"+p,u))),c.add&&(c.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,h):d.push(h),re.event.global[p]=!0);t=null}},remove:function(t,e,i,n,r){var o,s,a,l,c,u,h,d,p,f,m,g=re.hasData(t)&&re._data(t);if(g&&(u=g.events)){for(e=(e||"").match(ye)||[""],c=e.length;c--;)if(a=Be.exec(e[c])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(h=re.event.special[p]||{},p=(n?h.delegateType:h.bindType)||p,d=u[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=d.length;o--;)s=d[o],!r&&m!==s.origType||i&&i.guid!==s.guid||a&&!a.test(s.namespace)||n&&n!==s.selector&&("**"!==n||!s.selector)||(d.splice(o,1),s.selector&&d.delegateCount--,h.remove&&h.remove.call(t,s));l&&!d.length&&(h.teardown&&h.teardown.call(t,f,g.handle)!==!1||re.removeEvent(t,p,g.handle),delete u[p])}else for(p in u)re.event.remove(t,p+e[c],i,n,!0);re.isEmptyObject(u)&&(delete g.handle,re._removeData(t,"events"))}},trigger:function(e,i,n,r){var o,s,a,l,c,u,h,d=[n||fe],p=ee.call(e,"type")?e.type:e,f=ee.call(e,"namespace")?e.namespace.split("."):[];if(a=u=n=n||fe,3!==n.nodeType&&8!==n.nodeType&&!Pe.test(p+re.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),s=p.indexOf(":")<0&&"on"+p,e=e[re.expando]?e:new re.Event(p,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:re.makeArray(i,[e]),c=re.event.special[p]||{},r||!c.trigger||c.trigger.apply(n,i)!==!1)){if(!r&&!c.noBubble&&!re.isWindow(n)){for(l=c.delegateType||p,Pe.test(l+p)||(a=a.parentNode);a;a=a.parentNode)d.push(a),u=a;u===(n.ownerDocument||fe)&&d.push(u.defaultView||u.parentWindow||t)}for(h=0;(a=d[h++])&&!e.isPropagationStopped();)e.type=h>1?l:c.bindType||p,o=(re._data(a,"events")||{})[e.type]&&re._data(a,"handle"),o&&o.apply(a,i),o=s&&a[s],o&&o.apply&&re.acceptData(a)&&(e.result=o.apply(a,i),e.result===!1&&e.preventDefault());if(e.type=p,!r&&!e.isDefaultPrevented()&&(!c._default||c._default.apply(d.pop(),i)===!1)&&re.acceptData(n)&&s&&n[p]&&!re.isWindow(n)){u=n[s],u&&(n[s]=null),re.event.triggered=p;try{n[p]()}catch(m){}re.event.triggered=void 0,u&&(n[s]=u)}return e.result}},dispatch:function(t){t=re.event.fix(t);var e,i,n,r,o,s=[],a=Y.call(arguments),l=(re._data(this,"events")||{})[t.type]||[],c=re.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(s=re.event.handlers.call(this,t,l),e=0;(r=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,o=0;(n=r.handlers[o++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(n.namespace))&&(t.handleObj=n,t.data=n.data,i=((re.event.special[n.origType]||{}).handle||n.handler).apply(r.elem,a),void 0!==i&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,r,o,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(r=[],o=0;a>o;o++)n=e[o],i=n.selector+" ",void 0===r[i]&&(r[i]=n.needsContext?re(i,this).index(l)>=0:re.find(i,this,null,[l]).length),r[i]&&r.push(n);r.length&&s.push({elem:l,handlers:r})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},fix:function(t){if(t[re.expando])return t;var e,i,n,r=t.type,o=t,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Me.test(r)?this.mouseHooks:Ie.test(r)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,t=new re.Event(o),e=n.length;e--;)i=n[e],t[i]=o[i];return t.target||(t.target=o.srcElement||fe),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,s.filter?s.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,r,o=e.button,s=e.fromElement;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||fe,r=n.documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&s&&(t.relatedTarget=s===t.target?e.toElement:s),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return re.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return re.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var r=re.extend(new re.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?re.event.trigger(r,null,e):re.event.dispatch.call(e,r),r.isDefaultPrevented()&&i.preventDefault()}},re.removeEvent=fe.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,e,i){var n="on"+e;t.detachEvent&&(typeof t[n]===Ce&&(t[n]=null),t.detachEvent(n,i))},re.Event=function(t,e){return this instanceof re.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?d:p):this.type=t,e&&re.extend(this,e),this.timeStamp=t&&t.timeStamp||re.now(),void(this[re.expando]=!0)):new re.Event(t,e)},re.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=d,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=d,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=d,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},re.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){re.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,r=t.relatedTarget,o=t.handleObj;return(!r||r!==n&&!re.contains(n,r))&&(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}}),ie.submitBubbles||(re.event.special.submit={setup:function(){return re.nodeName(this,"form")?!1:void re.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,i=re.nodeName(e,"input")||re.nodeName(e,"button")?e.form:void 0;i&&!re._data(i,"submitBubbles")&&(re.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),re._data(i,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&re.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return re.nodeName(this,"form")?!1:void re.event.remove(this,"._submit")}}),ie.changeBubbles||(re.event.special.change={setup:function(){return Ne.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(re.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),re.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),re.event.simulate("change",this,t,!0)})),!1):void re.event.add(this,"beforeactivate._change",function(t){var e=t.target;Ne.test(e.nodeName)&&!re._data(e,"changeBubbles")&&(re.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||re.event.simulate("change",this.parentNode,t,!0)}),re._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return re.event.remove(this,"._change"),!Ne.test(this.nodeName)}}),ie.focusinBubbles||re.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){re.event.simulate(e,t.target,re.event.fix(t),!0)};re.event.special[e]={setup:function(){var n=this.ownerDocument||this,r=re._data(n,e);r||n.addEventListener(t,i,!0),re._data(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=re._data(n,e)-1;r?re._data(n,e,r):(n.removeEventListener(t,i,!0),re._removeData(n,e))}}}),re.fn.extend({on:function(t,e,i,n,r){var o,s;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(o in t)this.on(o,e,i,t[o],r);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),n===!1)n=p;else if(!n)return this;return 1===r&&(s=n,n=function(t){return re().off(t),s.apply(this,arguments)},n.guid=s.guid||(s.guid=re.guid++)),this.each(function(){re.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,re(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return(e===!1||"function"==typeof e)&&(i=e,e=void 0),i===!1&&(i=p),this.each(function(){re.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){re.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?re.event.trigger(t,e,i,!0):void 0}});var je="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Re=/ jQuery\d+="(?:null|\d+)"/g,Le=new RegExp("<(?:"+je+")[\\s/>]","i"),Oe=/^\s+/,Fe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,He=/<([\w:]+)/,ze=/<tbody/i,qe=/<|&#?\w+;/,Ue=/<(?:script|style|link)/i,Ve=/checked\s*(?:[^=]|=\s*.checked.)/i,We=/^$|\/(?:java|ecma)script/i,Qe=/^true\/(.*)/,Ke=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ye={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ie.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ge=m(fe),Xe=Ge.appendChild(fe.createElement("div"));Ye.optgroup=Ye.option,Ye.tbody=Ye.tfoot=Ye.colgroup=Ye.caption=Ye.thead,Ye.th=Ye.td,re.extend({clone:function(t,e,i){var n,r,o,s,a,l=re.contains(t.ownerDocument,t);if(ie.html5Clone||re.isXMLDoc(t)||!Le.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(Xe.innerHTML=t.outerHTML,Xe.removeChild(o=Xe.firstChild)),!(ie.noCloneEvent&&ie.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||re.isXMLDoc(t)))for(n=g(o),a=g(t),s=0;null!=(r=a[s]);++s)n[s]&&C(r,n[s]);if(e)if(i)for(a=a||g(t),n=n||g(o),s=0;null!=(r=a[s]);s++)_(r,n[s]);else _(t,o);return n=g(o,"script"),n.length>0&&x(n,!l&&g(t,"script")),n=a=r=null,o},buildFragment:function(t,e,i,n){for(var r,o,s,a,l,c,u,h=t.length,d=m(e),p=[],f=0;h>f;f++)if(o=t[f],o||0===o)if("object"===re.type(o))re.merge(p,o.nodeType?[o]:o);else if(qe.test(o)){for(a=a||d.appendChild(e.createElement("div")),l=(He.exec(o)||["",""])[1].toLowerCase(),u=Ye[l]||Ye._default,a.innerHTML=u[1]+o.replace(Fe,"<$1></$2>")+u[2],r=u[0];r--;)a=a.lastChild;if(!ie.leadingWhitespace&&Oe.test(o)&&p.push(e.createTextNode(Oe.exec(o)[0])),!ie.tbody)for(o="table"!==l||ze.test(o)?"<table>"!==u[1]||ze.test(o)?0:a:a.firstChild,r=o&&o.childNodes.length;r--;)re.nodeName(c=o.childNodes[r],"tbody")&&!c.childNodes.length&&o.removeChild(c);for(re.merge(p,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=d.lastChild}else p.push(e.createTextNode(o));for(a&&d.removeChild(a),ie.appendChecked||re.grep(g(p,"input"),v),f=0;o=p[f++];)if((!n||-1===re.inArray(o,n))&&(s=re.contains(o.ownerDocument,o),a=g(d.appendChild(o),"script"),s&&x(a),i))for(r=0;o=a[r++];)We.test(o.type||"")&&i.push(o);return a=null,d},cleanData:function(t,e){for(var i,n,r,o,s=0,a=re.expando,l=re.cache,c=ie.deleteExpando,u=re.event.special;null!=(i=t[s]);s++)if((e||re.acceptData(i))&&(r=i[a],o=r&&l[r])){if(o.events)for(n in o.events)u[n]?re.event.remove(i,n):re.removeEvent(i,n,o.handle);l[r]&&(delete l[r],c?delete i[a]:typeof i.removeAttribute!==Ce?i.removeAttribute(a):i[a]=null,K.push(r))}}}),re.fn.extend({text:function(t){return Se(this,function(t){return void 0===t?re.text(this):this.empty().append((this[0]&&this[0].ownerDocument||fe).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=b(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=b(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?re.filter(t,this):this,r=0;null!=(i=n[r]);r++)e||1!==i.nodeType||re.cleanData(g(i)),i.parentNode&&(e&&re.contains(i.ownerDocument,i)&&x(g(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&re.cleanData(g(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&re.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return re.clone(this,t,e)})},html:function(t){return Se(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(Re,""):void 0;if(!("string"!=typeof t||Ue.test(t)||!ie.htmlSerialize&&Le.test(t)||!ie.leadingWhitespace&&Oe.test(t)||Ye[(He.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(Fe,"<$1></$2>");try{for(;n>i;i++)e=this[i]||{},1===e.nodeType&&(re.cleanData(g(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,re.cleanData(g(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=G.apply([],t);var i,n,r,o,s,a,l=0,c=this.length,u=this,h=c-1,d=t[0],p=re.isFunction(d);if(p||c>1&&"string"==typeof d&&!ie.checkClone&&Ve.test(d))return this.each(function(i){var n=u.eq(i);p&&(t[0]=d.call(this,i,n.html())),n.domManip(t,e)});if(c&&(a=re.buildFragment(t,this[0].ownerDocument,!1,this),i=a.firstChild,1===a.childNodes.length&&(a=i),i)){for(o=re.map(g(a,"script"),y),r=o.length;c>l;l++)n=a,l!==h&&(n=re.clone(n,!0,!0),r&&re.merge(o,g(n,"script"))),e.call(this[l],n,l);if(r)for(s=o[o.length-1].ownerDocument,re.map(o,w),l=0;r>l;l++)n=o[l],We.test(n.type||"")&&!re._data(n,"globalEval")&&re.contains(s,n)&&(n.src?re._evalUrl&&re._evalUrl(n.src):re.globalEval((n.text||n.textContent||n.innerHTML||"").replace(Ke,"")));a=i=null}return this}}),re.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){re.fn[t]=function(t){for(var i,n=0,r=[],o=re(t),s=o.length-1;s>=n;n++)i=n===s?this:this.clone(!0),re(o[n])[e](i),X.apply(r,i.get());return this.pushStack(r)}});var Je,Ze={};!function(){var t;ie.shrinkWrapBlocks=function(){if(null!=t)return t;t=!1;var e,i,n;return i=fe.getElementsByTagName("body")[0],i&&i.style?(e=fe.createElement("div"),n=fe.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),typeof e.style.zoom!==Ce&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(fe.createElement("div")).style.width="5px",t=3!==e.offsetWidth),i.removeChild(n),t):void 0}}();var ti,ei,ii=/^margin/,ni=new RegExp("^("+Te+")(?!px)[a-z%]+$","i"),ri=/^(top|right|bottom|left)$/;t.getComputedStyle?(ti=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)},ei=function(t,e,i){var n,r,o,s,a=t.style;return i=i||ti(t),s=i?i.getPropertyValue(e)||i[e]:void 0,i&&(""!==s||re.contains(t.ownerDocument,t)||(s=re.style(t,e)),ni.test(s)&&ii.test(e)&&(n=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=r,a.maxWidth=o)),void 0===s?s:s+""}):fe.documentElement.currentStyle&&(ti=function(t){return t.currentStyle},ei=function(t,e,i){var n,r,o,s,a=t.style;return i=i||ti(t),s=i?i[e]:void 0,null==s&&a&&a[e]&&(s=a[e]),ni.test(s)&&!ri.test(e)&&(n=a.left,r=t.runtimeStyle,o=r&&r.left,o&&(r.left=t.currentStyle.left),a.left="fontSize"===e?"1em":s,s=a.pixelLeft+"px",a.left=n,o&&(r.left=o)),void 0===s?s:s+""||"auto"}),function(){function e(){var e,i,n,r;i=fe.getElementsByTagName("body")[0],i&&i.style&&(e=fe.createElement("div"),n=fe.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=s=!1,l=!0,t.getComputedStyle&&(o="1%"!==(t.getComputedStyle(e,null)||{}).top,s="4px"===(t.getComputedStyle(e,null)||{width:"4px"}).width,r=e.appendChild(fe.createElement("div")),r.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",r.style.marginRight=r.style.width="0",e.style.width="1px",l=!parseFloat((t.getComputedStyle(r,null)||{}).marginRight)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=e.getElementsByTagName("td"),r[0].style.cssText="margin:0;border:0;padding:0;display:none",a=0===r[0].offsetHeight,a&&(r[0].style.display="",r[1].style.display="none",a=0===r[0].offsetHeight),i.removeChild(n))}var i,n,r,o,s,a,l;i=fe.createElement("div"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=i.getElementsByTagName("a")[0],n=r&&r.style,n&&(n.cssText="float:left;opacity:.5",ie.opacity="0.5"===n.opacity,ie.cssFloat=!!n.cssFloat,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===i.style.backgroundClip,ie.boxSizing=""===n.boxSizing||""===n.MozBoxSizing||""===n.WebkitBoxSizing,re.extend(ie,{reliableHiddenOffsets:function(){return null==a&&e(),a
},boxSizingReliable:function(){return null==s&&e(),s},pixelPosition:function(){return null==o&&e(),o},reliableMarginRight:function(){return null==l&&e(),l}}))}(),re.swap=function(t,e,i,n){var r,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];r=i.apply(t,n||[]);for(o in e)t.style[o]=s[o];return r};var oi=/alpha\([^)]*\)/i,si=/opacity\s*=\s*([^)]*)/,ai=/^(none|table(?!-c[ea]).+)/,li=new RegExp("^("+Te+")(.*)$","i"),ci=new RegExp("^([+-])=("+Te+")","i"),ui={position:"absolute",visibility:"hidden",display:"block"},hi={letterSpacing:"0",fontWeight:"400"},di=["Webkit","O","Moz","ms"];re.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=ei(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ie.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,s,a=re.camelCase(e),l=t.style;if(e=re.cssProps[a]||(re.cssProps[a]=E(l,a)),s=re.cssHooks[e]||re.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(r=s.get(t,!1,n))?r:l[e];if(o=typeof i,"string"===o&&(r=ci.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(re.css(t,e)),o="number"),null!=i&&i===i&&("number"!==o||re.cssNumber[a]||(i+="px"),ie.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),!(s&&"set"in s&&void 0===(i=s.set(t,i,n)))))try{l[e]=i}catch(c){}}},css:function(t,e,i,n){var r,o,s,a=re.camelCase(e);return e=re.cssProps[a]||(re.cssProps[a]=E(t.style,a)),s=re.cssHooks[e]||re.cssHooks[a],s&&"get"in s&&(o=s.get(t,!0,i)),void 0===o&&(o=ei(t,e,n)),"normal"===o&&e in hi&&(o=hi[e]),""===i||i?(r=parseFloat(o),i===!0||re.isNumeric(r)?r||0:o):o}}),re.each(["height","width"],function(t,e){re.cssHooks[e]={get:function(t,i,n){return i?ai.test(re.css(t,"display"))&&0===t.offsetWidth?re.swap(t,ui,function(){return N(t,e,n)}):N(t,e,n):void 0},set:function(t,i,n){var r=n&&ti(t);return S(t,i,n?D(t,e,n,ie.boxSizing&&"border-box"===re.css(t,"boxSizing",!1,r),r):0)}}}),ie.opacity||(re.cssHooks.opacity={get:function(t,e){return si.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,r=re.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=n&&n.filter||i.filter||"";i.zoom=1,(e>=1||""===e)&&""===re.trim(o.replace(oi,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===e||n&&!n.filter)||(i.filter=oi.test(o)?o.replace(oi,r):o+" "+r)}}),re.cssHooks.marginRight=T(ie.reliableMarginRight,function(t,e){return e?re.swap(t,{display:"inline-block"},ei,[t,"marginRight"]):void 0}),re.each({margin:"",padding:"",border:"Width"},function(t,e){re.cssHooks[t+e]={expand:function(i){for(var n=0,r={},o="string"==typeof i?i.split(" "):[i];4>n;n++)r[t+Ee[n]+e]=o[n]||o[n-2]||o[0];return r}},ii.test(t)||(re.cssHooks[t+e].set=S)}),re.fn.extend({css:function(t,e){return Se(this,function(t,e,i){var n,r,o={},s=0;if(re.isArray(e)){for(n=ti(t),r=e.length;r>s;s++)o[e[s]]=re.css(t,e[s],!1,n);return o}return void 0!==i?re.style(t,e,i):re.css(t,e)},t,e,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ae(this)?re(this).show():re(this).hide()})}}),re.Tween=I,I.prototype={constructor:I,init:function(t,e,i,n,r,o){this.elem=t,this.prop=i,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(re.cssNumber[i]?"":"px")},cur:function(){var t=I.propHooks[this.prop];return t&&t.get?t.get(this):I.propHooks._default.get(this)},run:function(t){var e,i=I.propHooks[this.prop];return this.pos=e=this.options.duration?re.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):I.propHooks._default.set(this),this}},I.prototype.init.prototype=I.prototype,I.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=re.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){re.fx.step[t.prop]?re.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[re.cssProps[t.prop]]||re.cssHooks[t.prop])?re.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},I.propHooks.scrollTop=I.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},re.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},re.fx=I.prototype.init,re.fx.step={};var pi,fi,mi=/^(?:toggle|show|hide)$/,gi=new RegExp("^(?:([+-])=|)("+Te+")([a-z%]*)$","i"),vi=/queueHooks$/,bi=[j],yi={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),r=gi.exec(e),o=r&&r[3]||(re.cssNumber[t]?"":"px"),s=(re.cssNumber[t]||"px"!==o&&+n)&&gi.exec(re.css(i.elem,t)),a=1,l=20;if(s&&s[3]!==o){o=o||s[3],r=r||[],s=+n||1;do a=a||".5",s/=a,re.style(i.elem,t,s+o);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return r&&(s=i.start=+s||+n||0,i.unit=o,i.end=r[1]?s+(r[1]+1)*r[2]:+r[2]),i}]};re.Animation=re.extend(L,{tweener:function(t,e){re.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,r=t.length;r>n;n++)i=t[n],yi[i]=yi[i]||[],yi[i].unshift(e)},prefilter:function(t,e){e?bi.unshift(t):bi.push(t)}}),re.speed=function(t,e,i){var n=t&&"object"==typeof t?re.extend({},t):{complete:i||!i&&e||re.isFunction(t)&&t,duration:t,easing:i&&e||e&&!re.isFunction(e)&&e};return n.duration=re.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in re.fx.speeds?re.fx.speeds[n.duration]:re.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){re.isFunction(n.old)&&n.old.call(this),n.queue&&re.dequeue(this,n.queue)},n},re.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Ae).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var r=re.isEmptyObject(t),o=re.speed(e,i,n),s=function(){var e=L(this,re.extend({},t),o);(r||re._data(this,"finish"))&&e.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=re.timers,s=re._data(this);if(r)s[r]&&s[r].stop&&n(s[r]);else for(r in s)s[r]&&s[r].stop&&vi.test(r)&&n(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(i),e=!1,o.splice(r,1));(e||!i)&&re.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=re._data(this),n=i[t+"queue"],r=i[t+"queueHooks"],o=re.timers,s=n?n.length:0;for(i.finish=!0,re.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;s>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),re.each(["toggle","show","hide"],function(t,e){var i=re.fn[e];re.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(P(e,!0),t,n,r)}}),re.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){re.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),re.timers=[],re.fx.tick=function(){var t,e=re.timers,i=0;for(pi=re.now();i<e.length;i++)t=e[i],t()||e[i]!==t||e.splice(i--,1);e.length||re.fx.stop(),pi=void 0},re.fx.timer=function(t){re.timers.push(t),t()?re.fx.start():re.timers.pop()},re.fx.interval=13,re.fx.start=function(){fi||(fi=setInterval(re.fx.tick,re.fx.interval))},re.fx.stop=function(){clearInterval(fi),fi=null},re.fx.speeds={slow:600,fast:200,_default:400},re.fn.delay=function(t,e){return t=re.fx?re.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},function(){var t,e,i,n,r;e=fe.createElement("div"),e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=e.getElementsByTagName("a")[0],i=fe.createElement("select"),r=i.appendChild(fe.createElement("option")),t=e.getElementsByTagName("input")[0],n.style.cssText="top:1px",ie.getSetAttribute="t"!==e.className,ie.style=/top/.test(n.getAttribute("style")),ie.hrefNormalized="/a"===n.getAttribute("href"),ie.checkOn=!!t.value,ie.optSelected=r.selected,ie.enctype=!!fe.createElement("form").enctype,i.disabled=!0,ie.optDisabled=!r.disabled,t=fe.createElement("input"),t.setAttribute("value",""),ie.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),ie.radioValue="t"===t.value}();var wi=/\r/g;re.fn.extend({val:function(t){var e,i,n,r=this[0];{if(arguments.length)return n=re.isFunction(t),this.each(function(i){var r;1===this.nodeType&&(r=n?t.call(this,i,re(this).val()):t,null==r?r="":"number"==typeof r?r+="":re.isArray(r)&&(r=re.map(r,function(t){return null==t?"":t+""})),e=re.valHooks[this.type]||re.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))});if(r)return e=re.valHooks[r.type]||re.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(wi,""):null==i?"":i)}}}),re.extend({valHooks:{option:{get:function(t){var e=re.find.attr(t,"value");return null!=e?e:re.trim(re.text(t))}},select:{get:function(t){for(var e,i,n=t.options,r=t.selectedIndex,o="select-one"===t.type||0>r,s=o?null:[],a=o?r+1:n.length,l=0>r?a:o?r:0;a>l;l++)if(i=n[l],!(!i.selected&&l!==r||(ie.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&re.nodeName(i.parentNode,"optgroup"))){if(e=re(i).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var i,n,r=t.options,o=re.makeArray(e),s=r.length;s--;)if(n=r[s],re.inArray(re.valHooks.option.get(n),o)>=0)try{n.selected=i=!0}catch(a){n.scrollHeight}else n.selected=!1;return i||(t.selectedIndex=-1),r}}}}),re.each(["radio","checkbox"],function(){re.valHooks[this]={set:function(t,e){return re.isArray(e)?t.checked=re.inArray(re(t).val(),e)>=0:void 0}},ie.checkOn||(re.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var xi,_i,Ci=re.expr.attrHandle,ki=/^(?:checked|selected)$/i,$i=ie.getSetAttribute,Ti=ie.input;re.fn.extend({attr:function(t,e){return Se(this,re.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){re.removeAttr(this,t)})}}),re.extend({attr:function(t,e,i){var n,r,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===Ce?re.prop(t,e,i):(1===o&&re.isXMLDoc(t)||(e=e.toLowerCase(),n=re.attrHooks[e]||(re.expr.match.bool.test(e)?_i:xi)),void 0===i?n&&"get"in n&&null!==(r=n.get(t,e))?r:(r=re.find.attr(t,e),null==r?void 0:r):null!==i?n&&"set"in n&&void 0!==(r=n.set(t,i,e))?r:(t.setAttribute(e,i+""),i):void re.removeAttr(t,e))},removeAttr:function(t,e){var i,n,r=0,o=e&&e.match(ye);if(o&&1===t.nodeType)for(;i=o[r++];)n=re.propFix[i]||i,re.expr.match.bool.test(i)?Ti&&$i||!ki.test(i)?t[n]=!1:t[re.camelCase("default-"+i)]=t[n]=!1:re.attr(t,i,""),t.removeAttribute($i?i:n)},attrHooks:{type:{set:function(t,e){if(!ie.radioValue&&"radio"===e&&re.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),_i={set:function(t,e,i){return e===!1?re.removeAttr(t,i):Ti&&$i||!ki.test(i)?t.setAttribute(!$i&&re.propFix[i]||i,i):t[re.camelCase("default-"+i)]=t[i]=!0,i}},re.each(re.expr.match.bool.source.match(/\w+/g),function(t,e){var i=Ci[e]||re.find.attr;Ci[e]=Ti&&$i||!ki.test(e)?function(t,e,n){var r,o;return n||(o=Ci[e],Ci[e]=r,r=null!=i(t,e,n)?e.toLowerCase():null,Ci[e]=o),r}:function(t,e,i){return i?void 0:t[re.camelCase("default-"+e)]?e.toLowerCase():null}}),Ti&&$i||(re.attrHooks.value={set:function(t,e,i){return re.nodeName(t,"input")?void(t.defaultValue=e):xi&&xi.set(t,e,i)}}),$i||(xi={set:function(t,e,i){var n=t.getAttributeNode(i);return n||t.setAttributeNode(n=t.ownerDocument.createAttribute(i)),n.value=e+="","value"===i||e===t.getAttribute(i)?e:void 0}},Ci.id=Ci.name=Ci.coords=function(t,e,i){var n;return i?void 0:(n=t.getAttributeNode(e))&&""!==n.value?n.value:null},re.valHooks.button={get:function(t,e){var i=t.getAttributeNode(e);return i&&i.specified?i.value:void 0},set:xi.set},re.attrHooks.contenteditable={set:function(t,e,i){xi.set(t,""===e?!1:e,i)}},re.each(["width","height"],function(t,e){re.attrHooks[e]={set:function(t,i){return""===i?(t.setAttribute(e,"auto"),i):void 0}}})),ie.style||(re.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var Ei=/^(?:input|select|textarea|button|object)$/i,Ai=/^(?:a|area)$/i;re.fn.extend({prop:function(t,e){return Se(this,re.prop,t,e,arguments.length>1)},removeProp:function(t){return t=re.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),re.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,i){var n,r,o,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return o=1!==s||!re.isXMLDoc(t),o&&(e=re.propFix[e]||e,r=re.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=re.find.attr(t,"tabindex");return e?parseInt(e,10):Ei.test(t.nodeName)||Ai.test(t.nodeName)&&t.href?0:-1}}}}),ie.hrefNormalized||re.each(["href","src"],function(t,e){re.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ie.optSelected||(re.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),re.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){re.propFix[this.toLowerCase()]=this}),ie.enctype||(re.propFix.enctype="encoding");var Si=/[\t\r\n\f]/g;re.fn.extend({addClass:function(t){var e,i,n,r,o,s,a=0,l=this.length,c="string"==typeof t&&t;if(re.isFunction(t))return this.each(function(e){re(this).addClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(ye)||[];l>a;a++)if(i=this[a],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Si," "):" ")){for(o=0;r=e[o++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");s=re.trim(n),i.className!==s&&(i.className=s)}return this},removeClass:function(t){var e,i,n,r,o,s,a=0,l=this.length,c=0===arguments.length||"string"==typeof t&&t;if(re.isFunction(t))return this.each(function(e){re(this).removeClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(ye)||[];l>a;a++)if(i=this[a],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Si," "):"")){for(o=0;r=e[o++];)for(;n.indexOf(" "+r+" ")>=0;)n=n.replace(" "+r+" "," ");s=t?re.trim(n):"",i.className!==s&&(i.className=s)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):this.each(re.isFunction(t)?function(i){re(this).toggleClass(t.call(this,i,this.className,e),e)}:function(){if("string"===i)for(var e,n=0,r=re(this),o=t.match(ye)||[];e=o[n++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else(i===Ce||"boolean"===i)&&(this.className&&re._data(this,"__className__",this.className),this.className=this.className||t===!1?"":re._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Si," ").indexOf(e)>=0)return!0;return!1}}),re.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){re.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),re.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var Di=re.now(),Ni=/\?/,Ii=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;re.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var i,n=null,r=re.trim(e+"");return r&&!re.trim(r.replace(Ii,function(t,e,r,o){return i&&e&&(n=0),0===n?t:(i=r||e,n+=!o-!r,"")}))?Function("return "+r)():re.error("Invalid JSON: "+e)},re.parseXML=function(e){var i,n;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(n=new DOMParser,i=n.parseFromString(e,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(e))}catch(r){i=void 0}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||re.error("Invalid XML: "+e),i};var Mi,Pi,Bi=/#.*$/,ji=/([?&])_=[^&]*/,Ri=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Li=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Oi=/^(?:GET|HEAD)$/,Fi=/^\/\//,Hi=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,zi={},qi={},Ui="*/".concat("*");try{Pi=location.href}catch(Vi){Pi=fe.createElement("a"),Pi.href="",Pi=Pi.href}Mi=Hi.exec(Pi.toLowerCase())||[],re.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Pi,type:"GET",isLocal:Li.test(Mi[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ui,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":re.parseJSON,"text xml":re.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?H(H(t,re.ajaxSettings),e):H(re.ajaxSettings,t)},ajaxPrefilter:O(zi),ajaxTransport:O(qi),ajax:function(t,e){function i(t,e,i,n){var r,u,v,b,w,_=e;2!==y&&(y=2,a&&clearTimeout(a),c=void 0,s=n||"",x.readyState=t>0?4:0,r=t>=200&&300>t||304===t,i&&(b=z(h,x,i)),b=q(h,b,x,r),r?(h.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(re.lastModified[o]=w),w=x.getResponseHeader("etag"),w&&(re.etag[o]=w)),204===t||"HEAD"===h.type?_="nocontent":304===t?_="notmodified":(_=b.state,u=b.data,v=b.error,r=!v)):(v=_,(t||!_)&&(_="error",0>t&&(t=0))),x.status=t,x.statusText=(e||_)+"",r?f.resolveWith(d,[u,_,x]):f.rejectWith(d,[x,_,v]),x.statusCode(g),g=void 0,l&&p.trigger(r?"ajaxSuccess":"ajaxError",[x,h,r?u:v]),m.fireWith(d,[x,_]),l&&(p.trigger("ajaxComplete",[x,h]),--re.active||re.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r,o,s,a,l,c,u,h=re.ajaxSetup({},e),d=h.context||h,p=h.context&&(d.nodeType||d.jquery)?re(d):re.event,f=re.Deferred(),m=re.Callbacks("once memory"),g=h.statusCode||{},v={},b={},y=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===y){if(!u)for(u={};e=Ri.exec(s);)u[e[1].toLowerCase()]=e[2];e=u[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===y?s:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return y||(t=b[i]=b[i]||t,v[t]=e),this},overrideMimeType:function(t){return y||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>y)for(e in t)g[e]=[g[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return c&&c.abort(e),i(0,e),this}};if(f.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,h.url=((t||h.url||Pi)+"").replace(Bi,"").replace(Fi,Mi[1]+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=re.trim(h.dataType||"*").toLowerCase().match(ye)||[""],null==h.crossDomain&&(n=Hi.exec(h.url.toLowerCase()),h.crossDomain=!(!n||n[1]===Mi[1]&&n[2]===Mi[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Mi[3]||("http:"===Mi[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=re.param(h.data,h.traditional)),F(zi,h,e,x),2===y)return x;l=h.global,l&&0===re.active++&&re.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Oi.test(h.type),o=h.url,h.hasContent||(h.data&&(o=h.url+=(Ni.test(o)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=ji.test(o)?o.replace(ji,"$1_="+Di++):o+(Ni.test(o)?"&":"?")+"_="+Di++)),h.ifModified&&(re.lastModified[o]&&x.setRequestHeader("If-Modified-Since",re.lastModified[o]),re.etag[o]&&x.setRequestHeader("If-None-Match",re.etag[o])),(h.data&&h.hasContent&&h.contentType!==!1||e.contentType)&&x.setRequestHeader("Content-Type",h.contentType),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Ui+"; q=0.01":""):h.accepts["*"]);for(r in h.headers)x.setRequestHeader(r,h.headers[r]);if(h.beforeSend&&(h.beforeSend.call(d,x,h)===!1||2===y))return x.abort();w="abort";for(r in{success:1,error:1,complete:1})x[r](h[r]);if(c=F(qi,h,e,x)){x.readyState=1,l&&p.trigger("ajaxSend",[x,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){x.abort("timeout")},h.timeout));try{y=1,c.send(v,i)}catch(_){if(!(2>y))throw _;i(-1,_)}}else i(-1,"No Transport");return x},getJSON:function(t,e,i){return re.get(t,e,i,"json")},getScript:function(t,e){return re.get(t,void 0,e,"script")}}),re.each(["get","post"],function(t,e){re[e]=function(t,i,n,r){return re.isFunction(i)&&(r=r||n,n=i,i=void 0),re.ajax({url:t,type:e,dataType:r,data:i,success:n})}}),re.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){re.fn[e]=function(t){return this.on(e,t)}}),re._evalUrl=function(t){return re.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},re.fn.extend({wrapAll:function(t){if(re.isFunction(t))return this.each(function(e){re(this).wrapAll(t.call(this,e))});if(this[0]){var e=re(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return this.each(re.isFunction(t)?function(e){re(this).wrapInner(t.call(this,e))}:function(){var e=re(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=re.isFunction(t);return this.each(function(i){re(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){re.nodeName(this,"body")||re(this).replaceWith(this.childNodes)}).end()}}),re.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!ie.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||re.css(t,"display"))},re.expr.filters.visible=function(t){return!re.expr.filters.hidden(t)};var Wi=/%20/g,Qi=/\[\]$/,Ki=/\r?\n/g,Yi=/^(?:submit|button|image|reset|file)$/i,Gi=/^(?:input|select|textarea|keygen)/i;re.param=function(t,e){var i,n=[],r=function(t,e){e=re.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=re.ajaxSettings&&re.ajaxSettings.traditional),re.isArray(t)||t.jquery&&!re.isPlainObject(t))re.each(t,function(){r(this.name,this.value)});else for(i in t)U(i,t[i],e,r);return n.join("&").replace(Wi,"+")},re.fn.extend({serialize:function(){return re.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=re.prop(this,"elements");return t?re.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!re(this).is(":disabled")&&Gi.test(this.nodeName)&&!Yi.test(t)&&(this.checked||!De.test(t))}).map(function(t,e){var i=re(this).val();return null==i?null:re.isArray(i)?re.map(i,function(t){return{name:e.name,value:t.replace(Ki,"\r\n")}}):{name:e.name,value:i.replace(Ki,"\r\n")}}).get()}}),re.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&V()||W()}:V;var Xi=0,Ji={},Zi=re.ajaxSettings.xhr();t.ActiveXObject&&re(t).on("unload",function(){for(var t in Ji)Ji[t](void 0,!0)}),ie.cors=!!Zi&&"withCredentials"in Zi,Zi=ie.ajax=!!Zi,Zi&&re.ajaxTransport(function(t){if(!t.crossDomain||ie.cors){var e;return{send:function(i,n){var r,o=t.xhr(),s=++Xi;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)o[r]=t.xhrFields[r];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(r in i)void 0!==i[r]&&o.setRequestHeader(r,i[r]+"");o.send(t.hasContent&&t.data||null),e=function(i,r){var a,l,c;if(e&&(r||4===o.readyState))if(delete Ji[s],e=void 0,o.onreadystatechange=re.noop,r)4!==o.readyState&&o.abort();else{c={},a=o.status,"string"==typeof o.responseText&&(c.text=o.responseText);try{l=o.statusText}catch(u){l=""}a||!t.isLocal||t.crossDomain?1223===a&&(a=204):a=c.text?200:404}c&&n(a,l,c,o.getAllResponseHeaders())},t.async?4===o.readyState?setTimeout(e):o.onreadystatechange=Ji[s]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),re.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return re.globalEval(t),t}}}),re.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),re.ajaxTransport("script",function(t){if(t.crossDomain){var e,i=fe.head||re("head")[0]||fe.documentElement;return{send:function(n,r){e=fe.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,i){(i||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,i||r(200,"success"))},i.insertBefore(e,i.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var tn=[],en=/(=)\?(?=&|$)|\?\?/;re.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=tn.pop()||re.expando+"_"+Di++;return this[t]=!0,t}}),re.ajaxPrefilter("json jsonp",function(e,i,n){var r,o,s,a=e.jsonp!==!1&&(en.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&en.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=re.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(en,"$1"+r):e.jsonp!==!1&&(e.url+=(Ni.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||re.error(r+" was not called"),s[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){s=arguments},n.always(function(){t[r]=o,e[r]&&(e.jsonpCallback=i.jsonpCallback,tn.push(r)),s&&re.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),re.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||fe;var n=he.exec(t),r=!i&&[];return n?[e.createElement(n[1])]:(n=re.buildFragment([t],e,r),r&&r.length&&re(r).remove(),re.merge([],n.childNodes))};var nn=re.fn.load;re.fn.load=function(t,e,i){if("string"!=typeof t&&nn)return nn.apply(this,arguments);var n,r,o,s=this,a=t.indexOf(" ");return a>=0&&(n=re.trim(t.slice(a,t.length)),t=t.slice(0,a)),re.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(o="POST"),s.length>0&&re.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){r=arguments,s.html(n?re("<div>").append(re.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){s.each(i,r||[t.responseText,e,t])}),this},re.expr.filters.animated=function(t){return re.grep(re.timers,function(e){return t===e.elem}).length};var rn=t.document.documentElement;re.offset={setOffset:function(t,e,i){var n,r,o,s,a,l,c,u=re.css(t,"position"),h=re(t),d={};"static"===u&&(t.style.position="relative"),a=h.offset(),o=re.css(t,"top"),l=re.css(t,"left"),c=("absolute"===u||"fixed"===u)&&re.inArray("auto",[o,l])>-1,c?(n=h.position(),s=n.top,r=n.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),re.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(d.top=e.top-a.top+s),null!=e.left&&(d.left=e.left-a.left+r),"using"in e?e.using.call(t,d):h.css(d)}},re.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){re.offset.setOffset(this,t,e)});var e,i,n={top:0,left:0},r=this[0],o=r&&r.ownerDocument;if(o)return e=o.documentElement,re.contains(e,r)?(typeof r.getBoundingClientRect!==Ce&&(n=r.getBoundingClientRect()),i=Q(o),{top:n.top+(i.pageYOffset||e.scrollTop)-(e.clientTop||0),left:n.left+(i.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):n},position:function(){if(this[0]){var t,e,i={top:0,left:0},n=this[0];return"fixed"===re.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),re.nodeName(t[0],"html")||(i=t.offset()),i.top+=re.css(t[0],"borderTopWidth",!0),i.left+=re.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-re.css(n,"marginTop",!0),left:e.left-i.left-re.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||rn;t&&!re.nodeName(t,"html")&&"static"===re.css(t,"position");)t=t.offsetParent;return t||rn})}}),re.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i=/Y/.test(e);re.fn[t]=function(n){return Se(this,function(t,n,r){var o=Q(t);return void 0===r?o?e in o?o[e]:o.document.documentElement[n]:t[n]:void(o?o.scrollTo(i?re(o).scrollLeft():r,i?r:re(o).scrollTop()):t[n]=r)},t,n,arguments.length,null)}}),re.each(["top","left"],function(t,e){re.cssHooks[e]=T(ie.pixelPosition,function(t,i){return i?(i=ei(t,e),ni.test(i)?re(t).position()[e]+"px":i):void 0})}),re.each({Height:"height",Width:"width"},function(t,e){re.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){re.fn[n]=function(n,r){var o=arguments.length&&(i||"boolean"!=typeof n),s=i||(n===!0||r===!0?"margin":"border");return Se(this,function(e,i,n){var r;return re.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===n?re.css(e,i,s):re.style(e,i,n,s)},e,o?n:void 0,o,null)}})}),re.fn.size=function(){return this.length},re.fn.andSelf=re.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return re});var on=t.jQuery,sn=t.$;return re.noConflict=function(e){return t.$===re&&(t.$=sn),e&&t.jQuery===re&&(t.jQuery=on),re},typeof e===Ce&&(t.jQuery=t.$=re),re}),function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var i,n=t(document);t.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote], button[data-confirm]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(e){var i=t('meta[name="csrf-token"]').attr("content");i&&e.setRequestHeader("X-CSRF-Token",i)},refreshCSRFTokens:function(){var e=t("meta[name=csrf-token]").attr("content"),i=t("meta[name=csrf-param]").attr("content");t('form input[name="'+i+'"]').val(e)},fire:function(e,i,n){var r=t.Event(i);return e.trigger(r,n),r.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(n){var r,o,s,a,l,c,u,h;if(i.fire(n,"ajax:before")){if(a=n.data("cross-domain"),l=a===e?null:a,c=n.data("with-credentials")||null,u=n.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,n.is("form")){r=n.attr("method"),o=n.attr("action"),s=n.serializeArray();var d=n.data("ujs:submit-button");d&&(s.push(d),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(r=n.data("method"),o=n.data("url"),s=n.serialize(),n.data("params")&&(s=s+"&"+n.data("params"))):n.is(i.buttonClickSelector)?(r=n.data("method")||"get",o=n.data("url"),s=n.serialize(),n.data("params")&&(s=s+"&"+n.data("params"))):(r=n.data("method"),o=i.href(n),s=n.data("params")||null);return h={type:r||"GET",data:s,dataType:u,beforeSend:function(t,r){return r.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),i.fire(n,"ajax:beforeSend",[t,r])?void n.trigger("ajax:send",t):!1
},success:function(t,e,i){n.trigger("ajax:success",[t,e,i])},complete:function(t,e){n.trigger("ajax:complete",[t,e])},error:function(t,e,i){n.trigger("ajax:error",[t,e,i])},crossDomain:l},c&&(h.xhrFields={withCredentials:c}),o&&(h.url=o),i.ajax(h)}return!1},handleMethod:function(n){var r=i.href(n),o=n.data("method"),s=n.attr("target"),a=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),c=t('<form method="post" action="'+r+'"></form>'),u='<input name="_method" value="'+o+'" type="hidden" />';l!==e&&a!==e&&(u+='<input name="'+l+'" value="'+a+'" type="hidden" />'),s&&c.attr("target",s),c.hide().append(u).appendTo("body"),c.submit()},formElements:function(e,i){return e.is("form")?t(e[0].elements).filter(i):e.find(i)},disableFormElements:function(e){i.formElements(e,i.disableSelector).each(function(){i.disableFormElement(t(this))})},disableFormElement:function(t){var i,n;i=t.is("button")?"html":"val",n=t.data("disable-with"),t.data("ujs:enable-with",t[i]()),n!==e&&t[i](n),t.prop("disabled",!0)},enableFormElements:function(e){i.formElements(e,i.enableSelector).each(function(){i.enableFormElement(t(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)},allowAction:function(t){var e,n=t.data("confirm"),r=!1;return n?(i.fire(t,"confirm")&&(r=i.confirm(n),e=i.fire(t,"confirm:complete",[r])),r&&e):!0},blankInputs:function(e,i,n){var r,o,s=t(),a=i||"input,textarea",l=e.find(a);return l.each(function(){if(r=t(this),o=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):r.val(),!o==!n){if(r.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+r.attr("name")+'"]').length)return!0;s=s.add(r)}}),s.length?s:!1},nonBlankInputs:function(t,e){return i.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var n=t.data("disable-with");t.data("ujs:enable-with",t.html()),n!==e&&t.html(n),t.bind("click.railsDisable",function(t){return i.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},i.fire(n,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,n){t.crossDomain||i.CSRFProtection(n)}),n.delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(t(this))}),n.delegate(i.buttonDisableSelector,"ajax:complete",function(){i.enableFormElement(t(this))}),n.delegate(i.linkClickSelector,"click.rails",function(n){var r=t(this),o=r.data("method"),s=r.data("params"),a=n.metaKey||n.ctrlKey;if(!i.allowAction(r))return i.stopEverything(n);if(!a&&r.is(i.linkDisableSelector)&&i.disableElement(r),r.data("remote")!==e){if(a&&(!o||"GET"===o)&&!s)return!0;var l=i.handleRemote(r);return l===!1?i.enableElement(r):l.error(function(){i.enableElement(r)}),!1}return r.data("method")?(i.handleMethod(r),!1):void 0}),n.delegate(i.buttonClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);n.is(i.buttonDisableSelector)&&i.disableFormElement(n);var r=i.handleRemote(n);return r===!1?i.enableFormElement(n):r.error(function(){i.enableFormElement(n)}),!1}),n.delegate(i.inputChangeSelector,"change.rails",function(e){var n=t(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(e)}),n.delegate(i.formSubmitSelector,"submit.rails",function(n){var r,o,s=t(this),a=s.data("remote")!==e;if(!i.allowAction(s))return i.stopEverything(n);if(s.attr("novalidate")==e&&(r=i.blankInputs(s,i.requiredInputSelector),r&&i.fire(s,"ajax:aborted:required",[r])))return i.stopEverything(n);if(a){if(o=i.nonBlankInputs(s,i.fileInputSelector)){setTimeout(function(){i.disableFormElements(s)},13);var l=i.fire(s,"ajax:aborted:file",[o]);return l||setTimeout(function(){i.enableFormElements(s)},13),l}return i.handleRemote(s),!1}setTimeout(function(){i.disableFormElements(s)},13)}),n.delegate(i.formInputClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);var r=n.attr("name"),o=r?{name:r,value:n.val()}:null;n.closest("form").data("ujs:submit-button",o)}),n.delegate(i.formSubmitSelector,"ajax:send.rails",function(e){this==e.target&&i.disableFormElements(t(this))}),n.delegate(i.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&i.enableFormElements(t(this))}),t(function(){i.refreshCSRFTokens()}))}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.affix"),o="object"==typeof e&&e;r||n.data("bs.affix",r=new i(this,o)),"string"==typeof e&&r[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.2.0",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=t(document).height(),n=this.$target.scrollTop(),r=this.$element.offset(),o=this.options.offset,s=o.top,a=o.bottom;"object"!=typeof o&&(a=s=o),"function"==typeof s&&(s=o.top(this.$element)),"function"==typeof a&&(a=o.bottom(this.$element));var l=null!=this.unpin&&n+this.unpin<=r.top?!1:null!=a&&r.top+this.$element.height()>=e-a?"bottom":null!=s&&s>=n?"top":!1;if(this.affixed!==l){null!=this.unpin&&this.$element.css("top","");var c="affix"+(l?"-"+l:""),u=t.Event(c+".bs.affix");this.$element.trigger(u),u.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(c).trigger(t.Event(c.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:e-this.$element.height()-a}))}}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.alert");r||i.data("bs.alert",r=new n(this)),"string"==typeof e&&r[e].call(i)})}var i='[data-dismiss="alert"]',n=function(e){t(e).on("click",i,this.close)};n.VERSION="3.2.0",n.prototype.close=function(e){function i(){o.detach().trigger("closed.bs.alert").remove()}var n=t(this),r=n.attr("data-target");r||(r=n.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var o=t(r);e&&e.preventDefault(),o.length||(o=n.hasClass("alert")?n:n.parent()),o.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",i).emulateTransitionEnd(150):i())};var r=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=r,this},t(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.button"),o="object"==typeof e&&e;r||n.data("bs.button",r=new i(this,o)),"toggle"==e?r.toggle():e&&r.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.2.0",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,r=n.is("input")?"val":"html",o=n.data();e+="Text",null==o.resetText&&n.data("resetText",n[r]()),n[r](null==o[e]?this.options[e]:o[e]),setTimeout(t.proxy(function(){"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}t&&this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target);n.hasClass("btn")||(n=n.closest(".btn")),e.call(n,"toggle"),i.preventDefault()})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.collapse"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);!r&&o.toggle&&"show"==e&&(e=!e),r||n.data("bs.collapse",r=new i(this,o)),"string"==typeof e&&r[e]()})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};i.VERSION="3.2.0",i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var i=t.Event("show.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var r=n.data("bs.collapse");if(r&&r.transitioning)return;e.call(n,"hide"),r||n.data("bs.collapse",null)}var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return s.call(this);var a=t.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(350)[o](this.$element[0][a])}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(n,this)).emulateTransitionEnd(350):n.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=t.fn.collapse;t.fn.collapse=e,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var n,r=t(this),o=r.attr("data-target")||i.preventDefault()||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),s=t(o),a=s.data("bs.collapse"),l=a?"toggle":r.data(),c=r.attr("data-parent"),u=c&&t(c);a&&a.transitioning||(u&&u.find('[data-toggle="collapse"][data-parent="'+c+'"]').not(r).addClass("collapsed"),r[s.hasClass("in")?"addClass":"removeClass"]("collapsed")),e.call(s,l)})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(r).remove(),t(o).each(function(){var n=i(t(this)),r={relatedTarget:this};n.hasClass("open")&&(n.trigger(e=t.Event("hide.bs.dropdown",r)),e.isDefaultPrevented()||n.removeClass("open").trigger("hidden.bs.dropdown",r))}))}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new s(this)),"string"==typeof e&&n[e].call(i)})}var r=".dropdown-backdrop",o='[data-toggle="dropdown"]',s=function(e){t(e).on("click.bs.dropdown",this.toggle)};s.VERSION="3.2.0",s.prototype.toggle=function(n){var r=t(this);if(!r.is(".disabled, :disabled")){var o=i(r),s=o.hasClass("open");if(e(),!s){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var a={relatedTarget:this};if(o.trigger(n=t.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;r.trigger("focus"),o.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},s.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var n=t(this);if(e.preventDefault(),e.stopPropagation(),!n.is(".disabled, :disabled")){var r=i(n),s=r.hasClass("open");if(!s||s&&27==e.keyCode)return 27==e.which&&r.find(o).trigger("focus"),n.trigger("click");var a=" li:not(.divider):visible a",l=r.find('[role="menu"]'+a+', [role="listbox"]'+a);if(l.length){var c=l.index(l.filter(":focus"));38==e.keyCode&&c>0&&c--,40==e.keyCode&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,s.prototype.toggle).on("keydown.bs.dropdown.data-api",o+', [role="menu"], [role="listbox"]',s.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.tab");r||n.data("bs.tab",r=new i(this)),"string"==typeof e&&r[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.2.0",i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var r=i.find(".active:last a")[0],o=t.Event("show.bs.tab",{relatedTarget:r});if(e.trigger(o),!o.isDefaultPrevented()){var s=t(n);this.activate(e.closest("li"),i),this.activate(s,s.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:r})})}}},i.prototype.activate=function(e,i,n){function r(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),n&&n()}var o=i.find("> .active"),s=n&&t.support.transition&&o.hasClass("fade");s?o.one("bsTransitionEnd",r).emulateTransitionEnd(150):r(),o.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this},t(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(i){i.preventDefault(),e.call(t(this),"show")})}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var r=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(r,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(i,n){var r=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(i).is("body")?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",r),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),r=n.data("bs.scrollspy"),o="object"==typeof i&&i;r||n.data("bs.scrollspy",r=new e(this,o)),"string"==typeof i&&r[i]()})}e.VERSION="3.2.0",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e="offset",i=0;t.isWindow(this.$scrollElement[0])||(e="position",i=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var n=this;this.$body.find(this.selector).map(function(){var n=t(this),r=n.data("target")||n.attr("href"),o=/^#./.test(r)&&t(r);return o&&o.length&&o.is(":visible")&&[[o[e]().top+i,r]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),r=this.offsets,o=this.targets,s=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return s!=(t=o[o.length-1])&&this.activate(t);if(s&&e<=r[0])return s!=(t=o[0])&&this.activate(t);for(t=r.length;t--;)s!=o[t]&&e>=r[t]&&(!r[t+1]||e<=r[t+1])&&this.activate(o[t])},e.prototype.activate=function(e){this.activeTarget=e,t(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e,n){return this.each(function(){var r=t(this),o=r.data("bs.modal"),s=t.extend({},i.DEFAULTS,r.data(),"object"==typeof e&&e);o||r.data("bs.modal",o=new i(this,s)),"string"==typeof e?o[e](n):s.show&&o.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.2.0",i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var i=this,n=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var n=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),n&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});n?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(300):i.$element.trigger("focus").trigger(r)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var i=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;r?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(150):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(150):o()}else e&&e()},i.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),r=n.attr("href"),o=t(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(r)&&r},o.data(),n.data());n.is("a")&&i.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(o,s,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.tooltip"),o="object"==typeof e&&e;(r||"destroy"!=e)&&(r||n.data("bs.tooltip",r=new i(this,o)),"string"==typeof e&&r[e]())})}var i=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};i.VERSION="3.2.0",i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var r=this.options.trigger.split(" "),o=r.length;o--;){var s=r[o];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show()},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(document.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var n=this,r=this.tip(),o=this.getUID(this.type);this.setContent(),r.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&r.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,l=a.test(s);l&&(s=s.replace(a,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var c=this.getPosition(),u=r[0].offsetWidth,h=r[0].offsetHeight;if(l){var d=s,p=this.$element.parent(),f=this.getPosition(p);s="bottom"==s&&c.top+c.height+h-f.scroll>f.height?"top":"top"==s&&c.top-f.scroll-h<0?"bottom":"right"==s&&c.right+u>f.width?"left":"left"==s&&c.left-u<f.left?"right":s,r.removeClass(d).addClass(s)}var m=this.getCalculatedOffset(s,c,u,h);this.applyPlacement(m,s);var g=function(){n.$element.trigger("shown.bs."+n.type),n.hoverState=null};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",g).emulateTransitionEnd(150):g()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),r=n[0].offsetWidth,o=n[0].offsetHeight,s=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),e.top=e.top+s,e.left=e.left+a,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=o&&(e.top=e.top+o-c);var u=this.getViewportAdjustedDelta(i,e,l,c);u.left?e.left+=u.left:e.top+=u.top;var h=u.left?2*u.left-r+l:2*u.top-o+c,d=u.left?"left":"top",p=u.left?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(h,n[0][p],d)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i,t?50*(1-t/e)+"%":"")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(){function e(){"in"!=i.hoverState&&n.detach(),i.$element.trigger("hidden.bs."+i.type)}var i=this,n=this.tip(),r=t.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(r),r.isDefaultPrevented()?void 0:(n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",e).emulateTransitionEnd(150):e(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName;return t.extend({},"function"==typeof i.getBoundingClientRect?i.getBoundingClientRect():null,{scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop(),width:n?t(window).width():e.outerWidth(),height:n?t(window).height():e.outerHeight()},n?{top:0,left:0}:e.offset())},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-o-s.scroll,l=e.top+o-s.scroll+n;a<s.top?r.top=s.top-a:l>s.top+s.height&&(r.top=s.top+s.height-l)}else{var c=e.left-o,u=e.left+o+i;c<s.left?r.left=s.left-c:u>s.width&&(r.left=s.left+s.width-u)}return r},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.popover"),o="object"==typeof e&&e;(r||"destroy"!=e)&&(r||n.data("bs.popover",r=new i(this,o)),"string"==typeof e&&r[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.2.0",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").empty()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},i.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),function(){var t=this,e=t._,i={},n=Array.prototype,r=Object.prototype,o=Function.prototype,s=n.push,a=n.slice,l=n.concat,c=r.toString,u=r.hasOwnProperty,h=n.forEach,d=n.map,p=n.reduce,f=n.reduceRight,m=n.filter,g=n.every,v=n.some,b=n.indexOf,y=n.lastIndexOf,w=Array.isArray,x=Object.keys,_=o.bind,C=function(t){return t instanceof C?t:this instanceof C?void(this._wrapped=t):new C(t)
};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=C),exports._=C):t._=C,C.VERSION="1.6.0";var k=C.each=C.forEach=function(t,e,n){if(null==t)return t;if(h&&t.forEach===h)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,o=t.length;o>r;r++)if(e.call(n,t[r],r,t)===i)return}else for(var s=C.keys(t),r=0,o=s.length;o>r;r++)if(e.call(n,t[s[r]],s[r],t)===i)return;return t};C.map=C.collect=function(t,e,i){var n=[];return null==t?n:d&&t.map===d?t.map(e,i):(k(t,function(t,r,o){n.push(e.call(i,t,r,o))}),n)};var $="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(t,e,i,n){var r=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return n&&(e=C.bind(e,n)),r?t.reduce(e,i):t.reduce(e);if(k(t,function(t,o,s){r?i=e.call(n,i,t,o,s):(i=t,r=!0)}),!r)throw new TypeError($);return i},C.reduceRight=C.foldr=function(t,e,i,n){var r=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return n&&(e=C.bind(e,n)),r?t.reduceRight(e,i):t.reduceRight(e);var o=t.length;if(o!==+o){var s=C.keys(t);o=s.length}if(k(t,function(a,l,c){l=s?s[--o]:--o,r?i=e.call(n,i,t[l],l,c):(i=t[l],r=!0)}),!r)throw new TypeError($);return i},C.find=C.detect=function(t,e,i){var n;return T(t,function(t,r,o){return e.call(i,t,r,o)?(n=t,!0):void 0}),n},C.filter=C.select=function(t,e,i){var n=[];return null==t?n:m&&t.filter===m?t.filter(e,i):(k(t,function(t,r,o){e.call(i,t,r,o)&&n.push(t)}),n)},C.reject=function(t,e,i){return C.filter(t,function(t,n,r){return!e.call(i,t,n,r)},i)},C.every=C.all=function(t,e,n){e||(e=C.identity);var r=!0;return null==t?r:g&&t.every===g?t.every(e,n):(k(t,function(t,o,s){return(r=r&&e.call(n,t,o,s))?void 0:i}),!!r)};var T=C.some=C.any=function(t,e,n){e||(e=C.identity);var r=!1;return null==t?r:v&&t.some===v?t.some(e,n):(k(t,function(t,o,s){return r||(r=e.call(n,t,o,s))?i:void 0}),!!r)};C.contains=C.include=function(t,e){return null==t?!1:b&&t.indexOf===b?-1!=t.indexOf(e):T(t,function(t){return t===e})},C.invoke=function(t,e){var i=a.call(arguments,2),n=C.isFunction(e);return C.map(t,function(t){return(n?e:t[e]).apply(t,i)})},C.pluck=function(t,e){return C.map(t,C.property(e))},C.where=function(t,e){return C.filter(t,C.matches(e))},C.findWhere=function(t,e){return C.find(t,C.matches(e))},C.max=function(t,e,i){if(!e&&C.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var n=-1/0,r=-1/0;return k(t,function(t,o,s){var a=e?e.call(i,t,o,s):t;a>r&&(n=t,r=a)}),n},C.min=function(t,e,i){if(!e&&C.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var n=1/0,r=1/0;return k(t,function(t,o,s){var a=e?e.call(i,t,o,s):t;r>a&&(n=t,r=a)}),n},C.shuffle=function(t){var e,i=0,n=[];return k(t,function(t){e=C.random(i++),n[i-1]=n[e],n[e]=t}),n},C.sample=function(t,e,i){return null==e||i?(t.length!==+t.length&&(t=C.values(t)),t[C.random(t.length-1)]):C.shuffle(t).slice(0,Math.max(0,e))};var E=function(t){return null==t?C.identity:C.isFunction(t)?t:C.property(t)};C.sortBy=function(t,e,i){return e=E(e),C.pluck(C.map(t,function(t,n,r){return{value:t,index:n,criteria:e.call(i,t,n,r)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var A=function(t){return function(e,i,n){var r={};return i=E(i),k(e,function(o,s){var a=i.call(n,o,s,e);t(r,a,o)}),r}};C.groupBy=A(function(t,e,i){C.has(t,e)?t[e].push(i):t[e]=[i]}),C.indexBy=A(function(t,e,i){t[e]=i}),C.countBy=A(function(t,e){C.has(t,e)?t[e]++:t[e]=1}),C.sortedIndex=function(t,e,i,n){i=E(i);for(var r=i.call(n,e),o=0,s=t.length;s>o;){var a=o+s>>>1;i.call(n,t[a])<r?o=a+1:s=a}return o},C.toArray=function(t){return t?C.isArray(t)?a.call(t):t.length===+t.length?C.map(t,C.identity):C.values(t):[]},C.size=function(t){return null==t?0:t.length===+t.length?t.length:C.keys(t).length},C.first=C.head=C.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:0>e?[]:a.call(t,0,e)},C.initial=function(t,e,i){return a.call(t,0,t.length-(null==e||i?1:e))},C.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},C.rest=C.tail=C.drop=function(t,e,i){return a.call(t,null==e||i?1:e)},C.compact=function(t){return C.filter(t,C.identity)};var S=function(t,e,i){return e&&C.every(t,C.isArray)?l.apply(i,t):(k(t,function(t){C.isArray(t)||C.isArguments(t)?e?s.apply(i,t):S(t,e,i):i.push(t)}),i)};C.flatten=function(t,e){return S(t,e,[])},C.without=function(t){return C.difference(t,a.call(arguments,1))},C.partition=function(t,e,i){e=E(e);var n=[],r=[];return k(t,function(t){(e.call(i,t)?n:r).push(t)}),[n,r]},C.uniq=C.unique=function(t,e,i,n){C.isFunction(e)&&(n=i,i=e,e=!1);var r=i?C.map(t,i,n):t,o=[],s=[];return k(r,function(i,n){(e?n&&s[s.length-1]===i:C.contains(s,i))||(s.push(i),o.push(t[n]))}),o},C.union=function(){return C.uniq(C.flatten(arguments,!0))},C.intersection=function(t){var e=a.call(arguments,1);return C.filter(C.uniq(t),function(t){return C.every(e,function(e){return C.contains(e,t)})})},C.difference=function(t){var e=l.apply(n,a.call(arguments,1));return C.filter(t,function(t){return!C.contains(e,t)})},C.zip=function(){for(var t=C.max(C.pluck(arguments,"length").concat(0)),e=new Array(t),i=0;t>i;i++)e[i]=C.pluck(arguments,""+i);return e},C.object=function(t,e){if(null==t)return{};for(var i={},n=0,r=t.length;r>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},C.indexOf=function(t,e,i){if(null==t)return-1;var n=0,r=t.length;if(i){if("number"!=typeof i)return n=C.sortedIndex(t,e),t[n]===e?n:-1;n=0>i?Math.max(0,r+i):i}if(b&&t.indexOf===b)return t.indexOf(e,i);for(;r>n;n++)if(t[n]===e)return n;return-1},C.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=null!=i;if(y&&t.lastIndexOf===y)return n?t.lastIndexOf(e,i):t.lastIndexOf(e);for(var r=n?i:t.length;r--;)if(t[r]===e)return r;return-1},C.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((e-t)/i),0),r=0,o=new Array(n);n>r;)o[r++]=t,t+=i;return o};var D=function(){};C.bind=function(t,e){var i,n;if(_&&t.bind===_)return _.apply(t,a.call(arguments,1));if(!C.isFunction(t))throw new TypeError;return i=a.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,i.concat(a.call(arguments)));D.prototype=t.prototype;var r=new D;D.prototype=null;var o=t.apply(r,i.concat(a.call(arguments)));return Object(o)===o?o:r}},C.partial=function(t){var e=a.call(arguments,1);return function(){for(var i=0,n=e.slice(),r=0,o=n.length;o>r;r++)n[r]===C&&(n[r]=arguments[i++]);for(;i<arguments.length;)n.push(arguments[i++]);return t.apply(this,n)}},C.bindAll=function(t){var e=a.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return k(e,function(e){t[e]=C.bind(t[e],t)}),t},C.memoize=function(t,e){var i={};return e||(e=C.identity),function(){var n=e.apply(this,arguments);return C.has(i,n)?i[n]:i[n]=t.apply(this,arguments)}},C.delay=function(t,e){var i=a.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},C.defer=function(t){return C.delay.apply(C,[t,1].concat(a.call(arguments,1)))},C.throttle=function(t,e,i){var n,r,o,s=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:C.now(),s=null,o=t.apply(n,r),n=r=null};return function(){var c=C.now();a||i.leading!==!1||(a=c);var u=e-(c-a);return n=this,r=arguments,0>=u?(clearTimeout(s),s=null,a=c,o=t.apply(n,r),n=r=null):s||i.trailing===!1||(s=setTimeout(l,u)),o}},C.debounce=function(t,e,i){var n,r,o,s,a,l=function(){var c=C.now()-s;e>c?n=setTimeout(l,e-c):(n=null,i||(a=t.apply(o,r),o=r=null))};return function(){o=this,r=arguments,s=C.now();var c=i&&!n;return n||(n=setTimeout(l,e)),c&&(a=t.apply(o,r),o=r=null),a}},C.once=function(t){var e,i=!1;return function(){return i?e:(i=!0,e=t.apply(this,arguments),t=null,e)}},C.wrap=function(t,e){return C.partial(e,t)},C.compose=function(){var t=arguments;return function(){for(var e=arguments,i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},C.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},C.keys=function(t){if(!C.isObject(t))return[];if(x)return x(t);var e=[];for(var i in t)C.has(t,i)&&e.push(i);return e},C.values=function(t){for(var e=C.keys(t),i=e.length,n=new Array(i),r=0;i>r;r++)n[r]=t[e[r]];return n},C.pairs=function(t){for(var e=C.keys(t),i=e.length,n=new Array(i),r=0;i>r;r++)n[r]=[e[r],t[e[r]]];return n},C.invert=function(t){for(var e={},i=C.keys(t),n=0,r=i.length;r>n;n++)e[t[i[n]]]=i[n];return e},C.functions=C.methods=function(t){var e=[];for(var i in t)C.isFunction(t[i])&&e.push(i);return e.sort()},C.extend=function(t){return k(a.call(arguments,1),function(e){if(e)for(var i in e)t[i]=e[i]}),t},C.pick=function(t){var e={},i=l.apply(n,a.call(arguments,1));return k(i,function(i){i in t&&(e[i]=t[i])}),e},C.omit=function(t){var e={},i=l.apply(n,a.call(arguments,1));for(var r in t)C.contains(i,r)||(e[r]=t[r]);return e},C.defaults=function(t){return k(a.call(arguments,1),function(e){if(e)for(var i in e)void 0===t[i]&&(t[i]=e[i])}),t},C.clone=function(t){return C.isObject(t)?C.isArray(t)?t.slice():C.extend({},t):t},C.tap=function(t,e){return e(t),t};var N=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof C&&(t=t._wrapped),e instanceof C&&(e=e._wrapped);var r=c.call(t);if(r!=c.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=i.length;o--;)if(i[o]==t)return n[o]==e;var s=t.constructor,a=e.constructor;if(s!==a&&!(C.isFunction(s)&&s instanceof s&&C.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1;i.push(t),n.push(e);var l=0,u=!0;if("[object Array]"==r){if(l=t.length,u=l==e.length)for(;l--&&(u=N(t[l],e[l],i,n)););}else{for(var h in t)if(C.has(t,h)&&(l++,!(u=C.has(e,h)&&N(t[h],e[h],i,n))))break;if(u){for(h in e)if(C.has(e,h)&&!l--)break;u=!l}}return i.pop(),n.pop(),u};C.isEqual=function(t,e){return N(t,e,[],[])},C.isEmpty=function(t){if(null==t)return!0;if(C.isArray(t)||C.isString(t))return 0===t.length;for(var e in t)if(C.has(t,e))return!1;return!0},C.isElement=function(t){return!(!t||1!==t.nodeType)},C.isArray=w||function(t){return"[object Array]"==c.call(t)},C.isObject=function(t){return t===Object(t)},k(["Arguments","Function","String","Number","Date","RegExp"],function(t){C["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),C.isArguments(arguments)||(C.isArguments=function(t){return!(!t||!C.has(t,"callee"))}),"function"!=typeof/./&&(C.isFunction=function(t){return"function"==typeof t}),C.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},C.isNaN=function(t){return C.isNumber(t)&&t!=+t},C.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},C.isNull=function(t){return null===t},C.isUndefined=function(t){return void 0===t},C.has=function(t,e){return u.call(t,e)},C.noConflict=function(){return t._=e,this},C.identity=function(t){return t},C.constant=function(t){return function(){return t}},C.property=function(t){return function(e){return e[t]}},C.matches=function(t){return function(e){if(e===t)return!0;for(var i in t)if(t[i]!==e[i])return!1;return!0}},C.times=function(t,e,i){for(var n=Array(Math.max(0,t)),r=0;t>r;r++)n[r]=e.call(i,r);return n},C.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},C.now=Date.now||function(){return(new Date).getTime()};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};I.unescape=C.invert(I.escape);var M={escape:new RegExp("["+C.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+C.keys(I.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(t){C[t]=function(e){return null==e?"":(""+e).replace(M[t],function(e){return I[t][e]})}}),C.result=function(t,e){if(null==t)return void 0;var i=t[e];return C.isFunction(i)?i.call(t):i},C.mixin=function(t){k(C.functions(t),function(e){var i=C[e]=t[e];C.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),L.call(this,i.apply(C,t))}})};var P=0;C.uniqueId=function(t){var e=++P+"";return t?t+e:e},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(t,e,i){var n;i=C.defaults({},i,C.templateSettings);var r=new RegExp([(i.escape||B).source,(i.interpolate||B).source,(i.evaluate||B).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(r,function(e,i,n,r,a){return s+=t.slice(o,a).replace(R,function(t){return"\\"+j[t]}),i&&(s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(s+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),o=a+e.length,e}),s+="';\n",i.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(i.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(e)return n(e,C);var l=function(t){return n.call(this,t,C)};return l.source="function("+(i.variable||"obj")+"){\n"+s+"}",l},C.chain=function(t){return C(t).chain()};var L=function(t){return this._chain?C(t).chain():t};C.mixin(C),k(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];C.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!=t&&"splice"!=t||0!==i.length||delete i[0],L.call(this,i)}}),k(["concat","join","slice"],function(t){var e=n[t];C.prototype[t]=function(){return L.call(this,e.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return C})}.call(this),function(t,e){var i=function(){},n=function(){this.calls=[],this.map={events:{friend:"menu:share:appmessage",timeline:"menu:share:timeline",weibo:"menu:share:weibo",email:"email"},actions:{friend:"sendAppMessage",timeline:"shareTimeline",weibo:"shareWeibo",email:"email"},direct:{network:"getNetworkType",hideToolbar:"hideToolbar",hideOptionMenu:"hideOptionMenu",showOptionMenu:"showOptionMenu",closeWebView:"closeWindow",scanQRCode:"scanQRCode",imagePreview:"imagePreview"}}};n.prototype._data=function(t){var e={};for(var i in t){if(!t.hasOwnProperty(i))return;e[i]="function"==typeof t[i]?t[i]():t[i]}return e.appid=e.app,e.img_url=e.img,delete e.app,delete e.img,e},n.prototype._make=function(t){if("undefined"==typeof WeixinJSBridge)return this.calls.push(t);var e=t.name,i=this.map.direct[e],n=t.data,r=t.callback;if(i)return"network"===e?WeixinJSBridge.invoke(i,{},r):"imagePreview"===e?WeixinJSBridge.invoke(i,n,r):WeixinJSBridge.call(i,r);if("weibo"===e)n.content=n.desc,n.url=n.link;else if("timeline"===e)n.title=n.title+" - "+n.desc,n.desc=n.title;else if("email"===e)return n.content=n.desc+" "+n.link,WeixinJSBridge.invoke("sendEmail",n,r);var o=this;WeixinJSBridge.on(this.map.events[e],function(){WeixinJSBridge.invoke(o.map.actions[e],n,r)})},n.prototype.on=function(t,e,n){return t?("function"==typeof e&&(n=e,e=null),this._make({name:t,data:e?this._data(e):{},callback:n||i}),this):void 0};var r=function(){for(var t=0,e=o.calls.length;e>t;t++)o._make(o.calls[t])},o=new n,s=function(){return o.on.apply(o,arguments)};"undefined"!=typeof exports&&module.exports?module.exports=exports=s:"function"==typeof define?define(function(t,e,i){i.exports=e=s}):t.wechat=t.wechat||s,"undefined"==typeof WeixinJSBridge?e.addEventListener?e.addEventListener("WeixinJSBridgeReady",r,!1):(e.attachEvent("WeixinJSBridgeReady",r),e.attachEvent("onWeixinJSBridgeReady",r)):r()}(window,document);var data={app:"",img:function(){var t=$('meta[name="wechat:cover_url"]').attr("content");return""==t&&(t="http://knewone.com/assets/wechat_default_share_image-0b2605c5447fe895882230ed285f899b.jpg"),t},desc:function(){var t=$('meta[name="wechat:desc"]').attr("content");return""==t&&(t="KnewOne\u63a2\u7d22\u65b0\u5947\u9177"),t},title:function(){var t=$('meta[name="wechat:title"]').attr("content");return""==t&&(t=$("title").text().split(" - KnewOne")[0]),t},link:window.location.href},callback=function(){$("#share--wechat-tip").fadeOut("fast")};wechat("friend",data,callback),wechat("timeline",data,callback),function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,r){t.Backbone=e(t,r,i,n)});else if("undefined"!=typeof exports){var i,n=require("underscore");try{i=require("jquery")}catch(r){}e(t,exports,n,i)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,n){{var r=t.Backbone,o=[],s=(o.push,o.slice);o.splice}e.VERSION="1.1.1",e.$=n,e.noConflict=function(){return t.Backbone=r,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=e.Events={on:function(t,e,i){if(!c(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var r=this,o=i.once(function(){r.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,n)},off:function(t,e,n){var r,o,s,a,l,u,h,d;if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(a=t?[t]:i.keys(this._events),l=0,u=a.length;u>l;l++)if(t=a[l],s=this._events[t]){if(this._events[t]=r=[],e||n)for(h=0,d=s.length;d>h;h++)o=s[h],(e&&e!==o.callback&&e!==o.callback._callback||n&&n!==o.context)&&r.push(o);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&u(i,e),n&&u(n,arguments),this},stopListening:function(t,e,n){var r=this._listeningTo;if(!r)return this;var o=!e&&!n;n||"object"!=typeof e||(n=this),t&&((r={})[t._listenId]=t);for(var s in r)t=r[s],t.off(e,n,this),(o||i.isEmpty(t._events))&&delete this._listeningTo[s];return this}},l=/\s+/,c=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var r in i)t[e].apply(t,[r,i[r]].concat(n));return!1}if(l.test(i)){for(var o=i.split(l),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(n));return!1}return!0},u=function(t,e){var i,n=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++n<r;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<r;)(i=t[n]).callback.call(i.ctx,o);return;case 2:for(;++n<r;)(i=t[n]).callback.call(i.ctx,o,s);return;case 3:for(;++n<r;)(i=t[n]).callback.call(i.ctx,o,s,a);return;default:for(;++n<r;)(i=t[n]).callback.apply(i.ctx,e);return}},h={listenTo:"on",listenToOnce:"once"};i.each(h,function(t,e){a[e]=function(e,n,r){var o=this._listeningTo||(this._listeningTo={}),s=e._listenId||(e._listenId=i.uniqueId("l"));return o[s]=e,r||"object"!=typeof n||(r=this),e[t](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,i.extend(e,a);var d=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(d.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var r,o,s,a,l,c,u,h;if(null==t)return this;if("object"==typeof t?(o=t,n=e):(o={})[t]=e,n||(n={}),!this._validate(o,n))return!1;s=n.unset,l=n.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=i.clone(this.attributes),this.changed={}),h=this.attributes,u=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(r in o)e=o[r],i.isEqual(h[r],e)||a.push(r),i.isEqual(u[r],e)?delete this.changed[r]:this.changed[r]=e,s?delete h[r]:h[r]=e;if(!l){a.length&&(this._pending=n);for(var d=0,p=a.length;p>d;d++)this.trigger("change:"+a[d],this,h[a[d]],n)}if(c)return this;if(!l)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var o in t)i.isEqual(r[o],e=t[o])||((n||(n={}))[o]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),void e.trigger("sync",e,i,t)):!1},R(this,t),this.sync("read",this,t)},save:function(t,e,n){var r,o,s,a=this.attributes;if(null==t||"object"==typeof t?(r=t,n=e):(r={})[t]=e,n=i.extend({validate:!0},n),r&&!n.wait){if(!this.set(r,n))return!1}else if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=i.extend({},a,r)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(t){l.attributes=a;var e=l.parse(t,n);return n.wait&&(e=i.extend(r||{},e)),i.isObject(e)&&!l.set(e,n)?!1:(c&&c(l,t,n),void l.trigger("sync",l,t,n))},R(this,n),o=this.isNew()?"create":n.patch?"patch":"update","patch"===o&&(n.attrs=r),s=this.sync(o,this,n),r&&n.wait&&(this.attributes=a),s},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,r=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&r(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;R(this,t);var o=this.sync("delete",this,t);return t.wait||r(),o},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||j();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];i.each(p,function(t){d.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var f=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};i.extend(f.prototype,a,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,g))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});var r,o,s,a;for(r=0,o=t.length;o>r;r++)a=t[r]=this.get(t[r]),a&&(delete this._byId[a.id],delete this._byId[a.cid],s=this.indexOf(a),this.models.splice(s,1),this.length--,e.silent||(e.index=s,a.trigger("remove",a,this,e)),this._removeReference(a,e));return n?t[0]:t},set:function(t,e){e=i.defaults({},e,m),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:i.clone(t);var r,o,s,a,l,c,u,h=e.at,p=this.model,f=this.comparator&&null==h&&e.sort!==!1,g=i.isString(this.comparator)?this.comparator:null,v=[],b=[],y={},w=e.add,x=e.merge,_=e.remove,C=!f&&w&&_?[]:!1;for(r=0,o=t.length;o>r;r++){if(l=t[r]||{},s=l instanceof d?a=l:l[p.prototype.idAttribute||"id"],c=this.get(s))_&&(y[c.cid]=!0),x&&(l=l===a?a.attributes:l,e.parse&&(l=c.parse(l,e)),c.set(l,e),f&&!u&&c.hasChanged(g)&&(u=!0)),t[r]=c;else if(w){if(a=t[r]=this._prepareModel(l,e),!a)continue;v.push(a),this._addReference(a,e)}a=c||a,!C||!a.isNew()&&y[a.id]||C.push(a),y[a.id]=!0}if(_){for(r=0,o=this.length;o>r;++r)y[(a=this.models[r]).cid]||b.push(a);b.length&&this.remove(b,e)}if(v.length||C&&C.length)if(f&&(u=!0),this.length+=v.length,null!=h)for(r=0,o=v.length;o>r;r++)this.models.splice(h+r,0,v[r]);else{C&&(this.models.length=0);var k=C||v;for(r=0,o=k.length;o>r;r++)this.models.push(k[r])}if(u&&this.sort({silent:!0}),!e.silent){for(r=0,o=v.length;o>r;r++)(a=v[r]).trigger("add",a,this,e);(u||C&&C.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,r=this.models.length;r>n;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return s.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var r=t.reset?"reset":"set";n[r](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},R(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,r=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),r&&r(t,i,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(v,function(t){f.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var b=["groupBy","countBy","sortBy","indexBy"];i.each(b,function(t){f.prototype[t]=function(e,n){var r=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,r,n)}});var y=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];i.extend(y.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var r=e.match(w),o=r[1],s=r[2];n=i.bind(n,this),o+=".delegateEvents"+this.cid,""===s?this.$el.on(o,n):this.$el.on(o,s,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className"));var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,r){var o=C[t];i.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:o,dataType:"json"};if(r.url||(s.url=i.result(n,"url")||j()),null!=r.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(r.attrs||n.toJSON(r))),r.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",r.emulateJSON&&(s.data._method=o);var a=r.beforeSend;r.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===s.type||r.emulateJSON||(s.processData=!1),"PATCH"===s.type&&_&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=r.xhr=e.ajax(i.extend(s,r));return n.trigger("request",n,l,r),l};var _=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var k=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},$=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,E=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(k.prototype,a,{initialize:function(){},route:function(t,n,r){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(r=n,n=""),r||(r=this[n]);var o=this;return e.history.route(t,function(i){var s=o._extractParameters(t,i);o.execute(r,s),o.trigger.apply(o,["route:"+n].concat(s)),o.trigger("route",n,s),e.history.trigger("route",o,n,s)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(A,"\\$&").replace($,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/?]+)"}).replace(E,"([^?]*?)"),new RegExp("^"+t+"(?:\\?(.*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var S=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},D=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,I=/msie [\w.]+/,M=/\/$/,P=/#.*$/;S.started=!1,i.extend(S.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(M,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(D,"")},start:function(t){if(S.started)throw new Error("Backbone.history has already been started");S.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);
var n=this.getFragment(),r=document.documentMode,o=I.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);if(this.root=("/"+this.root+"/").replace(N,"/"),o&&this._wantsHashChange){var s=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=s.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(D,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),S.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!S.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(P,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new S;var B=function(t,e){var n,r=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},i.extend(n,r,e);var o=function(){this.constructor=n};return o.prototype=r.prototype,n.prototype=new o,t&&i.extend(n.prototype,t),n.__super__=r.prototype,n};d.extend=f.extend=k.extend=y.extend=S.extend=B;var j=function(){throw new Error('A "url" property or function must be specified')},R=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e}),function(t,e){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(i,n){return t.Marionette=e(t,i,n)});else if("undefined"!=typeof exports){var i=require("backbone"),n=require("underscore");module.exports=e(t,i,n)}else t.Marionette=e(t,t.Backbone,t._)}(this,function(t,e,i){"use strict";function n(t,e){var i=new Error(t);throw i.name=e||"Error",i}!function(t,e){var i=t.ChildViewContainer;return t.ChildViewContainer=function(t,e){var i=function(t){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),e.each(t,this.add,this)};e.extend(i.prototype,{add:function(t,e){var i=t.cid;return this._views[i]=t,t.model&&(this._indexByModel[t.model.cid]=i),e&&(this._indexByCustom[e]=i),this._updateLength(),this},findByModel:function(t){return this.findByModelCid(t.cid)},findByModelCid:function(t){var e=this._indexByModel[t];return this.findByCid(e)},findByCustom:function(t){var e=this._indexByCustom[t];return this.findByCid(e)},findByIndex:function(t){return e.values(this._views)[t]},findByCid:function(t){return this._views[t]},remove:function(t){var i=t.cid;return t.model&&delete this._indexByModel[t.model.cid],e.any(this._indexByCustom,function(t,e){return t===i?(delete this._indexByCustom[e],!0):void 0},this),delete this._views[i],this._updateLength(),this},call:function(t){this.apply(t,e.tail(arguments))},apply:function(t,i){e.each(this._views,function(n){e.isFunction(n[t])&&n[t].apply(n,i||[])})},_updateLength:function(){this.length=e.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return e.each(n,function(t){i.prototype[t]=function(){var i=e.values(this._views),n=[i].concat(e.toArray(arguments));return e[t].apply(e,n)}}),i}(t,e),t.ChildViewContainer.VERSION="0.1.4",t.ChildViewContainer.noConflict=function(){return t.ChildViewContainer=i,this},t.ChildViewContainer}(e,i),function(t,e){var i=t.Wreqr,n=t.Wreqr={};return t.Wreqr.VERSION="1.3.1",t.Wreqr.noConflict=function(){return t.Wreqr=i,this},n.Handlers=function(t,e){var i=function(t){this.options=t,this._wreqrHandlers={},e.isFunction(this.initialize)&&this.initialize(t)};return i.extend=t.Model.extend,e.extend(i.prototype,t.Events,{setHandlers:function(t){e.each(t,function(t,i){var n=null;e.isObject(t)&&!e.isFunction(t)&&(n=t.context,t=t.callback),this.setHandler(i,t,n)},this)},setHandler:function(t,e,i){var n={callback:e,context:i};this._wreqrHandlers[t]=n,this.trigger("handler:add",t,e,i)},hasHandler:function(t){return!!this._wreqrHandlers[t]},getHandler:function(t){var e=this._wreqrHandlers[t];if(e)return function(){var t=Array.prototype.slice.apply(arguments);return e.callback.apply(e.context,t)}},removeHandler:function(t){delete this._wreqrHandlers[t]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(t,e),n.CommandStorage=function(){var i=function(t){this.options=t,this._commands={},e.isFunction(this.initialize)&&this.initialize(t)};return e.extend(i.prototype,t.Events,{getCommands:function(t){var e=this._commands[t];return e||(e={command:t,instances:[]},this._commands[t]=e),e},addCommand:function(t,e){var i=this.getCommands(t);i.instances.push(e)},clearCommands:function(t){var e=this.getCommands(t);e.instances=[]}}),i}(),n.Commands=function(t){return t.Handlers.extend({storageType:t.CommandStorage,constructor:function(e){this.options=e||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var i=Array.prototype.slice.call(arguments);t.Handlers.prototype.constructor.apply(this,i)},execute:function(t,e){t=arguments[0],e=Array.prototype.slice.call(arguments,1),this.hasHandler(t)?this.getHandler(t).apply(this,e):this.storage.addCommand(t,e)},_executeCommands:function(t,i,n){var r=this.storage.getCommands(t);e.each(r.instances,function(t){i.apply(n,t)}),this.storage.clearCommands(t)},_initializeStorage:function(t){var i,n=t.storageType||this.storageType;i=e.isFunction(n)?new n:n,this.storage=i}})}(n),n.RequestResponse=function(t){return t.Handlers.extend({request:function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return this.hasHandler(t)?this.getHandler(t).apply(this,e):void 0}})}(n),n.EventAggregator=function(t,e){var i=function(){};return i.extend=t.Model.extend,e.extend(i.prototype,t.Events),i}(t,e),n.Channel=function(){var i=function(e){this.vent=new t.Wreqr.EventAggregator,this.reqres=new t.Wreqr.RequestResponse,this.commands=new t.Wreqr.Commands,this.channelName=e};return e.extend(i.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(t,e){return this._connect("vent",t,e),this},connectCommands:function(t,e){return this._connect("commands",t,e),this},connectRequests:function(t,e){return this._connect("reqres",t,e),this},_connect:function(t,i,n){if(i){n=n||this;var r="vent"===t?"on":"setHandler";e.each(i,function(i,o){this[t][r](o,e.bind(i,n))},this)}}}),i}(n),n.radio=function(t){var i=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};e.extend(i.prototype,{channel:function(t){if(!t)throw new Error("Channel must receive a name");return this._getChannel(t)},_getChannel:function(e){var i=this._channels[e];return i||(i=new t.Channel(e),this._channels[e]=i),i},_proxyMethods:function(){e.each(["vent","commands","reqres"],function(t){e.each(n[t],function(e){this[t][e]=r(this,t,e)},this)},this)}});var n={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},r=function(t,e,i){return function(n){var r=t._getChannel(n)[e],o=Array.prototype.slice.call(arguments,1);return r[i].apply(r,o)}};return new i}(n),t.Wreqr}(e,i);var r=t.Marionette,o=e.Marionette={};o.VERSION="2.0.0",o.noConflict=function(){return t.Marionette=r,this},e.Marionette=o,o.Deferred=e.$.Deferred;var s=Array.prototype.slice;return o.extend=e.Model.extend,o.getOption=function(t,e){if(t&&e){var i;return i=t.options&&void 0!==t.options[e]?t.options[e]:t[e]}},o.proxyGetOption=function(t){return o.getOption(this,t)},o.normalizeMethods=function(t){var e,n={};return i.each(t,function(t,r){e=t,i.isFunction(e)||(e=this[e]),e&&(n[r]=e)},this),n},o.normalizeUIKeys=function(t,e){return"undefined"!=typeof t?(i.each(i.keys(t),function(i){var n=/@ui.[a-zA-Z_$0-9]*/g;i.match(n)&&(t[i.replace(n,function(t){return e[t.slice(4)]})]=t[i],delete t[i])}),t):void 0},o.actAsCollection=function(t,e){var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];i.each(n,function(n){t[n]=function(){var t=i.values(i.result(this,e)),r=[t].concat(i.toArray(arguments));return i[n].apply(i,r)}})},o.triggerMethod=function(){function t(t,e,i){return i.toUpperCase()}var e=/(^|:)(\w)/gi,n=function(n){var r,o="on"+n.replace(e,t),s=this[o];return i.isFunction(s)&&(r=s.apply(this,i.tail(arguments))),i.isFunction(this.trigger)&&this.trigger.apply(this,arguments),r};return n}(),o.MonitorDOMRefresh=function(t){function e(t){t._isShown=!0,r(t)}function n(t){t._isRendered=!0,r(t)}function r(t){t._isShown&&t._isRendered&&o(t)&&i.isFunction(t.triggerMethod)&&t.triggerMethod("dom:refresh")}function o(e){return t.contains(e.el)}return function(t){t.listenTo(t,"show",function(){e(t)}),t.listenTo(t,"render",function(){n(t)})}}(document.documentElement),function(t){function e(t,e,r,o){var s=o.split(/\s+/);i.each(s,function(i){var o=t[i];o||n('Method "'+i+'" was configured as an event handler, but does not exist.'),t.listenTo(e,r,o)})}function r(t,e,i,n){t.listenTo(e,i,n)}function o(t,e,n,r){var o=r.split(/\s+/);i.each(o,function(i){var r=t[i];t.stopListening(e,n,r)})}function s(t,e,i,n){t.stopListening(e,i,n)}function a(t,e,n,r,o){e&&n&&(i.isFunction(n)&&(n=n.call(t)),i.each(n,function(n,s){i.isFunction(n)?r(t,e,s,n):o(t,e,s,n)}))}t.bindEntityEvents=function(t,i,n){a(t,i,n,r,e)},t.unbindEntityEvents=function(t,e,i){a(t,e,i,s,o)},t.proxyBindEntityEvents=function(e,i){return t.bindEntityEvents(this,e,i)},t.proxyUnbindEntityEvents=function(e,i){return t.unbindEntityEvents(this,e,i)}}(o),o.Callbacks=function(){this._deferred=o.Deferred(),this._callbacks=[]},i.extend(o.Callbacks.prototype,{add:function(t,e){var n=i.result(this._deferred,"promise");this._callbacks.push({cb:t,ctx:e}),n.then(function(i){e&&(i.context=e),t.call(i.context,i.options)})},run:function(t,e){this._deferred.resolve({options:t,context:e})},reset:function(){var t=this._callbacks;this._deferred=o.Deferred(),this._callbacks=[],i.each(t,function(t){this.add(t.cb,t.ctx)},this)}}),o.Controller=function(t){this.triggerMethod=o.triggerMethod,this.options=t||{},i.isFunction(this.initialize)&&this.initialize(this.options)},o.Controller.extend=o.extend,i.extend(o.Controller.prototype,e.Events,{destroy:function(){var t=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(t)),this.triggerMethod.apply(this,["destroy"].concat(t)),this.stopListening(),this.off()},triggerMethod:o.triggerMethod,getOption:o.proxyGetOption}),o.Region=function(t){if(this.options=t||{},this.el=this.getOption("el"),this.el=this.el instanceof e.$?this.el[0]:this.el,this.el||n('An "el" must be specified for a region.',"NoElError"),this.$el=this.getEl(this.el),this.initialize){var i=Array.prototype.slice.apply(arguments);this.initialize.apply(this,i)}},i.extend(o.Region,{buildRegion:function(t,r){var o=i.isString(t),s=i.isString(t.selector),a=i.isUndefined(t.regionClass),l=i.isFunction(t);l||o||s||n("Region must be specified as a Region class,a selector string or an object with selector property");var c,u;o&&(c=t),t.selector&&(c=t.selector,delete t.selector),l&&(u=t),!l&&a&&(u=r),t.regionClass&&(u=t.regionClass,delete t.regionClass),(o||l)&&(t={}),t.el=c;var h=new u(t);return t.parentEl&&(h.getEl=function(n){if(i.isObject(n))return e.$(n);var r=t.parentEl;return i.isFunction(r)&&(r=r()),r.find(n)}),h}}),i.extend(o.Region.prototype,e.Events,{show:function(t,e){this._ensureElement();var n=e||{},r=t!==this.currentView,o=!!n.preventDestroy,s=!!n.forceShow,a=!!this.currentView,l=!o&&r;l&&this.empty();var c=r||s;return c?(t.render(),a&&this.triggerMethod("before:swap",t),this.triggerMethod("before:show",t),this.triggerMethod.call(t,"before:show"),this.attachHtml(t),this.currentView=t,a&&this.triggerMethod("swap",t),this.triggerMethod("show",t),i.isFunction(t.triggerMethod)?t.triggerMethod("show"):this.triggerMethod.call(t,"show"),this):this},_ensureElement:function(){i.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]),this.$el&&0!==this.$el.length||n('An "el" '+this.$el.selector+" must exist in DOM")},getEl:function(t){return e.$(t)},attachHtml:function(t){this.el.innerHTML="",this.el.appendChild(t.el)},empty:function(){var t=this.currentView;t&&!t.isDestroyed&&(this.triggerMethod("before:empty",t),t.destroy?t.destroy():t.remove&&t.remove(),this.triggerMethod("empty",t),delete this.currentView)},attachView:function(t){this.currentView=t},reset:function(){this.empty(),this.$el&&(this.el=this.$el.selector),delete this.$el},getOption:o.proxyGetOption,triggerMethod:o.triggerMethod}),o.Region.extend=o.extend,o.RegionManager=function(t){var e=t.Controller.extend({constructor:function(e){this._regions={},t.Controller.call(this,e)},addRegions:function(t,e){var n={};return i.each(t,function(t,r){i.isString(t)&&(t={selector:t}),t.selector&&(t=i.defaults({},t,e));var o=this.addRegion(r,t);n[r]=o},this),n},addRegion:function(e,n){var r,o=i.isObject(n),s=i.isString(n),a=!!n.selector;return r=s||o&&a?t.Region.buildRegion(n,t.Region):i.isFunction(n)?t.Region.buildRegion(n,t.Region):n,this.triggerMethod("before:add:region",e,r),this._store(e,r),this.triggerMethod("add:region",e,r),r},get:function(t){return this._regions[t]},getRegions:function(){return i.clone(this._regions)},removeRegion:function(t){var e=this._regions[t];this._remove(t,e)},removeRegions:function(){i.each(this._regions,function(t,e){this._remove(e,t)},this)},emptyRegions:function(){i.each(this._regions,function(t){t.empty()},this)},destroy:function(){this.removeRegions(),t.Controller.prototype.destroy.apply(this,arguments)},_store:function(t,e){this._regions[t]=e,this._setLength()},_remove:function(t,e){this.triggerMethod("before:remove:region",t,e),e.empty(),e.stopListening(),delete this._regions[t],this._setLength(),this.triggerMethod("remove:region",t,e)},_setLength:function(){this.length=i.size(this._regions)}});return t.actAsCollection(e.prototype,"_regions"),e}(o),o.TemplateCache=function(t){this.templateId=t},i.extend(o.TemplateCache,{templateCaches:{},get:function(t){var e=this.templateCaches[t];return e||(e=new o.TemplateCache(t),this.templateCaches[t]=e),e.load()},clear:function(){var t,e=s.call(arguments),i=e.length;if(i>0)for(t=0;i>t;t++)delete this.templateCaches[e[t]];else this.templateCaches={}}}),i.extend(o.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var t=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(t),this.compiledTemplate},loadTemplate:function(t){var i=e.$(t).html();return i&&0!==i.length||n('Could not find template: "'+t+'"',"NoTemplateError"),i},compileTemplate:function(t){return i.template(t)}}),o.Renderer={render:function(t,e){t||n("Cannot render the template since its false, null or undefined.","TemplateNotFoundError");var i;return(i="function"==typeof t?t:o.TemplateCache.get(t))(e)}},o.View=e.View.extend({constructor:function(t){i.bindAll(this,"render"),this.options=i.extend({},i.result(this,"options"),i.isFunction(t)?t.call(this):t),this.events=this.normalizeUIKeys(i.result(this,"events")),i.isObject(this.behaviors)&&new o.Behaviors(this),e.View.apply(this,arguments),o.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled)},getTemplate:function(){return this.getOption("template")},mixinTemplateHelpers:function(t){t=t||{};var e=this.getOption("templateHelpers");return i.isFunction(e)&&(e=e.call(this)),i.extend(t,e)},normalizeUIKeys:function(t){var e=i.result(this,"ui"),n=i.result(this,"_uiBindings");return o.normalizeUIKeys(t,n||e)},configureTriggers:function(){if(this.triggers){var t={},e=this.normalizeUIKeys(i.result(this,"triggers"));return i.each(e,function(e,n){var r=i.isObject(e),o=r?e.event:e;t[n]=function(t){if(t){var i=t.preventDefault,n=t.stopPropagation,s=r?e.preventDefault:i,a=r?e.stopPropagation:n;s&&i&&i.apply(t),a&&n&&n.apply(t)}var l={view:this,model:this.model,collection:this.collection};this.triggerMethod(o,l)}},this),t}},delegateEvents:function(t){this._delegateDOMEvents(t),this.bindEntityEvents(this.model,this.getOption("modelEvents")),this.bindEntityEvents(this.collection,this.getOption("collectionEvents"))},_delegateDOMEvents:function(t){t=t||this.events,i.isFunction(t)&&(t=t.call(this)),t=this.normalizeUIKeys(t);var n={},r=i.result(this,"behaviorEvents")||{},o=this.configureTriggers();i.extend(n,r,t,o),e.View.prototype.delegateEvents.call(this,n)},undelegateEvents:function(){var t=Array.prototype.slice.call(arguments);e.View.prototype.undelegateEvents.apply(this,t),this.unbindEntityEvents(this.model,this.getOption("modelEvents")),this.unbindEntityEvents(this.collection,this.getOption("collectionEvents"))},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed){var t=new Error("Cannot use a view thats already been destroyed.");throw t.name="ViewDestroyedError",t}},destroy:function(){if(!this.isDestroyed){var t=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(t)),this.isDestroyed=!0,this.triggerMethod.apply(this,["destroy"].concat(t)),this.unbindUIElements(),this.remove()}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var t=i.result(this,"_uiBindings");this.ui={},i.each(i.keys(t),function(e){var i=t[e];this.ui[e]=this.$(i)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(i.each(this.ui,function(t,e){delete this.ui[e]},this),this.ui=this._uiBindings,delete this._uiBindings)},triggerMethod:o.triggerMethod,normalizeMethods:o.normalizeMethods,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.ItemView=o.View.extend({constructor:function(){o.View.apply(this,arguments)},serializeData:function(){var t={};return this.model?t=this.model.toJSON():this.collection&&(t={items:this.collection.toJSON()}),t},render:function(){this._ensureViewIsIntact(),this.triggerMethod("before:render",this);var t=this.serializeData();t=this.mixinTemplateHelpers(t);var e=this.getTemplate(),i=o.Renderer.render(e,t);return this.attachElContent(i),this.bindUIElements(),this.triggerMethod("render",this),this},attachElContent:function(t){return this.$el.html(t),this},destroy:function(){this.isDestroyed||o.View.prototype.destroy.apply(this,arguments)}}),o.CollectionView=o.View.extend({childViewEventPrefix:"childview",constructor:function(t){var e=t||{};this.sort=i.isUndefined(e.sort)?!0:e.sort,this._initChildViewStorage(),o.View.apply(this,arguments),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this._triggerBeforeShowBufferedChildren(),this.attachBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&i.invoke(this._bufferedChildren,"triggerMethod","before:show")},_triggerShowBufferedChildren:function(){this._isShown&&(i.each(this._bufferedChildren,function(t){i.isFunction(t.triggerMethod)?t.triggerMethod("show"):o.triggerMethod.call(t,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(t){this.destroyEmptyView();var e=this.getChildView(t),i=this.collection.indexOf(t);this.addChild(t,e,i)},_onCollectionRemove:function(t){var e=this.children.findByModel(t);this.removeChildView(e),this.checkEmpty()},onShowCalled:function(){this.children.each(function(t){i.isFunction(t.triggerMethod)?t.triggerMethod("show"):o.triggerMethod.call(t,"show")})},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderChildren(),this.triggerMethod("render",this),this},_sortViews:function(){var t=this.collection.find(function(t,e){var i=this.children.findByModel(t);return i&&i._index!==e},this);t&&this.render()},_renderChildren:function(){this.startBuffering(),this.destroyEmptyView(),this.destroyChildren(),this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.showCollection(),this.triggerMethod("render:collection",this)),this.endBuffering()},showCollection:function(){var t;this.collection.each(function(e,i){t=this.getChildView(e),this.addChild(e,t,i)},this)},showEmptyView:function(){var t=this.getEmptyView();if(t&&!this._showingEmptyView){this.triggerMethod("before:render:empty"),this._showingEmptyView=!0;var i=new e.Model;this.addEmptyView(i,t),this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.destroyChildren(),delete this._showingEmptyView)},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(t,e){var n=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");i.isFunction(n)&&(n=n.call(this));var r=this.buildChildView(t,e,n);this._isShown&&this.triggerMethod.call(r,"before:show"),this.children.add(r),this.renderChildView(r,-1),this._isShown&&this.triggerMethod.call(r,"show")},getChildView:function(){var t=this.getOption("childView");return t||n('A "childView" must be specified',"NoChildViewError"),t},addChild:function(t,e,n){var r=this.getOption("childViewOptions");i.isFunction(r)&&(r=r.call(this,t,n));var o=this.buildChildView(t,e,r);return this._updateIndices(o,!0,n),this._addChildView(o,n),o},_updateIndices:function(t,e,i){this.sort&&(e?(t._index=i,this.children.each(function(e){e._index>=t._index&&e._index++})):this.children.each(function(e){e._index>=t._index&&e._index--}))},_addChildView:function(t,e){this.proxyChildEvents(t),this.triggerMethod("before:add:child",t),this.children.add(t),this.renderChildView(t,e),this._isShown&&!this.isBuffering&&(i.isFunction(t.triggerMethod)?t.triggerMethod("show"):o.triggerMethod.call(t,"show")),this.triggerMethod("add:child",t)},renderChildView:function(t,e){t.render(),this.attachHtml(this,t,e)},buildChildView:function(t,e,n){var r=i.extend({model:t},n);return new e(r)},removeChildView:function(t){t&&(this.triggerMethod("before:remove:child",t),t.destroy?t.destroy():t.remove&&t.remove(),this.stopListening(t),this.children.remove(t),this.triggerMethod("remove:child",t),this._updateIndices(t,!1))},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(t,e){t.$el.append(e)},attachHtml:function(t,e,i){t.isBuffering?(t.elBuffer.appendChild(e.el),t._bufferedChildren.push(e)):t._insertBefore(e,i)||t._insertAfter(e)},_insertBefore:function(t,e){var i,n=this.sort&&e<this.children.length-1;return n&&(i=this.children.find(function(t){return t._index===e+1})),i?(i.$el.before(t.el),!0):!1},_insertAfter:function(t){this.$el.append(t.el)},_initChildViewStorage:function(){this.children=new e.ChildViewContainer},destroy:function(){this.isDestroyed||(this.triggerMethod("before:destroy:collection"),this.destroyChildren(),this.triggerMethod("destroy:collection"),o.View.prototype.destroy.apply(this,arguments))},destroyChildren:function(){this.children.each(this.removeChildView,this),this.checkEmpty()},proxyChildEvents:function(t){var e=this.getOption("childViewEventPrefix");this.listenTo(t,"all",function(){var n=Array.prototype.slice.call(arguments),r=n[0],o=this.normalizeMethods(i.result(this,"childEvents"));n[0]=e+":"+r,n.splice(1,0,t),"undefined"!=typeof o&&i.isFunction(o[r])&&o[r].apply(this,n.slice(1)),this.triggerMethod.apply(this,n)},this)}}),o.CompositeView=o.CollectionView.extend({constructor:function(){o.CollectionView.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))})},getChildView:function(){var t=this.getOption("childView")||this.constructor;return t||n('A "childView" must be specified',"NoChildViewError"),t},serializeData:function(){var t={};return this.model&&(t=this.model.toJSON()),t},render:function(){return this._ensureViewIsIntact(),this.isRendered=!0,this.resetChildViewContainer(),this.triggerMethod("before:render",this),this._renderRoot(),this._renderChildren(),this.triggerMethod("render",this),this},_renderChildren:function(){this.isRendered&&o.CollectionView.prototype._renderChildren.call(this)},_renderRoot:function(){var t={};t=this.serializeData(),t=this.mixinTemplateHelpers(t),this.triggerMethod("before:render:template");var e=this.getTemplate(),i=o.Renderer.render(e,t);this.attachElContent(i),this.bindUIElements(),this.triggerMethod("render:template")},attachElContent:function(t){return this.$el.html(t),this},attachBuffer:function(t,e){var i=this.getChildViewContainer(t);i.append(e)},_insertAfter:function(t){var e=this.getChildViewContainer(this);e.append(t.el)},getChildViewContainer:function(t){if("$childViewContainer"in t)return t.$childViewContainer;var e,r=o.getOption(t,"childViewContainer");if(r){var s=i.isFunction(r)?r.call(t):r;e="@"===s.charAt(0)&&t.ui?t.ui[s.substr(4)]:t.$(s),e.length<=0&&n('The specified "childViewContainer" was not found: '+t.childViewContainer,"ChildViewContainerMissingError")}else e=t.$el;return t.$childViewContainer=e,e},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}}),o.LayoutView=o.ItemView.extend({regionClass:o.Region,constructor:function(t){t=t||{},this._firstRender=!0,this._initializeRegions(t),o.ItemView.call(this,t)},render:function(){return this._ensureViewIsIntact(),this._firstRender?this._firstRender=!1:this._reInitializeRegions(),o.ItemView.prototype.render.apply(this,arguments)},destroy:function(){this.isDestroyed||(this.regionManager.destroy(),o.ItemView.prototype.destroy.apply(this,arguments))},addRegion:function(t,e){this.triggerMethod("before:region:add",t);var i={};return i[t]=e,this._buildRegions(i)[t]},addRegions:function(t){return this.regions=i.extend({},this.regions,t),this._buildRegions(t)},removeRegion:function(t){return this.triggerMethod("before:region:remove",t),delete this.regions[t],this.regionManager.removeRegion(t)},getRegion:function(t){return this.regionManager.get(t)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(t){var e=this,i={regionClass:this.getOption("regionClass"),parentEl:function(){return e.$el}};return this.regionManager.addRegions(t,i)},_initializeRegions:function(t){var e;this._initRegionManager(),e=i.isFunction(this.regions)?this.regions(t):this.regions||{};var n=this.getOption.call(t,"regions");i.isFunction(n)&&(n=n.call(this,t)),i.extend(e,n),this.addRegions(e)},_reInitializeRegions:function(){this.regionManager.emptyRegions(),this.regionManager.each(function(t){t.reset()})},getRegionManager:function(){return new o.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager(),this.listenTo(this.regionManager,"before:add:region",function(t){this.triggerMethod("before:add:region",t)}),this.listenTo(this.regionManager,"add:region",function(t,e){this[t]=e,this.triggerMethod("add:region",t,e)}),this.listenTo(this.regionManager,"before:remove:region",function(t){this.triggerMethod("before:remove:region",t)}),this.listenTo(this.regionManager,"remove:region",function(t,e){delete this[t],this.triggerMethod("remove:region",t,e)})}}),o.Behavior=function(t,e){function i(e,i){this.view=i,this.defaults=t.result(this,"defaults")||{},this.options=t.extend({},this.defaults,e),this.$=function(){return this.view.$.apply(this.view,arguments)},this.initialize.apply(this,arguments)}return t.extend(i.prototype,e.Events,{initialize:function(){},destroy:function(){this.stopListening()},triggerMethod:o.triggerMethod,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),i.extend=o.extend,i}(i,e),o.Behaviors=function(t,e){function i(t,n){n=i.parseBehaviors(t,n||e.result(t,"behaviors")),i.wrap(t,n,["bindUIElements","unbindUIElements","delegateEvents","undelegateEvents","behaviorEvents","triggerMethod","setElement","destroy"])}var n={setElement:function(t,i){t.apply(this,e.tail(arguments,2)),e.each(i,function(t){t.$el=this.$el},this)},destroy:function(t,i){var n=e.tail(arguments,2);t.apply(this,n),e.invoke(i,"destroy",n)},bindUIElements:function(t,i){t.apply(this),e.invoke(i,t)},unbindUIElements:function(t,i){t.apply(this),e.invoke(i,t)},triggerMethod:function(t,i){var n=e.tail(arguments,2);t.apply(this,n),e.each(i,function(e){t.apply(e,n)})},delegateEvents:function(i,n){var r=e.tail(arguments,2);i.apply(this,r),e.each(n,function(e){t.bindEntityEvents(e,this.model,t.getOption(e,"modelEvents")),t.bindEntityEvents(e,this.collection,t.getOption(e,"collectionEvents"))},this)},undelegateEvents:function(i,n){var r=e.tail(arguments,2);i.apply(this,r),e.each(n,function(e){t.unbindEntityEvents(e,this.model,t.getOption(e,"modelEvents")),t.unbindEntityEvents(e,this.collection,t.getOption(e,"collectionEvents"))},this)},behaviorEvents:function(i,n){var r={},o=e.result(this,"ui");return e.each(n,function(i,n){var s={},a=e.clone(e.result(i,"events"))||{},l=e.result(i,"ui"),c=e.extend({},o,l);a=t.normalizeUIKeys(a,c),e.each(e.keys(a),function(t){var r=new Array(n+2).join(" "),o=t+r,l=e.isFunction(a[t])?a[t]:i[a[t]];s[o]=e.bind(l,i)}),r=e.extend(r,s)}),r}};return e.extend(i,{behaviorsLookup:function(){throw new Error("You must define where your behaviors are stored.See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup")},getBehaviorClass:function(t,n){return t.behaviorClass?t.behaviorClass:e.isFunction(i.behaviorsLookup)?i.behaviorsLookup.apply(this,arguments)[n]:i.behaviorsLookup[n]},parseBehaviors:function(t,n){return e.chain(n).map(function(n,r){var o=i.getBehaviorClass(n,r),s=new o(n,t),a=i.parseBehaviors(t,e.result(s,"behaviors"));return[s].concat(a)}).flatten().value()},wrap:function(t,i,r){e.each(r,function(r){t[r]=e.partial(n[r],t[r],i)})}}),i}(o,i),o.AppRouter=e.Router.extend({constructor:function(t){e.Router.apply(this,arguments),this.options=t||{};var i=this.getOption("appRoutes"),n=this._getController();this.processAppRoutes(n,i),this.on("route",this._processOnRoute,this)},appRoute:function(t,e){var i=this._getController();this._addAppRoute(i,t,e)},_processOnRoute:function(t,e){var n=i.invert(this.appRoutes)[t];i.isFunction(this.onRoute)&&this.onRoute(t,n,e)},processAppRoutes:function(t,e){if(e){var n=i.keys(e).reverse();i.each(n,function(i){this._addAppRoute(t,i,e[i])},this)}},_getController:function(){return this.getOption("controller")},_addAppRoute:function(t,e,r){var o=t[r];
o||n('Method "'+r+'" was not found on the controller'),this.route(e,r,i.bind(o,t))},getOption:o.proxyGetOption}),o.Application=function(t){this._initRegionManager(),this._initCallbacks=new o.Callbacks;var n=e.Wreqr.radio.channel("global");this.vent=n.vent,this.commands=n.commands,this.reqres=n.reqres,this.submodules={},i.extend(this,t)},i.extend(o.Application.prototype,e.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(t){this._initCallbacks.add(t)},start:function(t){this.triggerMethod("before:start",t),this._initCallbacks.run(t,this),this.triggerMethod("start",t)},addRegions:function(t){return this._regionManager.addRegions(t)},emptyRegions:function(){this._regionManager.emptyRegions()},removeRegion:function(t){this._regionManager.removeRegion(t)},getRegion:function(t){return this._regionManager.get(t)},getRegions:function(){return this._regionManager.getRegions()},module:function(t,e){var i=o.Module.getClass(e),n=s.call(arguments);return n.unshift(this),i.create.apply(i,n)},_initRegionManager:function(){this._regionManager=new o.RegionManager,this.listenTo(this._regionManager,"before:add:region",function(t){this.triggerMethod("before:add:region",t)}),this.listenTo(this._regionManager,"add:region",function(t,e){this[t]=e,this.triggerMethod("add:region",t,e)}),this.listenTo(this._regionManager,"before:remove:region",function(t){this.triggerMethod("before:remove:region",t)}),this.listenTo(this._regionManager,"remove:region",function(t,e){delete this[t],this.triggerMethod("remove:region",t,e)})},triggerMethod:o.triggerMethod}),o.Application.extend=o.extend,o.Module=function(t,e,n){this.moduleName=t,this.options=i.extend({},this.options,n),this.initialize=n.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=e,this.startWithParent=!0,i.isFunction(this.initialize)&&this.initialize(t,e,this.options)},o.Module.extend=o.extend,i.extend(o.Module.prototype,e.Events,{initialize:function(){},addInitializer:function(t){this._initializerCallbacks.add(t)},addFinalizer:function(t){this._finalizerCallbacks.add(t)},start:function(t){this._isInitialized||(i.each(this.submodules,function(e){e.startWithParent&&e.start(t)}),this.triggerMethod("before:start",t),this._initializerCallbacks.run(t,this),this._isInitialized=!0,this.triggerMethod("start",t))},stop:function(){this._isInitialized&&(this._isInitialized=!1,this.triggerMethod("before:stop"),i.each(this.submodules,function(t){t.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(t,e){this._runModuleDefinition(t,e)},_runModuleDefinition:function(t,n){if(t){var r=i.flatten([this,this.app,e,o,e.$,i,n]);t.apply(this,r)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new o.Callbacks,this._finalizerCallbacks=new o.Callbacks},triggerMethod:o.triggerMethod}),i.extend(o.Module,{create:function(t,e,n){var r=t,o=s.call(arguments);o.splice(0,3),e=e.split(".");var a=e.length,l=[];return l[a-1]=n,i.each(e,function(e,i){var s=r;r=this._getModule(s,e,t,n),this._addModuleDefinition(s,r,l[i],o)},this),r},_getModule:function(t,e,n,r){var o=i.extend({},r),s=this.getClass(r),a=t[e];return a||(a=new s(e,n,o),t[e]=a,t.submodules[e]=a),a},getClass:function(t){var e=o.Module;return t?t.prototype instanceof e?t:t.moduleClass||e:e},_addModuleDefinition:function(t,e,i,n){var r=this._getDefine(i),o=this._getStartWithParent(i,e);r&&e.addDefinition(r,n),this._addStartWithParent(t,e,o)},_getStartWithParent:function(t,e){var n;return i.isFunction(t)&&t.prototype instanceof o.Module?(n=e.constructor.prototype.startWithParent,i.isUndefined(n)?!0:n):i.isObject(t)?(n=t.startWithParent,i.isUndefined(n)?!0:n):!0},_getDefine:function(t){return!i.isFunction(t)||t.prototype instanceof o.Module?i.isObject(t)?t.define:null:t},_addStartWithParent:function(t,e,i){e.startWithParent=e.startWithParent&&i,e.startWithParent&&!e.startWithParentIsConfigured&&(e.startWithParentIsConfigured=!0,t.addInitializer(function(t){e.startWithParent&&e.start(t)}))}}),o}),function(){!function(){var t;return t=$.fn.disable,$.fn.disable=function(t){return null==t&&(t="disabled"),this.each(function(){var e,i;switch(e=$(this),i=e[0].nodeName.toLowerCase()){case"input":case"button":return e.addClass(t).attr("disabled",!0).data("disabled-class",t)}})},$.fn.disable.noConflict=function(){return $.fn.disable=t,this}}(),function(){var t;return t=$.fn.enable,$.fn.enable=function(){return this.each(function(){var t,e,i;switch(t=$(this),i=t[0].nodeName.toLowerCase(),e=t.data("disabled-class")||"disabled",i){case"input":case"button":return t.removeClass(e).removeAttr("disabled")}})},$.fn.enable.noConflict=function(){return $.fn.enable=t,this}}()}.call(this);var Handlebars=function(){var t=function(){"use strict";function t(t){this.string=t}var e;return t.prototype.toString=function(){return""+this.string},e=t}(),e=function(t){"use strict";function e(t){return a[t]||"&amp;"}function i(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}function n(t){return t instanceof s?t.toString():t||0===t?(t=""+t,c.test(t)?t.replace(l,e):t):""}function r(t){return t||0===t?d(t)&&0===t.length?!0:!1:!0}var o={},s=t,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,c=/[&<>"'`]/;o.extend=i;var u=Object.prototype.toString;o.toString=u;var h=function(t){return"function"==typeof t};h(/x/)&&(h=function(t){return"function"==typeof t&&"[object Function]"===u.call(t)});var h;o.isFunction=h;var d=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===u.call(t):!1};return o.isArray=d,o.escapeExpression=n,o.isEmpty=r,o}(t),i=function(){"use strict";function t(t,e){var n;e&&e.firstLine&&(n=e.firstLine,t+=" - "+n+":"+e.firstColumn);for(var r=Error.prototype.constructor.call(this,t),o=0;o<i.length;o++)this[i[o]]=r[i[o]];n&&(this.lineNumber=n,this.column=e.firstColumn)}var e,i=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,e=t}(),n=function(t,e){"use strict";function i(t,e){this.helpers=t||{},this.partials=e||{},n(this)}function n(t){t.registerHelper("helperMissing",function(t){if(2===arguments.length)return void 0;throw new a("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,i){var n=i.inverse||function(){},r=i.fn;return d(e)&&(e=e.call(this)),e===!0?r(this):e===!1||null==e?n(this):h(e)?e.length>0?t.helpers.each(e,i):n(this):r(e)}),t.registerHelper("each",function(t,e){var i,n=e.fn,r=e.inverse,o=0,s="";if(d(t)&&(t=t.call(this)),e.data&&(i=g(e.data)),t&&"object"==typeof t)if(h(t))for(var a=t.length;a>o;o++)i&&(i.index=o,i.first=0===o,i.last=o===t.length-1),s+=n(t[o],{data:i});else for(var l in t)t.hasOwnProperty(l)&&(i&&(i.key=l,i.index=o,i.first=0===o),s+=n(t[l],{data:i}),o++);return 0===o&&(s=r(this)),s}),t.registerHelper("if",function(t,e){return d(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||s.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,i){return t.helpers["if"].call(this,e,{fn:i.inverse,inverse:i.fn,hash:i.hash})}),t.registerHelper("with",function(t,e){return d(t)&&(t=t.call(this)),s.isEmpty(t)?void 0:e.fn(t)}),t.registerHelper("log",function(e,i){var n=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;t.log(n,e)})}function r(t,e){m.log(t,e)}var o={},s=t,a=e,l="1.3.0";o.VERSION=l;var c=4;o.COMPILER_REVISION=c;var u={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};o.REVISION_CHANGES=u;var h=s.isArray,d=s.isFunction,p=s.toString,f="[object Object]";o.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:m,log:r,registerHelper:function(t,e,i){if(p.call(t)===f){if(i||e)throw new a("Arg not supported with multiple helpers");s.extend(this.helpers,t)}else i&&(e.not=i),this.helpers[t]=e},registerPartial:function(t,e){p.call(t)===f?s.extend(this.partials,t):this.partials[t]=e}};var m={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(m.level<=t){var i=m.methodMap[t];"undefined"!=typeof console&&console[i]&&console[i].call(console,e)}}};o.logger=m,o.log=r;var g=function(t){var e={};return s.extend(e,t),e};return o.createFrame=g,o}(e,i),r=function(t,e,i){"use strict";function n(t){var e=t&&t[0]||1,i=d;if(e!==i){if(i>e){var n=p[i],r=p[e];throw new h("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+r+").")}throw new h("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function r(t,e){if(!e)throw new h("No environment passed to template");var i=function(t,i,n,r,o,s){var a=e.VM.invokePartial.apply(this,arguments);if(null!=a)return a;if(e.compile){var l={helpers:r,partials:o,data:s};return o[i]=e.compile(t,{data:void 0!==s},e),o[i](n,l)}throw new h("The partial "+i+" could not be compiled when running in runtime-only mode")},n={escapeExpression:u.escapeExpression,invokePartial:i,programs:[],program:function(t,e,i){var n=this.programs[t];return i?n=s(t,e,i):n||(n=this.programs[t]=s(t,e)),n},merge:function(t,e){var i=t||e;return t&&e&&t!==e&&(i={},u.extend(i,e),u.extend(i,t)),i},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(i,r){r=r||{};var o,s,a=r.partial?r:e;r.partial||(o=r.helpers,s=r.partials);var l=t.call(n,a,i,o,s,r.data);return r.partial||e.VM.checkRevision(n.compilerInfo),l}}function o(t,e,i){var n=Array.prototype.slice.call(arguments,3),r=function(t,r){return r=r||{},e.apply(this,[t,r.data||i].concat(n))};return r.program=t,r.depth=n.length,r}function s(t,e,i){var n=function(t,n){return n=n||{},e(t,n.data||i)};return n.program=t,n.depth=0,n}function a(t,e,i,n,r,o){var s={partial:!0,helpers:n,partials:r,data:o};if(void 0===t)throw new h("The partial "+e+" could not be found");return t instanceof Function?t(i,s):void 0}function l(){return""}var c={},u=t,h=e,d=i.COMPILER_REVISION,p=i.REVISION_CHANGES;return c.checkRevision=n,c.template=r,c.programWithDepth=o,c.program=s,c.invokePartial=a,c.noop=l,c}(e,i,n),o=function(t,e,i,n,r){"use strict";var o,s=t,a=e,l=i,c=n,u=r,h=function(){var t=new s.HandlebarsEnvironment;return c.extend(t,s),t.SafeString=a,t.Exception=l,t.Utils=c,t.VM=u,t.template=function(e){return u.template(e,t)},t},d=h();return d.create=h,o=d}(n,t,i,e,r);return o}();!function(t){window.NestedFormEvents=function(){this.addFields=t.proxy(this.addFields,this),this.removeFields=t.proxy(this.removeFields,this)},NestedFormEvents.prototype={addFields:function(e){var i=e.currentTarget,n=t(i).data("association"),r=t("#"+t(i).data("blueprint-id")),o=r.data("blueprint"),s=(t(i).closest(".fields").closestChild("input, textarea, select").eq(0).attr("name")||"").replace(new RegExp("[[a-z_]+]$"),"");if(s)for(var a=s.match(/[a-z_]+_attributes(?=\]\[(new_)?\d+\])/g)||[],l=s.match(/[0-9]+/g)||[],c=0;c<a.length;c++)l[c]&&(o=o.replace(new RegExp("(_"+a[c]+")_.+?_","g"),"$1_"+l[c]+"_"),o=o.replace(new RegExp("(\\["+a[c]+"\\])\\[.+?\\]","g"),"$1["+l[c]+"]"));var u=new RegExp("new_"+n,"g"),h=this.newId();o=t.trim(o.replace(u,h));var d=this.insertFields(o,n,i);return d.trigger({type:"nested:fieldAdded",field:d}).trigger({type:"nested:fieldAdded:"+n,field:d}),!1},newId:function(){return(new Date).getTime()},insertFields:function(e,i,n){var r=t(n).data("target");return r?t(e).appendTo(t(r)):t(e).insertBefore(n)},removeFields:function(e){var i=t(e.currentTarget),n=i.data("association"),r=i.prev("input[type=hidden]");r.val("1");var o=i.closest(".fields");return o.hide(),o.trigger({type:"nested:fieldRemoved",field:o}).trigger({type:"nested:fieldRemoved:"+n,field:o}),!1}},window.nestedFormEvents=new NestedFormEvents,t(document).delegate("form a.add_nested_fields","click",nestedFormEvents.addFields).delegate("form a.remove_nested_fields","click",nestedFormEvents.removeFields)}(jQuery),function(t){t.fn.closestChild=function(e){if(e&&""!=e){var i=[];for(i.push(this);i.length>0;)for(var n=i.shift(),r=n.children(),o=0;o<r.length;++o){var s=t(r[o]);if(s.is(e))return s;i.push(s)}}return t()}}(jQuery),function(t,e,i){"use strict";function n(e,m,g){function j(){if(be.initialized){var i=0,n=Ie.length;if(ke.old=t.extend({},ke),_e=ye?0:we[ve.horizontal?"width":"height"](),Ee=$e[ve.horizontal?"width":"height"](),Ce=ye?e:xe[ve.horizontal?"outerWidth":"outerHeight"](),Ie.length=0,ke.start=0,ke.end=M(Ce-_e,0),qe){i=Pe.length,Me=xe.children(ve.itemSelector),Pe.length=0;var r,o=c(xe,ve.horizontal?"paddingLeft":"paddingTop"),s=c(xe,ve.horizontal?"paddingRight":"paddingBottom"),a="border-box"===t(Me).css("boxSizing"),l="none"!==Me.css("float"),h=0,d=Me.length-1;Ce=0,Me.each(function(e,i){var n=t(i),a=n[ve.horizontal?"outerWidth":"outerHeight"](),u=c(n,ve.horizontal?"marginLeft":"marginTop"),p=c(n,ve.horizontal?"marginRight":"marginBottom"),f=a+u+p,m=!u||!p,g={};g.el=i,g.size=m?a:f,g.half=g.size/2,g.start=Ce+(m?u:0),g.center=g.start-I(_e/2-g.size/2),g.end=g.start-_e+g.size,e||(Ce+=o),Ce+=f,ve.horizontal||l||p&&u&&e>0&&(Ce-=P(u,p)),e===d&&(g.end+=s,Ce+=s,h=m?p:0),Pe.push(g),r=g}),xe[0].style[ve.horizontal?"width":"height"]=(a?Ce:Ce-o-s)+"px",Ce-=h,Pe.length?(ke.start=Pe[0][He?"center":"start"],ke.end=He?r.center:Ce>_e?r.end:ke.start):ke.start=ke.end=0}if(ke.center=I(ke.end/2+ke.start/2),Q(),Te.length&&Ee>0&&(ve.dynamicHandle?(Ae=ke.start===ke.end?Ee:I(Ee*_e/Ce),Ae=u(Ae,ve.minHandleSize,Ee),Te[0].style[ve.horizontal?"width":"height"]=Ae+"px"):Ae=Te[ve.horizontal?"outerWidth":"outerHeight"](),Se.end=Ee-Ae,ri||O()),!ye&&_e>0){var p=ke.start,f="";if(qe)t.each(Pe,function(t,e){He?Ie.push(e.center):e.start+e.size>p&&p<=ke.end&&(p=e.start,Ie.push(p),p+=_e,p>ke.end&&p<ke.end+_e&&Ie.push(ke.end))});else for(;p-_e<ke.end;)Ie.push(p),p+=_e;if(De[0]&&n!==Ie.length){for(var m=0;m<Ie.length;m++)f+=ve.pageBuilder.call(be,m);Ne=De.html(f).children(),Ne.eq(Be.activePage).addClass(ve.activeClass)}}if(Be.slideeSize=Ce,Be.frameSize=_e,Be.sbSize=Ee,Be.handleSize=Ae,qe){be.initialized?(Be.activeItem>=Pe.length||0===i&&Pe.length>0)&&V(Be.activeItem>=Pe.length?Pe.length-1:0,!i):(V(ve.startAt),be[ze?"toCenter":"toStart"](ve.startAt));var g=Pe[Be.activeItem];R(ze&&g?g.center:u(ke.dest,ke.start,ke.end))}else be.initialized?R(u(ke.dest,ke.start,ke.end)):R(ve.startAt,1);fe("load")}}function R(t,e,i){if(qe&&ii.released&&!i){var n=W(t),r=t>ke.start&&t<ke.end;ze?(r&&(t=Pe[n.centerItem].center),He&&ve.activateMiddle&&V(n.centerItem)):r&&(t=Pe[n.firstItem].start)}ii.init&&ii.slidee&&ve.elasticBounds?t>ke.end?t=ke.end+(t-ke.end)/6:t<ke.start&&(t=ke.start+(t-ke.start)/6):t=u(t,ke.start,ke.end),ti.start=+new Date,ti.time=0,ti.from=ke.cur,ti.to=t,ti.delta=t-ke.cur,ti.tweesing=ii.tweese||ii.init&&!ii.slidee,ti.immediate=!ti.tweesing&&(e||ii.init&&ii.slidee||!ve.speed),ii.tweese=0,t!==ke.dest&&(ke.dest=t,fe("change"),ri||L()),X(),Q(),K(),F()}function L(){if(be.initialized){if(!ri)return ri=y(L),void(ii.released&&fe("moveStart"));ti.immediate?ke.cur=ti.to:ti.tweesing?(ti.tweeseDelta=ti.to-ke.cur,S(ti.tweeseDelta)<.1?ke.cur=ti.to:ke.cur+=ti.tweeseDelta*(ii.released?ve.swingSpeed:ve.syncSpeed)):(ti.time=P(+new Date-ti.start,ve.speed),ke.cur=ti.from+ti.delta*jQuery.easing[ve.easing](ti.time/ve.speed,ti.time,0,1,ve.speed)),ti.to===ke.cur?(ke.cur=ti.to,ii.tweese=ri=0):ri=y(L),fe("move"),ye||(d?xe[0].style[d]=p+(ve.horizontal?"translateX":"translateY")+"("+-ke.cur+"px)":xe[0].style[ve.horizontal?"left":"top"]=-I(ke.cur)+"px"),!ri&&ii.released&&fe("moveEnd"),O()}}function O(){Te.length&&(Se.cur=ke.start===ke.end?0:((ii.init&&!ii.slidee?ke.dest:ke.cur)-ke.start)/(ke.end-ke.start)*Se.end,Se.cur=u(I(Se.cur),Se.start,Se.end),Ze.hPos!==Se.cur&&(Ze.hPos=Se.cur,d?Te[0].style[d]=p+(ve.horizontal?"translateX":"translateY")+"("+Se.cur+"px)":Te[0].style[ve.horizontal?"left":"top"]=Se.cur+"px"))}function F(){Ne[0]&&Ze.page!==Be.activePage&&(Ze.page=Be.activePage,Ne.removeClass(ve.activeClass).eq(Be.activePage).addClass(ve.activeClass),fe("activePage",Ze.page))}function H(){ei.speed&&ke.cur!==(ei.speed>0?ke.end:ke.start)||be.stop(),ai=ii.init?y(H):0,ei.now=+new Date,ei.pos=ke.cur+(ei.now-ei.lastTime)/1e3*ei.speed,R(ii.init?ei.pos:I(ei.pos)),ii.init||ke.cur!==ke.dest||fe("moveEnd"),ei.lastTime=ei.now}function z(t,e,n){if("boolean"===r(e)&&(n=e,e=i),e===i)R(ke[t],n);else{if(ze&&"center"!==t)return;var o=be.getPos(e);o&&R(o[t],n,!ze)}}function q(t){return null!=t?l(t)?t>=0&&t<Pe.length?t:-1:Me.index(t):-1}function U(t){return q(l(t)&&0>t?t+Pe.length:t)}function V(t,e){var i=q(t);return!qe||0>i?!1:((Ze.active!==i||e)&&(Me.eq(Be.activeItem).removeClass(ve.activeClass),Me.eq(i).addClass(ve.activeClass),Ze.active=Be.activeItem=i,K(),fe("active",i)),i)}function W(t){t=u(l(t)?t:ke.dest,ke.start,ke.end);var e={},i=He?0:_e/2;if(!ye)for(var n=0,r=Ie.length;r>n;n++){if(t>=ke.end||n===Ie.length-1){e.activePage=Ie.length-1;break}if(t<=Ie[n]+i){e.activePage=n;break}}if(qe){for(var o=!1,s=!1,a=!1,c=0,h=Pe.length;h>c;c++)if(o===!1&&t<=Pe[c].start+Pe[c].half&&(o=c),a===!1&&t<=Pe[c].center+Pe[c].half&&(a=c),c===h-1||t<=Pe[c].end+Pe[c].half){s=c;break}e.firstItem=l(o)?o:0,e.centerItem=l(a)?a:e.firstItem,e.lastItem=l(s)?s:e.centerItem}return e}function Q(e){t.extend(Be,W(e))}function K(){var t=ke.dest<=ke.start,e=ke.dest>=ke.end,i=t?1:e?2:3;if(Ze.slideePosState!==i&&(Ze.slideePosState=i,Ge.is("button,input")&&Ge.prop("disabled",t),Xe.is("button,input")&&Xe.prop("disabled",e),Ge.add(Qe)[t?"addClass":"removeClass"](ve.disabledClass),Xe.add(We)[e?"addClass":"removeClass"](ve.disabledClass)),Ze.fwdbwdState!==i&&ii.released&&(Ze.fwdbwdState=i,Qe.is("button,input")&&Qe.prop("disabled",t),We.is("button,input")&&We.prop("disabled",e)),qe){var n=0===Be.activeItem,r=Be.activeItem>=Pe.length-1,o=n?1:r?2:3;Ze.itemsButtonState!==o&&(Ze.itemsButtonState=o,Ke.is("button,input")&&Ke.prop("disabled",n),Ye.is("button,input")&&Ye.prop("disabled",r),Ke[n?"addClass":"removeClass"](ve.disabledClass),Ye[r?"addClass":"removeClass"](ve.disabledClass))}}function Y(t,e,i){if(t=U(t),e=U(e),t>-1&&e>-1&&t!==e&&(!i||e!==t-1)&&(i||e!==t+1)){Me.eq(t)[i?"insertAfter":"insertBefore"](Pe[e].el);var n=e>t?t:i?e:e-1,r=t>e?t:i?e+1:e,o=t>e;t===Be.activeItem?Ze.active=Be.activeItem=i?o?e+1:e:o?e:e-1:Be.activeItem>n&&Be.activeItem<r&&(Ze.active=Be.activeItem+=o?1:-1),j()}}function G(t,e){for(var i=0,n=Je[t].length;n>i;i++)if(Je[t][i]===e)return i;return-1}function X(){ii.released&&!be.isPaused&&be.resume()}function J(t){return I(u(t,Se.start,Se.end)/Se.end*(ke.end-ke.start))+ke.start}function Z(){ii.history[0]=ii.history[1],ii.history[1]=ii.history[2],ii.history[2]=ii.history[3],ii.history[3]=ii.delta}function te(t){ii.released=0,ii.source=t,ii.slidee="slidee"===t}function ee(e){var i="touchstart"===e.type,n=e.data.source,r="slidee"===n;ii.init||!i&&re(e.target)||("handle"!==n||ve.dragHandle&&Se.start!==Se.end)&&(!r||(i?ve.touchDragging:ve.mouseDragging&&e.which<2))&&(i||o(e),te(n),ii.init=0,ii.$source=t(e.target),ii.touch=i,ii.pointer=i?e.originalEvent.touches[0]:e,ii.initX=ii.pointer.pageX,ii.initY=ii.pointer.pageY,ii.initPos=r?ke.cur:Se.cur,ii.start=+new Date,ii.time=0,ii.path=0,ii.delta=0,ii.locked=0,ii.history=[0,0,0,0],ii.pathToLock=r?i?30:10:0,w.on(i?C:_,ie),be.pause(1),(r?xe:Te).addClass(ve.draggedClass),fe("moveStart"),r&&(oi=setInterval(Z,10)))}function ie(t){if(ii.released="mouseup"===t.type||"touchend"===t.type,ii.pointer=ii.touch?t.originalEvent[ii.released?"changedTouches":"touches"][0]:t,ii.pathX=ii.pointer.pageX-ii.initX,ii.pathY=ii.pointer.pageY-ii.initY,ii.path=D(N(ii.pathX,2)+N(ii.pathY,2)),ii.delta=ve.horizontal?ii.pathX:ii.pathY,!ii.init){if(!(ve.horizontal?S(ii.pathX)>S(ii.pathY):S(ii.pathX)<S(ii.pathY)))return ne();ii.init=1}o(t),!ii.locked&&ii.path>ii.pathToLock&&ii.slidee&&(ii.locked=1,ii.$source.on($,s)),ii.released&&(ne(),ve.releaseSwing&&ii.slidee&&(ii.swing=(ii.delta-ii.history[0])/40*300,ii.delta+=ii.swing,ii.tweese=S(ii.swing)>10)),R(ii.slidee?I(ii.initPos-ii.delta):J(ii.initPos+ii.delta))}function ne(){clearInterval(oi),w.off(ii.touch?C:_,ie),(ii.slidee?xe:Te).removeClass(ve.draggedClass),setTimeout(function(){ii.$source.off($,s)}),be.resume(1),ke.cur===ke.dest&&ii.init&&fe("moveEnd"),ii.init=0}function re(e){return~t.inArray(e.nodeName,E)||t(e).is(ve.interactive)}function oe(){be.stop(),w.off("mouseup",oe)}function se(t){switch(o(t),this){case We[0]:case Qe[0]:be.moveBy(We.is(this)?ve.moveBy:-ve.moveBy),w.on("mouseup",oe);break;case Ke[0]:be.prev();break;case Ye[0]:be.next();break;case Ge[0]:be.prevPage();break;case Xe[0]:be.nextPage()}}function ae(t){return ni.curDelta=(ve.horizontal?t.deltaY||t.deltaX:t.deltaY)||-t.wheelDelta,ni.curDelta/=1===t.deltaMode?3:100,qe?(f=+new Date,ni.last<f-ni.resetTime&&(ni.delta=0),ni.last=f,ni.delta+=ni.curDelta,S(ni.delta)<1?ni.finalDelta=0:(ni.finalDelta=I(ni.delta/1),ni.delta%=1),ni.finalDelta):ni.curDelta}function le(t){var e=+new Date;if(B+300>e)return void(B=e);if(ve.scrollBy&&ke.start!==ke.end){var i=ae(t.originalEvent);(ve.scrollTrap||i>0&&ke.dest<ke.end||0>i&&ke.dest>ke.start)&&o(t,1),be.slideBy(ve.scrollBy*i)}}function ce(t){ve.clickBar&&t.target===$e[0]&&(o(t),R(J((ve.horizontal?t.pageX-$e.offset().left:t.pageY-$e.offset().top)-Ae/2)))}function ue(t){if(ve.keyboardNavBy)switch(t.which){case ve.horizontal?37:38:o(t),be["pages"===ve.keyboardNavBy?"prevPage":"prev"]();break;case ve.horizontal?39:40:o(t),be["pages"===ve.keyboardNavBy?"nextPage":"next"]()}}function he(t){return re(this)?void t.stopPropagation():void(this.parentNode===xe[0]&&be.activate(this))}function de(){this.parentNode===De[0]&&be.activatePage(Ne.index(this))}function pe(t){ve.pauseOnHover&&be["mouseenter"===t.type?"pause":"resume"](2)}function fe(t,e){if(Je[t]){for(ge=Je[t].length,A.length=0,me=0;ge>me;me++)A.push(Je[t][me]);for(me=0;ge>me;me++)A[me].call(be,t,e)}}var me,ge,ve=t.extend({},n.defaults,m),be=this,ye=l(e),we=t(e),xe=we.children().eq(0),_e=0,Ce=0,ke={start:0,center:0,end:0,cur:0,dest:0},$e=t(ve.scrollBar).eq(0),Te=$e.children().eq(0),Ee=0,Ae=0,Se={start:0,end:0,cur:0},De=t(ve.pagesBar),Ne=0,Ie=[],Me=0,Pe=[],Be={firstItem:0,lastItem:0,centerItem:0,activeItem:-1,activePage:0},je=new h(we[0]),Re=new h(xe[0]),Le=new h($e[0]),Oe=new h(Te[0]),Fe="basic"===ve.itemNav,He="forceCentered"===ve.itemNav,ze="centered"===ve.itemNav||He,qe=!ye&&(Fe||ze||He),Ue=ve.scrollSource?t(ve.scrollSource):we,Ve=ve.dragSource?t(ve.dragSource):we,We=t(ve.forward),Qe=t(ve.backward),Ke=t(ve.prev),Ye=t(ve.next),Ge=t(ve.prevPage),Xe=t(ve.nextPage),Je={},Ze={},ti={},ei={},ii={released:1},ni={last:0,delta:0,resetTime:200},ri=0,oi=0,si=0,ai=0;ye||(e=we[0]),be.initialized=0,be.frame=e,be.slidee=xe[0],be.pos=ke,be.rel=Be,be.items=Pe,be.pages=Ie,be.isPaused=0,be.options=ve,be.dragging=ii,be.reload=j,be.getPos=function(t){if(qe){var e=q(t);return-1!==e?Pe[e]:!1}var i=xe.find(t).eq(0);if(i[0]){var n=ve.horizontal?i.offset().left-xe.offset().left:i.offset().top-xe.offset().top,r=i[ve.horizontal?"outerWidth":"outerHeight"]();return{start:n,center:n-_e/2+r/2,end:n-_e+r,size:r}}return!1},be.moveBy=function(t){ei.speed=t,!ii.init&&ei.speed&&ke.cur!==(ei.speed>0?ke.end:ke.start)&&(ei.lastTime=+new Date,ei.startPos=ke.cur,te("button"),ii.init=1,fe("moveStart"),b(ai),H())},be.stop=function(){"button"===ii.source&&(ii.init=0,ii.released=1)},be.prev=function(){be.activate(Be.activeItem-1)},be.next=function(){be.activate(Be.activeItem+1)},be.prevPage=function(){be.activatePage(Be.activePage-1)},be.nextPage=function(){be.activatePage(Be.activePage+1)},be.slideBy=function(t,e){t&&(qe?be[ze?"toCenter":"toStart"](u((ze?Be.centerItem:Be.firstItem)+ve.scrollBy*t,0,Pe.length)):R(ke.dest+t,e))},be.slideTo=function(t,e){R(t,e)},be.toStart=function(t,e){z("start",t,e)},be.toEnd=function(t,e){z("end",t,e)},be.toCenter=function(t,e){z("center",t,e)},be.getIndex=q,be.activate=function(t,e){var i=V(t);ve.smart&&i!==!1&&(ze?be.toCenter(i,e):i>=Be.lastItem?be.toStart(i,e):i<=Be.firstItem?be.toEnd(i,e):X())},be.activatePage=function(t,e){l(t)&&R(Ie[u(t,0,Ie.length-1)],e)},be.resume=function(t){!ve.cycleBy||!ve.cycleInterval||"items"===ve.cycleBy&&!Pe[0]||t<be.isPaused||(be.isPaused=0,si?si=clearTimeout(si):fe("resume"),si=setTimeout(function(){switch(fe("cycle"),ve.cycleBy){case"items":be.activate(Be.activeItem>=Pe.length-1?0:Be.activeItem+1);break;case"pages":be.activatePage(Be.activePage>=Ie.length-1?0:Be.activePage+1)}},ve.cycleInterval))},be.pause=function(t){t<be.isPaused||(be.isPaused=t||100,si&&(si=clearTimeout(si),fe("pause")))},be.toggle=function(){be[si?"pause":"resume"]()},be.set=function(e,i){t.isPlainObject(e)?t.extend(ve,e):ve.hasOwnProperty(e)&&(ve[e]=i)},be.add=function(e,i){var n=t(e);qe?(null==i||!Pe[0]||i>=Pe.length?n.appendTo(xe):Pe.length&&n.insertBefore(Pe[i].el),i<=Be.activeItem&&(Ze.active=Be.activeItem+=n.length)):xe.append(n),j()},be.remove=function(e){if(qe){var i=U(e);if(i>-1){Me.eq(i).remove();var n=i===Be.activeItem;i<Be.activeItem&&(Ze.active=--Be.activeItem),j(),n&&(Ze.active=null,be.activate(Be.activeItem))}}else t(e).remove(),j()},be.moveAfter=function(t,e){Y(t,e,1)},be.moveBefore=function(t,e){Y(t,e)},be.on=function(t,e){if("object"===r(t))for(var i in t)t.hasOwnProperty(i)&&be.on(i,t[i]);else if("function"===r(e))for(var n=t.split(" "),o=0,s=n.length;s>o;o++)Je[n[o]]=Je[n[o]]||[],-1===G(n[o],e)&&Je[n[o]].push(e);else if("array"===r(e))for(var a=0,l=e.length;l>a;a++)be.on(t,e[a])},be.one=function(t,e){function i(){e.apply(be,arguments),be.off(t,i)}be.on(t,i)},be.off=function(t,e){if(e instanceof Array)for(var i=0,n=e.length;n>i;i++)be.off(t,e[i]);else for(var r=t.split(" "),o=0,s=r.length;s>o;o++)if(Je[r[o]]=Je[r[o]]||[],null==e)Je[r[o]].length=0;else{var a=G(r[o],e);-1!==a&&Je[r[o]].splice(a,1)}},be.destroy=function(){return w.add(Ue).add(Te).add($e).add(De).add(We).add(Qe).add(Ke).add(Ye).add(Ge).add(Xe).unbind("."+v),Ke.add(Ye).add(Ge).add(Xe).removeClass(ve.disabledClass),Me&&Me.eq(Be.activeItem).removeClass(ve.activeClass),De.empty(),ye||(we.unbind("."+v),je.restore(),Re.restore(),Le.restore(),Oe.restore(),t.removeData(e,v)),Pe.length=Ie.length=0,Ze={},be.initialized=0,be},be.init=function(){if(!be.initialized){be.on(g);var t=["overflow","position"],e=["position","webkitTransform","msTransform","transform","left","top","width","height"];je.save.apply(je,t),Le.save.apply(Le,t),Re.save.apply(Re,e),Oe.save.apply(Oe,e);var i=Te;return ye||(i=i.add(xe),we.css("overflow","hidden"),d||"static"!==we.css("position")||we.css("position","relative")),d?p&&i.css(d,p):("static"===$e.css("position")&&$e.css("position","relative"),i.css({position:"absolute"})),ve.forward&&We.on(T,se),ve.backward&&Qe.on(T,se),ve.prev&&Ke.on($,se),ve.next&&Ye.on($,se),ve.prevPage&&Ge.on($,se),ve.nextPage&&Xe.on($,se),Ue.on(k,le),$e[0]&&$e.on($,ce),qe&&ve.activateOn&&we.on(ve.activateOn+"."+v,"*",he),De[0]&&ve.activatePageOn&&De.on(ve.activatePageOn+"."+v,"*",de),Ve.on(x,{source:"slidee"},ee),Te&&Te.on(x,{source:"handle"},ee),w.bind("keydown."+v,ue),ye||(we.on("mouseenter."+v+" mouseleave."+v,pe),we.on("scroll."+v,a)),be.initialized=1,j(),ve.cycleBy&&!ye&&be[ve.startPaused?"pause":"resume"](),be}}}function r(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":typeof t}function o(t,e){t.preventDefault(),e&&t.stopPropagation()}function s(e){o(e,1),t(this).off(e.type,s)}function a(){this.scrollLeft=0,this.scrollTop=0}function l(t){return!isNaN(parseFloat(t))&&isFinite(t)}function c(t,e){return 0|I(String(t.css(e)).replace(/[^\-0-9.]/g,""))}function u(t,e,i){return e>t?e:t>i?i:t}function h(t){var e={};return e.style={},e.save=function(){if(t){for(var i=0;i<arguments.length;i++)e.style[arguments[i]]=t.style[arguments[i]];return e}},e.restore=function(){if(t){for(var i in e.style)e.style.hasOwnProperty(i)&&(t.style[i]=e.style[i]);return e}},e}var d,p,f,m="sly",g="Sly",v=m,b=e.cancelAnimationFrame||e.cancelRequestAnimationFrame,y=e.requestAnimationFrame,w=t(document),x="touchstart."+v+" mousedown."+v,_="mousemove."+v+" mouseup."+v,C="touchmove."+v+" touchend."+v,k=(document.implementation.hasFeature("Event.wheel","3.0")?"wheel.":"mousewheel.")+v,$="click."+v,T="mousedown."+v,E=["INPUT","SELECT","BUTTON","TEXTAREA"],A=[],S=Math.abs,D=Math.sqrt,N=Math.pow,I=Math.round,M=Math.max,P=Math.min,B=0;w.on(k,function(){B=+new Date}),function(t){function e(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-i)),r=setTimeout(t,n);return i=e,r}y=t.requestAnimationFrame||t.webkitRequestAnimationFrame||e;var i=(new Date).getTime(),n=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.clearTimeout;b=function(e){n.call(t,e)}}(window),function(){function t(t){for(var n=0,r=e.length;r>n;n++){var o=e[n]?e[n]+t.charAt(0).toUpperCase()+t.slice(1):t;if(null!=i.style[o])return o}}var e=["","webkit","moz","ms","o"],i=document.createElement("div");d=t("transform"),p=t("perspective")?"translateZ(0) ":""}(),e[g]=n,t.fn[m]=function(e,i){var o,s;return t.isPlainObject(e)||(("string"===r(e)||e===!1)&&(o=e===!1?"destroy":e,s=Array.prototype.slice.call(arguments,1)),e={}),this.each(function(r,a){var l=t.data(a,v);l||o?l&&o&&l[o]&&l[o].apply(l,s):l=t.data(a,v,new n(a,e,i).init())})},n.defaults={horizontal:!1,itemNav:null,itemSelector:null,smart:!1,activateOn:null,activateMiddle:!1,scrollSource:null,scrollBy:0,scrollHijack:300,scrollTrap:!1,dragSource:null,mouseDragging:!1,touchDragging:!1,releaseSwing:!1,swingSpeed:.2,elasticBounds:!1,interactive:null,scrollBar:null,dragHandle:!1,dynamicHandle:!1,minHandleSize:50,clickBar:!1,syncSpeed:.5,pagesBar:null,activatePageOn:null,pageBuilder:function(t){return"<li>"+(t+1)+"</li>"},forward:null,backward:null,prev:null,next:null,prevPage:null,nextPage:null,cycleBy:null,cycleInterval:5e3,pauseOnHover:!1,startPaused:!1,moveBy:300,speed:0,easing:"swing",startAt:0,keyboardNavBy:null,draggedClass:"dragged",activeClass:"active",disabledClass:"disabled"}}(jQuery,window),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t,e){var i=0,n=Array.prototype.slice,r=t.cleanData;t.cleanData=function(e){for(var i,n=0;null!=(i=e[n]);n++)try{t(i).triggerHandler("remove")}catch(o){}r(e)},t.widget=function(e,i,n){var r,o,s,a,l={},c=e.split(".")[0];e=e.split(".")[1],r=c+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][r.toLowerCase()]=function(e){return!!t.data(e,r)},t[c]=t[c]||{},o=t[c][e],s=t[c][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new s(t,e)},t.extend(s,o,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(n,function(e,n){return t.isFunction(n)?void(l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},r=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=r,e=n.apply(this,arguments),this._super=i,this._superApply=o,e}}()):void(l[e]=n)}),s.prototype=t.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix:e},l,{constructor:s,namespace:c,widgetName:e,widgetFullName:r}),o?(t.each(o._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete o._childConstructors):i._childConstructors.push(s),t.widget.bridge(e,s)},t.widget.extend=function(i){for(var r,o,s=n.call(arguments,1),a=0,l=s.length;l>a;a++)for(r in s[a])o=s[a][r],s[a].hasOwnProperty(r)&&o!==e&&(i[r]=t.isPlainObject(o)?t.isPlainObject(i[r])?t.widget.extend({},i[r],o):t.widget.extend({},o):o);return i},t.widget.bridge=function(i,r){var o=r.prototype.widgetFullName||i;t.fn[i]=function(s){var a="string"==typeof s,l=n.call(arguments,1),c=this;return s=!a&&l.length?t.widget.extend.apply(null,[s].concat(l)):s,this.each(a?function(){var n,r=t.data(this,o);return r?t.isFunction(r[s])&&"_"!==s.charAt(0)?(n=r[s].apply(r,l),n!==r&&n!==e?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+s+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+s+"'")}:function(){var e=t.data(this,o);e?e.option(s||{})._init():t.data(this,o,new r(s,this))}),c}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()
}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,n){var r,o,s,a=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(a={},r=i.split("."),i=r.shift(),r.length){for(o=a[i]=t.widget.extend({},this.options[i]),s=0;s<r.length-1;s++)o[r[s]]=o[r[s]]||{},o=o[r[s]];if(i=r.pop(),n===e)return o[i]===e?null:o[i];o[i]=n}else{if(n===e)return this.options[i]===e?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,i,n){var r,o=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=r=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,r=this.widget()),t.each(n,function(n,s){function a(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof s?o[s]:s).apply(o,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+o.eventNamespace,u=l[2];u?r.delegate(u,c,a):i.bind(c,a)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var r,o,s=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(r in o)r in i||(i[r]=o[r]);return this.element.trigger(i,n),!(t.isFunction(s)&&s.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,r,o){"string"==typeof r&&(r={effect:r});var s,a=r?r===!0||"number"==typeof r?i:r.effect||i:e;r=r||{},"number"==typeof r&&(r={duration:r}),s=!t.isEmptyObject(r),r.complete=o,r.delay&&n.delay(r.delay),s&&t.effects&&t.effects.effect[a]?n[e](r):a!==e&&n[a]?n[a](r.duration,r.easing,o):n.queue(function(i){t(this)[e](),o&&o.call(n[0]),i()})}})}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(t){"use strict";var e=0;t.ajaxTransport("iframe",function(i){if(i.async){var n,r,o;return{send:function(s,a){n=t('<form style="display:none;"></form>'),n.attr("accept-charset",i.formAcceptCharset),o=/\?/.test(i.url)?"&":"?","DELETE"===i.type?(i.url=i.url+o+"_method=DELETE",i.type="POST"):"PUT"===i.type?(i.url=i.url+o+"_method=PUT",i.type="POST"):"PATCH"===i.type&&(i.url=i.url+o+"_method=PATCH",i.type="POST"),r=t('<iframe src="javascript:false;" name="iframe-transport-'+(e+=1)+'"></iframe>').bind("load",function(){var e,o=t.isArray(i.paramName)?i.paramName:[i.paramName];r.unbind("load").bind("load",function(){var e;try{if(e=r.contents(),!e.length||!e[0].firstChild)throw new Error}catch(i){e=void 0}a(200,"success",{iframe:e}),t('<iframe src="javascript:false;"></iframe>').appendTo(n),n.remove()}),n.prop("target",r.prop("name")).prop("action",i.url).prop("method",i.type),i.formData&&t.each(i.formData,function(e,i){t('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(n)}),i.fileInput&&i.fileInput.length&&"POST"===i.type&&(e=i.fileInput.clone(),i.fileInput.after(function(t){return e[t]}),i.paramName&&i.fileInput.each(function(e){t(this).prop("name",o[e]||i.paramName)}),n.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),n.submit(),e&&e.length&&i.fileInput.each(function(i,n){var r=t(e[i]);t(n).prop("name",r.prop("name")),r.replaceWith(n)})}),n.append(r).appendTo(document.body)},abort:function(){r&&r.unbind("load").prop("src","javascript".concat(":false;")),n&&n.remove()}}}}),t.ajaxSetup({converters:{"iframe text":function(e){return e&&t(e[0].body).text()},"iframe json":function(e){return e&&t.parseJSON(t(e[0].body).text())},"iframe html":function(e){return e&&t(e[0].body).html()},"iframe script":function(e){return e&&t.globalEval(t(e[0].body).text())}}})}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],t):t(window.jQuery)}(function(t){"use strict";t.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),t.support.xhrFormDataFileUpload=!!window.FormData,t.propHooks.elements={get:function(e){return t.nodeName(e,"form")?t.grep(e.elements,function(e){return!t.nodeName(e,"input")||"file"!==e.type}):null}},t.widget("blueimp.fileupload",{options:{dropZone:t(document),pasteZone:t(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,formData:function(t){return t.serializeArray()},add:function(t,e){e.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_BitrateTimer:function(){this.timestamp=+new Date,this.loaded=0,this.bitrate=0,this.getBitrate=function(t,e,i){var n=t-this.timestamp;return(!this.bitrate||!i||n>i)&&(this.bitrate=(e-this.loaded)*(1e3/n)*8,this.loaded=e,this.timestamp=t),this.bitrate}},_isXHRUpload:function(e){return!e.forceIframeTransport&&(!e.multipart&&t.support.xhrFileUpload||t.support.xhrFormDataFileUpload)},_getFormData:function(e){var i;return"function"==typeof e.formData?e.formData(e.form):t.isArray(e.formData)?e.formData:e.formData?(i=[],t.each(e.formData,function(t,e){i.push({name:t,value:e})}),i):[]},_getTotal:function(e){var i=0;return t.each(e,function(t,e){i+=e.size||1}),i},_onProgress:function(t,e){if(t.lengthComputable){var i,n,r=+new Date;if(e._time&&e.progressInterval&&r-e._time<e.progressInterval&&t.loaded!==t.total)return;e._time=r,i=e.total||this._getTotal(e.files),n=parseInt(t.loaded/t.total*(e.chunkSize||i),10)+(e.uploadedBytes||0),this._loaded+=n-(e.loaded||e.uploadedBytes||0),e.lengthComputable=!0,e.loaded=n,e.total=i,e.bitrate=e._bitrateTimer.getBitrate(r,n,e.bitrateInterval),this._trigger("progress",t,e),this._trigger("progressall",t,{lengthComputable:!0,loaded:this._loaded,total:this._total,bitrate:this._bitrateTimer.getBitrate(r,this._loaded,e.bitrateInterval)})}},_initProgressListener:function(e){var i=this,n=e.xhr?e.xhr():t.ajaxSettings.xhr();n.upload&&(t(n.upload).bind("progress",function(t){var n=t.originalEvent;t.lengthComputable=n.lengthComputable,t.loaded=n.loaded,t.total=n.total,i._onProgress(t,e)}),e.xhr=function(){return n})},_initXHRData:function(e){var i,n=e.files[0],r=e.multipart||!t.support.xhrFileUpload,o=e.paramName[0];e.headers=e.headers||{},e.contentRange&&(e.headers["Content-Range"]=e.contentRange),r?t.support.xhrFormDataFileUpload&&(e.postMessage?(i=this._getFormData(e),e.blob?i.push({name:o,value:e.blob}):t.each(e.files,function(t,n){i.push({name:e.paramName[t]||o,value:n})})):(e.formData instanceof FormData?i=e.formData:(i=new FormData,t.each(this._getFormData(e),function(t,e){i.append(e.name,e.value)})),e.blob?(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(n.name)+'"',i.append(o,e.blob,n.name)):t.each(e.files,function(t,n){(window.Blob&&n instanceof Blob||window.File&&n instanceof File)&&i.append(e.paramName[t]||o,n,n.name)})),e.data=i):(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(n.name)+'"',e.contentType=n.type,e.data=e.blob||n),e.blob=null},_initIframeSettings:function(e){e.dataType="iframe "+(e.dataType||""),e.formData=this._getFormData(e),e.redirect&&t("<a></a>").prop("href",e.url).prop("host")!==location.host&&e.formData.push({name:e.redirectParamName||"redirect",value:e.redirect})},_initDataSettings:function(t){this._isXHRUpload(t)?(this._chunkedUpload(t,!0)||(t.data||this._initXHRData(t),this._initProgressListener(t)),t.postMessage&&(t.dataType="postmessage "+(t.dataType||""))):this._initIframeSettings(t,"iframe")},_getParamName:function(e){var i=t(e.fileInput),n=e.paramName;return n?t.isArray(n)||(n=[n]):(n=[],i.each(function(){for(var e=t(this),i=e.prop("name")||"files[]",r=(e.prop("files")||[1]).length;r;)n.push(i),r-=1}),n.length||(n=[i.prop("name")||"files[]"])),n},_initFormSettings:function(e){e.form&&e.form.length||(e.form=t(e.fileInput.prop("form")),e.form.length||(e.form=t(this.options.fileInput.prop("form")))),e.paramName=this._getParamName(e),e.url||(e.url=e.form.prop("action")||location.href),e.type=(e.type||e.form.prop("method")||"").toUpperCase(),"POST"!==e.type&&"PUT"!==e.type&&"PATCH"!==e.type&&(e.type="POST"),e.formAcceptCharset||(e.formAcceptCharset=e.form.attr("accept-charset"))},_getAJAXSettings:function(e){var i=t.extend({},this.options,e);return this._initFormSettings(i),this._initDataSettings(i),i},_enhancePromise:function(t){return t.success=t.done,t.error=t.fail,t.complete=t.always,t},_getXHRPromise:function(e,i,n){var r=t.Deferred(),o=r.promise();return i=i||this.options.context||o,e===!0?r.resolveWith(i,n):e===!1&&r.rejectWith(i,n),o.abort=r.promise,this._enhancePromise(o)},_getUploadedBytes:function(t){var e=t.getResponseHeader("Range"),i=e&&e.split("-"),n=i&&i.length>1&&parseInt(i[1],10);return n&&n+1},_chunkedUpload:function(e,i){var n,r,o=this,s=e.files[0],a=s.size,l=e.uploadedBytes=e.uploadedBytes||0,c=e.maxChunkSize||a,u=s.slice||s.webkitSlice||s.mozSlice,h=t.Deferred(),d=h.promise();return this._isXHRUpload(e)&&u&&(l||a>c)&&!e.data?i?!0:l>=a?(s.error="Uploaded bytes exceed file size",this._getXHRPromise(!1,e.context,[null,"error",s.error])):(r=function(){var i=t.extend({},e);i.blob=u.call(s,l,l+c,s.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+a,o._initXHRData(i),o._initProgressListener(i),n=(o._trigger("chunksend",null,i)!==!1&&t.ajax(i)||o._getXHRPromise(!1,i.context)).done(function(n,s,c){l=o._getUploadedBytes(c)||l+i.chunkSize,(!i.loaded||i.loaded<i.total)&&o._onProgress(t.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),e.uploadedBytes=i.uploadedBytes=l,i.result=n,i.textStatus=s,i.jqXHR=c,o._trigger("chunkdone",null,i),o._trigger("chunkalways",null,i),a>l?r():h.resolveWith(i.context,[n,s,c])}).fail(function(t,e,n){i.jqXHR=t,i.textStatus=e,i.errorThrown=n,o._trigger("chunkfail",null,i),o._trigger("chunkalways",null,i),h.rejectWith(i.context,[t,e,n])})},this._enhancePromise(d),d.abort=function(){return n.abort()},r(),d):!1},_beforeSend:function(t,e){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer),this._active+=1,this._loaded+=e.uploadedBytes||0,this._total+=this._getTotal(e.files)},_onDone:function(e,i,n,r){if(!this._isXHRUpload(r)||!r.loaded||r.loaded<r.total){var o=this._getTotal(r.files)||1;this._onProgress(t.Event("progress",{lengthComputable:!0,loaded:o,total:o}),r)}r.result=e,r.textStatus=i,r.jqXHR=n,this._trigger("done",null,r)},_onFail:function(t,e,i,n){n.jqXHR=t,n.textStatus=e,n.errorThrown=i,this._trigger("fail",null,n),n.recalculateProgress&&(this._loaded-=n.loaded||n.uploadedBytes||0,this._total-=n.total||this._getTotal(n.files))},_onAlways:function(t,e,i,n){this._active-=1,this._trigger("always",null,n),0===this._active&&(this._trigger("stop"),this._loaded=this._total=0,this._bitrateTimer=null)},_onSend:function(e,i){var n,r,o,s,a=this,l=a._getAJAXSettings(i),c=function(){return a._sending+=1,l._bitrateTimer=new a._BitrateTimer,n=n||((r||a._trigger("send",e,l)===!1)&&a._getXHRPromise(!1,l.context,r)||a._chunkedUpload(l)||t.ajax(l)).done(function(t,e,i){a._onDone(t,e,i,l)}).fail(function(t,e,i){a._onFail(t,e,i,l)}).always(function(t,e,i){if(a._sending-=1,a._onAlways(t,e,i,l),l.limitConcurrentUploads&&l.limitConcurrentUploads>a._sending)for(var n,r=a._slots.shift();r;){if(n=r.state?"pending"===r.state():!r.isRejected()){r.resolve();break}r=a._slots.shift()}})};return this._beforeSend(e,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=t.Deferred(),this._slots.push(o),s=o.pipe(c)):s=this._sequence=this._sequence.pipe(c,c),s.abort=function(){return r=[void 0,"abort","abort"],n?n.abort():(o&&o.rejectWith(l.context,r),c())},this._enhancePromise(s)):c()},_onAdd:function(e,i){var n,r,o,s,a=this,l=!0,c=t.extend({},this.options,i),u=c.limitMultiFileUploads,h=this._getParamName(c);if((c.singleFileUploads||u)&&this._isXHRUpload(c))if(!c.singleFileUploads&&u)for(o=[],n=[],s=0;s<i.files.length;s+=u)o.push(i.files.slice(s,s+u)),r=h.slice(s,s+u),r.length||(r=h),n.push(r);else n=h;else o=[i.files],n=[h];return i.originalFiles=i.files,t.each(o||i.files,function(r,s){var c=t.extend({},i);return c.files=o?s:[s],c.paramName=n[r],c.submit=function(){return c.jqXHR=this.jqXHR=a._trigger("submit",e,this)!==!1&&a._onSend(e,this),this.jqXHR},l=a._trigger("add",e,c)}),l},_replaceFileInput:function(e){var i=e.clone(!0);t("<form></form>").append(i)[0].reset(),e.after(i).detach(),t.cleanData(e.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(t,n){return n===e[0]?i[0]:n}),e[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(e,i){var n,r=this,o=t.Deferred(),s=function(t){t&&!t.entry&&(t.entry=e),o.resolve([t])};return i=i||"",e.isFile?e._file?(e._file.relativePath=i,o.resolve(e._file)):e.file(function(t){t.relativePath=i,o.resolve(t)},s):e.isDirectory?(n=e.createReader(),n.readEntries(function(t){r._handleFileTreeEntries(t,i+e.name+"/").done(function(t){o.resolve(t)}).fail(s)},s)):o.resolve([]),o.promise()},_handleFileTreeEntries:function(e,i){var n=this;return t.when.apply(t,t.map(e,function(t){return n._handleFileTreeEntry(t,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(e){e=e||{};var i=e.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(t.map(i,function(t){var e;return t.webkitGetAsEntry?(e=t.webkitGetAsEntry(),e&&(e._file=t.getAsFile()),e):t.getAsEntry()})):t.Deferred().resolve(t.makeArray(e.files)).promise()},_getSingleFileInputFiles:function(e){e=t(e);var i,n,r=e.prop("webkitEntries")||e.prop("entries");if(r&&r.length)return this._handleFileTreeEntries(r);if(i=t.makeArray(e.prop("files")),i.length)void 0===i[0].name&&i[0].fileName&&t.each(i,function(t,e){e.name=e.fileName,e.size=e.fileSize});else{if(n=e.prop("value"),!n)return t.Deferred().resolve([]).promise();i=[{name:n.replace(/^.*\\/,"")}]}return t.Deferred().resolve(i).promise()},_getFileInputFiles:function(e){return e instanceof t&&1!==e.length?t.when.apply(t,t.map(e,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(e)},_onChange:function(e){var i=this,n={fileInput:t(e.target),form:t(e.target.form)};this._getFileInputFiles(n.fileInput).always(function(t){n.files=t,i.options.replaceFileInput&&i._replaceFileInput(n.fileInput),i._trigger("change",e,n)!==!1&&i._onAdd(e,n)})},_onPaste:function(e){var i=e.originalEvent.clipboardData,n=i&&i.items||[],r={files:[]};return t.each(n,function(t,e){var i=e.getAsFile&&e.getAsFile();i&&r.files.push(i)}),this._trigger("paste",e,r)===!1||this._onAdd(e,r)===!1?!1:void 0},_onDrop:function(t){var e=this,i=t.dataTransfer=t.originalEvent.dataTransfer,n={};i&&i.files&&i.files.length&&t.preventDefault(),this._getDroppedFiles(i).always(function(i){n.files=i,e._trigger("drop",t,n)!==!1&&e._onAdd(t,n)})},_onDragOver:function(e){var i=e.dataTransfer=e.originalEvent.dataTransfer;return this._trigger("dragover",e)===!1?!1:void(i&&-1!==t.inArray("Files",i.types)&&(i.dropEffect="copy",e.preventDefault()))},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(e,i){var n=-1!==t.inArray(e,this._refreshOptionsList);n&&this._destroyEventHandlers(),this._super(e,i),n&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var e=this.options;void 0===e.fileInput?e.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):e.fileInput instanceof t||(e.fileInput=t(e.fileInput)),e.dropZone instanceof t||(e.dropZone=t(e.dropZone)),e.pasteZone instanceof t||(e.pasteZone=t(e.pasteZone))},_create:function(){var e=this.options;t.extend(e,t(this.element[0].cloneNode(!1)).data()),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=this._loaded=this._total=0,this._initEventHandlers()},_destroy:function(){this._destroyEventHandlers()},add:function(e){var i=this;e&&!this.options.disabled&&(e.fileInput&&!e.files?this._getFileInputFiles(e.fileInput).always(function(t){e.files=t,i._onAdd(null,e)}):(e.files=t.makeArray(e.files),this._onAdd(null,e)))},send:function(e){if(e&&!this.options.disabled){if(e.fileInput&&!e.files){var i,n,r=this,o=t.Deferred(),s=o.promise();return s.abort=function(){return n=!0,i?i.abort():(o.reject(null,"abort","abort"),s)},this._getFileInputFiles(e.fileInput).always(function(t){n||(e.files=t,i=r._onSend(null,e).then(function(t,e,i){o.resolve(t,e,i)},function(t,e,i){o.reject(t,e,i)}))}),this._enhancePromise(s)}if(e.files=t.makeArray(e.files),e.files.length)return this._onSend(null,e)}return this._getXHRPromise(!1,e&&e.context)}})}),function(t){"use strict";var e=function(t,i,n){var r,o,s=document.createElement("img");return s.onerror=i,s.onload=function(){!o||n&&n.noRevoke||e.revokeObjectURL(o),i(e.scale(s,n))},r=window.Blob&&t instanceof Blob||window.File&&t instanceof File?o=e.createObjectURL(t):t,r?(s.src=r,s):e.readFile(t,function(t){s.src=t})},i=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;e.scale=function(t,e){e=e||{};var i=document.createElement("canvas"),n=t.width,r=t.height,o=Math.max((e.minWidth||n)/n,(e.minHeight||r)/r);return o>1&&(n=parseInt(n*o,10),r=parseInt(r*o,10)),o=Math.min((e.maxWidth||n)/n,(e.maxHeight||r)/r),1>o&&(n=parseInt(n*o,10),r=parseInt(r*o,10)),t.getContext||e.canvas&&i.getContext?(i.width=n,i.height=r,i.getContext("2d").drawImage(t,0,0,n,r),i):(t.width=n,t.height=r,t)},e.createObjectURL=function(t){return i?i.createObjectURL(t):!1},e.revokeObjectURL=function(t){return i?i.revokeObjectURL(t):!1},e.readFile=function(t,e){if(window.FileReader&&FileReader.prototype.readAsDataURL){var i=new FileReader;return i.onload=function(t){e(t.target.result)},i.readAsDataURL(t),i}return!1},"function"==typeof define&&define.amd?define(function(){return e}):t.loadImage=e}(this),window.matchMedia||(window.matchMedia=function(){"use strict";var t=window.styleMedia||window.media;if(!t){var e=document.createElement("style"),i=document.getElementsByTagName("script")[0],n=null;e.type="text/css",e.id="matchmediajs-test",i.parentNode.insertBefore(e,i),n="getComputedStyle"in window&&window.getComputedStyle(e,null)||e.currentStyle,t={matchMedium:function(t){var i="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return e.styleSheet?e.styleSheet.cssText=i:e.textContent=i,"1px"===n.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}()),function(t){var e,i={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},n='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',r=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent","whiteSpace"],o=t(n).data("autosize",!0)[0];o.style.lineHeight="99px","99px"===t(o).css("lineHeight")&&r.push("lineHeight"),o.style.lineHeight="",t.fn.autosize=function(n){return this.length?(n=t.extend({},i,n||{}),o.parentNode!==document.body&&t(document.body).append(o),this.each(function(){function i(){var e,i=window.getComputedStyle?window.getComputedStyle(d,null):!1;i?(e=d.getBoundingClientRect().width,(0===e||"number"!=typeof e)&&(e=parseInt(i.width,10)),t.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(t,n){e-=parseInt(i[n],10)})):e=p.width(),o.style.width=Math.max(e,0)+"px"}function s(){var s={};if(e=d,o.className=n.className,o.id=n.id,c=parseInt(p.css("maxHeight"),10),t.each(r,function(t,e){s[e]=p.css(e)}),t(o).css(s).attr("wrap",p.attr("wrap")),i(),window.chrome){var a=d.style.width;d.style.width="0px";{d.offsetWidth}d.style.width=a}}function a(){var t,r;e!==d?s():i(),o.value=!d.value&&n.placeholder?p.attr("placeholder")||"":d.value,o.value+=n.append||"",o.style.overflowY=d.style.overflowY,r=parseInt(d.style.height,10),o.scrollTop=0,o.scrollTop=9e4,t=o.scrollTop,c&&t>c?(d.style.overflowY="scroll",t=c):(d.style.overflowY="hidden",u>t&&(t=u)),t+=f,r!==t&&(d.style.height=t+"px",m&&n.callback.call(d,d),p.trigger("autosize.resized"))}function l(){clearTimeout(h),h=setTimeout(function(){var t=p.width();t!==v&&(v=t,a())},parseInt(n.resizeDelay,10))}var c,u,h,d=this,p=t(d),f=0,m=t.isFunction(n.callback),g={height:d.style.height,overflow:d.style.overflow,overflowY:d.style.overflowY,wordWrap:d.style.wordWrap,resize:d.style.resize},v=p.width(),b=p.css("resize");p.data("autosize")||(p.data("autosize",!0),("border-box"===p.css("box-sizing")||"border-box"===p.css("-moz-box-sizing")||"border-box"===p.css("-webkit-box-sizing"))&&(f=p.outerHeight()-p.height()),u=Math.max(parseInt(p.css("minHeight"),10)-f||0,p.height()),p.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"}),"vertical"===b?p.css("resize","none"):"both"===b&&p.css("resize","horizontal"),"onpropertychange"in d?"oninput"in d?p.on("input.autosize keyup.autosize",a):p.on("propertychange.autosize",function(){"value"===event.propertyName&&a()}):p.on("input.autosize",a),n.resizeDelay!==!1&&t(window).on("resize.autosize",l),p.on("autosize.resize",a),p.on("autosize.resizeIncludeStyle",function(){e=null,a()}),p.on("autosize.destroy",function(){e=null,clearTimeout(h),t(window).off("resize",l),p.off("autosize").off(".autosize").css(g).removeData("autosize")}),a())})):this}}(jQuery||$),function(t,e,i,n){var r=t(e);t.fn.lazyload=function(o){function s(){var e=0;l.each(function(){var i=t(this);if(!c.skip_invisible||i.is(":visible"))if(t.abovethetop(this,c)||t.leftofbegin(this,c));else if(t.belowthefold(this,c)||t.rightoffold(this,c)){if(++e>c.failure_limit)return!1}else i.trigger("appear"),e=0})}var a,l=this,c={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:e,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return o&&(n!==o.failurelimit&&(o.failure_limit=o.failurelimit,delete o.failurelimit),n!==o.effectspeed&&(o.effect_speed=o.effectspeed,delete o.effectspeed),t.extend(c,o)),a=c.container===n||c.container===e?r:t(c.container),0===c.event.indexOf("scroll")&&(handler=function(){return c.delay>0?function(){a.lastScrollTime=(new Date).getTime(),setTimeout(function(){return(new Date).getTime()-a.lastScrollTime>=c.delay?s():void 0},c.delay)}:function(){return s()}}(),a.bind(c.event,handler)),this.each(function(){var e=this,i=t(e);e.loaded=!1,(i.attr("src")===n||i.attr("src")===!1)&&i.is("img")&&i.attr("src",c.placeholder),i.one("appear",function(){if(!this.loaded){if(c.appear){var n=l.length;c.appear.call(e,n,c)}t("<img />").bind("load",function(){var n=i.attr("data-"+c.data_attribute);i.hide(),i.is("img")?i.attr("src",n):i.css("background-image","url('"+n+"')"),i[c.effect](c.effect_speed),e.loaded=!0;var r=t.grep(l,function(t){return!t.loaded});if(l=t(r),c.load){var o=l.length;c.load.call(e,o,c)}}).attr("src",i.attr("data-"+c.data_attribute))}}),0!==c.event.indexOf("scroll")&&i.bind(c.event,function(){e.loaded||i.trigger("appear")})}),r.bind("resize",function(){s()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&r.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&l.each(function(){t(this).trigger("appear")})}),t(i).ready(function(){s()}),this},t.belowthefold=function(i,o){var s;return s=o.container===n||o.container===e?(e.innerHeight?e.innerHeight:r.height())+r.scrollTop():t(o.container).offset().top+t(o.container).height(),s<=t(i).offset().top-o.threshold},t.rightoffold=function(i,o){var s;return s=o.container===n||o.container===e?r.width()+r.scrollLeft():t(o.container).offset().left+t(o.container).width(),s<=t(i).offset().left-o.threshold},t.abovethetop=function(i,o){var s;return s=o.container===n||o.container===e?r.scrollTop():t(o.container).offset().top,s>=t(i).offset().top+o.threshold+t(i).height()},t.leftofbegin=function(i,o){var s;return s=o.container===n||o.container===e?r.scrollLeft():t(o.container).offset().left,s>=t(i).offset().left+o.threshold+t(i).width()},t.inviewport=function(e,i){return!(t.rightoffold(e,i)||t.leftofbegin(e,i)||t.belowthefold(e,i)||t.abovethetop(e,i))},t.extend(t.expr[":"],{"below-the-fold":function(e){return t.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return t.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!t.rightoffold(e,{threshold:0})},"in-viewport":function(e){return t.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return t.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!t.rightoffold(e,{threshold:0})}})}(jQuery,window,document),function(t,e){function i(e,i){var r,o,s,a=e.nodeName.toLowerCase();return"area"===a?(r=e.parentNode,o=r.name,e.href&&o&&"map"===r.nodeName.toLowerCase()?(s=t("img[usemap=#"+o+"]")[0],!!s&&n(s)):!1):(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||i:i)&&n(e)}function n(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var r=0,o=/^ui-id-\d+$/;t.ui=t.ui||{},t.ui.version||(t.extend(t.ui,{version:"1.10.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({_focus:t.fn.focus,focus:function(e,i){return"number"==typeof e?this.each(function(){var n=this;setTimeout(function(){t(n).focus(),i&&i.call(n)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var n,r,o=t(this[0]);o.length&&o[0]!==document;){if(n=o.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(r=parseInt(o.css("zIndex"),10),!isNaN(r)&&0!==r))return r;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var n=t.attr(e,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(e,!r)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,n){function r(e,i,n,r){return t.each(o,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),r&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var o="Width"===n?["Left","Right"]:["Top","Bottom"],s=n.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(i){return i===e?a["inner"+n].call(this):this.each(function(){t(this).css(s,r(this,i)+"px")})},t.fn["outer"+n]=function(e,i){return"number"!=typeof e?a["outer"+n].call(this,e):this.each(function(){t(this).css(s,r(this,e,!0,i)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,n){var r,o=t.ui[e].prototype;for(r in n)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([i,n[r]])},call:function(t,e,i){var n,r=t.plugins[e];if(r&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(n=0;n<r.length;n++)t.options[r[n][0]]&&r[n][1].apply(t.element,i)}},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",r=!1;return e[n]>0?!0:(e[n]=1,r=e[n]>0,e[n]=0,r)}}))}(jQuery),function(t,e){var i=0,n=Array.prototype.slice,r=t.cleanData;t.cleanData=function(e){for(var i,n=0;null!=(i=e[n]);n++)try{t(i).triggerHandler("remove")}catch(o){}r(e)},t.widget=function(e,i,n){var r,o,s,a,l={},c=e.split(".")[0];e=e.split(".")[1],r=c+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][r.toLowerCase()]=function(e){return!!t.data(e,r)},t[c]=t[c]||{},o=t[c][e],s=t[c][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new s(t,e)},t.extend(s,o,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(n,function(e,n){return t.isFunction(n)?void(l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},r=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=r,e=n.apply(this,arguments),this._super=i,this._superApply=o,e
}}()):void(l[e]=n)}),s.prototype=t.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix:e},l,{constructor:s,namespace:c,widgetName:e,widgetFullName:r}),o?(t.each(o._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete o._childConstructors):i._childConstructors.push(s),t.widget.bridge(e,s)},t.widget.extend=function(i){for(var r,o,s=n.call(arguments,1),a=0,l=s.length;l>a;a++)for(r in s[a])o=s[a][r],s[a].hasOwnProperty(r)&&o!==e&&(i[r]=t.isPlainObject(o)?t.isPlainObject(i[r])?t.widget.extend({},i[r],o):t.widget.extend({},o):o);return i},t.widget.bridge=function(i,r){var o=r.prototype.widgetFullName||i;t.fn[i]=function(s){var a="string"==typeof s,l=n.call(arguments,1),c=this;return s=!a&&l.length?t.widget.extend.apply(null,[s].concat(l)):s,this.each(a?function(){var n,r=t.data(this,o);return r?t.isFunction(r[s])&&"_"!==s.charAt(0)?(n=r[s].apply(r,l),n!==r&&n!==e?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+s+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+s+"'")}:function(){var e=t.data(this,o);e?e.option(s||{})._init():t.data(this,o,new r(s,this))}),c}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,n){var r,o,s,a=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(a={},r=i.split("."),i=r.shift(),r.length){for(o=a[i]=t.widget.extend({},this.options[i]),s=0;s<r.length-1;s++)o[r[s]]=o[r[s]]||{},o=o[r[s]];if(i=r.pop(),n===e)return o[i]===e?null:o[i];o[i]=n}else{if(n===e)return this.options[i]===e?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,i,n){var r,o=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=r=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,r=this.widget()),t.each(n,function(n,s){function a(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof s?o[s]:s).apply(o,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+o.eventNamespace,u=l[2];u?r.delegate(u,c,a):i.bind(c,a)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var r,o,s=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(r in o)r in i||(i[r]=o[r]);return this.element.trigger(i,n),!(t.isFunction(s)&&s.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,r,o){"string"==typeof r&&(r={effect:r});var s,a=r?r===!0||"number"==typeof r?i:r.effect||i:e;r=r||{},"number"==typeof r&&(r={duration:r}),s=!t.isEmptyObject(r),r.complete=o,r.delay&&n.delay(r.delay),s&&t.effects&&t.effects.effect[a]?n[e](r):a!==e&&n[a]?n[a](r.duration,r.easing,o):n.queue(function(i){t(this)[e](),o&&o.call(n[0]),i()})}})}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,r=1===i.which,o="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return r&&!o&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t){function e(t,e,i){return t>e&&e+i>t}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.0",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var n=null,r=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(n=t(this),!1):void 0}),t.data(e.target,o.widgetName+"-item")===o&&(n=t(e.target)),n&&(!this.options.handle||i||(t(this.options.handle,n).find("*").addBack().each(function(){this===e.target&&(r=!0)}),r))?(this.currentItem=n,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(e,i,n){var r,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&(t("body").css("cursor")&&(this._storedCursor=t("body").css("cursor")),t("body").css("cursor",o.cursor)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,n,r,o,s=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(e.pageY-t(document).scrollTop()<s.scrollSensitivity?a=t(document).scrollTop(t(document).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<s.scrollSensitivity&&(a=t(document).scrollTop(t(document).scrollTop()+s.scrollSpeed)),e.pageX-t(document).scrollLeft()<s.scrollSensitivity?a=t(document).scrollLeft(t(document).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<s.scrollSensitivity&&(a=t(document).scrollLeft(t(document).scrollLeft()+s.scrollSpeed))),a!==!1&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],r=n.item[0],o=this._intersectsWithPointer(n),o&&n.instance===this.currentContainer&&r!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==r&&!t.contains(this.placeholder[0],r)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],r):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(e,n),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var n=this,r=this.placeholder.offset();this.reverting=!0,t(this.helper).animate({left:r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft),top:r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){n._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&n.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},i.each(function(){n.push(t(e.item||this).attr(e.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,r=n+this.helperProportions.height,o=t.left,s=o+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,u=this.offset.click.left,h=n+c>a&&l>n+c&&e+u>o&&s>e+u;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?h:o<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<s&&a<n+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||e(this.positionAbs.left+this.offset.click.left,t.left,t.width),r=i&&n,o=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return r?this.floating?s&&"right"===s||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(t){var i=e(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=e(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&n||"left"===o&&!n:r&&("down"===r&&i||"up"===r&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i,n,r,o,s=[],a=[],l=this._connectWith();if(l&&e)for(i=l.length-1;i>=0;i--)for(r=t(l[i]),n=r.length-1;n>=0;n--)o=t.data(r[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&a.push([t.isFunction(o.options.items)?o.options.items.call(o.element):t(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(a.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;i>=0;i--)a[i][0].each(function(){s.push(this)});return t(s)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;i<e.length;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,n,r,o,s,a,l,c,u=this.items,h=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(r=t(d[i]),n=r.length-1;n>=0;n--)o=t.data(r[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(h.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=h.length-1;i>=0;i--)for(s=h[i][1],a=h[i][0],n=0,c=a.length;c>n;n++)l=t(a[n]),l.data(this.widgetName+"-item",s),u.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,r,o;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?t(this.options.toleranceElement,n.item):n.item,e||(n.width=r.outerWidth(),n.height=r.outerHeight()),o=r.offset(),n.left=o.left,n.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,n=e.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t(document.createElement(e.currentItem[0].nodeName)).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return i||(n.style.visibility="hidden"),n},update:function(t,r){(!i||n.forcePlaceholderSize)&&(r.height()||r.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(n.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),n.placeholder.update(e,e.placeholder)},_contactContainers:function(e){var i,n,r,o,s,a,l,c,u,h=null,d=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(h&&t.contains(this.containers[i].element[0],h.element[0]))continue;h=this.containers[i],d=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[d]._trigger("over",e,this._uiHash(this)),this.containers[d].containerCache.over=1;else{for(r=1e4,o=null,s=this.containers[d].floating?"left":"top",a=this.containers[d].floating?"width":"height",l=this.positionAbs[s]+this.offset.click[s],n=this.items.length-1;n>=0;n--)t.contains(this.containers[d].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(c=this.items[n].item.offset()[s],u=!1,Math.abs(c-l)>Math.abs(c+this.items[n][a]-l)&&(u=!0,c+=this.items[n][a]),Math.abs(c-l)<r&&(r=Math.abs(c-l),o=this.items[n],this.direction=u?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[d],o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[d].element,!0),this._trigger("change",e,this._uiHash()),this.containers[d]._trigger("change",e,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",e,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),("document"===r.containment||"window"===r.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(e=t(r.containment)[0],i=t(r.containment).offset(),n="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*n}},_generatePosition:function(e){var i,n,r=this.options,o=e.pageX,s=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),r.grid&&(i=this.originalPageY+Math.round((s-this.originalPageY)/r.grid[1])*r.grid[1],s=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-r.grid[1]:i+r.grid[1]:i,n=this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0],o=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-r.grid[0]:n+r.grid[0]:n)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!n)})},_clear:function(e,i){this.reverting=!1;var n,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!i&&r.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||i||r.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(i||(r.push(function(t){this._trigger("remove",t,this._uiHash())}),r.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)i||r.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this._storedCursor&&t("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){for(this._trigger("beforeStop",e,this._uiHash()),n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(i||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})}(jQuery),function(t,e,i){"use strict";e.infinitescroll=function(t,i,n){this.element=e(n),this._create(t,i)||(this.failed=!0)},e.infinitescroll.defaults={loading:{finished:i,finishedMsg:"<em>Congratulations, you've reached the end of the internet.</em>",img:"data:image/gif;base64,R0lGODlh3AATAPQeAPDy+MnQ6LW/4N3h8MzT6rjC4sTM5r/I5NHX7N7j8c7U6tvg8OLl8uXo9Ojr9b3G5MfP6Ovu9tPZ7PT1+vX2+tbb7vf4+8/W69jd7rC73vn5/O/x+K243ai02////wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQECgD/ACwAAAAA3AATAAAF/6AnjmRpnmiqrmzrvnAsz3Rt33iu73zv/8CgcEj0BAScpHLJbDqf0Kh0Sq1ar9isdioItAKGw+MAKYMFhbF63CW438f0mg1R2O8EuXj/aOPtaHx7fn96goR4hmuId4qDdX95c4+RBIGCB4yAjpmQhZN0YGYGXitdZBIVGAsLoq4BBKQDswm1CQRkcG6ytrYKubq8vbfAcMK9v7q7EMO1ycrHvsW6zcTKsczNz8HZw9vG3cjTsMIYqQkCLBwHCgsMDQ4RDAYIqfYSFxDxEfz88/X38Onr16+Bp4ADCco7eC8hQYMAEe57yNCew4IVBU7EGNDiRn8Z831cGLHhSIgdFf9chIeBg7oA7gjaWUWTVQAGE3LqBDCTlc9WOHfm7PkTqNCh54rePDqB6M+lR536hCpUqs2gVZM+xbrTqtGoWqdy1emValeXKzggYBBB5y1acFNZmEvXAoN2cGfJrTv3bl69Ffj2xZt3L1+/fw3XRVw4sGDGcR0fJhxZsF3KtBTThZxZ8mLMgC3fRatCbYMNFCzwLEqLgE4NsDWs/tvqdezZf13Hvk2A9Szdu2X3pg18N+68xXn7rh1c+PLksI/Dhe6cuO3ow3NfV92bdArTqC2Ebd3A8vjf5QWfH6Bg7Nz17c2fj69+fnq+8N2Lty+fuP78/eV2X13neIcCeBRwxorbZrA1ANoCDGrgoG8RTshahQ9iSKEEzUmYIYfNWViUhheCGJyIP5E4oom7WWjgCeBFAJNv1DVV01MAdJhhjdkplWNzO/5oXI846njjVEIqR2OS2B1pE5PVscajkxhMycqLJghQSwT40PgfAl4GqNSXYdZXJn5gSkmmmmJu1aZYb14V51do+pTOCmA40AqVCIhG5IJ9PvYnhIFOxmdqhpaI6GeHCtpooisuutmg+Eg62KOMKuqoTaXgicQWoIYq6qiklmoqFV0UoeqqrLbq6quwxirrrLTWauutJ4QAACH5BAUKABwALAcABADOAAsAAAX/IPd0D2dyRCoUp/k8gpHOKtseR9yiSmGbuBykler9XLAhkbDavXTL5k2oqFqNOxzUZPU5YYZd1XsD72rZpBjbeh52mSNnMSC8lwblKZGwi+0QfIJ8CncnCoCDgoVnBHmKfByGJimPkIwtiAeBkH6ZHJaKmCeVnKKTHIihg5KNq4uoqmEtcRUtEREMBggtEr4QDrjCuRC8h7/BwxENeicSF8DKy82pyNLMOxzWygzFmdvD2L3P0dze4+Xh1Arkyepi7dfFvvTtLQkZBC0T/FX3CRgCMOBHsJ+EHYQY7OinAGECgQsB+Lu3AOK+CewcWjwxQeJBihtNGHSoQOE+iQ3//4XkwBBhRZMcUS6YSXOAwIL8PGqEaSJCiYt9SNoCmnJPAgUVLChdaoFBURN8MAzl2PQphwQLfDFd6lTowglHve6rKpbjhK7/pG5VinZP1qkiz1rl4+tr2LRwWU64cFEihwEtZgbgR1UiHaMVvxpOSwBA37kzGz9e8G+B5MIEKLutOGEsAH2ATQwYfTmuX8aETWdGPZmiZcccNSzeTCA1Sw0bdiitC7LBWgu8jQr8HRzqgpK6gX88QbrB14z/kF+ELpwB8eVQj/JkqdylAudji/+ts3039vEEfK8Vz2dlvxZKG0CmbkKDBvllRd6fCzDvBLKBDSCeffhRJEFebFk1k/Mv9jVIoIJZSeBggwUaNeB+Qk34IE0cXlihcfRxkOAJFFhwGmKlmWDiakZhUJtnLBpnWWcnKaAZcxI0piFGGLBm1mc90kajSCveeBVWKeYEoU2wqeaQi0PetoE+rr14EpVC7oAbAUHqhYExbn2XHHsVqbcVew9tx8+XJKk5AZsqqdlddGpqAKdbAYBn1pcczmSTdWvdmZ17c1b3FZ99vnTdCRFM8OEcAhLwm1NdXnWcBBSMRWmfkWZqVlsmLIiAp/o1gGV2vpS4lalGYsUOqXrddcKCmK61aZ8SjEpUpVFVoCpTj4r661Km7kBHjrDyc1RAIQAAIfkEBQoAGwAsBwAEAM4ACwAABf/gtmUCd4goQQgFKj6PYKi0yrrbc8i4ohQt12EHcal+MNSQiCP8gigdz7iCioaCIvUmZLp8QBzW0EN2vSlCuDtFKaq4RyHzQLEKZNdiQDhRDVooCwkbfm59EAmKi4SGIm+AjIsKjhsqB4mSjT2IOIOUnICeCaB/mZKFNTSRmqVpmJqklSqskq6PfYYCDwYHDC4REQwGCBLGxxIQDsHMwhAIX8bKzcENgSLGF9PU1j3Sy9zX2NrgzQziChLk1BHWxcjf7N046tvN82715czn9Pryz6Ilc4ACj4EBOCZM8KEnAYYADBRKnACAYUMFv1wotIhCEcaJCisqwJFgAUSQGyX/kCSVUUTIdKMwJlyo0oXHlhskwrTJciZHEXsgaqS4s6PJiCAr1uzYU8kBBSgnWFqpoMJMUjGtDmUwkmfVmVypakWhEKvXsS4nhLW5wNjVroJIoc05wSzTr0PtiigpYe4EC2vj4iWrFu5euWIMRBhacaVJhYQBEFjA9jHjyQ0xEABwGceGAZYjY0YBOrRLCxUp29QM+bRkx5s7ZyYgVbTqwwti2ybJ+vLtDYpycyZbYOlptxdx0kV+V7lC5iJAyyRrwYKxAdiz82ng0/jnAdMJFz0cPi104Ec1Vj9/M6F173vKL/feXv156dw11tlqeMMnv4V5Ap53GmjQQH97nFfg+IFiucfgRX5Z8KAgbUlQ4IULIlghhhdOSB6AgX0IVn8eReghen3NRIBsRgnH4l4LuEidZBjwRpt6NM5WGwoW0KSjCwX6yJSMab2GwwAPDXfaBCtWpluRTQqC5JM5oUZAjUNS+VeOLWpJEQ7VYQANW0INJSZVDFSnZphjSikfmzE5N4EEbQI1QJmnWXCmHulRp2edwDXF43txukenJwvI9xyg9Q26Z3MzGUcBYFEChZh6DVTq34AU8Iflh51Sd+CnKFYQ6mmZkhqfBKfSxZWqA9DZanWjxmhrWwi0qtCrt/43K6WqVjjpmhIqgEGvculaGKklKstAACEAACH5BAUKABwALAcABADOAAsAAAX/ICdyQmaMYyAUqPgIBiHPxNpy79kqRXH8wAPsRmDdXpAWgWdEIYm2llCHqjVHU+jjJkwqBTecwItShMXkEfNWSh8e1NGAcLgpDGlRgk7EJ/6Ae3VKfoF/fDuFhohVeDeCfXkcCQqDVQcQhn+VNDOYmpSWaoqBlUSfmowjEA+iEAEGDRGztAwGCDcXEA60tXEiCrq8vREMEBLIyRLCxMWSHMzExnbRvQ2Sy7vN0zvVtNfU2tLY3rPgLdnDvca4VQS/Cpk3ABwSLQkYAQwT/P309vcI7OvXr94jBQMJ/nskkGA/BQBRLNDncAIAiDcG6LsxAWOLiQzmeURBKWSLCQbv/1F0eDGinJUKR47YY1IEgQASKk7Yc7ACRwZm7mHweRJoz59BJUogisKCUaFMR0x4SlJBVBFTk8pZivTR0K73rN5wqlXEAq5Fy3IYgHbEzQ0nLy4QSoCjXLoom96VOJEeCosK5n4kkFfqXjl94wa+l1gvAcGICbewAOAxY8l/Ky/QhAGz4cUkGxu2HNozhwMGBnCUqUdBg9UuW9eUynqSwLHIBujePef1ZGQZXcM+OFuEBeBhi3OYgLyqcuaxbT9vLkf4SeqyWxSQpKGB2gQpm1KdWbu72rPRzR9Ne2Nu9Kzr/1Jqj0yD/fvqP4aXOt5sW/5qsXXVcv1Nsp8IBUAmgswGF3llGgeU1YVXXKTN1FlhWFXW3gIE+DVChApysACHHo7Q4A35lLichh+ROBmLKAzgYmYEYDAhCgxKGOOMn4WR4kkDaoBBOxJtdNKQxFmg5JIWIBnQc07GaORfUY4AEkdV6jHlCEISSZ5yTXpp1pbGZbkWmcuZmQCaE6iJ0FhjMaDjTMsgZaNEHFRAQVp3bqXnZED1qYcECOz5V6BhSWCoVJQIKuKQi2KFKEkEFAqoAo7uYSmO3jk61wUUMKmknJ4SGimBmAa0qVQBhAAAIfkEBQoAGwAsBwAEAM4ACwAABf/gJm5FmRlEqhJC+bywgK5pO4rHI0D3pii22+Mg6/0Ej96weCMAk7cDkXf7lZTTnrMl7eaYoy10JN0ZFdco0XAuvKI6qkgVFJXYNwjkIBcNBgR8TQoGfRsJCRuCYYQQiI+ICosiCoGOkIiKfSl8mJkHZ4U9kZMbKaI3pKGXmJKrngmug4WwkhA0lrCBWgYFCCMQFwoQDRHGxwwGCBLMzRLEx8iGzMMO0cYNeCMKzBDW19lnF9DXDIY/48Xg093f0Q3s1dcR8OLe8+Y91OTv5wrj7o7B+7VNQqABIoRVCMBggsOHE36kSoCBIcSH3EbFangxogJYFi8CkJhqQciLJEf/LDDJEeJIBT0GsOwYUYJGBS0fjpQAMidGmyVP6sx4Y6VQhzs9VUwkwqaCCh0tmKoFtSMDmBOf9phg4SrVrROuasRQAaxXpVUhdsU6IsECZlvX3kwLUWzRt0BHOLTbNlbZG3vZinArge5Dvn7wbqtQkSYAAgtKmnSsYKVKo2AfW048uaPmG386i4Q8EQMBAIAnfB7xBxBqvapJ9zX9WgRS2YMpnvYMGdPK3aMjt/3dUcNI4blpj7iwkMFWDXDvSmgAlijrt9RTR78+PS6z1uAJZIe93Q8g5zcsWCi/4Y+C8bah5zUv3vv89uft30QP23punGCx5954oBBwnwYaNCDY/wYrsYeggnM9B2Fpf8GG2CEUVWhbWAtGouEGDy7Y4IEJVrbSiXghqGKIo7z1IVcXIkKWWR361QOLWWnIhwERpLaaCCee5iMBGJQmJGyPFTnbkfHVZGRtIGrg5HALEJAZbu39BuUEUmq1JJQIPtZilY5hGeSWsSk52G9XqsmgljdIcABytq13HyIM6RcUA+r1qZ4EBF3WHWB29tBgAzRhEGhig8KmqKFv8SeCeo+mgsF7YFXa1qWSbkDpom/mqR1PmHCqJ3fwNRVXjC7S6CZhFVCQ2lWvZiirhQq42SACt25IK2hv8TprriUV1usGgeka7LFcNmCldMLi6qZMgFLgpw16Cipb7bC1knXsBiEAACH5BAUKABsALAcABADOAAsAAAX/4FZsJPkUmUGsLCEUTywXglFuSg7fW1xAvNWLF6sFFcPb42C8EZCj24EJdCp2yoegWsolS0Uu6fmamg8n8YYcLU2bXSiRaXMGvqV6/KAeJAh8VgZqCX+BexCFioWAYgqNi4qAR4ORhRuHY408jAeUhAmYYiuVlpiflqGZa5CWkzc5fKmbbhIpsAoQDRG8vQwQCBLCwxK6vb5qwhfGxxENahvCEA7NzskSy7vNzzzK09W/PNHF1NvX2dXcN8K55cfh69Luveol3vO8zwi4Yhj+AQwmCBw4IYclDAAJDlQggVOChAoLKkgFkSCAHDwWLKhIEOONARsDKryogFPIiAUb/95gJNIiw4wnI778GFPhzBKFOAq8qLJEhQpiNArjMcHCmlTCUDIouTKBhApELSxFWiGiVKY4E2CAekPgUphDu0742nRrVLJZnyrFSqKQ2ohoSYAMW6IoDpNJ4bLdILTnAj8KUF7UeENjAKuDyxIgOuGiOI0EBBMgLNew5AUrDTMGsFixwBIaNCQuAXJB57qNJ2OWm2Aj4skwCQCIyNkhhtMkdsIuodE0AN4LJDRgfLPtn5YDLdBlraAByuUbBgxQwICxMOnYpVOPej074OFdlfc0TqC62OIbcppHjV4o+LrieWhfT8JC/I/T6W8oCl29vQ0XjLdBaA3s1RcPBO7lFvpX8BVoG4O5jTXRQRDuJ6FDTzEWF1/BCZhgbyAKE9qICYLloQYOFtahVRsWYlZ4KQJHlwHS/IYaZ6sZd9tmu5HQm2xi1UaTbzxYwJk/wBF5g5EEYOBZeEfGZmNdFyFZmZIR4jikbLThlh5kUUVJGmRT7sekkziRWUIACABk3T4qCsedgO4xhgGcY7q5pHJ4klBBTQRJ0CeHcoYHHUh6wgfdn9uJdSdMiebGJ0zUPTcoS286FCkrZxnYoYYKWLkBowhQoBeaOlZAgVhLidrXqg2GiqpQpZ4apwSwRtjqrB3muoF9BboaXKmshlqWqsWiGt2wphJkQbAU5hoCACH5BAUKABsALAcABADOAAsAAAX/oGFw2WZuT5oZROsSQnGaKjRvilI893MItlNOJ5v5gDcFrHhKIWcEYu/xFEqNv6B1N62aclysF7fsZYe5aOx2yL5aAUGSaT1oTYMBwQ5VGCAJgYIJCnx1gIOBhXdwiIl7d0p2iYGQUAQBjoOFSQR/lIQHnZ+Ue6OagqYzSqSJi5eTpTxGcjcSChANEbu8DBAIEsHBChe5vL13G7fFuscRDcnKuM3H0La3EA7Oz8kKEsXazr7Cw9/Gztar5uHHvte47MjktznZ2w0G1+D3BgirAqJmJMAQgMGEgwgn5Ei0gKDBhBMALGRYEOJBb5QcWlQo4cbAihZz3GgIMqFEBSM1/4ZEOWPAgpIIJXYU+PIhRG8ja1qU6VHlzZknJNQ6UanCjQkWCIGSUGEjAwVLjc44+DTqUQtPPS5gejUrTa5TJ3g9sWCr1BNUWZI161StiQUDmLYdGfesibQ3XMq1OPYthrwuA2yU2LBs2cBHIypYQPPlYAKFD5cVvNPtW8eVGbdcQADATsiNO4cFAPkvHpedPzc8kUcPgNGgZ5RNDZG05reoE9s2vSEP79MEGiQGy1qP8LA4ZcdtsJE48ONoLTBtTV0B9LsTnPceoIDBDQvS7W7vfjVY3q3eZ4A339J4eaAmKqU/sV58HvJh2RcnIBsDUw0ABqhBA5aV5V9XUFGiHfVeAiWwoFgJJrIXRH1tEMiDFV4oHoAEGlaWhgIGSGBO2nFomYY3mKjVglidaNYJGJDkWW2xxTfbjCbVaOGNqoX2GloR8ZeTaECS9pthRGJH2g0b3Autf-86hNANtteHD2GJUucfajCQBy5OOTQ25ZgUPvaVVQmbKh9510/qQpwXx3SQdfk8tZJOd5b6JJFplT3ZnmmX3qd5l1eg5q00HrtUkUn0AKaiGjClSAgKLYZcgWXwocGRcCFGCKwSB6ceqphwmYRUFYT/1WKlOdUpipmxW0mlCqHjYkAaeoZlqrqZ4qd+upQKaapn/AmgAegZ8KUtYtFAQQAgAh+QQFCgAbACwHAAQAzgALAAAF/+C2PUcmiCiZGUTrEkKBis8jQEquKwU5HyXIbEPgyX7BYa5wTNmEMwWsSXsqFbEh8DYs9mrgGjdK6GkPY5GOeU6ryz7UFopSQEzygOGhJBjoIgMDBAcBM0V/CYqLCQqFOwobiYyKjn2TlI6GKC2YjJZknouaZAcQlJUHl6eooJwKooobqoewrJSEmyKdt59NhRKFMxLEEA4RyMkMEAjDEhfGycqAG8TQx9IRDRDE3d3R2ctD1RLg0ttKEnbY5wZD3+zJ6M7X2RHi9Oby7u/r9g38UFjTh2xZJBEBMDAboogAgwkQI07IMUORwocSJwCgWDFBAIwZOaJIsOBjRogKJP8wTODw5ESVHVtm3AhzpEeQElOuNDlTZ0ycEUWKWFASqEahGwYUPbnxoAgEdlYSqDBkgoUNClAlIHbSAoOsqCRQnQHxq1axVb06FWFxLIqyaze0Tft1JVqyE+pWXMD1pF6bYl3+HTqAWNW8cRUFzmih0ZAAB2oGKukSAAGGRHWJgLiR6AylBLpuHKKUMlMCngMpDSAa9QIUggZVVvDaJobLeC3XZpvgNgCmtPcuwP3WgmXSq4do0DC6o2/guzcseECtUoO0hmcsGKDgOt7ssBd07wqesAIGZC1YIBa7PQHvb1+SFo+++HrJSQfB33xfav3i5eX3Hnb4CTJgegEq8tH/YQEOcIJzbm2G2EoYRLgBXFpVmFYDcREV4HIcnmUhiGBRouEMJGJGzHIspqgdXxK0yCKHRNXoIX4uorCdTyjkyNtdPWrA4Up82EbAbzMRxxZRR54WXVLDIRmRcag5d2R6ugl3ZXzNhTecchpMhIGVAKAYpgJjjsSklBEd99maZoo535ZvdamjBEpusJyctg3h4X8XqodBMx0tiNeg/oGJaKGABpogS40KSqiaEgBqlQWLUtqoVQnytekEjzo0hHqhRorppOZt2p923M2AAV+oBtpAnnPNoB6HaU6mAAIU+IXmi3j2mtFXuUoHKwXpzVrsjcgGOauKEjQrwq157hitGq2NoWmjh7z6Wmxb0m5w66+2VRAuXN/yFUAIACH5BAUKABsALAcABADOAAsAAAX/4CZuRiaM45MZqBgIRbs9AqTcuFLE7VHLOh7KB5ERdjJaEaU4ClO/lgKWjKKcMiJQ8KgumcieVdQMD8cbBeuAkkC6LYLhOxoQ2PF5Ys9PKPBMen17f0CCg4VSh32JV4t8jSNqEIOEgJKPlkYBlJWRInKdiJdkmQlvKAsLBxdABA4RsbIMBggtEhcQsLKxDBC2TAS6vLENdJLDxMZAubu8vjIbzcQRtMzJz79S08oQEt/guNiyy7fcvMbh4OezdAvGrakLAQwyABsELQkY9BP+//ckyPDD4J9BfAMh1GsBoImMeQUN+lMgUJ9CiRMa5msxoB9Gh/o8GmxYMZXIgxtR/yQ46S/gQAURR0pDwYDfywoyLPip5AdnCwsMFPBU4BPFhKBDi444quCmDKZOfwZ9KEGpCKgcN1jdALSpPqIYsabS+nSqvqplvYqQYAeDPgwKwjaMtiDl0oaqUAyo+3TuWwUAMPpVCfee0cEjVBGQq2ABx7oTWmQk4FglZMGN9fGVDMCuiH2AOVOu/PmyxM630gwM0CCn6q8LjVJ8GXvpa5Uwn95OTC/nNxkda1/dLSK475IjCD6dHbK1ZOa4hXP9DXs5chJ00UpVm5xo2qRpoxptwF2E4/IbJpB/SDz9+q9b1aNfQH08+p4a8uvX8B53fLP+ycAfemjsRUBgp1H20K+BghHgVgt1GXZXZpZ5lt4ECjxYR4ScUWiShEtZqBiIInRGWnERNnjiBglw+JyGnxUmGowsyiiZg189lNtPGACjV2+S9UjbU0JWF6SPvEk3QZEqsZYTk3UAaRSUnznJI5LmESCdBVSyaOWUWLK4I5gDUYVeV1T9l+FZClCAUVA09uSmRHBCKAECFEhW51ht6rnmWBXkaR+NjuHpJ40D3DmnQXt2F+ihZxlqVKOfQRACACH5BAUKABwALAcABADOAAsAAAX/ICdyUCkUo/g8mUG8MCGkKgspeC6j6XEIEBpBUeCNfECaglBcOVfJFK7YQwZHQ6JRZBUqTrSuVEuD3nI45pYjFuWKvjjSkCoRaBUMWxkwBGgJCXspQ36Bh4EEB0oKhoiBgyNLjo8Ki4QElIiWfJqHnISNEI+Ql5J9o6SgkqKkgqYihamPkW6oNBgSfiMMDQkGCBLCwxIQDhHIyQwQCGMKxsnKVyPCF9DREQ3MxMPX0cu4wt7J2uHWx9jlKd3o39MiuefYEcvNkuLt5O8c1ePI2tyELXGQwoGDAQf+iEC2xByDCRAjTlAgIUWCBRgCPJQ4AQBFXAs0coT40WLIjRxL/47AcHLkxIomRXL0CHPERZkpa4q4iVKiyp0tR/7kwHMkTUBBJR5dOCEBAVcKKtCAyOHpowXCpk7goABqBZdcvWploACpBKkpIJI1q5OD2rIWE0R1uTZu1LFwbWL9OlKuWb4c6+o9i3dEgw0RCGDUG9KlRw56gDY2qmCByZBaASi+TACA0TucAaTteCcy0ZuOK3N2vJlx58+LRQyY3Xm0ZsgjZg+oPQLi7dUcNXi0LOJw1pgNtB7XG6CBy+U75SYfPTSQAgZTNUDnQHt67wnbZyvwLgKiMN3oCZB3C76tdewpLFgIP2C88rbi4Y+QT3+8S5USMICZXWj1pkEDeUU3lOYGB3alSoEiMIjgX4WlgNF2EibIwQIXauWXSRg2SAOHIU5IIIMoZkhhWiJaiFVbKo6AQEgQXrTAazO1JhkBrBG3Y2Y6EsUhaGn95hprSN0oWpFE7rhkeaQBchGOEWnwEmc0uKWZj0LeuNV3W4Y2lZHFlQCSRjTIl8uZ+kG5HU/3sRlnTG2ytyadytnD3HrmuRcSn+0h1dycexIK1KCjYaCnjCCVqOFFJTZ5GkUUjESWaUIKU2lgCmAKKQIUjHapXRKE+t2og1VgankNYnohqKJ2CmKplso6GKz7WYCgqxeuyoF8u9IQAgA7",msg:null,msgText:"<em>Loading the next set of posts...</em>",selector:null,speed:"fast",start:i},state:{isDuringAjax:!1,isInvalidPage:!1,isDestroyed:!1,isDone:!1,isPaused:!1,currPage:1},debug:!1,behavior:i,binder:e(t),nextSelector:"div.navigation a:first",navSelector:"div.navigation",contentSelector:null,extraScrollPx:150,itemSelector:"div.post",animate:!1,pathParse:i,dataType:"html",appendCallback:!0,bufferPx:40,errorCallback:function(){},infid:0,pixelsFromNavToBottom:i,path:i,prefill:!1,maxPage:i},e.infinitescroll.prototype={_binding:function(t){var e=this,n=e.options;
return n.v="2.0b2.120520",n.behavior&&this["_binding_"+n.behavior]!==i?void this["_binding_"+n.behavior].call(this):"bind"!==t&&"unbind"!==t?(this._debug("Binding value  "+t+" not valid"),!1):("unbind"===t?this.options.binder.unbind("smartscroll.infscr."+e.options.infid):this.options.binder[t]("smartscroll.infscr."+e.options.infid,function(){e.scroll()}),void this._debug("Binding",t))},_create:function(n,r){var o=e.extend(!0,{},e.infinitescroll.defaults,n);this.options=o;var s=e(t),a=this;if(!a._validate(n))return!1;var l=e(o.nextSelector).attr("href");if(!l)return this._debug("Navigation selector not found"),!1;o.path=o.path||this._determinepath(l),o.contentSelector=o.contentSelector||this.element,o.loading.selector=o.loading.selector||o.contentSelector,o.loading.msg=o.loading.msg||e('<div id="infscr-loading"><img alt="Loading..." src="'+o.loading.img+'" /><div>'+o.loading.msgText+"</div></div>"),(new Image).src=o.loading.img,o.pixelsFromNavToBottom===i&&(o.pixelsFromNavToBottom=e(document).height()-e(o.navSelector).offset().top);var c=this;return o.loading.start=o.loading.start||function(){e(o.navSelector).hide(),o.loading.msg.appendTo(o.loading.selector).show(o.loading.speed,e.proxy(function(){this.beginAjax(o)},c))},o.loading.finished=o.loading.finished||function(){o.loading.msg.fadeOut(o.loading.speed)},o.callback=function(t,n,a){o.behavior&&t["_callback_"+o.behavior]!==i&&t["_callback_"+o.behavior].call(e(o.contentSelector)[0],n,a),r&&r.call(e(o.contentSelector)[0],n,o,a),o.prefill&&s.bind("resize.infinite-scroll",t._prefill)},n.debug&&(!Function.prototype.bind||"object"!=typeof console&&"function"!=typeof console||"object"!=typeof console.log||["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(t){console[t]=this.call(console[t],console)},Function.prototype.bind)),this._setup(),o.prefill&&this._prefill(),!0},_prefill:function(){function i(){return r.height()<=o.height()}var n=this,r=e(document),o=e(t);this._prefill=function(){i()&&n.scroll(),o.bind("resize.infinite-scroll",function(){i()&&(o.unbind("resize.infinite-scroll"),n.scroll())})},this._prefill()},_debug:function(){!0===this.options.debug&&("undefined"!=typeof console&&"function"==typeof console.log?console.log(1===Array.prototype.slice.call(arguments).length&&"string"==typeof Array.prototype.slice.call(arguments)[0]?Array.prototype.slice.call(arguments).toString():Array.prototype.slice.call(arguments)):Function.prototype.bind||"undefined"==typeof console||"object"!=typeof console.log||Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments)))},_determinepath:function(t){var e=this.options;if(e.behavior&&this["_determinepath_"+e.behavior]!==i)return this["_determinepath_"+e.behavior].call(this,t);if(e.pathParse)return this._debug("pathParse manual"),e.pathParse(t,this.options.state.currPage+1);if(t.match(/^(.*?)\b2\b(.*?$)/))t=t.match(/^(.*?)\b2\b(.*?$)/).slice(1);else if(t.match(/^(.*?)2(.*?$)/)){if(t.match(/^(.*?page=)2(\/.*|$)/))return t=t.match(/^(.*?page=)2(\/.*|$)/).slice(1);t=t.match(/^(.*?)2(.*?$)/).slice(1)}else{if(t.match(/^(.*?page=)1(\/.*|$)/))return t=t.match(/^(.*?page=)1(\/.*|$)/).slice(1);this._debug("Sorry, we couldn't parse your Next (Previous Posts) URL. Verify your the css selector points to the correct A tag. If you still get this error: yell, scream, and kindly ask for help at infinite-scroll.com."),e.state.isInvalidPage=!0}return this._debug("determinePath",t),t},_error:function(t){var e=this.options;return e.behavior&&this["_error_"+e.behavior]!==i?void this["_error_"+e.behavior].call(this,t):("destroy"!==t&&"end"!==t&&(t="unknown"),this._debug("Error",t),"end"===t&&this._showdonemsg(),e.state.isDone=!0,e.state.currPage=1,e.state.isPaused=!1,void this._binding("unbind"))},_loadcallback:function(n,r,o){var s,a=this.options,l=this.options.callback,c=a.state.isDone?"done":a.appendCallback?"append":"no-append";if(a.behavior&&this["_loadcallback_"+a.behavior]!==i)return void this["_loadcallback_"+a.behavior].call(this,n,r);switch(c){case"done":return this._showdonemsg(),!1;case"no-append":"html"===a.dataType&&(r="<div>"+r+"</div>",r=e(r).find(a.itemSelector));break;case"append":var u=n.children();if(0===u.length)return this._error("end");for(s=document.createDocumentFragment();n[0].firstChild;)s.appendChild(n[0].firstChild);this._debug("contentSelector",e(a.contentSelector)[0]),e(a.contentSelector)[0].appendChild(s),r=u.get()}if(a.loading.finished.call(e(a.contentSelector)[0],a),a.animate){var h=e(t).scrollTop()+e("#infscr-loading").height()+a.extraScrollPx+"px";e("html,body").animate({scrollTop:h},800,function(){a.state.isDuringAjax=!1})}a.animate||(a.state.isDuringAjax=!1),l(this,r,o),a.prefill&&this._prefill()},_nearbottom:function(){var n=this.options,r=0+e(document).height()-n.binder.scrollTop()-e(t).height();return n.behavior&&this["_nearbottom_"+n.behavior]!==i?this["_nearbottom_"+n.behavior].call(this):(this._debug("math:",r,n.pixelsFromNavToBottom),r-n.bufferPx<n.pixelsFromNavToBottom)},_pausing:function(t){var e=this.options;if(e.behavior&&this["_pausing_"+e.behavior]!==i)return void this["_pausing_"+e.behavior].call(this,t);switch("pause"!==t&&"resume"!==t&&null!==t&&this._debug("Invalid argument. Toggling pause value instead"),t=!t||"pause"!==t&&"resume"!==t?"toggle":t){case"pause":e.state.isPaused=!0;break;case"resume":e.state.isPaused=!1;break;case"toggle":e.state.isPaused=!e.state.isPaused}return this._debug("Paused",e.state.isPaused),!1},_setup:function(){var t=this.options;return t.behavior&&this["_setup_"+t.behavior]!==i?void this["_setup_"+t.behavior].call(this):(this._binding("bind"),!1)},_showdonemsg:function(){var t=this.options;return t.behavior&&this["_showdonemsg_"+t.behavior]!==i?void this["_showdonemsg_"+t.behavior].call(this):(t.loading.msg.find("img").hide().parent().find("div").html(t.finishedMsg).animate({opacity:1},2e3,function(){e(this).parent().fadeOut(t.loading.speed)}),void t.errorCallback.call(e(t.contentSelector)[0],"done"))},_validate:function(t){for(var i in t)if(i.indexOf&&i.indexOf("Selector")>-1&&0===e(t[i]).length)return this._debug("Your "+i+" found no elements."),!1;return!0},bind:function(){this._binding("bind")},destroy:function(){return this.options.state.isDestroyed=!0,this.options.loading.finished(),this._error("destroy")},pause:function(){this._pausing("pause")},resume:function(){this._pausing("resume")},beginAjax:function(t){var n,r,o,s,a=this,l=t.path;if(t.state.currPage++,t.maxPage!=i&&t.state.currPage>t.maxPage)return void this.destroy();switch(n=e(e(t.contentSelector).is("table")?"<tbody/>":"<div/>"),r="function"==typeof l?l(t.state.currPage):l.join(t.state.currPage),a._debug("heading into ajax",r),o="html"===t.dataType||"json"===t.dataType?t.dataType:"html+callback",t.appendCallback&&"html"===t.dataType&&(o+="+callback"),o){case"html+callback":a._debug("Using HTML via .load() method"),n.load(r+" "+t.itemSelector,i,function(t){a._loadcallback(n,t,r)});break;case"html":a._debug("Using "+o.toUpperCase()+" via $.ajax() method"),e.ajax({url:r,dataType:t.dataType,complete:function(t,e){s="undefined"!=typeof t.isResolved?t.isResolved():"success"===e||"notmodified"===e,s?a._loadcallback(n,t.responseText,r):a._error("end")}});break;case"json":a._debug("Using "+o.toUpperCase()+" via $.ajax() method"),e.ajax({dataType:"json",type:"GET",url:r,success:function(e,o,l){if(s="undefined"!=typeof l.isResolved?l.isResolved():"success"===o||"notmodified"===o,t.appendCallback)if(t.template!==i){var c=t.template(e);n.append(c),s?a._loadcallback(n,c):a._error("end")}else a._debug("template must be defined."),a._error("end");else s?a._loadcallback(n,e,r):a._error("end")},error:function(){a._debug("JSON ajax request failed."),a._error("end")}})}},retrieve:function(t){t=t||null;var n=this,r=n.options;return r.behavior&&this["retrieve_"+r.behavior]!==i?void this["retrieve_"+r.behavior].call(this,t):r.state.isDestroyed?(this._debug("Instance is destroyed"),!1):(r.state.isDuringAjax=!0,void r.loading.start.call(e(r.contentSelector)[0],r))},scroll:function(){var t=this.options,e=t.state;return t.behavior&&this["scroll_"+t.behavior]!==i?void this["scroll_"+t.behavior].call(this):void(e.isDuringAjax||e.isInvalidPage||e.isDone||e.isDestroyed||e.isPaused||this._nearbottom()&&this.retrieve())},toggle:function(){this._pausing()},unbind:function(){this._binding("unbind")},update:function(t){e.isPlainObject(t)&&(this.options=e.extend(!0,this.options,t))}},e.fn.infinitescroll=function(t,i){var n=typeof t;switch(n){case"string":var r=Array.prototype.slice.call(arguments,1);this.each(function(){var i=e.data(this,"infinitescroll");return i&&e.isFunction(i[t])&&"_"!==t.charAt(0)?void i[t].apply(i,r):!1});break;case"object":this.each(function(){var n=e.data(this,"infinitescroll");n?n.update(t):(n=new e.infinitescroll(t,i,this),n.failed||e.data(this,"infinitescroll",n))})}return this};var n,r=e.event;r.special.smartscroll={setup:function(){e(this).bind("scroll",r.special.smartscroll.handler)},teardown:function(){e(this).unbind("scroll",r.special.smartscroll.handler)},handler:function(t,i){var r=this,o=arguments;t.type="smartscroll",n&&clearTimeout(n),n=setTimeout(function(){e(r).trigger("smartscroll",o)},"execAsap"===i?0:100)}},e.fn.smartscroll=function(t){return t?this.bind("smartscroll",t):this.trigger("smartscroll",["execAsap"])}}(window,jQuery),function(t){function e(e){if(e.data&&("string"==typeof e.data&&(e.data={keys:e.data}),e.data.keys&&"string"==typeof e.data.keys)){var i=e.handler,n=e.data.keys.toLowerCase().split(" "),r=["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color"];e.handler=function(e){if(this===e.target||!(/textarea|select/i.test(e.target.nodeName)||t.inArray(e.target.type,r)>-1)){var o="keypress"!==e.type&&t.hotkeys.specialKeys[e.which],s=String.fromCharCode(e.which).toLowerCase(),a="",l={};e.altKey&&"alt"!==o&&(a+="alt+"),e.ctrlKey&&"ctrl"!==o&&(a+="ctrl+"),e.metaKey&&!e.ctrlKey&&"meta"!==o&&(a+="meta+"),e.shiftKey&&"shift"!==o&&(a+="shift+"),o?l[a+o]=!0:(l[a+s]=!0,l[a+t.hotkeys.shiftNums[s]]=!0,"shift+"===a&&(l[t.hotkeys.shiftNums[s]]=!0));for(var c=0,u=n.length;u>c;c++)if(l[n[c]])return i.apply(this,arguments)}}}}t.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",186:";",191:"/",220:"\\",222:"'",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},t.each(["keydown","keyup","keypress"],function(){t.event.special[this]={add:e}})}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(t){return t}function i(t){return decodeURIComponent(t.replace(r," "))}function n(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return o.json?JSON.parse(t):t}catch(e){}}var r=/\+/g,o=t.cookie=function(r,s,a){if(void 0!==s){if(a=t.extend({},o.defaults,a),"number"==typeof a.expires){var l=a.expires,c=a.expires=new Date;c.setDate(c.getDate()+l)}return s=o.json?JSON.stringify(s):String(s),document.cookie=[o.raw?r:encodeURIComponent(r),"=",o.raw?s:encodeURIComponent(s),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}for(var u=o.raw?e:i,h=document.cookie.split("; "),d=r?void 0:{},p=0,f=h.length;f>p;p++){var m=h[p].split("="),g=u(m.shift()),v=u(m.join("="));if(r&&r===g){d=n(v);break}r||(d[g]=n(v))}return d};o.defaults={},t.removeCookie=function(e,i){return void 0!==t.cookie(e)?(t.cookie(e,"",t.extend({},i,{expires:-1})),!0):!1}}),function(t){"use strict";var e=function(t,e,i,n){var r=y(i,e);r.addData(t),r.make(),n=n||0;var o=r.getModuleCount(),s=r.getModuleCount()+2*n,a=function(t,e){return t-=n,e-=n,0>t||t>=o||0>e||e>=o?!1:r.isDark(t,e)},l=function(t,e,i,n){var r=this.isDark,o=1/s;this.isDark=function(s,a){var l=a*o,c=s*o,u=l+o,h=c+o;return r(s,a)&&(t>u||l>i||e>h||c>n)}};this.text=t,this.level=e,this.version=i,this.moduleCount=s,this.isDark=a,this.addBlank=l},i=function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}(),n="[object Opera]"!==Object.prototype.toString.call(window.opera),r=function(t,i,n,r,o){n=Math.max(1,n||1),r=Math.min(40,r||40);for(var s=n;r>=s;s+=1)try{return new e(t,i,s,o)}catch(a){}},o=function(e,i,n){var r="bold "+n.labelsize*n.size+"px "+n.fontname,o=t("<canvas/>")[0].getContext("2d");o.font=r;var s=o.measureText(n.label).width,a=n.labelsize,l=s/n.size,c=(1-l)/2,u=(1-a)/2,h=c+l,d=u+a,p=.01;1===n.mode?e.addBlank(0,u-p,size,d+p):e.addBlank(c-p,u-p,h+p,d+p),i.fillStyle=n.fontcolor,i.textAlign="center",i.font=r,i.fillText(t("#label").val(),.5*n.size,.5*n.size+.3*n.labelsize*n.size)},s=function(t,e,i){var n=i.size,r=i.image.naturalWidth||1,o=i.image.naturalHeight||1,s=i.imagesize,a=s*r/o,l=(1-a)/2,c=(1-s)/2,u=l+a,h=c+s,d=.01;3===i.mode?t.addBlank(0,c-d,n,h+d):t.addBlank(l-d,c-d,u+d,h+d),e.drawImage(i.image,l*n,c*n,a*n,s*n)},a=function(t,e,i){i.bgColor&&(e.fillStyle=i.bgColor,e.fillRect(i.left,i.top,i.size,i.size));var n=i.mode;1===n||2===n?o(t,e,i):(3===n||4===n)&&s(t,e,i)},l=function(t,e,i,n,r,o,s,a){t.isDark(s,a)&&e.rect(n,r,o,o)},c=function(t,e,i,n,r,o,s,a,l,c){s?t.moveTo(e+o,i):t.moveTo(e,i),a?(t.lineTo(n-o,i),t.arcTo(n,i,n,r,o)):t.lineTo(n,i),l?(t.lineTo(n,r-o),t.arcTo(n,r,e,r,o)):t.lineTo(n,r),c?(t.lineTo(e+o,r),t.arcTo(e,r,e,i,o)):t.lineTo(e,r),s?(t.lineTo(e,i+o),t.arcTo(e,i,n,i,o)):t.lineTo(e,i)},u=function(t,e,i,n,r,o,s,a,l,c){s&&(t.moveTo(e+o,i),t.lineTo(e,i),t.lineTo(e,i+o),t.arcTo(e,i,e+o,i,o)),a&&(t.moveTo(n-o,i),t.lineTo(n,i),t.lineTo(n,i+o),t.arcTo(n,i,n-o,i,o)),l&&(t.moveTo(n-o,r),t.lineTo(n,r),t.lineTo(n,r-o),t.arcTo(n,r,n-o,r,o)),c&&(t.moveTo(e+o,r),t.lineTo(e,r),t.lineTo(e,r-o),t.arcTo(e,r,e+o,r,o))},h=function(t,e,i,n,r,o,s,a){var l=t.isDark,h=n+o,d=r+o,p=i.radius*o,f=s-1,m=s+1,g=a-1,v=a+1,b=l(s,a),y=l(f,g),w=l(f,a),x=l(f,v),_=l(s,v),C=l(m,v),k=l(m,a),$=l(m,g),T=l(s,g);b?c(e,n,r,h,d,p,!w&&!T,!w&&!_,!k&&!_,!k&&!T):u(e,n,r,h,d,p,w&&T&&y,w&&_&&x,k&&_&&C,k&&T&&$)},d=function(t,e,i){var r,o,s=t.moduleCount,a=i.size/s,c=l;for(n&&i.radius>0&&i.radius<=.5&&(c=h),e.beginPath(),r=0;s>r;r+=1)for(o=0;s>o;o+=1){var u=i.left+o*a,d=i.top+r*a,p=a;c(t,e,i,u,d,p,r,o)}e.fillStyle=i.color,e.fill()},p=function(e,i){var n=r(i.text,i.ecLevel,i.minVersion,i.maxVersion,i.quiet);if(!n)return null;var o=t(e).data("qrcode",n),s=o[0].getContext("2d");return a(n,s,i),d(n,s,i),o},f=function(e){var i=t("<canvas/>").attr("width",e.size).attr("height",e.size);return p(i,e)},m=function(e){return t("<img/>").attr("src",f(e)[0].toDataURL("image/png"))},g=function(e){var i=r(e.text,e.ecLevel,e.minVersion,e.maxVersion,e.quiet);if(!i)return null;var n,o,s=e.size,a=e.bgColor,l=Math.floor,c=i.moduleCount,u=l(s/c),h=l(.5*(s-u*c)),d={position:"relative",left:0,top:0,padding:0,margin:0,width:s,height:s},p={position:"absolute",padding:0,margin:0,width:u,height:u,"background-color":e.color},f=t("<div/>").data("qrcode",i).css(d);for(a&&f.css("background-color",a),n=0;c>n;n+=1)for(o=0;c>o;o+=1)i.isDark(n,o)&&t("<div/>").css(p).css({left:h+o*u,top:h+n*u}).appendTo(f);return f},v=function(t){return i&&"canvas"===t.render?f(t):i&&"image"===t.render?m(t):g(t)},b={render:"canvas",minVersion:1,maxVersion:40,ecLevel:"L",left:0,top:0,size:200,color:"#000",bgColor:null,text:"no text",radius:0,quiet:0,mode:0,label:"no label",labelsize:.1,fontname:"sans",fontcolor:"#000",image:null,imagesize:.1};t.fn.qrcode=function(e){var i=t.extend({},b,e);return this.each(function(){"canvas"===this.nodeName.toLowerCase()?p(this,i):t(this).append(v(i))})};var y=function(){function t(e,i){if("undefined"==typeof e.length)throw new Error(e.length+"/"+i);var n=function(){for(var t=0;t<e.length&&0==e[t];)t+=1;for(var n=new Array(e.length-t+i),r=0;r<e.length-t;r+=1)n[r]=e[r+t];return n}(),r={};return r.get=function(t){return n[t]},r.getLength=function(){return n.length},r.multiply=function(e){for(var i=new Array(r.getLength()+e.getLength()-1),n=0;n<r.getLength();n+=1)for(var o=0;o<e.getLength();o+=1)i[n+o]^=s.gexp(s.glog(r.get(n))+s.glog(e.get(o)));return t(i,0)},r.mod=function(e){if(r.getLength()-e.getLength()<0)return r;for(var i=s.glog(r.get(0))-s.glog(e.get(0)),n=new Array(r.getLength()),o=0;o<r.getLength();o+=1)n[o]=r.get(o);for(var o=0;o<e.getLength();o+=1)n[o]^=s.gexp(s.glog(e.get(o))+i);return t(n,0).mod(e)},r}var e=function(e,i){var r=236,s=17,u=e,h=n[i],d=null,p=0,m=null,g=new Array,v={},b=function(t,e){p=4*u+17,d=function(t){for(var e=new Array(t),i=0;t>i;i+=1){e[i]=new Array(t);for(var n=0;t>n;n+=1)e[i][n]=null}return e}(p),y(0,0),y(p-7,0),y(0,p-7),_(),x(),k(t,e),u>=7&&C(t),null==m&&(m=E(u,h,g)),$(m,e)},y=function(t,e){for(var i=-1;7>=i;i+=1)if(!(-1>=t+i||t+i>=p))for(var n=-1;7>=n;n+=1)-1>=e+n||e+n>=p||(d[t+i][e+n]=i>=0&&6>=i&&(0==n||6==n)||n>=0&&6>=n&&(0==i||6==i)||i>=2&&4>=i&&n>=2&&4>=n?!0:!1)},w=function(){for(var t=0,e=0,i=0;8>i;i+=1){b(!0,i);var n=o.getLostPoint(v);(0==i||t>n)&&(t=n,e=i)}return e},x=function(){for(var t=8;p-8>t;t+=1)null==d[t][6]&&(d[t][6]=t%2==0);for(var e=8;p-8>e;e+=1)null==d[6][e]&&(d[6][e]=e%2==0)},_=function(){for(var t=o.getPatternPosition(u),e=0;e<t.length;e+=1)for(var i=0;i<t.length;i+=1){var n=t[e],r=t[i];if(null==d[n][r])for(var s=-2;2>=s;s+=1)for(var a=-2;2>=a;a+=1)d[n+s][r+a]=-2==s||2==s||-2==a||2==a||0==s&&0==a?!0:!1}},C=function(t){for(var e=o.getBCHTypeNumber(u),i=0;18>i;i+=1){var n=!t&&1==(e>>i&1);d[Math.floor(i/3)][i%3+p-8-3]=n}for(var i=0;18>i;i+=1){var n=!t&&1==(e>>i&1);d[i%3+p-8-3][Math.floor(i/3)]=n}},k=function(t,e){for(var i=h<<3|e,n=o.getBCHTypeInfo(i),r=0;15>r;r+=1){var s=!t&&1==(n>>r&1);6>r?d[r][8]=s:8>r?d[r+1][8]=s:d[p-15+r][8]=s}for(var r=0;15>r;r+=1){var s=!t&&1==(n>>r&1);8>r?d[8][p-r-1]=s:9>r?d[8][15-r-1+1]=s:d[8][15-r-1]=s}d[p-8][8]=!t},$=function(t,e){for(var i=-1,n=p-1,r=7,s=0,a=o.getMaskFunction(e),l=p-1;l>0;l-=2)for(6==l&&(l-=1);;){for(var c=0;2>c;c+=1)if(null==d[n][l-c]){var u=!1;s<t.length&&(u=1==(t[s]>>>r&1));var h=a(n,l-c);h&&(u=!u),d[n][l-c]=u,r-=1,-1==r&&(s+=1,r=7)}if(n+=i,0>n||n>=p){n-=i,i=-i;break}}},T=function(e,i){for(var n=0,r=0,s=0,a=new Array(i.length),l=new Array(i.length),c=0;c<i.length;c+=1){var u=i[c].dataCount,h=i[c].totalCount-u;r=Math.max(r,u),s=Math.max(s,h),a[c]=new Array(u);for(var d=0;d<a[c].length;d+=1)a[c][d]=255&e.getBuffer()[d+n];n+=u;var p=o.getErrorCorrectPolynomial(h),f=t(a[c],p.getLength()-1),m=f.mod(p);l[c]=new Array(p.getLength()-1);for(var d=0;d<l[c].length;d+=1){var g=d+m.getLength()-l[c].length;l[c][d]=g>=0?m.get(g):0}}for(var v=0,d=0;d<i.length;d+=1)v+=i[d].totalCount;for(var b=new Array(v),y=0,d=0;r>d;d+=1)for(var c=0;c<i.length;c+=1)d<a[c].length&&(b[y]=a[c][d],y+=1);for(var d=0;s>d;d+=1)for(var c=0;c<i.length;c+=1)d<l[c].length&&(b[y]=l[c][d],y+=1);return b},E=function(t,e,i){for(var n=a.getRSBlocks(t,e),c=l(),u=0;u<i.length;u+=1){var h=i[u];c.put(h.getMode(),4),c.put(h.getLength(),o.getLengthInBits(h.getMode(),t)),h.write(c)}for(var d=0,u=0;u<n.length;u+=1)d+=n[u].dataCount;if(c.getLengthInBits()>8*d)throw new Error("code length overflow. ("+c.getLengthInBits()+">"+8*d+")");for(c.getLengthInBits()+4<=8*d&&c.put(0,4);c.getLengthInBits()%8!=0;)c.putBit(!1);for(;;){if(c.getLengthInBits()>=8*d)break;if(c.put(r,8),c.getLengthInBits()>=8*d)break;c.put(s,8)}return T(c,n)};return v.addData=function(t){var e=c(t);g.push(e),m=null},v.isDark=function(t,e){if(0>t||t>=p||0>e||e>=p)throw new Error(t+","+e);return d[t][e]},v.getModuleCount=function(){return p},v.make=function(){b(!1,w())},v.createTableTag=function(t,e){t=t||2,e="undefined"==typeof e?4*t:e;var i="";i+='<table style="',i+=" border-width: 0px; border-style: none;",i+=" border-collapse: collapse;",i+=" padding: 0px; margin: "+e+"px;",i+='">',i+="<tbody>";for(var n=0;n<v.getModuleCount();n+=1){i+="<tr>";for(var r=0;r<v.getModuleCount();r+=1)i+='<td style="',i+=" border-width: 0px; border-style: none;",i+=" border-collapse: collapse;",i+=" padding: 0px; margin: 0px;",i+=" width: "+t+"px;",i+=" height: "+t+"px;",i+=" background-color: ",i+=v.isDark(n,r)?"#000000":"#ffffff",i+=";",i+='"/>';i+="</tr>"}return i+="</tbody>",i+="</table>"},v.createImgTag=function(t,e){t=t||2,e="undefined"==typeof e?4*t:e;var i=v.getModuleCount()*t+2*e,n=e,r=i-e;return f(i,i,function(e,i){if(e>=n&&r>e&&i>=n&&r>i){var o=Math.floor((e-n)/t),s=Math.floor((i-n)/t);return v.isDark(s,o)?0:1}return 1})},v};e.stringToBytes=function(t){for(var e=new Array,i=0;i<t.length;i+=1){var n=t.charCodeAt(i);e.push(255&n)}return e},e.createStringToBytes=function(t,e){var i=function(){for(var i=d(t),n=function(){var t=i.read();if(-1==t)throw new Error;return t},r=0,o={};;){var s=i.read();if(-1==s)break;var a=n(),l=n(),c=n(),u=String.fromCharCode(s<<8|a),h=l<<8|c;o[u]=h,r+=1}if(r!=e)throw new Error(r+" != "+e);return o}(),n="?".charCodeAt(0);return function(t){for(var e=new Array,r=0;r<t.length;r+=1){var o=t.charCodeAt(r);if(128>o)e.push(o);else{var s=i[t.charAt(r)];"number"==typeof s?(255&s)==s?e.push(s):(e.push(s>>>8),e.push(255&s)):e.push(n)}}return e}};var i={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},n={L:1,M:0,Q:3,H:2},r={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},o=function(){var e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],n=1335,o=7973,a=21522,l={},c=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e};return l.getBCHTypeInfo=function(t){for(var e=t<<10;c(e)-c(n)>=0;)e^=n<<c(e)-c(n);return(t<<10|e)^a},l.getBCHTypeNumber=function(t){for(var e=t<<12;c(e)-c(o)>=0;)e^=o<<c(e)-c(o);return t<<12|e},l.getPatternPosition=function(t){return e[t-1]},l.getMaskFunction=function(t){switch(t){case r.PATTERN000:return function(t,e){return(t+e)%2==0};case r.PATTERN001:return function(t){return t%2==0};case r.PATTERN010:return function(t,e){return e%3==0};case r.PATTERN011:return function(t,e){return(t+e)%3==0};case r.PATTERN100:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case r.PATTERN101:return function(t,e){return t*e%2+t*e%3==0};case r.PATTERN110:return function(t,e){return(t*e%2+t*e%3)%2==0};case r.PATTERN111:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw new Error("bad maskPattern:"+t)}},l.getErrorCorrectPolynomial=function(e){for(var i=t([1],0),n=0;e>n;n+=1)i=i.multiply(t([1,s.gexp(n)],0));return i},l.getLengthInBits=function(t,e){if(e>=1&&10>e)switch(t){case i.MODE_NUMBER:return 10;case i.MODE_ALPHA_NUM:return 9;case i.MODE_8BIT_BYTE:return 8;case i.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(27>e)switch(t){case i.MODE_NUMBER:return 12;case i.MODE_ALPHA_NUM:return 11;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(41>e))throw new Error("type:"+e);switch(t){case i.MODE_NUMBER:return 14;case i.MODE_ALPHA_NUM:return 13;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},l.getLostPoint=function(t){for(var e=t.getModuleCount(),i=0,n=0;e>n;n+=1)for(var r=0;e>r;r+=1){for(var o=0,s=t.isDark(n,r),a=-1;1>=a;a+=1)if(!(0>n+a||n+a>=e))for(var l=-1;1>=l;l+=1)0>r+l||r+l>=e||(0!=a||0!=l)&&s==t.isDark(n+a,r+l)&&(o+=1);o>5&&(i+=3+o-5)}for(var n=0;e-1>n;n+=1)for(var r=0;e-1>r;r+=1){var c=0;t.isDark(n,r)&&(c+=1),t.isDark(n+1,r)&&(c+=1),t.isDark(n,r+1)&&(c+=1),t.isDark(n+1,r+1)&&(c+=1),(0==c||4==c)&&(i+=3)}for(var n=0;e>n;n+=1)for(var r=0;e-6>r;r+=1)t.isDark(n,r)&&!t.isDark(n,r+1)&&t.isDark(n,r+2)&&t.isDark(n,r+3)&&t.isDark(n,r+4)&&!t.isDark(n,r+5)&&t.isDark(n,r+6)&&(i+=40);for(var r=0;e>r;r+=1)for(var n=0;e-6>n;n+=1)t.isDark(n,r)&&!t.isDark(n+1,r)&&t.isDark(n+2,r)&&t.isDark(n+3,r)&&t.isDark(n+4,r)&&!t.isDark(n+5,r)&&t.isDark(n+6,r)&&(i+=40);for(var u=0,r=0;e>r;r+=1)for(var n=0;e>n;n+=1)t.isDark(n,r)&&(u+=1);var h=Math.abs(100*u/e/e-50)/5;return i+=10*h},l}(),s=function(){for(var t=new Array(256),e=new Array(256),i=0;8>i;i+=1)t[i]=1<<i;for(var i=8;256>i;i+=1)t[i]=t[i-4]^t[i-5]^t[i-6]^t[i-8];for(var i=0;255>i;i+=1)e[t[i]]=i;var n={};return n.glog=function(t){if(1>t)throw new Error("glog("+t+")");return e[t]},n.gexp=function(e){for(;0>e;)e+=255;for(;e>=256;)e-=255;return t[e]},n}(),a=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e=function(t,e){var i={};return i.totalCount=t,i.dataCount=e,i},i={},r=function(e,i){switch(i){case n.L:return t[4*(e-1)+0];case n.M:return t[4*(e-1)+1];case n.Q:return t[4*(e-1)+2];case n.H:return t[4*(e-1)+3];default:return void 0}};return i.getRSBlocks=function(t,i){var n=r(t,i);if("undefined"==typeof n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+i);for(var o=n.length/3,s=new Array,a=0;o>a;a+=1)for(var l=n[3*a+0],c=n[3*a+1],u=n[3*a+2],h=0;l>h;h+=1)s.push(e(c,u));return s},i}(),l=function(){var t=new Array,e=0,i={};return i.getBuffer=function(){return t},i.get=function(e){var i=Math.floor(e/8);return 1==(t[i]>>>7-e%8&1)},i.put=function(t,e){for(var n=0;e>n;n+=1)i.putBit(1==(t>>>e-n-1&1))},i.getLengthInBits=function(){return e},i.putBit=function(i){var n=Math.floor(e/8);t.length<=n&&t.push(0),i&&(t[n]|=128>>>e%8),e+=1},i},c=function(t){var n=i.MODE_8BIT_BYTE,r=e.stringToBytes(t),o={};return o.getMode=function(){return n},o.getLength=function(){return r.length},o.write=function(t){for(var e=0;e<r.length;e+=1)t.put(r[e],8)},o},u=function(){var t=new Array,e={};return e.writeByte=function(e){t.push(255&e)},e.writeShort=function(t){e.writeByte(t),e.writeByte(t>>>8)},e.writeBytes=function(t,i,n){i=i||0,n=n||t.length;for(var r=0;n>r;r+=1)e.writeByte(t[r+i])},e.writeString=function(t){for(var i=0;i<t.length;i+=1)e.writeByte(t.charCodeAt(i))},e.toByteArray=function(){return t},e.toString=function(){var e="";e+="[";for(var i=0;i<t.length;i+=1)i>0&&(e+=","),e+=t[i];return e+="]"},e},h=function(){var t=0,e=0,i=0,n="",r={},o=function(t){n+=String.fromCharCode(s(63&t))},s=function(t){if(0>t);else{if(26>t)return 65+t;if(52>t)return 97+(t-26);if(62>t)return 48+(t-52);if(62==t)return 43;if(63==t)return 47}throw new Error("n:"+t)};return r.writeByte=function(n){for(t=t<<8|255&n,e+=8,i+=1;e>=6;)o(t>>>e-6),e-=6},r.flush=function(){if(e>0&&(o(t<<6-e),t=0,e=0),i%3!=0)for(var r=3-i%3,s=0;r>s;s+=1)n+="="},r.toString=function(){return n},r},d=function(t){var e=t,i=0,n=0,r=0,o={};o.read=function(){for(;8>r;){if(i>=e.length){if(0==r)return-1;throw new Error("unexpected end of file./"+r)}var t=e.charAt(i);if(i+=1,"="==t)return r=0,-1;t.match(/^\s$/)||(n=n<<6|s(t.charCodeAt(0)),r+=6)}var o=n>>>r-8&255;return r-=8,o};var s=function(t){if(t>=65&&90>=t)return t-65;if(t>=97&&122>=t)return t-97+26;if(t>=48&&57>=t)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw new Error("c:"+t)};return o},p=function(t,e){var i=t,n=e,r=new Array(t*e),o={};o.setPixel=function(t,e,n){r[e*i+t]=n},o.write=function(t){t.writeString("GIF87a"),t.writeShort(i),t.writeShort(n),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(i),t.writeShort(n),t.writeByte(0);var e=2,r=a(e);t.writeByte(e);for(var o=0;r.length-o>255;)t.writeByte(255),t.writeBytes(r,o,255),o+=255;t.writeByte(r.length-o),t.writeBytes(r,o,r.length-o),t.writeByte(0),t.writeString(";")};var s=function(t){var e=t,i=0,n=0,r={};return r.write=function(t,r){if(t>>>r!=0)throw new Error("length over");for(;i+r>=8;)e.writeByte(255&(t<<i|n)),r-=8-i,t>>>=8-i,n=0,i=0;n=t<<i|n,i+=r},r.flush=function(){i>0&&e.writeByte(n)},r},a=function(t){for(var e=1<<t,i=(1<<t)+1,n=t+1,o=l(),a=0;e>a;a+=1)o.add(String.fromCharCode(a));o.add(String.fromCharCode(e)),o.add(String.fromCharCode(i));var c=u(),h=s(c);h.write(e,n);var d=0,p=String.fromCharCode(r[d]);for(d+=1;d<r.length;){var f=String.fromCharCode(r[d]);d+=1,o.contains(p+f)?p+=f:(h.write(o.indexOf(p),n),o.size()<4095&&(o.size()==1<<n&&(n+=1),o.add(p+f)),p=f)}return h.write(o.indexOf(p),n),h.write(i,n),h.flush(),c.toByteArray()},l=function(){var t={},e=0,i={};return i.add=function(n){if(i.contains(n))throw new Error("dup key:"+n);t[n]=e,e+=1},i.size=function(){return e},i.indexOf=function(e){return t[e]},i.contains=function(e){return"undefined"!=typeof t[e]},i};return o},f=function(t,e,i,n){for(var r=p(t,e),o=0;e>o;o+=1)for(var s=0;t>s;s+=1)r.setPixel(s,o,i(s,o));var a=u();r.write(a);for(var l=h(),c=a.toByteArray(),d=0;d<c.length;d+=1)l.writeByte(c[d]);l.flush();var f="";return f+="<img",f+=' src="',f+="data:image/gif;base64,",f+=l,f+='"',f+=' width="',f+=t,f+='"',f+=' height="',f+=e,f+='"',n&&(f+=' alt="',f+=n,f+='"'),f+="/>"};return e}()}(jQuery),function(t){t.fn.deserialize=function(e,i){var n=t(this),r={};return e=e.replace(/\+/g,"%20"),t.each(e.split("&"),function(){var t=this.split("="),e=decodeURIComponent(t[0]),i=t.length>1?decodeURIComponent(t[1]):null;e in r||(r[e]=[]),r[e].push(i)}),t.each(r,function(t,e){if(!i.except||-1==i.except.indexOf(t)){var r=n.find("[name='"+t+"']");
"true"!=r.attr("data-skip-deserialize")&&r.val(e)}}),t("input[data-skip-deserialize!='true']:checkbox:checked,input:radio:checked").each(function(){$(this).attr("name")in r||$(this).prop("checked",!1)}),this}}(jQuery),~function(t){var e,i,n,r,o,s,a,l,c,u,h,d,p,f,m=[];e={email:function(t){return/^(?:[a-z0-9]+[_\-+.]+)*[a-z0-9]+@(?:([a-z0-9]+-?)*[a-z0-9]+.)+([a-z]{2,})+$/i.test(t)},date:function(t){var e,i,n,r,o,s=/^([1-2]\d{3})([-/.])?(1[0-2]|0?[1-9])([-/.])?([1-2]\d|3[01]|0?[1-9])$/;return s.test(t)?(e=s.exec(t),n=+e[1],r=+e[3]-1,o=+e[5],i=new Date(n,r,o),n===i.getFullYear()&&r===i.getMonth()&&o===i.getDate()):!1},mobile:function(t){return/^1[3-9]\d{9}$/.test(t)},tel:function(t){return/^(?:(?:0\d{2,3}[- ]?[1-9]\d{6,7})|(?:[48]00[- ]?[1-9]\d{6}))$/.test(t)},number:function(e){var i=t.trim(this.$item.attr("min")),n=t.trim(this.$item.attr("max")),r=/^\-?(?:[1-9]\d*|0)(?:[.]\d+)?$/.test(e),o=+e,s=t.trim(this.$item.attr("step"));return i=""===i||isNaN(i)?o-1:+i,n=""===n||isNaN(n)?o+1:+n,s=""===s||isNaN(s)?0:+s,r&&(0>=s?o>=i&&n>=o:0===(o+i)%s&&o>=i&&n>=o)},range:function(t){return this.number(t)},url:function(t){var e,i="((https?|s?ftp|irc[6s]?|git|afp|telnet|smb):\\/\\/)?",n="([a-z0-9]\\w*(\\:[\\S]+)?\\@)?",r="(?:[a-z0-9]+(?:\\-[\\w]+)*\\.)*[a-z]{2,}",o="(:\\d{1,5})?",s="\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}",a="(\\/\\S*)?",l=[i,n,r,o,a],c=[i,n,s,o,a];return e=function(e){return new RegExp("^"+e.join("")+"$","i").test(t)},e(l)||e(c)},password:function(t){return this.text(t)},checkbox:function(){return e._checker("checkbox")},radio:function(){return e._checker("radio")},_checker:function(e){var i=this.$item.parents("form").eq(0),n="input[type="+e+'][name="'+this.$item.attr("name")+'"]',r=!1,o=t(n,i);return o.each(function(t,e){return e.checked&&!r?r=!0:void 0}),r},text:function(e){if((e=t.trim(e)).length){var i,n=parseInt(this.$item.attr("maxlength"),10),r=parseInt(this.$item.attr("minlength"),10);return(i=function(){var t=!0,i=e.length;return r&&(t=i>=r),n&&(t=t&&n>=i),t})()}}},h=function(e,i,n){var r=e.data(),o=r.url,s=r.method||"get",a=r.key||"key",l=d(e),c={};c[a]=l,t[s](o,c).success(function(t){var r=t?"IM VALIDED":"unvalid";return f.call(this,e,i,n,r)}).error(function(){})},p=function(e,i,n){var r="a"===e.data("aorb")?"b":"a",s=t("[data-aorb="+r+"]",e.parents("form").eq(0)),a=[e,i,n],l=[s,i,n],c=0;return c+=f.apply(this,a)?0:1,c+=f.apply(this,l)?0:1,c=c>0?(o.apply(this,a),o.apply(this,l),!1):f.apply(this,a.concat("unvalid"))},f=function(i,n,s,a){if(!i)return"DONT VALIDATE UNEXIST ELEMENT";var l,c,u,h,p;return l=i.attr("pattern"),l&&l.replace("\\","\\\\"),c=i.attr("type")||"text",c=e[c]?c:"text",u=t.trim(d(i)),p=i.data("event"),a=a?a:l?new RegExp(l).test(u)||"unvalid":e[c](u)||"unvalid","unvalid"===a&&o(i,n,s),/^(?:unvalid|empty)$/.test(a)?(h={$el:r.call(this,i,n,s,a),type:c,error:a},i.trigger("after:"+p,i),h):(o.call(this,i,n,s),i.trigger("after:"+p,i),!1)},i=function(e,i){return t(e,i)},d=function(t){return t.val()||(t.is("[contenteditable]")?t.text():"")},l=function(t,i,n){var r,o,s,a,l,c;return e.$item=t,s=t.attr("type"),a=d(t),r=t.data("url"),o=t.data("aorb"),c=t.data("event"),l=[t,i,n],c&&t.trigger("before:"+c,t),/^(?:radio|checkbox)$/.test(s)||o||e.text(a)?o?p.apply(this,l):r?h.apply(this,l):f.call(this,t,i,n):f.call(this,t,i,n,a.length?"unvalid":"empty")},c=function(e,i,n,r){var o,s=/^radio|checkbox/;t.each(e,function(e,a){t(a).on(s.test(a.type)||"SELECT"===a.tagName?"change blur":i,function(){var e=t(this);s.test(this.type)&&(e=t("input[type="+this.type+"][name="+this.name+"]",e.closest("form"))),e.each(function(){(o=l.call(this,t(this),n,r))&&m.push(o)})})})},a=function(e,i,n,r){return i&&!c.length?!0:(m=t.map(e,function(e){var i=l.call(null,t(e),n,r);return i?i:void 0}),c.length?m:!1)},u=function(e){var i,n;return(i=t.grep(m,function(t){return t.$el=e})[0])?(n=t.inArray(i,m),m.splice(n,1),m):void 0},n=function(t,e){return t.data("parent")?t.closest(t.data("parent")):e?t.parent():t},r=function(t,e,i,r){return n(t,i).addClass(e+" "+r)},o=function(t,e,i){return u.call(this,t),n(t,i).removeClass(e+" empty unvalid")},s=function(t){return t.attr("novalidate")||t.attr("novalidate","true")},t.fn.validator=function(e){var n=this,r=e||{},l=r.identifie||"[required]",u=r.error||"error",h=r.isErrorOnParent||!1,d=r.method||"blur",p=r.before||function(){return!0},f=r.after||function(){return!0},g=r.errorCallback||function(){},v=i(l,n);s(n),d&&c.call(this,v,d,u,h),n.on("focusin",l,function(){o.call(this,t(this),"error unvalid empty",h)}),n.on("submit",function(t){return p.call(this,v),a.call(this,v,d,u,h),m.length?(t.preventDefault(),g.call(this,m)):f.call(this,t,v)})}}(window.jQuery||window.Zepto),function(t){"use strict";function e(e,i){this.itemsArray=[],this.$element=t(e),this.$element.hide(),this.isSelect="SELECT"===e.tagName,this.multiple=this.isSelect&&e.hasAttribute("multiple"),this.objectItems=i&&i.itemValue,this.placeholderText=e.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=t('<div class="bootstrap-tagsinput"></div>'),this.$input=t('<input size="'+this.inputSize+'" type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.after(this.$container),this.build(i)}function i(t,e){if("function"!=typeof t[e]){var i=t[e];t[e]=function(t){return t[i]}}}function n(t,e){if("function"!=typeof t[e]){var i=t[e];t[e]=function(){return i}}}function r(t){return t?a.text(t).html():""}function o(t){var e=0;if(document.selection){t.focus();var i=document.selection.createRange();i.moveStart("character",-t.value.length),e=i.text.length}else(t.selectionStart||"0"==t.selectionStart)&&(e=t.selectionStart);return e}var s={tagClass:function(){return"label label-info"},itemValue:function(t){return t?t.toString():t},itemText:function(t){return this.itemValue(t)},freeInput:!0,maxTags:void 0,confirmKeys:[13],onTagExists:function(t,e){e.hide().fadeIn()}};e.prototype={constructor:e,add:function(e,i){var n=this;if(!(n.options.maxTags&&n.itemsArray.length>=n.options.maxTags||e!==!1&&!e)){if("object"==typeof e&&!n.objectItems)throw"Can't add objects when itemValue option is not set";if(!e.toString().match(/^\s*$/)){if(n.isSelect&&!n.multiple&&n.itemsArray.length>0&&n.remove(n.itemsArray[0]),"string"==typeof e&&"INPUT"===this.$element[0].tagName){var o=e.split(",");if(o.length>1){for(var s=0;s<o.length;s++)this.add(o[s],!0);return void(i||n.pushVal())}}var a=n.options.itemValue(e),l=n.options.itemText(e),c=n.options.tagClass(e),u=t.grep(n.itemsArray,function(t){return n.options.itemValue(t)===a})[0];if(u){if(n.options.onTagExists){var h=t(".tag",n.$container).filter(function(){return t(this).data("item")===u});n.options.onTagExists(e,h)}}else{n.itemsArray.push(e);var d=t('<span class="tag '+r(c)+'">'+r(l)+'<span data-role="remove"></span></span>');if(d.data("item",e),n.findInputWrapper().before(d),d.after(" "),n.isSelect&&!t('option[value="'+escape(a)+'"]',n.$element)[0]){var p=t("<option selected>"+r(l)+"</option>");p.data("item",e),p.attr("value",a),n.$element.append(p)}i||n.pushVal(),n.options.maxTags===n.itemsArray.length&&n.$container.addClass("bootstrap-tagsinput-max"),n.$element.trigger(t.Event("itemAdded",{item:e}))}}}},remove:function(e,i){var n=this;n.objectItems&&(e="object"==typeof e?t.grep(n.itemsArray,function(t){return n.options.itemValue(t)==n.options.itemValue(e)})[0]:t.grep(n.itemsArray,function(t){return n.options.itemValue(t)==e})[0]),e&&(t(".tag",n.$container).filter(function(){return t(this).data("item")===e}).remove(),t("option",n.$element).filter(function(){return t(this).data("item")===e}).remove(),n.itemsArray.splice(t.inArray(e,n.itemsArray),1)),i||n.pushVal(),n.options.maxTags>n.itemsArray.length&&n.$container.removeClass("bootstrap-tagsinput-max"),n.$element.trigger(t.Event("itemRemoved",{item:e}))},removeAll:function(){var e=this;for(t(".tag",e.$container).remove(),t("option",e.$element).remove();e.itemsArray.length>0;)e.itemsArray.pop();e.pushVal(),e.options.maxTags&&!this.isEnabled()&&this.enable()},refresh:function(){var e=this;t(".tag",e.$container).each(function(){var i=t(this),n=i.data("item"),o=e.options.itemValue(n),s=e.options.itemText(n),a=e.options.tagClass(n);if(i.attr("class",null),i.addClass("tag "+r(a)),i.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=r(s),e.isSelect){var l=t("option",e.$element).filter(function(){return t(this).data("item")===n});l.attr("value",o)}})},items:function(){return this.itemsArray},pushVal:function(){var e=this,i=t.map(e.items(),function(t){return e.options.itemValue(t).toString()});e.$element.val(i,!0).trigger("change")},build:function(e){var r=this;r.options=t.extend({},s,e);var a=r.options.typeahead||{};r.objectItems&&(r.options.freeInput=!1),i(r.options,"itemValue"),i(r.options,"itemText"),i(r.options,"tagClass"),r.options.source&&(a.source=r.options.source),a.source&&t.fn.typeahead&&(n(a,"source"),r.$input.typeahead({source:function(e,i){function n(t){for(var e=[],n=0;n<t.length;n++){var s=r.options.itemText(t[n]);o[s]=t[n],e.push(s)}i(e)}this.map={};var o=this.map,s=a.source(e);t.isFunction(s.success)?s.success(n):t.when(s).then(n)},updater:function(t){r.add(this.map[t])},matcher:function(t){return-1!==t.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(t){return t.sort()},highlighter:function(t){var e=new RegExp("("+this.query+")","gi");return t.replace(e,"<strong>$1</strong>")}})),r.$container.on("click",t.proxy(function(){r.$input.focus()},r)),r.$container.on("keydown","input",t.proxy(function(e){var i=t(e.target),n=r.findInputWrapper();switch(e.which){case 8:if(0===o(i[0])){var s=n.prev();s&&r.remove(s.data("item"))}break;case 46:if(0===o(i[0])){var a=n.next();a&&r.remove(a.data("item"))}break;case 37:var l=n.prev();0===i.val().length&&l[0]&&(l.before(n),i.focus());break;case 39:var c=n.next();0===i.val().length&&c[0]&&(c.after(n),i.focus());break;default:r.options.freeInput&&t.inArray(e.which,r.options.confirmKeys)>=0&&(r.add(i.val()),i.val(""),e.preventDefault())}i.attr("size",Math.max(this.inputSize,i.val().length))},r)),r.$container.on("click","[data-role=remove]",t.proxy(function(e){r.remove(t(e.target).closest(".tag").data("item"))},r)),r.options.itemValue===s.itemValue&&("INPUT"===r.$element[0].tagName?r.add(r.$element.val()):t("option",r.$element).each(function(){r.add(t(this).attr("value"),!0)}))},destroy:function(){var t=this;t.$container.off("keypress","input"),t.$container.off("click","[role=remove]"),t.$container.remove(),t.$element.removeData("tagsinput"),t.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var e=this.$input[0],i=this.$container[0];e&&e.parentNode!==i;)e=e.parentNode;return t(e)}},t.fn.tagsinput=function(i,n){var r=[];return this.each(function(){var o=t(this).data("tagsinput");if(o){var s=o[i](n);void 0!==s&&r.push(s)}else o=new e(this,i),t(this).data("tagsinput",o),r.push(o),"SELECT"===this.tagName&&t("option",t(this)).attr("selected","selected"),t(this).val(t(this).val())}),"string"==typeof i?r.length>1?r:r[0]:r},t.fn.tagsinput.Constructor=e;var a=t("<div />");t(function(){t("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery),"object"==typeof module&&(module.exports=MediumEditor),function(t,e){"use strict";function i(t,e){var i;if(void 0===t)return e;for(i in e)e.hasOwnProperty(i)&&t.hasOwnProperty(i)===!1&&(t[i]=e[i]);return t}function n(){var e,i,n,r=t.getSelection();if(r.getRangeAt&&r.rangeCount){for(n=[],e=0,i=r.rangeCount;i>e;e+=1)n.push(r.getRangeAt(e));return n}return null}function r(e){var i,n,r=t.getSelection();if(e)for(r.removeAllRanges(),i=0,n=e.length;n>i;i+=1)r.addRange(e[i])}function o(){var t=e.getSelection().anchorNode,i=t&&3===t.nodeType?t.parentNode:t;return i}function s(){var i,n,r,o,s="";if(void 0!==t.getSelection){if(n=t.getSelection(),n.rangeCount){for(o=e.createElement("div"),i=0,r=n.rangeCount;r>i;i+=1)o.appendChild(n.getRangeAt(i).cloneContents());s=o.innerHTML}}else void 0!==e.selection&&"Text"===e.selection.type&&(s=e.selection.createRange().htmlText);return s}function a(t){return!(!t||1!==t.nodeType)}MediumEditor.prototype={defaults:{allowMultiParagraphSelection:!0,anchorInputPlaceholder:"Paste or type a link",anchorPreviewHideDelay:500,buttons:["bold","italic","underline","anchor","header1","header2","quote"],buttonLabels:!1,checkLinkFormat:!1,cleanPastedHTML:!1,delay:0,diffLeft:0,diffTop:-10,disableReturn:!1,disableDoubleReturn:!1,disableToolbar:!1,disableEditing:!1,elementsContainer:!1,firstHeader:"h3",forcePlainText:!0,placeholder:"Type your text",secondHeader:"h4",targetBlank:!1,extensions:{},activeButtonClass:"medium-editor-button-active",firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last"},isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),init:function(t,n){return this.setElementSelection(t),0!==this.elements.length?(this.parentElements=["p","h1","h2","h3","h4","h5","h6","blockquote","pre"],this.id=e.querySelectorAll(".medium-editor-toolbar").length+1,this.options=i(n,this.defaults),this.setup()):void 0},setup:function(){this.isActive=!0,this.initElements().bindSelect().bindPaste().setPlaceholders().bindWindowActions()},initElements:function(){this.updateElementList();var t,i=!1;for(t=0;t<this.elements.length;t+=1)this.options.disableEditing||this.elements[t].getAttribute("data-disable-editing")||this.elements[t].setAttribute("contentEditable",!0),this.elements[t].getAttribute("data-placeholder")||this.elements[t].setAttribute("data-placeholder",this.options.placeholder),this.elements[t].setAttribute("data-medium-element",!0),this.bindParagraphCreation(t).bindReturn(t).bindTab(t),this.options.disableToolbar||this.elements[t].getAttribute("data-disable-toolbar")||(i=!0);return i&&(this.options.elementsContainer||(this.options.elementsContainer=e.body),this.initToolbar().bindButtons().bindAnchorForm().bindAnchorPreview()),this},setElementSelection:function(t){this.elementSelection=t,this.updateElementList()},updateElementList:function(){this.elements="string"==typeof this.elementSelection?e.querySelectorAll(this.elementSelection):this.elementSelection,1===this.elements.nodeType&&(this.elements=[this.elements])},serialize:function(){var t,e,i={};for(t=0;t<this.elements.length;t+=1)e=""!==this.elements[t].id?this.elements[t].id:"element-"+t,i[e]={value:this.elements[t].innerHTML.trim()};return i},callExtensions:function(t){if(!(arguments.length<1)){var e,i,n=Array.prototype.slice.call(arguments,1);for(i in this.options.extensions)this.options.extensions.hasOwnProperty(i)&&(e=this.options.extensions[i],void 0!==e[t]&&e[t].apply(e,n))}},bindParagraphCreation:function(i){var n=this;return this.elements[i].addEventListener("keypress",function(t){var i,n=o();32===t.which&&(i=n.tagName.toLowerCase(),"a"===i&&e.execCommand("unlink",!1,null))}),this.elements[i].addEventListener("keyup",function(i){var r,s=o();if(s&&s.getAttribute("data-medium-element")&&0===s.children.length&&!n.options.disableReturn&&!s.getAttribute("data-disable-return")&&e.execCommand("formatBlock",!1,"p"),13===i.which&&(s=o(),r=s.tagName.toLowerCase(),!n.options.disableReturn&&!this.getAttribute("data-disable-return")&&"li"!==r&&!n.isListItemChild(s))){if(!i.shiftKey){{var a=t.getSelection();a.anchorNode}e.execCommand("formatBlock",!1,"p")}"a"===r&&e.execCommand("unlink",!1,null)}}),this},isListItemChild:function(t){for(var e=t.parentNode,i=e.tagName.toLowerCase();-1===this.parentElements.indexOf(i)&&"div"!==i;){if("li"===i)return!0;if(e=e.parentNode,!e||!e.tagName)return!1;i=e.tagName.toLowerCase()}return!1},bindReturn:function(t){var e=this;return this.elements[t].addEventListener("keypress",function(t){if(13===t.which)if(e.options.disableReturn||this.getAttribute("data-disable-return"))t.preventDefault();else if(e.options.disableDoubleReturn||this.getAttribute("data-disable-double-return")){var i=o();i&&"\n"===i.innerText&&t.preventDefault()}}),this},bindTab:function(t){return this.elements[t].addEventListener("keydown",function(t){if(9===t.which){var i=o().tagName.toLowerCase();"pre"===i&&(t.preventDefault(),e.execCommand("insertHtml",null,"    "))}}),this},buttonTemplate:function(t){var e=this.getButtonLabels(this.options.buttonLabels),i={bold:'<button class="medium-editor-action medium-editor-action-bold" data-action="bold" data-element="b" title="\u5f3a\u8c03">'+e.bold+"</button>",italic:'<button class="medium-editor-action medium-editor-action-italic" data-action="italic" data-element="i" title="\u7740\u91cd">'+e.italic+"</button>",underline:'<button class="medium-editor-action medium-editor-action-underline" data-action="underline" data-element="u" title="\u4e0b\u5212\u7ebf">'+e.underline+"</button>",strikethrough:'<button class="medium-editor-action medium-editor-action-strikethrough" data-action="strikethrough" data-element="strike" title="\u5220\u9664\u7ebf"><strike>D</strike></button>',superscript:'<button class="medium-editor-action medium-editor-action-superscript" data-action="superscript" data-element="sup" title="\u4e0a\u6807">'+e.superscript+"</button>",subscript:'<button class="medium-editor-action medium-editor-action-subscript" data-action="subscript" data-element="sub" title="\u4e0b\u6807">'+e.subscript+"</button>",anchor:'<button class="medium-editor-action medium-editor-action-anchor" data-action="anchor" data-element="a" title="\u94fe\u63a5">'+e.anchor+"</button>",image:'<button class="medium-editor-action medium-editor-action-image" data-action="image" data-element="img" title="\u56fe\u7247">'+e.image+"</button>",header1:'<button class="medium-editor-action medium-editor-action-header1" data-action="append-'+this.options.firstHeader+'" data-element="'+this.options.firstHeader+'" title="\u4e00\u7ea7\u6807\u9898">'+e.header1+"</button>",header2:'<button class="medium-editor-action medium-editor-action-header2" data-action="append-'+this.options.secondHeader+'" data-element="'+this.options.secondHeader+'" title="\u4e8c\u7ea7\u6807\u9898">'+e.header2+"</button>",quote:'<button class="medium-editor-action medium-editor-action-quote" data-action="append-blockquote" data-element="blockquote" title="\u5f15\u7528">'+e.quote+"</button>",orderedlist:'<button class="medium-editor-action medium-editor-action-orderedlist" data-action="insertorderedlist" data-element="ol" title="\u6709\u5e8f\u5217\u8868">'+e.orderedlist+"</button>",unorderedlist:'<button class="medium-editor-action medium-editor-action-unorderedlist" data-action="insertunorderedlist" data-element="ul" title="\u65e0\u5e8f\u5217\u8868">'+e.unorderedlist+"</button>",pre:'<button class="medium-editor-action medium-editor-action-pre" data-action="append-pre" data-element="pre" title="\u683c\u5f0f\u5316\u6587\u672c">'+e.pre+"</button>",indent:'<button class="medium-editor-action medium-editor-action-indent" data-action="indent" data-element="ul" title="\u589e\u52a0\u7f29\u8fdb">'+e.indent+"</button>",outdent:'<button class="medium-editor-action medium-editor-action-outdent" data-action="outdent" data-element="ul" title="\u51cf\u5c11\u7f29\u8fdb">'+e.outdent+"</button>"};return i[t]||!1},getButtonLabels:function(t){var e,i,n={bold:"<b>B</b>",italic:"<b><i>I</i></b>",underline:"<b><u>U</u></b>",superscript:"<b>x<sup>1</sup></b>",subscript:"<b>x<sub>1</sub></b>",anchor:"<b>#</b>",image:"<b>image</b>",header1:"<b>H1</b>",header2:"<b>H2</b>",quote:"<b>&ldquo;</b>",orderedlist:"<b>1.</b>",unorderedlist:"<b>&bull;</b>",pre:"<b>0101</b>",indent:"<b>&rarr;</b>",outdent:"<b>&larr;</b>"};if("fontawesome"===t?e={bold:'<i class="fa fa-bold"></i>',italic:'<i class="fa fa-italic"></i>',underline:'<i class="fa fa-underline"></i>',superscript:'<i class="fa fa-superscript"></i>',subscript:'<i class="fa fa-subscript"></i>',anchor:'<i class="fa fa-link"></i>',image:'<i class="fa fa-picture-o"></i>',quote:'<i class="fa fa-quote-right"></i>',orderedlist:'<i class="fa fa-list-ol"></i>',unorderedlist:'<i class="fa fa-list-ul"></i>',pre:'<i class="fa fa-code fa-lg"></i>',indent:'<i class="fa fa-indent"></i>',outdent:'<i class="fa fa-outdent"></i>'}:"object"==typeof t&&(e=t),"object"==typeof e)for(i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n},initToolbar:function(){return this.toolbar?this:(this.toolbar=this.createToolbar(),this.keepToolbarAlive=!1,this.anchorForm=this.toolbar.querySelector(".medium-editor-toolbar-form-anchor"),this.anchorInput=this.anchorForm.querySelector("input"),this.toolbarActions=this.toolbar.querySelector(".medium-editor-toolbar-actions"),this.anchorPreview=this.createAnchorPreview(),this)},createToolbar:function(){var t=e.createElement("div");return t.id="medium-editor-toolbar-"+this.id,t.className="medium-editor-toolbar",t.appendChild(this.toolbarButtons()),t.appendChild(this.toolbarFormAnchor()),this.options.elementsContainer.appendChild(t),t},toolbarButtons:function(){var t,i,n,r,o=this.options.buttons,s=e.createElement("ul");for(s.id="medium-editor-toolbar-actions",s.className="medium-editor-toolbar-actions clearfix",i=0;i<o.length;i+=1)this.options.extensions.hasOwnProperty(o[i])?(r=this.options.extensions[o[i]],n=void 0!==r.getButton?r.getButton():null):n=this.buttonTemplate(o[i]),n&&(t=e.createElement("li"),a(n)?t.appendChild(n):t.innerHTML=n,s.appendChild(t));return s},toolbarFormAnchor:function(){var t=e.createElement("div"),i=e.createElement("input"),n=e.createElement("a");return n.setAttribute("href","#"),n.innerHTML="&times;",i.setAttribute("type","text"),i.setAttribute("placeholder",this.options.anchorInputPlaceholder),t.className="medium-editor-toolbar-form-anchor",t.id="medium-editor-toolbar-form-anchor",t.appendChild(i),t.appendChild(n),t},bindSelect:function(){var t,i=this,n="";for(this.checkSelectionWrapper=function(t){return t&&i.clickingIntoArchorForm(t)?!1:(clearTimeout(n),void(n=setTimeout(function(){i.checkSelection()},i.options.delay)))},e.documentElement.addEventListener("mouseup",this.checkSelectionWrapper),t=0;t<this.elements.length;t+=1)this.elements[t].addEventListener("keyup",this.checkSelectionWrapper),this.elements[t].addEventListener("blur",this.checkSelectionWrapper);return this},checkSelection:function(){var e,i;return this.keepToolbarAlive===!0||this.options.disableToolbar||(e=t.getSelection(),""===e.toString().trim()||this.options.allowMultiParagraphSelection===!1&&this.hasMultiParagraphs()?this.hideToolbarActions():(i=this.getSelectionElement(),!i||i.getAttribute("data-disable-toolbar")?this.hideToolbarActions():this.checkSelectionElement(e,i))),this},clickingIntoArchorForm:function(t){var e=this;return t.type&&"blur"===t.type.toLowerCase()&&t.relatedTarget&&t.relatedTarget===e.anchorInput?!0:!1},hasMultiParagraphs:function(){var t=s().replace(/<[\S]+><\/[\S]+>/gim,""),e=t.match(/<(p|h[0-6]|blockquote)>([\s\S]*?)<\/(p|h[0-6]|blockquote)>/g);return e?e.length:0},checkSelectionElement:function(t,e){var i;for(this.selection=t,this.selectionRange=this.selection.getRangeAt(0),i=0;i<this.elements.length;i+=1)if(this.elements[i]===e)return void this.setToolbarButtonStates().setToolbarPosition().showToolbarActions();this.hideToolbarActions()},getSelectionElement:function(){var e,i,n,r,o=t.getSelection(),s=function(t){var e=t;try{for(;!e.getAttribute("data-medium-element");)e=e.parentNode}catch(i){return!1}return e};try{e=o.getRangeAt(0),i=e.commonAncestorContainer,n=i.parentNode,r=i.getAttribute("data-medium-element")?i:s(n)}catch(a){r=s(n)}return r},setToolbarPosition:function(){var e=50,i=t.getSelection(),n=i.getRangeAt(0),r=n.getBoundingClientRect(),o=this.options.diffLeft-this.toolbar.offsetWidth/2,s=(r.left+r.right)/2,a=this.toolbar.offsetWidth/2;return r.top<e?(this.toolbar.classList.add("medium-toolbar-arrow-over"),this.toolbar.classList.remove("medium-toolbar-arrow-under"),this.toolbar.style.top=e+r.bottom-this.options.diffTop+t.pageYOffset-this.toolbar.offsetHeight+"px"):(this.toolbar.classList.add("medium-toolbar-arrow-under"),this.toolbar.classList.remove("medium-toolbar-arrow-over"),this.toolbar.style.top=r.top+this.options.diffTop+t.pageYOffset-this.toolbar.offsetHeight+"px"),this.toolbar.style.left=a>s?o+a+"px":t.innerWidth-s<a?t.innerWidth+o-a+"px":o+s+"px",this.hideAnchorPreview(),this},setToolbarButtonStates:function(){var t,e=this.toolbarActions.querySelectorAll("button");for(t=0;t<e.length;t+=1)e[t].classList.remove(this.options.activeButtonClass);return this.checkActiveButtons(),this},checkActiveButtons:function(){for(var t=Array.prototype.slice.call(this.elements),e=this.getSelectedParentElement();void 0!==e.tagName&&-1===this.parentElements.indexOf(e.tagName.toLowerCase)&&(this.activateButton(e.tagName.toLowerCase()),this.callExtensions("checkState",e),-1===t.indexOf(e));)e=e.parentNode},activateButton:function(t){var e=this.toolbar.querySelector('[data-element="'+t+'"]');null!==e&&-1===e.className.indexOf(this.options.activeButtonClass)&&(e.className+=" "+this.options.activeButtonClass)},bindButtons:function(){var t,e=this.toolbar.querySelectorAll("button"),i=this,n=function(t){t.preventDefault(),t.stopPropagation(),void 0===i.selection&&i.checkSelection(),this.className.indexOf(i.options.activeButtonClass)>-1?this.classList.remove(i.options.activeButtonClass):this.className+=" "+i.options.activeButtonClass,this.hasAttribute("data-action")&&i.execAction(this.getAttribute("data-action"),t)};for(t=0;t<e.length;t+=1)e[t].addEventListener("click",n);return this.setFirstAndLastItems(e),this},setFirstAndLastItems:function(t){return t.length>0&&(t[0].className+=" "+this.options.firstButtonClass,t[t.length-1].className+=" "+this.options.lastButtonClass),this},execAction:function(i,n){this.removeRedundantElements(i),i.indexOf("append-")>-1?(this.execFormatBlock(i.replace("append-","")),this.setToolbarPosition(),this.setToolbarButtonStates()):"anchor"===i?this.triggerAnchorAction(n):"image"===i?e.execCommand("insertImage",!1,t.getSelection()):(e.execCommand(i,!1,null),this.setToolbarPosition())},removeRedundantElements:function(i){var n=t.getSelection(),r=this.getSelectionData(this.selection.anchorNode);if(["append-h1","append-h2","append-h3","append-h4","append-h5","append-h6"].join(" ").indexOf(i)>=0)for(var o=n.anchorNode.parentNode;!o.getAttribute("contentEditable");){if("li"===o.tagName.toLowerCase()){e.execCommand("outdent",!1,null);break}o=o.parentNode}else if(["insertorderedlist","insertunorderedlist"].join(" ").indexOf(i)>=0&&["p","h1","h2","h3","h4","h5","h6"].join(" ").indexOf(r.tagName)>=0){for(var s=r.el,o=s.parentNode,a=s.childNodes,l=0;l<a.length;l++)o.insertBefore(a[l],s);o.removeChild(s)}},rangeSelectsSingleNode:function(t){var e=t.startContainer;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===t.startOffset+1},getSelectedParentElement:function(){var t=null,e=this.selectionRange;return t=this.rangeSelectsSingleNode(e)?e.startContainer.childNodes[e.startOffset]:3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer},triggerAnchorAction:function(){var t=this.getSelectedParentElement();return t.tagName&&"a"===t.tagName.toLowerCase()?e.execCommand("unlink",!1,null):"block"===this.anchorForm.style.display?this.showToolbarActions():this.showAnchorForm(),this},execFormatBlock:function(t){var i=this.getSelectionData(this.selection.anchorNode);if("blockquote"===t&&i.el&&"blockquote"===i.el.parentNode.tagName.toLowerCase())return e.execCommand("outdent",!1,null);if(i.tagName===t&&(t="p"),this.isIE){if("blockquote"===t)return e.execCommand("indent",!1,t);t="<"+t+">"}return e.execCommand("formatBlock",!1,t)},getSelectionData:function(t){var e;for(t&&t.tagName&&(e=t.tagName.toLowerCase());t&&-1===this.parentElements.indexOf(e);)t=t.parentNode,t&&t.tagName&&(e=t.tagName.toLowerCase());return{el:t,tagName:e}},getFirstChild:function(t){for(var e=t.firstChild;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},hideToolbarActions:function(){this.keepToolbarAlive=!1,void 0!==this.toolbar&&this.toolbar.classList.remove("medium-editor-toolbar-active")},showToolbarActions:function(){var t,e=this;this.anchorForm.style.display="none",this.toolbarActions.style.display="block",this.keepToolbarAlive=!1,clearTimeout(t),t=setTimeout(function(){e.toolbar&&!e.toolbar.classList.contains("medium-editor-toolbar-active")&&e.toolbar.classList.add("medium-editor-toolbar-active")},100)},saveSelection:function(){this.savedSelection=n()},restoreSelection:function(){r(this.savedSelection)},showAnchorForm:function(t){this.toolbarActions.style.display="none",this.saveSelection(),this.anchorForm.style.display="block",this.keepToolbarAlive=!0,this.anchorInput.focus(),this.anchorInput.value=t||""},bindAnchorForm:function(){var t=this.anchorForm.querySelector("a"),e=this;return this.anchorForm.addEventListener("click",function(t){t.stopPropagation()}),this.anchorInput.addEventListener("keyup",function(t){13===t.keyCode&&(t.preventDefault(),e.createLink(this))}),this.anchorInput.addEventListener("click",function(t){t.stopPropagation(),e.keepToolbarAlive=!0}),this.anchorInput.addEventListener("blur",function(){e.keepToolbarAlive=!1,e.checkSelection()}),t.addEventListener("click",function(t){t.preventDefault(),e.showToolbarActions(),r(e.savedSelection)}),this},hideAnchorPreview:function(){this.anchorPreview.classList.remove("medium-editor-anchor-preview-active")},showAnchorPreview:function(e){if(this.anchorPreview.classList.contains("medium-editor-anchor-preview-active"))return!0;var i,n,r,o=this,s=40,a=e.getBoundingClientRect(),l=(a.left+a.right)/2;return o.anchorPreview.querySelector("i").textContent=e.href,i=o.anchorPreview.offsetWidth/2,n=o.options.diffLeft-i,clearTimeout(r),r=setTimeout(function(){o.anchorPreview&&!o.anchorPreview.classList.contains("medium-editor-anchor-preview-active")&&o.anchorPreview.classList.add("medium-editor-anchor-preview-active")},100),o.observeAnchorPreview(e),o.anchorPreview.classList.add("medium-toolbar-arrow-over"),o.anchorPreview.classList.remove("medium-toolbar-arrow-under"),o.anchorPreview.style.top=Math.round(s+a.bottom-o.options.diffTop+t.pageYOffset-o.anchorPreview.offsetHeight)+"px",o.anchorPreview.style.left=i>l?n+i+"px":t.innerWidth-l<i?t.innerWidth+n-i+"px":n+l+"px",this},observeAnchorPreview:function(t){var e=this,i=(new Date).getTime(),n=!0,r=function(){i=(new Date).getTime(),n=!0},o=function(t){t.relatedTarget&&/anchor-preview/.test(t.relatedTarget.className)||(n=!1)},s=setInterval(function(){if(n)return!0;var a=(new Date).getTime()-i;a>e.options.anchorPreviewHideDelay&&(e.hideAnchorPreview(),clearInterval(s),e.anchorPreview.removeEventListener("mouseover",r),e.anchorPreview.removeEventListener("mouseout",o),t.removeEventListener("mouseover",r),t.removeEventListener("mouseout",o))},200);e.anchorPreview.addEventListener("mouseover",r),e.anchorPreview.addEventListener("mouseout",o),t.addEventListener("mouseover",r),t.addEventListener("mouseout",o)},createAnchorPreview:function(){var t=this,i=e.createElement("div");return i.id="medium-editor-anchor-preview-"+this.id,i.className="medium-editor-anchor-preview",i.innerHTML=this.anchorPreviewTemplate(),this.options.elementsContainer.appendChild(i),i.addEventListener("click",function(){t.anchorPreviewClickHandler()}),i},anchorPreviewTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <i class="medium-editor-toolbar-anchor-preview-inner"></i></div>'},anchorPreviewClickHandler:function(){if(this.activeAnchor){var i=this,n=e.createRange(),r=t.getSelection();n.selectNodeContents(i.activeAnchor),r.removeAllRanges(),r.addRange(n),setTimeout(function(){i.activeAnchor&&i.showAnchorForm(i.activeAnchor.href),i.keepToolbarAlive=!1},100+i.options.delay)}this.hideAnchorPreview()},editorAnchorObserver:function(t){var e=this,i=!0,n=function(){i=!1,e.activeAnchor.removeEventListener("mouseout",n)};if(t.target&&"a"===t.target.tagName.toLowerCase()){if(!/href=["']\S+["']/.test(t.target.outerHTML)||/href=["']#\S+["']/.test(t.target.outerHTML))return!0;if(this.toolbar.classList.contains("medium-editor-toolbar-active"))return!0;this.activeAnchor=t.target,this.activeAnchor.addEventListener("mouseout",n),setTimeout(function(){i&&e.showAnchorPreview(t.target)},e.options.delay)}},bindAnchorPreview:function(){var t,e=this;for(this.editorAnchorObserverWrapper=function(t){e.editorAnchorObserver(t)},t=0;t<this.elements.length;t+=1)this.elements[t].addEventListener("mouseover",this.editorAnchorObserverWrapper);return this},checkLinkFormat:function(t){var e=/^(https?|ftps?|rtmpt?):\/\/|mailto:/;return(e.test(t)?"":"http://")+t},setTargetBlank:function(){var t,e=o();if("a"===e.tagName.toLowerCase())e.target="_blank";
else for(e=e.getElementsByTagName("a"),t=0;t<e.length;t+=1)e[t].target="_blank"},createLink:function(t){return 0===t.value.trim().length?void this.hideToolbarActions():(r(this.savedSelection),this.options.checkLinkFormat&&(t.value=this.checkLinkFormat(t.value)),e.execCommand("createLink",!1,t.value),this.options.targetBlank&&this.setTargetBlank(),this.checkSelection(),this.showToolbarActions(),void(t.value=""))},bindWindowActions:function(){var e,i=this;return this.windowResizeHandler=function(){clearTimeout(e),e=setTimeout(function(){i.toolbar&&i.toolbar.classList.contains("medium-editor-toolbar-active")&&i.setToolbarPosition()},100)},t.addEventListener("resize",this.windowResizeHandler),this},activate:function(){this.isActive||this.setup()},deactivate:function(){var i;if(this.isActive)for(this.isActive=!1,void 0!==this.toolbar&&(this.options.elementsContainer.removeChild(this.anchorPreview),this.options.elementsContainer.removeChild(this.toolbar),delete this.toolbar,delete this.anchorPreview),e.documentElement.removeEventListener("mouseup",this.checkSelectionWrapper),t.removeEventListener("resize",this.windowResizeHandler),i=0;i<this.elements.length;i+=1)this.elements[i].removeEventListener("mouseover",this.editorAnchorObserverWrapper),this.elements[i].removeEventListener("keyup",this.checkSelectionWrapper),this.elements[i].removeEventListener("blur",this.checkSelectionWrapper),this.elements[i].removeEventListener("paste",this.pasteWrapper),this.elements[i].removeAttribute("contentEditable"),this.elements[i].removeAttribute("data-medium-element")},htmlEntities:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},bindPaste:function(){var t,i=this;for(this.pasteWrapper=function(t){var n,r,o="";if(this.classList.remove("medium-editor-placeholder"),!i.options.forcePlainText&&!i.options.cleanPastedHTML)return this;if(t.clipboardData&&t.clipboardData.getData&&!t.defaultPrevented){if(t.preventDefault(),i.options.cleanPastedHTML&&t.clipboardData.getData("text/html"))return i.cleanPaste(t.clipboardData.getData("text/html"));if(i.options.disableReturn||this.getAttribute("data-disable-return"))e.execCommand("insertHTML",!1,t.clipboardData.getData("text/plain"));else{for(n=t.clipboardData.getData("text/plain").split(/[\r\n]/g),r=0;r<n.length;r+=1)""!==n[r]&&(o+=navigator.userAgent.match(/firefox/i)&&0===r?i.htmlEntities(n[r]):"<p>"+i.htmlEntities(n[r])+"</p>");e.execCommand("insertHTML",!1,o)}}},t=0;t<this.elements.length;t+=1)this.elements[t].addEventListener("paste",this.pasteWrapper);return this},setPlaceholders:function(){var t,e=function(t){t.querySelector("img")||t.querySelector("blockquote")||""!==t.textContent.replace(/^\s+|\s+$/g,"")||t.classList.add("medium-editor-placeholder")},i=function(t){this.classList.remove("medium-editor-placeholder"),"keypress"!==t.type&&e(this)};for(t=0;t<this.elements.length;t+=1)e(this.elements[t]),this.elements[t].addEventListener("blur",i),this.elements[t].addEventListener("keyup",i);return this},cleanPaste:function(t){var i,n,r,o=this.getSelectionElement(),s=/<p|<br|<div/.test(t),a=[[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:bold|font-weight:bold;font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:bold[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a\s+href=(&quot;|&rdquo;|&ldquo;|\u201c|\u201d)([^&]+)(&quot;|&rdquo;|&ldquo;|\u201c|\u201d)&gt;/gi),'<a href="$2">']];for(i=0;i<a.length;i+=1)t=t.replace(a[i][0],a[i][1]);if(s)for(n=t.split("<br><br>"),this.pasteHTML("<p>"+n.join("</p><p>")+"</p>"),e.execCommand("insertText",!1,"\n"),n=o.querySelectorAll("p,div,br"),i=0;i<n.length;i+=1)switch(r=n[i],r.tagName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(r);break;case"br":this.filterLineBreak(r)}else this.pasteHTML(t)},pasteHTML:function(t){var i,n,r,o,s=e.createDocumentFragment();for(s.appendChild(e.createElement("body")),o=s.querySelector("body"),o.innerHTML=t,this.cleanupSpans(o),i=o.querySelectorAll("*"),r=0;r<i.length;r+=1)n=i[r],n.removeAttribute("class"),n.removeAttribute("style"),n.removeAttribute("dir"),"meta"===n.tagName.toLowerCase()&&n.parentNode.removeChild(n);e.execCommand("insertHTML",!1,o.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(t){return t&&("p"===t.tagName.toLowerCase()||"div"===t.tagName.toLowerCase())},filterCommonBlocks:function(t){/^\s*$/.test(t.innerText)&&t.parentNode.removeChild(t)},filterLineBreak:function(t){this.isCommonBlock(t.previousElementSibling)?t.parentNode.removeChild(t):!this.isCommonBlock(t.parentNode)||t.parentNode.firstChild!==t&&t.parentNode.lastChild!==t?1===t.parentNode.childElementCount&&this.removeWithParent(t):t.parentNode.removeChild(t)},removeWithParent:function(t){t&&t.parentNode&&(t.parentNode.parentNode&&1===t.parentNode.childElementCount?t.parentNode.parentNode.removeChild(t.parentNode):t.parentNode.removeChild(t.parentNode))},cleanupSpans:function(t){var i,n,r,o=t.querySelectorAll(".replace-with");for(i=0;i<o.length;i+=1)n=o[i],r=e.createElement(n.classList.contains("bold")?"b":"i"),r.innerHTML=n.classList.contains("bold")&&n.classList.contains("italic")?"<i>"+n.innerHTML+"</i>":n.innerHTML,n.parentNode.replaceChild(r,n);for(o=t.querySelectorAll("span"),i=0;i<o.length;i+=1)n=o[i],/^\s*$/.test()?n.parentNode.removeChild(n):n.parentNode.replaceChild(e.createTextNode(n.innerText),n)}}}(window,document),function(){!function(t){var e;MediumEditor&&"function"==typeof MediumEditor&&(e=function(){function e(e,i){this.$element=t(e),this.options=i,this.$form=this.$element.closest(".editor"),this.initMenu(),this.$element.one("click.init.minsert",this.setMenuLeftPosition.bind(this)).one("keydown.init.minsert",this.setMenuLeftPosition.bind(this)).on("click.minsert",this.toggle.bind(this)).on("keyup.minsert",this.toggle.bind(this)).on("click.minsert","img",this.handleFigureFocus.bind(this)).on("keypress.minsert",this.linefeed.bind(this)).on("copy.minsert",this.copy.bind(this)).on("cut.minsert",this.cut.bind(this)).on("paste.minsert",this.paste.bind(this)).on("loading.minsert",this.loading.bind(this)).on("loaded.minsert",this.loaded.bind(this)).on("done:image.minsert",this.insertImageDone.bind(this)).on("fail:image.minsert",this.insertImageFail.bind(this)),window.navigator.userAgent.toLowerCase().indexOf("webkit")>-1&&this.$element.on("keydown.minsert",this.handleDeleteBlock.bind(this)),this.$minsert.on("click.minsert",".minsert-toggle",this.toggleActions.bind(this)).on("click.minsert",'[data-action="insert-image"]',this.insertImage.bind(this)).on("click.minsert",'[data-action="insert-video"]',this.insertVideo.bind(this)).on("click.minsert",'[data-action="insert-embed"]',this.insertEmbed.bind(this)).on("click.minsert",'[data-action="insert-rule"]',this.insertRule.bind(this)),$document.on("click.minsert keypress.minsert",this.handleFigureBlur.bind(this))}return e.prototype.initMenu=function(){var t;return t='<div class="minsert"><button class="minsert-toggle" type="button"><i class="fa fa-plus-circle"></i></button><ul class="minsert-actions"><li><button class="minsert-action" data-action="insert-image" type="button"><i class="fa fa-picture-o"></i></button></li><li><button class="minsert-action" data-action="insert-video" type="button"><i class="fa fa-video-camera"></i></button></li><li><button class="minsert-action" data-action="insert-embed" type="button"><i class="fa fa-code"></i></button></li><li><button class="minsert-action" data-action="insert-rule" type="button"><i class="fa fa-minus"></i></button></li></ul><div class="minsert-input"></div></div>',this.$element.after(t),this.$minsert=this.$element.next(".minsert"),this.$minsertActions=this.$minsert.children(".minsert-actions"),this.$minsertActionImage=this.$minsertActions.find('[data-action="insert-image"]'),this.$minsertInput=this.$minsert.children(".minsert-input")},e.prototype.toggle=function(e){var i,n,r,o;if(r=window.getSelection(),o=e.target,this.hide(),"IMG"===o.nodeName){if(n=o.parentNode,("FIGURE"===n.nodeName||"block"===t(n).css("display"))&&(this.insertPoint=document.createRange(),this.insertPoint.selectNode(n),r.removeAllRanges(),r.addRange(this.insertPoint),"click"===e.type))return this.preClipboard=n}else if(0===r.anchorOffset&&this.$element.text().trim().length>0&&(i=r.anchorNode,""===i.textContent.trim()))return this.insertPoint=document.createRange(),this.insertPoint.selectNode(i),this.insertPoint.collapse(!0),this.show(i)},e.prototype.show=function(t){return this.setMenuTopPosition(t),this.$minsert.addClass("is-shown")},e.prototype.hide=function(){return this.$minsert.removeClass("is-shown"),this.$minsertActions.removeClass("is-shown"),this.$minsertInput.removeClass("is-shown").empty()},e.prototype.getTopNode=function(t){return"true"===t.parentNode.getAttribute("data-medium-element")?t:null!=t.parentNode?this.getTopNode(t.parentNode):!1},e.prototype.setMenuLeftPosition=function(){var t;return t=this.$element.offset().left-34+"px",this.$minsert.css("left",t)},e.prototype.setMenuTopPosition=function(e){var i;return i="static"!==this.$element.css("position")?t(e).offset().top+"px":t(e).position().top+"px",this.$minsert.css("top",i)},e.prototype.toggleActions=function(){return this.$minsertActions.toggleClass("is-shown"),this.$minsertInput.removeClass("is-shown").empty()},e.prototype.loading=function(t,e){return this.insert("<div class='progress minsert-progress' id='minsert-progress-"+e+"'> <div class='progress-bar progress-bar-striped active' role='progressbar' aria-valuemin='0' aria-valuemax='100' style='width: 100%'> </div> </div>"),this.$form.find('[type="submit"]:not(.is-inactive)').on("click.loading.minsert",function(t){return t.preventDefault(),alert("\u8fd8\u6709\u56fe\u7247\u6b63\u5728\u4e0a\u4f20\uff0c\u8bf7\u7b49\u5f85\u4e0a\u4f20\u5b8c\u540e\u518d\u63d0\u4ea4\u3002")}).addClass("is-inactive")},e.prototype.loaded=function(t,e){return this.$element.find("#minsert-progress-"+e).remove(),this.$form.find('[type="submit"].is-inactive').off("click.loading.minsert")},e.prototype.handleFigureFocus=function(e){var i;return i=t(e.target).parent(),i.hasClass("is-focused")?void 0:i.addClass("is-focused")},e.prototype.handleFigureBlur=function(e){var i;if("click"===e.type){if(i=t(e.target),this.$element.find(".is-focused").removeClass("is-focused"),i.closest(".editor-content").length&&i.is("img")&&!i.parent().hasClass("is-focused"))return i.parent().addClass("is-focused")}else if("keypress"===e.type&&!e.metaKey&&!e.ctrlKey)return this.$element.find(".is-focused").removeClass("is-focused"),this.preClipboard=null},e.prototype.linefeed=function(t){var e,i;return 13===t.which&&this.preClipboard?(t.preventDefault(),i=window.getSelection(),e=document.createElement("p"),e.innerHTML="<br>",this.insertPoint.collapse(!1),this.insertPoint.insertNode(e),i.removeAllRanges(),i.addRange(this.insertPoint),i.collapseToStart()):void 0},e.prototype.insertImage=function(){return this.hide()},e.prototype.insertImageDone=function(t,e){var i,n;return n=e.url,i=e.id,this.insert("<p><img src="+n+"></p>",i)},e.prototype.insertImageFail=function(t,e){return alert(null!=e?e:"\u56fe\u7247\u4e0a\u4f20\u5931\u8d25\u4e86\uff0c\u8bf7\u91cd\u8bd5\u3002")},e.prototype.insertVideo=function(){return this.insertRichMedia("videos").bind(this)},e.prototype.insertEmbed=function(){return this.insertRichMedia("embeds").bind(this)},e.prototype.insertRule=function(){return this.insert("<hr>"),this.hide()},e.prototype.insertRichMedia=function(e){var i,n;return i=t("<input type='text' placeholder="+this.options.actions[e].placeholder+">"),i.appendTo(this.$minsertInput),this.$minsertActions.removeClass("is-shown"),this.$minsertInput.addClass("is-shown"),i.focus(),n=function(e){var i,n,r,o,s,a,l,c,u,h,d,p,f,m,g,v,b;if(13===e.which){if(n=e.target.value.trim(),i=!1,e.preventDefault(),0===n.indexOf("http"))if(f=n,r=location.host.replace(/\./g,"\\.")||"knewone.com",new RegExp("^(http(s)?://)?(www.)?("+r+")").test(f)){for(d=this,h="http://"+location.host+"/embed",c=new RegExp("^(http(s)?://)?(www.)?("+r+")/things/([^/]+)/?$"),l=new RegExp("^(http(s)?://)?(www.)?("+r+")/things/(.*)/reviews/([0-9a-z]{24})"),a=new RegExp("^(http(s)?://)?(www.)?("+r+")/lists/([0-9a-z]{24})"),i=!0,m=f.split(" "),s=void 0,p=[],g=function(){return s=c.test(f),s?p.push(f.replace(c,"$5")):void 0},v=0,b=m.length;b>v&&(f=m[v],s!==!1);v++)g();s?u={type:"thing",key:_.union(p).join(",")}:l.test(f)?u={type:"review",key:f.replace(l,"$6")}:a.test(f)&&(u={type:"list",key:f.replace(a,"$5")}),t.ajax({url:h,data:u,dataType:"html"}).done(function(t){return n="<div class='knewone-embed knewone-embed--"+u.type+"' data-knewone-embed-type="+u.type+" data-knewone-embed-key="+u.key+" contenteditable='false'>"+t+"</div>",d.hide(),d.insert(n)})}else o=f.replace(/\n?/g,"").replace(/^((http(s)?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/(watch\?v=|v\/)?)([a-zA-Z0-9-_]+)(.*)?$/,'<div class="video"><iframe width="420" height="315" src="//www.youtube.com/v/$7&amp;fs=1" frameborder="0" allowfullscreen></iframe></div>').replace(/http:\/\/vimeo\.com\/(\d+)$/,'<iframe src="//player.vimeo.com/video/$1" width="500" height="281" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>').replace(/^http:\/\/v\.youku.com\/v_show\/id_(.+)(\.html){1}(.*)/,'<iframe height=498 width=510 src="http://player.youku.com/embed/$1" frameborder=0 allowfullscreen></iframe>').replace(/^http:\/\/www\.tudou\.com\/listplay\/([a-zA-Z0-9]+)\/([a-zA-Z0-9]+)\.html$/,'<iframe src="http://www.tudou.com/programs/view/html5embed.action?type=1&code=$2&lcode=$1&resourceId=0_06_05_99" allowtransparency="true" scrolling="no" border="0" frameborder="0" style="width:480px;height:400px;"></iframe>').replace(/^http:\/\/www\.tudou\.com\/programs\/view\/(.+)$/,'<iframe src="http://www.tudou.com/programs/view/html5embed.action?type=0&code=$1" allowtransparency="true" scrolling="no" border="0" frameborder="0" style="width:480px;height:400px;"></iframe>').replace(/^http:\/\/www\.56\.com\/(.+)\/v_(.+)\.html$/,'<iframe width="480" height="405" src="http://www.56.com/iframe/$2" frameborder="0" allowfullscreen=""></iframe>').replace(/^http:\/\/v\.qq\.com\/page\/(.+)\/(.+)\/(.+)\/([a-zA-Z0-9]+)\.html$/,'<iframe width="480" height="405" frameborder=0 src="http://v.qq.com/iframe/player.html?vid=$4&tiny=0&auto=0" allowfullscreen></iframe>').replace(/https:\/\/twitter\.com\/(\w+)\/status\/(\d+)\/?$/,'<blockquote class="twitter-tweet" lang="en"><a href="https://twitter.com/$1/statuses/$2"></a></blockquote><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>').replace(/https:\/\/www\.facebook\.com\/(\w+)\/posts\/(\d+)$/,'<div id="fb-root"></div><script>(function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/en_US/all.js#xfbml=1"; fjs.parentNode.insertBefore(js, fjs); }(document, "script", "facebook-jssdk"));</script><div class="fb-post" data-href="https://www.facebook.com/$1/posts/$2"></div>').replace(/http:\/\/instagram\.com\/p\/(.+)\/?$/,'<span class="instagram"><iframe src="//instagram.com/p/$1/embed/" width="612" height="710" frameborder="0" scrolling="no" allowtransparency="true"></iframe></span>'),/<("[^"]*"|'[^']*'|[^'">])*>/.test(o)&&(n=o);else 0!==n.indexOf("<iframe")||t(n).attr("src")||(n="");if(!i)return this.hide(),this.insert(n)}},i.on("keydown.minsert",n.bind(this))},e.prototype.insert=function(e,i){var n,r,o;return n=t("<p>").html(e),n.children().length>0?(n=n.contents().unwrap(),null!=i?(o=document.createRange(),o.selectNode(document.querySelector("#minsert-progress-"+i)),o.collapse(!0),o.insertNode(n[0])):(this.insertPoint.insertNode(n[0]),this.insertPoint.collapse(!1))):(r=document.createElement("p"),r.innerHTML=e,null!=i?(o=document.createRange(),o.selectNode(document.querySelector("#minsert-progress-"+i)),o.collapse(!0),o.insertNode(r)):(this.insertPoint.insertNode(r),this.insertPoint.collapse(!1))),this.$element.trigger("input")},e.prototype.handleDeleteBlock=function(e){var i,n,r,o;return 8!==e.which||(r=window.getSelection(),0!==r.anchorOffset||(n=r.anchorNode.previousSibling,i=t(n),"block"!==i.css("display")||"IMG"!==(o=n.nodeName)&&"FIGURE"!==o&&"IFRAME"!==o&&"EMBED"!==o&&"VIDEO"!==o&&"AUDIO"!==o))?void 0:(e.preventDefault(),i.remove())},e.prototype.clearClipboard=function(t){return t.originalEvent.clipboardData?t.originalEvent.clipboardData.setData("text/plain",""):window.clipboardData?window.clipboardData.setData("text",""):void 0},e.prototype.copy=function(t){return this.preClipboard?(t.preventDefault(),this.clearClipboard(t),this.clipboard=this.preClipboard,this.preClipboard=null,!1):(this.preClipboard=!1,!0)},e.prototype.cut=function(e){return this.preClipboard?(e.preventDefault(),this.clearClipboard(e),this.clipboard=this.preClipboard.cloneNode(!0),t(this.preClipboard).remove(),this.preClipboard=null,!1):(this.preClipboard=!1,!0)},e.prototype.paste=function(e){var i,n,r;return this.preClipboard!==!1&&null!=this.clipboard&&(e.preventDefault(),r=window.getSelection(),n=r.getRangeAt(0),i=this.getTopNode(r.anchorNode),0===t.trim(i.textContent).length&&(n.setStartBefore(i),n.setEndBefore(i)),n.insertNode(this.clipboard.cloneNode(!0)),r.collapseToEnd()),this.$element.trigger("input")},e}(),e.DEFAULTS={actions:{images:{},videos:{placeholder:"\u5728\u8fd9\u91cc\u8f93\u5165\u89c6\u9891\u7f51\u5740\u6216\u4ee3\u7801\uff08\u901a\u7528\u4ee3\u7801\uff09\u7136\u540e\u6309\u56de\u8f66"},embeds:{placeholder:"\u5728\u8fd9\u91cc\u8f93\u5165\u5c0f\u5de5\u5177\u7f51\u5740\u6216\u4ee3\u7801\u7136\u540e\u6309\u56de\u8f66"},rules:{}}},t.fn.minsert=function(i){return this.each(function(){var n,r,o;n=t(this),r=n.data("minsert"),o=t.extend({},e.DEFAULTS,"object"==typeof i&&i),r||n.data("minsert",r=new e(this,o)),"string"==typeof i&&r[i]()})})}(jQuery)}.call(this),function(t){"use strict";var e=function(e){var i=t.Deferred(),n=new FileReader;return n.onload=function(t){i.resolve(t.target.result)},n.onerror=i.reject,n.onprogress=i.notify,n.readAsDataURL(e),i.promise()};t.fn.cleanHtml=function(){var e=t(this).html();return e&&e.replace(/(<br>|\s|<div><br><\/div>|&nbsp;)*$/,"")},t.fn.wysiwyg=function(i){var n,r,o,s=this,a=function(){r.activeToolbarClass&&t(r.toolbarSelector).find(o).each(function(){var e=t(this).data(r.commandRole),i=e.match(/formatBlock (.+)/);document.queryCommandState(e)||i&&i[1]==document.queryCommandValue("formatBlock")?t(this).addClass(r.activeToolbarClass):t(this).removeClass(r.activeToolbarClass)})},l=function(e,i){var n=e.split(" "),r=n.shift(),o=n.join(" ")+(i||"");if("formatBlock"==r){var l=t(window.getSelection().getRangeAt(0).startContainer.parentNode),c=l[0].tagName==o.toUpperCase()||l.parentsUntil(s.selector,o).length>0;c&&(o="div")}document.execCommand(r,0,o),a()},c=function(e){t.each(e,function(t,e){s.keydown(t,function(t){s.attr("contenteditable")&&s.is(":visible")&&(t.preventDefault(),t.stopPropagation(),l(e))}).keyup(t,function(t){s.attr("contenteditable")&&s.is(":visible")&&(t.preventDefault(),t.stopPropagation())})})},u=function(){var t=window.getSelection();return t.getRangeAt&&t.rangeCount?t.getRangeAt(0):void 0},h=function(){n=u()},d=function(){var t=window.getSelection();if(n){try{t.removeAllRanges()}catch(e){document.body.createTextRange().select(),document.selection.empty()}t.addRange(n)}},p=function(i){s.focus(),t.each(i,function(i,n){/^image\//.test(n.type)?t.when(e(n)).done(function(t){l("insertimage",t)}).fail(function(t){r.fileUploadError("file-reader",t)}):r.fileUploadError("unsupported-file-type",n.type)})},f=function(t,e){d(),h(),t.data(r.selectionMarker,e)},m=function(e,i){e.find(o).click(function(){d(),s.focus(),l(t(this).data(i.commandRole)),h()}),e.find("[data-toggle=dropdown]").click(d),e.find("input[type=text][data-"+i.commandRole+"]").on("webkitspeechchange change",function(){var e=this.value;this.value="",d(),e&&(s.focus(),l(t(this).data(i.commandRole),e)),h()}).on("focus",function(){var e=t(this);e.data(i.selectionMarker)||(f(e,i.selectionColor),e.focus())}).on("blur",function(){var e=t(this);e.data(i.selectionMarker)&&f(e,!1)});var n=e.find("input[type=file][data-"+i.commandRole+"]");n.fileupload({dataType:"json",dropZone:s,formData:function(){return[{name:"policy",value:n.attr("data-policy")},{name:"signature",value:n.attr("data-signature")}]},send:function(){s.next().show()},always:function(){s.next().hide()},done:function(t,e){var i=e.result.url,r=n.attr("data-domain")+i+"!huge";d(),s.focus(),l("insertImage",r),h()}})},g=function(){s.on("dragenter dragover",!1).on("drop",function(t){var e=t.originalEvent.dataTransfer;t.stopPropagation(),t.preventDefault(),e&&e.files&&e.files.length>0&&p(e.files)})};return r=t.extend({},t.fn.wysiwyg.defaults,i),o="a[data-"+r.commandRole+"],button[data-"+r.commandRole+"],input[type=button][data-"+r.commandRole+"]",c(r.hotKeys),r.dragAndDropImages&&g(),m(t(r.toolbarSelector),r),s.attr("contenteditable",!0).on("mouseup keyup mouseout",function(){h(),a()}),t(window).bind("touchend",function(t){var e=s.is(t.target)||s.has(t.target).length>0,i=u(),n=i&&i.startContainer===i.endContainer&&i.startOffset===i.endOffset;(!n||e)&&(h(),a())}),this},t.fn.wysiwyg.defaults={hotKeys:{"ctrl+z meta+z":"undo","ctrl+y meta+y meta+shift+z":"redo"},toolbarSelector:"[data-role=editor-toolbar]",commandRole:"edit",activeToolbarClass:"btn-info",selectionMarker:"edit-focus-marker",selectionColor:"darkgrey",dragAndDropImages:!0,fileUploadError:function(t,e){console.log("File upload error",t,e)}}}(window.jQuery),!function(t){"use strict";t.expr[":"].icontains=function(e,i,n){return t(e).text().toUpperCase().indexOf(n[3].toUpperCase())>=0};var e=function(i,n,r){r&&(r.stopPropagation(),r.preventDefault()),this.$element=t(i),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=t.extend({},t.fn.selectpicker.defaults,this.$element.data(),"object"==typeof n&&n),null===this.options.title&&(this.options.title=this.$element.attr("title")),this.val=e.prototype.val,this.render=e.prototype.render,this.refresh=e.prototype.refresh,this.setStyle=e.prototype.setStyle,this.selectAll=e.prototype.selectAll,this.deselectAll=e.prototype.deselectAll,this.init()};e.prototype={constructor:e,init:function(){var e=this,i=this.$element.attr("id");this.$element.hide(),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement),this.$menu=this.$newElement.find("> .dropdown-menu"),this.$button=this.$newElement.find("> button"),this.$searchbox=this.$newElement.find("input"),void 0!==i&&(this.$button.attr("data-id",i),t('label[for="'+i+'"]').click(function(t){t.preventDefault(),e.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.liHeight(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this)},createDropdown:function(){var e=this.multiple?" show-tick":"",i=this.$element.parent().hasClass("input-group")?" input-group-btn":"",n=this.autofocus?" autofocus":"",r=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",o=this.options.liveSearch?'<div class="bootstrap-select-searchbox"><input type="text" class="input-block-level form-control" /></div>':"",s=this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-block"><button class="actions-btn bs-select-all btn btn-sm btn-default">Select All</button><button class="actions-btn bs-deselect-all btn btn-sm btn-default">Deselect All</button></div></div>':"",a='<div class="btn-group bootstrap-select'+e+i+'"><button type="button" class="btn dropdown-toggle selectpicker" data-toggle="dropdown"'+n+'><span class="filter-option pull-left"></span>&nbsp;<span class="caret"></span></button><div class="dropdown-menu open">'+r+o+s+'<ul class="dropdown-menu inner selectpicker" role="menu"></ul></div></div>';return t(a)},createView:function(){var t=this.createDropdown(),e=this.createLi();return t.find("ul").append(e),t},reloadLi:function(){this.destroyLi();var t=this.createLi();this.$menu.find("ul").append(t)},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var e=this,i=[],n="";return this.$element.find("option").each(function(){var n=t(this),r=n.attr("class")||"",o=n.attr("style")||"",s=n.data("content")?n.data("content"):n.html(),a=void 0!==n.data("subtext")?'<small class="muted text-muted">'+n.data("subtext")+"</small>":"",l=void 0!==n.data("icon")?'<i class="'+e.options.iconBase+" "+n.data("icon")+'"></i> ':"";if(""!==l&&(n.is(":disabled")||n.parent().is(":disabled"))&&(l="<span>"+l+"</span>"),n.data("content")||(s=l+'<span class="text">'+s+a+"</span>"),e.options.hideDisabled&&(n.is(":disabled")||n.parent().is(":disabled")))i.push('<a style="min-height: 0; padding: 0"></a>');else if(n.parent().is("optgroup")&&n.data("divider")!==!0)if(0===n.index()){var c=n.parent().attr("label"),u=void 0!==n.parent().data("subtext")?'<small class="muted text-muted">'+n.parent().data("subtext")+"</small>":"",h=n.parent().data("icon")?'<i class="'+n.parent().data("icon")+'"></i> ':"";c=h+'<span class="text">'+c+u+"</span>",i.push(0!==n[0].index?'<div class="div-contain"><div class="divider"></div></div><dt>'+c+"</dt>"+e.createA(s,"opt "+r,o):"<dt>"+c+"</dt>"+e.createA(s,"opt "+r,o))}else i.push(e.createA(s,"opt "+r,o));else i.push(n.data("divider")===!0?'<div class="div-contain"><div class="divider"></div></div>':t(this).data("hidden")===!0?"<a></a>":e.createA(s,r,o))}),t.each(i,function(t,e){var i="<a></a>"===e?'class="hide is-hidden"':"";n+='<li rel="'+t+'"'+i+">"+e+"</li>"}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),t(n)},createA:function(t,e,i){return'<a tabindex="0" class="'+e+'" style="'+i+'">'+t+'<i class="'+this.options.iconBase+" "+this.options.tickIcon+' icon-ok check-mark"></i></a>'},render:function(e){var i=this;e!==!1&&this.$element.find("option").each(function(e){i.setDisabled(e,t(this).is(":disabled")||t(this).parent().is(":disabled")),i.setSelected(e,t(this).is(":selected"))}),this.tabIndex();var n=this.$element.find("option:selected").map(function(){var e,n=t(this),r=n.data("icon")&&i.options.showIcon?'<i class="'+i.options.iconBase+" "+n.data("icon")+'"></i> ':"";return e=i.options.showSubtext&&n.attr("data-subtext")&&!i.multiple?' <small class="muted text-muted">'+n.data("subtext")+"</small>":"",n.data("content")&&i.options.showContent?n.data("content"):void 0!==n.attr("title")?n.attr("title"):r+n.html()+e}).toArray(),r=this.multiple?n.join(this.options.multipleSeparator):n[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var o=this.options.selectedTextFormat.split(">"),s=this.options.hideDisabled?":not([disabled])":"";(o.length>1&&n.length>o[1]||1==o.length&&n.length>=2)&&(r=this.options.countSelectedText.replace("{0}",n.length).replace("{1}",this.$element.find('option:not([data-divider="true"]):not([data-hidden="true"])'+s).length))}this.options.title=this.$element.attr("title"),r||(r=void 0!==this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",t.trim(r)),this.$newElement.find(".filter-option").html(r)},setStyle:function(t,e){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device/gi,""));var i=t?t:this.options.style;"add"==e?this.$button.addClass(i):"remove"==e?this.$button.removeClass(i):(this.$button.removeClass(this.options.style),this.$button.addClass(i))},liHeight:function(){if(this.options.size!==!1){var t=this.$menu.parent().clone().find("> .dropdown-toggle").prop("autofocus",!1).end().appendTo("body"),e=t.addClass("open").find("> .dropdown-menu"),i=e.find("li > a").outerHeight(),n=this.options.header?e.find(".popover-title").outerHeight():0,r=this.options.liveSearch?e.find(".bootstrap-select-searchbox").outerHeight():0,o=this.options.actionsBox?e.find(".bs-actionsbox").outerHeight():0;t.remove(),this.$newElement.data("liHeight",i).data("headerHeight",n).data("searchHeight",r).data("actionsHeight",o)}},setSize:function(){var e,i,n,r=this,o=this.$menu,s=o.find(".inner"),a=this.$newElement.outerHeight(),l=this.$newElement.data("liHeight"),c=this.$newElement.data("headerHeight"),u=this.$newElement.data("searchHeight"),h=this.$newElement.data("actionsHeight"),d=o.find("li .divider").outerHeight(!0),p=parseInt(o.css("padding-top"))+parseInt(o.css("padding-bottom"))+parseInt(o.css("border-top-width"))+parseInt(o.css("border-bottom-width")),f=this.options.hideDisabled?":not(.disabled)":"",m=t(window),g=p+parseInt(o.css("margin-top"))+parseInt(o.css("margin-bottom"))+2,v=function(){i=r.$newElement.offset().top-m.scrollTop(),n=m.height()-i-a};if(v(),this.options.header&&o.css("padding-top",0),"auto"==this.options.size){var b=function(){var t,a=r.$lis.not(".hide");v(),e=n-g,r.options.dropupAuto&&r.$newElement.toggleClass("dropup",i>n&&e-g<o.height()),r.$newElement.hasClass("dropup")&&(e=i-g),t=a.length+a.find("dt").length>3?3*l+g-2:0,o.css({"max-height":e+"px",overflow:"hidden","min-height":t+c+u+h+"px"}),s.css({"max-height":e-c-u-h-p+"px","overflow-y":"auto","min-height":Math.max(t-p,0)+"px"})};b(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",b),t(window).off("resize.getSize").on("resize.getSize",b),t(window).off("scroll.getSize").on("scroll.getSize",b)}else if(this.options.size&&"auto"!=this.options.size&&o.find("li"+f).length>this.options.size){var y=o.find("li"+f+" > *").filter(":not(.div-contain)").slice(0,this.options.size).last().parent().index(),w=o.find("li").slice(0,y+1).find(".div-contain").length;e=l*this.options.size+w*d+p,r.options.dropupAuto&&this.$newElement.toggleClass("dropup",i>n&&e<o.height()),o.css({"max-height":e+c+u+h+"px",overflow:"hidden"}),s.css({"max-height":e-p+"px","overflow-y":"auto"})}},setWidth:function(){if("auto"==this.options.width){this.$menu.css("min-width","0");var t=this.$newElement.clone().appendTo("body"),e=t.find("> .dropdown-menu").css("width"),i=t.css("width","auto").find("> button").css("width");t.remove(),this.$newElement.css("width",Math.max(parseInt(e),parseInt(i))+"px")}else"fit"==this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){var e,i,n=this,r="<div />",o=t(r),s=function(t){o.addClass(t.attr("class").replace(/form-control/gi,"")).toggleClass("dropup",t.hasClass("dropup")),e=t.offset(),i=t.hasClass("dropup")?0:t[0].offsetHeight,o.css({top:e.top+i,left:e.left,width:t[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){n.isDisabled()||(s(t(this)),o.appendTo(n.options.container),o.toggleClass("open",!t(this).hasClass("open")),o.append(n.$menu))}),t(window).resize(function(){s(n.$newElement)}),t(window).on("scroll",function(){s(n.$newElement)}),t("html").on("click",function(e){t(e.target).closest(n.$newElement).length<1&&o.removeClass("open")})},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement),this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null,this.reloadLi(),this.render(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},update:function(){this.reloadLi(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},setSelected:function(e,i){null==this.$lis&&(this.$lis=this.$menu.find("li")),t(this.$lis[e]).toggleClass("selected",i)},setDisabled:function(e,i){null==this.$lis&&(this.$lis=this.$menu.find("li")),i?t(this.$lis[e]).addClass("disabled").find("a").attr("href","#").attr("tabindex",-1):t(this.$lis[e]).removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element.is(":disabled")},checkDisabled:function(){var t=this;
this.isDisabled()?this.$button.addClass("disabled").attr("tabindex",-1):(this.$button.hasClass("disabled")&&this.$button.removeClass("disabled"),-1==this.$button.attr("tabindex")&&(this.$element.data("tabindex")||this.$button.removeAttr("tabindex"))),this.$button.click(function(){return!t.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var e=this;t("body").on("touchstart.dropdown",".dropdown-menu",function(t){t.stopPropagation()}),this.$newElement.on("click",function(){e.setSize(),e.options.liveSearch||e.multiple||setTimeout(function(){e.$menu.find(".selected a").focus()},10)}),this.$menu.on("click","li a",function(i){var n=t(this).parent().index(),r=e.$element.val(),o=e.$element.prop("selectedIndex");if(e.multiple&&i.stopPropagation(),i.preventDefault(),!e.isDisabled()&&!t(this).parent().hasClass("disabled")){var s=e.$element.find("option"),a=s.eq(n),l=a.prop("selected"),c=a.parent("optgroup"),u=e.options.maxOptions,h=c.data("maxOptions")||!1;if(e.multiple){if(a.prop("selected",!l),e.setSelected(n,!l),u!==!1||h!==!1){var d=u<s.filter(":selected").length,p=h<c.find("option:selected").length,f=e.options.maxOptionsText,m=f[0].replace("{n}",u),g=f[1].replace("{n}",h),v=t('<div class="notify"></div>');(u&&d||h&&p)&&(f[2]&&(m=m.replace("{var}",f[2][u>1?0:1]),g=g.replace("{var}",f[2][h>1?0:1])),a.prop("selected",!1),e.$menu.append(v),u&&d&&(v.append(t("<div>"+m+"</div>")),e.$element.trigger("maxReached.bs.select")),h&&p&&(v.append(t("<div>"+g+"</div>")),e.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){e.setSelected(n,!1)},10),v.delay(750).fadeOut(300,function(){t(this).remove()}))}}else s.prop("selected",!1),a.prop("selected",!0),e.$menu.find(".selected").removeClass("selected"),e.setSelected(n,!0);e.multiple?e.options.liveSearch&&e.$searchbox.focus():e.$button.focus(),(r!=e.$element.val()&&e.multiple||o!=e.$element.prop("selectedIndex")&&!e.multiple)&&e.$element.change()}}),this.$menu.on("click","li.disabled a, li dt, li .div-contain, .popover-title, .popover-title :not(.close)",function(t){t.target==this&&(t.preventDefault(),t.stopPropagation(),e.options.liveSearch?e.$searchbox.focus():e.$button.focus())}),this.$menu.on("click",".popover-title .close",function(){e.$button.focus()}),this.$searchbox.on("click",function(t){t.stopPropagation()}),this.$menu.on("click",".actions-btn",function(i){e.options.liveSearch?e.$searchbox.focus():e.$button.focus(),i.preventDefault(),i.stopPropagation(),t(this).is(".bs-select-all")?e.selectAll():e.deselectAll(),e.$element.change()}),this.$element.change(function(){e.render(!1)})},liveSearchListener:function(){var e=this,i=t('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api",function(){e.$menu.find(".active").removeClass("active"),e.$searchbox.val()&&(e.$searchbox.val(""),e.$lis.not(".is-hidden").removeClass("hide"),i.parent().length&&i.remove()),e.multiple||e.$menu.find(".selected").addClass("active"),setTimeout(function(){e.$searchbox.focus()},10)}),this.$searchbox.on("input propertychange",function(){e.$searchbox.val()?(e.$lis.not(".is-hidden").removeClass("hide").find("a").not(":icontains("+e.$searchbox.val()+")").parent().addClass("hide"),e.$menu.find("li").filter(":visible:not(.no-results)").length?i.parent().length&&i.remove():(i.parent().length&&i.remove(),i.html(e.options.noneResultsText+' "'+e.$searchbox.val()+'"').show(),e.$menu.find("li").last().after(i))):(e.$lis.not(".is-hidden").removeClass("hide"),i.parent().length&&i.remove()),e.$menu.find("li.active").removeClass("active"),e.$menu.find("li").filter(":visible:not(.divider)").eq(0).addClass("active").find("a").focus(),t(this).focus()}),this.$menu.on("mouseenter","a",function(i){e.$menu.find(".active").removeClass("active"),t(i.currentTarget).parent().not(".disabled").addClass("active")}),this.$menu.on("mouseleave","a",function(){e.$menu.find(".active").removeClass("active")})},val:function(t){return void 0!==t?(this.$element.val(t),this.$element.change(),this.$element):this.$element.val()},selectAll:function(){null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$element.find("option:enabled").prop("selected",!0),t(this.$lis).filter(":not(.disabled)").addClass("selected"),this.render(!1)},deselectAll:function(){null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$element.find("option:enabled").prop("selected",!1),t(this.$lis).filter(":not(.disabled)").removeClass("selected"),this.render(!1)},keydown:function(e){var i,n,r,o,s,a,l,c,u,h,d,p,f={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(i=t(this),r=i.parent(),i.is("input")&&(r=i.parent().parent()),h=r.data("this"),h.options.liveSearch&&(r=i.parent().parent()),h.options.container&&(r=h.$menu),n=t("[role=menu] li:not(.divider) a",r),p=h.$menu.parent().hasClass("open"),!p&&/([0-9]|[A-z])/.test(String.fromCharCode(e.keyCode))&&(h.options.container?h.$newElement.trigger("click"):(h.setSize(),h.$menu.parent().addClass("open"),p=h.$menu.parent().hasClass("open")),h.$searchbox.focus()),h.options.liveSearch&&(/(^9$|27)/.test(e.keyCode)&&p&&0===h.$menu.find(".active").length&&(e.preventDefault(),h.$menu.parent().removeClass("open"),h.$button.focus()),n=t("[role=menu] li:not(.divider):visible",r),i.val()||/(38|40)/.test(e.keyCode)||0===n.filter(".active").length&&(n=h.$newElement.find("li").filter(":icontains("+f[e.keyCode]+")"))),n.length){if(/(38|40)/.test(e.keyCode))o=n.index(n.filter(":focus")),a=n.parent(":not(.disabled):visible").first().index(),l=n.parent(":not(.disabled):visible").last().index(),s=n.eq(o).parent().nextAll(":not(.disabled):visible").eq(0).index(),c=n.eq(o).parent().prevAll(":not(.disabled):visible").eq(0).index(),u=n.eq(s).parent().prevAll(":not(.disabled):visible").eq(0).index(),h.options.liveSearch&&(n.each(function(e){t(this).is(":not(.disabled)")&&t(this).data("index",e)}),o=n.index(n.filter(".active")),a=n.filter(":not(.disabled):visible").first().data("index"),l=n.filter(":not(.disabled):visible").last().data("index"),s=n.eq(o).nextAll(":not(.disabled):visible").eq(0).data("index"),c=n.eq(o).prevAll(":not(.disabled):visible").eq(0).data("index"),u=n.eq(s).prevAll(":not(.disabled):visible").eq(0).data("index")),d=i.data("prevIndex"),38==e.keyCode&&(h.options.liveSearch&&(o-=1),o!=u&&o>c&&(o=c),a>o&&(o=a),o==d&&(o=l)),40==e.keyCode&&(h.options.liveSearch&&(o+=1),-1==o&&(o=0),o!=u&&s>o&&(o=s),o>l&&(o=l),o==d&&(o=a)),i.data("prevIndex",o),h.options.liveSearch?(e.preventDefault(),i.is(".dropdown-toggle")||(n.removeClass("active"),n.eq(o).addClass("active").find("a").focus(),i.focus())):n.eq(o).focus();else if(!i.is("input")){var m,g,v=[];n.each(function(){t(this).parent().is(":not(.disabled)")&&t.trim(t(this).text().toLowerCase()).substring(0,1)==f[e.keyCode]&&v.push(t(this).parent().index())}),m=t(document).data("keycount"),m++,t(document).data("keycount",m),g=t.trim(t(":focus").text().toLowerCase()).substring(0,1),g!=f[e.keyCode]?(m=1,t(document).data("keycount",m)):m>=v.length&&(t(document).data("keycount",0),m>v.length&&(m=1)),n.eq(v[m-1]).focus()}/(13|32|^9$)/.test(e.keyCode)&&p&&(/(32)/.test(e.keyCode)||e.preventDefault(),h.options.liveSearch?/(32)/.test(e.keyCode)||(h.$menu.find(".active a").click(),i.focus()):t(":focus").click(),t(document).data("keycount",0)),(/(^9$|27)/.test(e.keyCode)&&p&&(h.multiple||h.options.liveSearch)||/(27)/.test(e.keyCode)&&!p)&&(h.$menu.parent().removeClass("open"),h.$button.focus())}},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},destroy:function(){this.$newElement.remove(),this.$element.remove()}},t.fn.selectpicker=function(i,n){var r,o=arguments,s=this.each(function(){if(t(this).is("select")){var s=t(this),a=s.data("selectpicker"),l="object"==typeof i&&i;if(a){if(l)for(var c in l)a.options[c]=l[c]}else s.data("selectpicker",a=new e(this,l,n));if("string"==typeof i){var u=i;a[u]instanceof Function?([].shift.apply(o),r=a[u].apply(a,o)):r=a.options[u]}}});return void 0!==r?r:s},t.fn.selectpicker.defaults={style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",noneSelectedText:"Nothing selected",noneResultsText:"No results match",countSelectedText:"{0} of {1} selected",maxOptionsText:["Limit reached ({n} {var} max)","Group limit reached ({n} {var} max)",["items","item"]],width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,actionsBox:!1,multipleSeparator:", ",iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:!1},t(document).data("keycount",0).on("keydown",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bootstrap-select-searchbox input",e.prototype.keydown).on("focusin.modal",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bootstrap-select-searchbox input",function(t){t.stopPropagation()})}(window.jQuery),!function(t){var e=function(e,i){this.options=i,this.$element=t(e),this.options.remote&&this.$element.find(".popover-content").load(this.options.remote),this.$parent=i.$parent};e.prototype=t.extend({},t.fn.modal.Constructor.prototype,{constructor:e,getPosition:function(){var e=this.$parent.offset(),i=this.$element.offset(),n={top:e.top-i.top,left:this.$parent[0].offsetLeft};return t.extend({},n,{width:this.$parent[0].offsetWidth,height:this.$parent[0].offsetHeight})},show:function(){var e=this.$element;e.css({top:0,left:0,display:"block","z-index":1050});var i,n="function"==typeof this.options.placement?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,r=this.getPosition(),o=r.top+r.height/2,s=(r.left+r.width/2,e[0].offsetWidth),a=e[0].offsetHeight;switch(n){case"bottom":i={top:r.top+r.height,left:r.left+r.width/2-s/2};break;case"top":i={top:r.top-a,left:r.left+r.width/2-s/2};break;case"left":i={top:o-a/2,left:r.left-s};break;case"right":i={top:o-a/2,left:r.left+r.width}}if("left"===n||"right"===n){i.top<20&&(i.top=20,this.$element.offset().top&&(i.top=0));var l=e.find(".arrow");l.css("top",o-i.top)}e.css(i).addClass(n).addClass("in"),t.fn.modal.Constructor.prototype.show.call(this,arguments)},backdrop:function(t){t()}}),t.fn.modalPopover=function(i){return this.each(function(){var n=t(this),r=n.data("modal-popover"),o=t.extend({},t.fn.modalPopover.defaults,n.data(),"object"==typeof i&&i);o.$parent=r&&r.$parent||o.$parent||t(o.target),r||n.data("modal-popover",r=new e(this,o)),"string"==typeof i&&r[i]();var s=function(e){-1===t(e.target).parents().index(n)&&-1===t(e.target).parents().index(o.$parent)&&(n.modalPopover("hide"),t(document).unbind("click",s))};t('[data-dismiss="modal-popup"]').on("click",function(){var e=t.Event("hide.bs.modal");n.trigger(e),n.hide(),t(document).unbind("click",s)}),n.one("shown.bs.modal",function(){setTimeout(function(){t(document).on("click",s)},0)})})},t.fn.modalPopover.Constructor=e,t.fn.modalPopover.defaults=t.extend({},t.fn.modal.defaults,{placement:"right",keyboard:!0}),t(function(){t("body").on("click.modal-popover.data-api",'[data-toggle="modal-popover"]',function(e){var i=t(this),n=i.attr("href"),r=t(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("modal-popover")?"toggle":t.extend({remote:!/#/.test(n)&&n},r.data(),i.data());o.$parent=i,e.preventDefault(),r.modalPopover(o).modalPopover("show")})})}(window.jQuery),function(t){var e={isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},bind:t.proxy,each:function(e,i){function n(t,e){return i(e,t)}t.each(e,n)},map:t.map,filter:t.grep,every:function(e,i){var n=!0;return e?(t.each(e,function(t,r){return(n=i.call(null,r,t,e))?void 0:!1}),!!n):n},some:function(e,i){var n=!1;return e?(t.each(e,function(t,r){return(n=i.call(null,r,t,e))?!1:void 0}),!!n):n},mixin:t.extend,getUniqueId:function(){var t=0;return function(){return t++}}(),templatify:function(e){function i(){return String(e)}return t.isFunction(e)?e:i},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,r;return function(){var o,s,a=this,l=arguments;return o=function(){n=null,i||(r=t.apply(a,l))},s=i&&!n,clearTimeout(n),n=setTimeout(o,e),s&&(r=t.apply(a,l)),r}},throttle:function(t,e){var i,n,r,o,s,a;return s=0,a=function(){s=new Date,r=null,o=t.apply(i,n)},function(){var l=new Date,c=e-(l-s);return i=this,n=arguments,0>=c?(clearTimeout(r),r=null,s=l,o=t.apply(i,n)):r||(r=setTimeout(a,c)),o}},noop:function(){}},i="0.10.1",n=function(){function t(t){this.maxSize=t||100,this.size=0,this.hash={},this.list=new i}function i(){this.head=this.tail=null}function n(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(t.prototype,{set:function(t,e){var i,r=this.list.tail;this.size>=this.maxSize&&(this.list.remove(r),delete this.hash[r.key]),(i=this.hash[t])?(i.val=e,this.list.moveToFront(i)):(i=new n(t,e),this.list.add(i),this.hash[t]=i,this.size++)},get:function(t){var e=this.hash[t];return e?(this.list.moveToFront(e),e.val):void 0}}),e.mixin(i.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),t}(this),r=function(){function t(t){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function i(){return(new Date).getTime()}function n(t){return JSON.stringify(e.isUndefined(t)?null:t)}function r(t){return JSON.parse(t)}var o,s;try{o=window.localStorage,o.setItem("~~~","!"),o.removeItem("~~~")}catch(a){o=null}return s=o&&window.JSON?{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},get:function(t){return this.isExpired(t)&&this.remove(t),r(o.getItem(this._prefix(t)))},set:function(t,r,s){return e.isNumber(s)?o.setItem(this._ttlKey(t),n(i()+s)):o.removeItem(this._ttlKey(t)),o.setItem(this._prefix(t),n(r))},remove:function(t){return o.removeItem(this._ttlKey(t)),o.removeItem(this._prefix(t)),this},clear:function(){var t,e,i=[],n=o.length;for(t=0;n>t;t++)(e=o.key(t)).match(this.keyMatcher)&&i.push(e.replace(this.keyMatcher,""));for(t=i.length;t--;)this.remove(i[t]);return this},isExpired:function(t){var n=r(o.getItem(this._ttlKey(t)));return e.isNumber(n)&&i()>n?!0:!1}}:{get:e.noop,set:e.noop,remove:e.noop,clear:e.noop,isExpired:e.noop},e.mixin(t.prototype,s),t}(),o=function(){function i(e){e=e||{},this._send=e.transport?r(e.transport):t.ajax,this._get=e.rateLimiter?e.rateLimiter(this._get):this._get}function r(i){return function(n,r){function o(t){e.defer(function(){a.resolve(t)})}function s(t){e.defer(function(){a.reject(t)})}var a=t.Deferred();return i(n,r,o,s),a}}var o=0,s={},a=6,l=new n(10);return i.setMaxPendingRequests=function(t){a=t},i.resetCache=function(){l=new n(10)},e.mixin(i.prototype,{_get:function(t,e,i){function n(e){i&&i(e),l.set(t,e)}function r(){o--,delete s[t],u.onDeckRequestArgs&&(u._get.apply(u,u.onDeckRequestArgs),u.onDeckRequestArgs=null)}var c,u=this;(c=s[t])?c.done(n):a>o?(o++,s[t]=this._send(t,e).done(n).always(r)):this.onDeckRequestArgs=[].slice.call(arguments,0)},get:function(t,i,n){var r;return e.isFunction(i)&&(n=i,i={}),(r=l.get(t))?e.defer(function(){n&&n(r)}):this._get(t,i,n),!!r}}),i}(),s=function(){function i(e){e=e||{},e.datumTokenizer&&e.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=e.datumTokenizer,this.queryTokenizer=e.queryTokenizer,this.datums=[],this.trie=r()}function n(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function r(){return{ids:[],children:{}}}function o(t){for(var e={},i=[],n=0;n<t.length;n++)e[t[n]]||(e[t[n]]=!0,i.push(t[n]));return i}function s(t,e){function i(t,e){return t-e}var n=0,r=0,o=[];for(t=t.sort(i),e=e.sort(i);n<t.length&&r<e.length;)t[n]<e[r]?n++:t[n]>e[r]?r++:(o.push(t[n]),n++,r++);return o}return e.mixin(i.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var i=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var o,s;o=i.datums.push(t)-1,s=n(i.datumTokenizer(t)),e.each(s,function(t){var e,n,s;for(e=i.trie,n=t.split("");s=n.shift();)e=e.children[s]||(e.children[s]=r()),e.ids.push(o)})})},get:function(t){var i,r,a=this;return i=n(this.queryTokenizer(t)),e.each(i,function(t){var e,i,n,o;if(r&&0===r.length)return!1;for(e=a.trie,i=t.split("");e&&(n=i.shift());)e=e.children[n];return e&&0===i.length?(o=e.ids.slice(0),void(r=r?s(r,o):o)):(r=[],!1)}),r?e.map(o(r),function(t){return a.datums[t]}):[]},serialize:function(){return{datums:this.datums,trie:this.trie}}}),i}(),a=function(){function n(t){var i=t.local||null;return e.isFunction(i)&&(i=i.call(null)),i}function r(n){var r,o;return o={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(r=n.prefetch||null)&&(r=e.isString(r)?{url:r}:r,r=e.mixin(o,r),r.thumbprint=i+r.thumbprint,r.ajax.type=r.ajax.type||"GET",r.ajax.dataType=r.ajax.dataType||"json",!r.url&&t.error("prefetch requires url to be set")),r}function o(i){function n(t){return function(i){return e.debounce(i,t)}}function r(t){return function(i){return e.throttle(i,t)}}var o,s;return s={url:null,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(o=i.remote||null)&&(o=e.isString(o)?{url:o}:o,o=e.mixin(s,o),o.rateLimiter=/^throttle$/i.test(o.rateLimitBy)?r(o.rateLimitWait):n(o.rateLimitWait),o.ajax.type=o.ajax.type||"GET",o.ajax.dataType=o.ajax.dataType||"json",delete o.rateLimitBy,delete o.rateLimitWait,!o.url&&t.error("remote requires url to be set")),o}return{local:n,prefetch:r,remote:o}}(),l=(window.Bloodhound=function(){function i(e){e&&(e.local||e.prefetch||e.remote)||t.error("one of local, prefetch, or remote is required"),this.limit=e.limit||5,this.sorter=n(e.sorter),this.dupDetector=e.dupDetector||l,this.local=a.local(e),this.prefetch=a.prefetch(e),this.remote=a.remote(e),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new s({datumTokenizer:e.datumTokenizer,queryTokenizer:e.queryTokenizer}),this.storage=this.cacheKey?new r(this.cacheKey):null}function n(t){function i(e){return e.sort(t)}function n(t){return t}return e.isFunction(t)?i:n}function l(){return!1}var c;return c={data:"data",protocol:"protocol",thumbprint:"thumbprint"},i.tokenizers={whitespace:function(t){return t.split(/\s+/)},nonword:function(t){return t.split(/\W+/)}},e.mixin(i.prototype,{_loadPrefetch:function(e){function i(t){var i;i=e.filter?e.filter(t):t,o.add(i),o._saveToStorage(o.index.serialize(),e.thumbprint,e.ttl)}var n,r,o=this;return(n=this._readFromStorage(e.thumbprint))?(this.index.bootstrap(n),r=t.Deferred().resolve()):r=t.ajax(e.url,e.ajax).done(i),r},_getFromRemote:function(t,e){function i(t){var i=o.remote.filter?o.remote.filter(t):t;e(i)}var n,r,o=this;return t=t||"",r=encodeURIComponent(t),n=this.remote.replace?this.remote.replace(this.remote.url,t):this.remote.url.replace(this.remote.wildcard,r),this.transport.get(n,this.remote.ajax,i)},_saveToStorage:function(t,e,i){this.storage&&(this.storage.set(c.data,t,i),this.storage.set(c.protocol,location.protocol,i),this.storage.set(c.thumbprint,e,i))},_readFromStorage:function(t){var e,i={};return this.storage&&(i.data=this.storage.get(c.data),i.protocol=this.storage.get(c.protocol),i.thumbprint=this.storage.get(c.thumbprint)),e=i.thumbprint!==t||i.protocol!==location.protocol,i.data&&!e?i.data:null},initialize:function(){function e(){n.add(n.local)}var i,n=this;return i=this.prefetch?this._loadPrefetch(this.prefetch):t.Deferred().resolve(),this.local&&i.done(e),this.transport=this.remote?new o(this.remote):null,this.initialize=function(){return i.promise()},i.promise()},add:function(t){this.index.add(t)},get:function(t,i){function n(t){var n=r.slice(0);e.each(t,function(t){var i;return i=e.some(n,function(e){return o.dupDetector(t,e)}),!i&&n.push(t),n.length<o.limit}),i&&i(o.sorter(n))}var r,o=this,s=!1;r=this.index.get(t),r=this.sorter(r).slice(0,this.limit),r.length<this.limit&&this.transport&&(s=this._getFromRemote(t,n)),!s&&i&&i(r)},ttAdapter:function(){return e.bind(this.get,this)}}),i}(),{wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion">%BODY%</div>'}),c={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};e.isMsie()&&e.mixin(c.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),e.isMsie()&&e.isMsie()<=7&&e.mixin(c.input,{marginTop:"-1px"});var u=function(){function i(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var n="typeahead:";return e.mixin(i.prototype,{trigger:function(t){var e=[].slice.call(arguments,1);this.$el.trigger(n+t,e)}}),i}(),h=function(){function t(t,e,i,n){var r;if(!i)return this;for(e=e.split(l),i=n?a(i,n):i,this._callbacks=this._callbacks||{};r=e.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][t].push(i);return this}function e(e,i,n){return t.call(this,"async",e,i,n)}function i(e,i,n){return t.call(this,"sync",e,i,n)}function n(t){var e;if(!this._callbacks)return this;for(t=t.split(l);e=t.shift();)delete this._callbacks[e];return this}function r(t){var e,i,n,r,s;if(!this._callbacks)return this;for(t=t.split(l),n=[].slice.call(arguments,1);(e=t.shift())&&(i=this._callbacks[e]);)r=o(i.sync,this,[e].concat(n)),s=o(i.async,this,[e].concat(n)),r()&&c(s);return this}function o(t,e,i){function n(){for(var n,r=0;!n&&r<t.length;r+=1)n=t[r].apply(e,i)===!1;return!n}return n}function s(){var t;return t=window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)}}function a(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var l=/\s+/,c=s();return{onSync:i,onAsync:e,off:n,trigger:r}}(),d=function(t){function i(t,i,n){for(var r,o=[],s=0;s<t.length;s++)o.push(e.escapeRegExChars(t[s]));return r=n?"\\b("+o.join("|")+")\\b":"("+o.join("|")+")",i?new RegExp(r):new RegExp(r,"i")}var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(r){function o(e){var i,n;return(i=a.exec(e.data))&&(wrapperNode=t.createElement(r.tagName),r.className&&(wrapperNode.className=r.className),n=e.splitText(i.index),n.splitText(i[0].length),wrapperNode.appendChild(n.cloneNode(!0)),e.parentNode.replaceChild(wrapperNode,n)),!!i}function s(t,e){for(var i,n=3,r=0;r<t.childNodes.length;r++)i=t.childNodes[r],i.nodeType===n?r+=e(i)?1:0:s(i,e)}var a;r=e.mixin({},n,r),r.node&&r.pattern&&(r.pattern=e.isArray(r.pattern)?r.pattern:[r.pattern],a=i(r.pattern,r.caseSensitive,r.wordsOnly),s(r.node,o))}}(window.document),p=function(){function i(i){var r,o,a,l,c=this;i=i||{},i.input||t.error("input is missing"),r=e.bind(this._onBlur,this),o=e.bind(this._onFocus,this),a=e.bind(this._onKeydown,this),l=e.bind(this._onInput,this),this.$hint=t(i.hint),this.$input=t(i.input).on("blur.tt",r).on("focus.tt",o).on("keydown.tt",a),0===this.$hint.length&&(this.setHintValue=this.getHintValue=this.clearHint=e.noop),e.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){s[t.which||t.keyCode]||e.defer(e.bind(c._onInput,c,t))}):this.$input.on("input.tt",l),this.query=this.$input.val(),this.$overflowHelper=n(this.$input)}function n(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"nowrap",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function r(t,e){return i.normalizeQuery(t)===i.normalizeQuery(e)}function o(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var s;return s={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},i.normalizeQuery=function(t){return(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(i.prototype,h,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(t){var e=s[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(t,e){var i,n,r;switch(t){case"tab":n=this.getHintValue(),r=this.getInputValue(),i=n&&n!==r&&!o(e);break;case"up":case"down":i=!o(e);break;default:i=!1}i&&e.preventDefault()},_shouldTrigger:function(t,e){var i;switch(t){case"tab":i=!o(e);break;default:i=!0}return i},_checkInputValue:function(){var t,e,i;t=this.getInputValue(),e=r(t,this.query),i=e?this.query.length!==t.length:!1,e?i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query=t)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(t){this.query=t},getInputValue:function(){return this.$input.val()},setInputValue:function(t,e){this.$input.val(t),!e&&this._checkInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(t){this.$hint.val(t)},resetInputValue:function(){this.$input.val(this.query)},clearHint:function(){this.$hint.val("")},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,i,n;return t=this.$input.val().length,i=this.$input[0].selectionStart,e.isNumber(i)?i===t:document.selection?(n=document.selection.createRange(),n.moveStart("character",-t),t===n.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),i}(),f=function(){function i(i){i=i||{},i.templates=i.templates||{},i.source||t.error("missing source"),i.name&&!o(i.name)&&t.error("invalid dataset name: "+i.name),this.query=null,this.highlight=!!i.highlight,this.name=i.name||e.getUniqueId(),this.source=i.source,this.displayFn=n(i.display||i.displayKey),this.templates=r(i.templates,this.displayFn),this.$el=t(l.dataset.replace("%CLASS%",this.name))}function n(t){function i(e){return e[t]}return t=t||"value",e.isFunction(t)?t:i}function r(t,i){function n(t){return"<p>"+i(t)+"</p>"}return{empty:t.empty&&e.templatify(t.empty),header:t.header&&e.templatify(t.header),footer:t.footer&&e.templatify(t.footer),suggestion:t.suggestion||n}}function o(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var s="ttDataset",a="ttValue",u="ttDatum";return i.extractDatasetName=function(e){return t(e).data(s)},i.extractValue=function(e){return t(e).data(a)},i.extractDatum=function(e){return t(e).data(u)},e.mixin(i.prototype,h,{_render:function(i,n){function r(){return m.templates.empty({query:i,isEmpty:!0})}function o(){function r(e){var i,n,r;return n=m.templates.suggestion(e),r=l.suggestion.replace("%BODY%",n),i=t(r).data(s,m.name).data(a,m.displayFn(e)).data(u,e),i.children().each(function(){t(this).css(c.suggestionChild)}),i}var o,h;return o=t(l.suggestions).css(c.suggestions),h=e.map(n,r),o.append.apply(o,h),m.highlight&&d({node:o[0],pattern:i}),o}function h(){return m.templates.header({query:i,isEmpty:!f})}function p(){return m.templates.footer({query:i,isEmpty:!f})}if(this.$el){var f,m=this;this.$el.empty(),f=n&&n.length,!f&&this.templates.empty?this.$el.html(r()).prepend(m.templates.header?h():null).append(m.templates.footer?p():null):f&&this.$el.html(o()).prepend(m.templates.header?h():null).append(m.templates.footer?p():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(t){function e(e){t===i.query&&i._render(t,e)}var i=this;this.query=t,this.source(t,e)},clear:function(){this._render(this.query||"")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),i}(),m=function(){function i(i){var r,o,s,a=this;i=i||{},i.menu||t.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=e.map(i.datasets,n),r=e.bind(this._onSuggestionClick,this),o=e.bind(this._onSuggestionMouseEnter,this),s=e.bind(this._onSuggestionMouseLeave,this),this.$menu=t(i.menu).on("click.tt",".tt-suggestion",r).on("mouseenter.tt",".tt-suggestion",o).on("mouseleave.tt",".tt-suggestion",s),e.each(this.datasets,function(t){a.$menu.append(t.getRoot()),t.onSync("rendered",a._onRendered,a)})}function n(t){return new f(t)}return e.mixin(i.prototype,h,{_onSuggestionClick:function(e){this.trigger("suggestionClicked",t(e.currentTarget))},_onSuggestionMouseEnter:function(e){this._removeCursor(),this._setCursor(t(e.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function t(t){return t.isEmpty()}this.isEmpty=e.every(this.datasets,t),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(t,e){t.first().addClass("tt-cursor"),!e&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(t){var e,i,n,r;if(this.isOpen){if(i=this._getCursor(),e=this._getSuggestions(),this._removeCursor(),n=e.index(i)+t,n=(n+1)%(e.length+1)-1,-1===n)return void this.trigger("cursorRemoved");-1>n&&(n=e.length-1),this._setCursor(r=e.eq(n)),this._ensureVisible(r)}},_ensureVisible:function(t){var e,i,n,r;e=t.position().top,i=e+t.outerHeight(!0),n=this.$menu.scrollTop(),r=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),0>e?this.$menu.scrollTop(n+e):i>r&&this.$menu.scrollTop(n+(i-r))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(t){this.$menu.css("ltr"===t?c.ltr:c.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(t){var e=null;return t.length&&(e={raw:f.extractDatum(t),value:f.extractValue(t),datasetName:f.extractDatasetName(t)}),e},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(t){function i(e){e.update(t)}e.each(this.datasets,i)},empty:function(){function t(t){t.clear()}e.each(this.datasets,t),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function t(t){t.destroy()}this.$menu.off(".tt"),this.$menu=null,e.each(this.datasets,t)}}),i}(),g=function(){function i(i){var r,o,s;i=i||{},i.input||t.error("missing input"),this.autoselect=!!i.autoselect,this.minLength=e.isNumber(i.minLength)?i.minLength:1,this.$node=n(i.input,i.withHint),r=this.$node.find(".tt-dropdown-menu"),o=this.$node.find(".tt-input"),s=this.$node.find(".tt-hint"),this.eventBus=i.eventBus||new u({el:o}),this.dropdown=new m({menu:r,datasets:i.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new p({input:o,hint:s}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),r.on("mousedown.tt",function(t){e.isMsie()&&e.isMsie()<9&&(o[0].onbeforedeactivate=function(){window.event.returnValue=!1,o[0].onbeforedeactivate=null
}),t.preventDefault()})}function n(e,i){var n,o,a,u;n=t(e),o=t(l.wrapper).css(c.wrapper),a=t(l.dropdown).css(c.dropdown),u=n.clone().css(c.hint).css(r(n)),u.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder").prop("disabled",!0).attr({autocomplete:"off",spellcheck:"false"}),n.data(s,{dir:n.attr("dir"),autocomplete:n.attr("autocomplete"),spellcheck:n.attr("spellcheck"),style:n.attr("style")}),n.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(i?c.input:c.inputWithNoHint);try{!n.attr("dir")&&n.attr("dir","auto")}catch(h){}return n.wrap(o).parent().prepend(i?u:null).append(a)}function r(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function o(t){var i=t.find(".tt-input");e.each(i.data(s),function(t,n){e.isUndefined(t)?i.removeAttr(n):i.attr(n,t)}),i.detach().removeData(s).removeClass("tt-input").insertAfter(t),t.remove()}var s="ttAttrs";return e.mixin(i.prototype,{_onSuggestionClicked:function(t,e){var i;(i=this.dropdown.getDatumForSuggestion(e))&&this._select(i)},_onCursorMoved:function(){var t=this.dropdown.getDatumForCursor();this.input.clearHint(),this.input.setInputValue(t.value,!0),this.eventBus.trigger("cursorchanged",t.raw,t.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.dropdown.empty(),this.dropdown.open()},_onBlurred:function(){this.dropdown.close()},_onEnterKeyed:function(t,e){var i,n;i=this.dropdown.getDatumForCursor(),n=this.dropdown.getDatumForTopSuggestion(),i?(this._select(i),e.preventDefault()):this.autoselect&&n&&(this._select(n),e.preventDefault())},_onTabKeyed:function(t,e){var i;(i=this.dropdown.getDatumForCursor())?(this._select(i),e.preventDefault()):this._autocomplete()},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var t=this.input.getQuery();!this.dropdown.isOpen&&t.length>=this.minLength&&this.dropdown.update(t),this.dropdown.open(),this.dropdown.moveCursorUp()},_onDownKeyed:function(){var t=this.input.getQuery();!this.dropdown.isOpen&&t.length>=this.minLength&&this.dropdown.update(t),this.dropdown.open(),this.dropdown.moveCursorDown()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(t,e){this.input.clearHint(),this.dropdown.empty(),e.length>=this.minLength&&this.dropdown.update(e),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var t;this.dir!==(t=this.input.getLanguageDirection())&&(this.dir=t,this.$node.css("direction",t),this.dropdown.setLanguageDirection(t))},_updateHint:function(){var t,i,n,r,o,s;t=this.dropdown.getDatumForTopSuggestion(),t&&this.dropdown.isVisible()&&!this.input.hasOverflow()&&(i=this.input.getInputValue(),n=p.normalizeQuery(i),r=e.escapeRegExChars(n),o=new RegExp("^(?:"+r+")(.*$)","i"),s=o.exec(t.value),this.input.setHintValue(i+(s?s[1]:"")))},_autocomplete:function(){var t,e,i;t=this.input.getHintValue(),e=this.input.getQuery(),t&&e!==t&&this.input.isCursorAtEnd()&&(i=this.dropdown.getDatumForTopSuggestion(),i&&this.input.setInputValue(i.value),this.eventBus.trigger("autocompleted",i.raw,i.datasetName))},_select:function(t){this.input.clearHint(),this.input.setQuery(t.value),this.input.setInputValue(t.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",t.raw,t.datasetName),this.dropdown.close(),e.defer(e.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},getQuery:function(){return this.input.getQuery()},setQuery:function(t){this.input.setInputValue(t)},destroy:function(){this.input.destroy(),this.dropdown.destroy(),o(this.$node),this.$node=null}}),i}();!function(){var i,n,r;i=t.fn.typeahead,n="ttTypeahead",r={initialize:function(i,r){function o(){var o,s,a=t(this);e.each(r,function(t){t.highlight=!!i.highlight}),s=new g({input:a,eventBus:o=new u({el:a}),withHint:e.isUndefined(i.hint)?!0:!!i.hint,minLength:i.minLength,autoselect:i.autoselect,datasets:r}),a.data(n,s)}return r=e.isArray(r)?r:[].slice.call(arguments,1),i=i||{},this.each(o)},open:function(){function e(){var e,i=t(this);(e=i.data(n))&&e.open()}return this.each(e)},close:function(){function e(){var e,i=t(this);(e=i.data(n))&&e.close()}return this.each(e)},val:function(e){function i(){var i,r=t(this);(i=r.data(n))&&i.setQuery(e)}function r(t){var e,i;return(e=t.data(n))&&(i=e.getQuery()),i}return arguments.length?this.each(i):r(this.first())},destroy:function(){function e(){var e,i=t(this);(e=i.data(n))&&(e.destroy(),i.removeData(n))}return this.each(e)}},t.fn.typeahead=function(t){return r[t]?r[t].apply(this,[].slice.call(arguments,1)):r.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=i,this}}()}(window.jQuery),function(){!function(t){return"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(t){"use strict";var e,i,n,r,o,s,a,l,c,u,h;return u="caret",e=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.setPos=function(){return this.domInputor},e.prototype.getIEPosition=function(){return t.noop()},e.prototype.getPosition=function(){return t.noop()},e.prototype.getOldIEPos=function(){var t,e;return e=a.selection.createRange(),t=a.body.createTextRange(),t.moveToElementText(this.domInputor),t.setEndPoint("EndToEnd",e),t.text.length},e.prototype.getPos=function(){var t,e,i;return(i=this.range())?(t=i.cloneRange(),t.selectNodeContents(this.domInputor),t.setEnd(i.endContainer,i.endOffset),e=t.toString().length,t.detach(),e):a.selection?this.getOldIEPos():void 0},e.prototype.getOldIEOffset=function(){var t,e;return t=a.selection.createRange().duplicate(),t.moveStart("character",-1),e=t.getBoundingClientRect(),{height:e.bottom-e.top,left:e.left,top:e.top}},e.prototype.getOffset=function(){var e,i,n,r;if(c.getSelection&&(n=this.range())){if(n.endOffset-1<0)return null;e=n.cloneRange(),e.setStart(n.endContainer,n.endOffset-1),e.setEnd(n.endContainer,n.endOffset),r=e.getBoundingClientRect(),i={height:r.height,left:r.left+r.width,top:r.top},e.detach()}else a.selection&&(i=this.getOldIEOffset());return i&&!l&&(i.top+=t(c).scrollTop(),i.left+=t(c).scrollLeft()),i},e.prototype.range=function(){var t;if(c.getSelection)return t=c.getSelection(),t.rangeCount>0?t.getRangeAt(0):null},e}(),i=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.getIEPos=function(){var t,e,i,n,r,o,s;return e=this.domInputor,o=a.selection.createRange(),r=0,o&&o.parentElement()===e&&(n=e.value.replace(/\r\n/g,"\n"),i=n.length,s=e.createTextRange(),s.moveToBookmark(o.getBookmark()),t=e.createTextRange(),t.collapse(!1),r=s.compareEndPoints("StartToEnd",t)>-1?i:-s.moveStart("character",-i)),r},e.prototype.getPos=function(){return a.selection?this.getIEPos():this.domInputor.selectionStart},e.prototype.setPos=function(t){var e,i;return e=this.domInputor,a.selection?(i=e.createTextRange(),i.move("character",t),i.select()):e.setSelectionRange&&e.setSelectionRange(t,t),e},e.prototype.getIEOffset=function(t){var e,i,n,r;return i=this.domInputor.createTextRange(),t||(t=this.getPos()),i.move("character",t),n=i.boundingLeft,r=i.boundingTop,e=i.boundingHeight,{left:n,top:r,height:e}},e.prototype.getOffset=function(e){var i,n,r;return i=this.$inputor,a.selection?(n=this.getIEOffset(e),n.top+=t(c).scrollTop()+i.scrollTop(),n.left+=t(c).scrollLeft()+i.scrollLeft(),n):(n=i.offset(),r=this.getPosition(e),n={left:n.left+r.left-i.scrollLeft(),top:n.top+r.top-i.scrollTop(),height:r.height})},e.prototype.getPosition=function(t){var e,i,r,o,s,a,l;return e=this.$inputor,o=function(t){return t.replace(/</g,"&lt").replace(/>/g,"&gt").replace(/`/g,"&#96").replace(/"/g,"&quot").replace(/\r\n|\r|\n/g,"<br />")},void 0===t&&(t=this.getPos()),l=e.val().slice(0,t),r=e.val().slice(t),s="<span style='position: relative; display: inline;'>"+o(l)+"</span>",s+="<span id='caret' style='position: relative; display: inline;'>|</span>",s+="<span style='position: relative; display: inline;'>"+o(r)+"</span>",a=new n(e),i=a.create(s).rect()},e.prototype.getIEPosition=function(t){var e,i,n,r,o;return n=this.getIEOffset(t),i=this.$inputor.offset(),r=n.left-i.left,o=n.top-i.top,e=n.height,{left:r,top:o,height:e}},e}(),n=function(){function e(t){this.$inputor=t}return e.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],e.prototype.mirrorCss=function(){var e,i=this;return e={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width"),t.each(this.css_attr,function(t,n){return e[n]=i.$inputor.css(n)}),e},e.prototype.create=function(e){return this.$mirror=t("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(e),this.$inputor.after(this.$mirror),this},e.prototype.rect=function(){var t,e,i;return t=this.$mirror.find("#caret"),e=t.position(),i={left:e.left,top:e.top,height:t.height()},this.$mirror.remove(),i},e}(),r={contentEditable:function(t){return!(!t[0].contentEditable||"true"!==t[0].contentEditable)}},s={pos:function(t){return t||0===t?this.setPos(t):this.getPos()},position:function(t){return a.selection?this.getIEPosition(t):this.getPosition(t)},offset:function(e){var i,n;return n=this.getOffset(e),l&&(i=t(l).offset(),n.top+=i.top,n.left+=i.left),n}},a=null,c=null,l=null,h=function(t){var e;return(e=null!=t?t.iframe:void 0)?(l=e,c=e.contentWindow,a=e.contentDocument||c.document):(l=void 0,c=window,a=document)},o=function(t){var e;a=t[0].ownerDocument,c=a.defaultView||a.parentWindow;try{return l=c.frameElement}catch(i){e=i}},t.fn.caret=function(n,o,a){var l;return s[n]?(t.isPlainObject(o)?(h(o),o=void 0):h(a),l=r.contentEditable(this)?new e(this):new i(this),s[n].apply(l,[o])):t.error("Method "+n+" does not exist on jQuery.caret")},t.fn.caret.EditableCaret=e,t.fn.caret.InputCaret=i,t.fn.caret.Utils=r,t.fn.caret.apis=s})}.call(this),function(){!function(t){return"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(t){var e,i,n,r,o,s,a,l,c=[].slice;n=function(){function e(e){this.current_flag=null,this.controllers={},this.alias_maps={},this.$inputor=t(e),this.iframe=null,this.setIframe(),this.listen()}return e.prototype.setIframe=function(t){return t?(this.window=t.contentWindow,this.document=t.contentDocument||this.window.document,this.iframe=t):(this.document=document,this.window=window,this.iframe=null)},e.prototype.controller=function(t){var e,i,n,r;if(this.alias_maps[t])i=this.controllers[this.alias_maps[t]];else{r=this.controllers;for(n in r)if(e=r[n],n===t){i=e;break}}return i?i:this.controllers[this.current_flag]},e.prototype.set_context_for=function(t){return this.current_flag=t,this},e.prototype.reg=function(t,e){var i,n;return i=(n=this.controllers)[t]||(n[t]=new r(this,t)),e.alias&&(this.alias_maps[e.alias]=t),i.init(e),this},e.prototype.listen=function(){return this.$inputor.on("keyup.atwhoInner",function(t){return function(e){return t.on_keyup(e)}}(this)).on("keydown.atwhoInner",function(t){return function(e){return t.on_keydown(e)}}(this)).on("scroll.atwhoInner",function(t){return function(e){var i;return null!=(i=t.controller())?i.view.hide(e):void 0}}(this)).on("blur.atwhoInner",function(t){return function(e){var i;return(i=t.controller())?i.view.hide(e,i.get_opt("display_timeout")):void 0}}(this)).on("click.atwhoInner",function(t){return function(e){var i;return null!=(i=t.controller())?i.view.hide(e):void 0}}(this))},e.prototype.shutdown=function(){var t,e,i;i=this.controllers;for(e in i)t=i[e],t.destroy(),delete this.controllers[e];return this.$inputor.off(".atwhoInner")},e.prototype.dispatch=function(){return t.map(this.controllers,function(t){return function(e){var i;return(i=e.get_opt("delay"))?(clearTimeout(t.delayedCallback),t.delayedCallback=setTimeout(function(){return e.look_up()?t.set_context_for(e.at):void 0},i)):e.look_up()?t.set_context_for(e.at):void 0}}(this))},e.prototype.on_keyup=function(e){var i;switch(e.keyCode){case s.ESC:e.preventDefault(),null!=(i=this.controller())&&i.view.hide();break;case s.DOWN:case s.UP:case s.CTRL:t.noop();break;case s.P:case s.N:e.ctrlKey||this.dispatch();break;default:this.dispatch()}},e.prototype.on_keydown=function(e){var i,n;if(i=null!=(n=this.controller())?n.view:void 0,i&&i.visible())switch(e.keyCode){case s.ESC:e.preventDefault(),i.hide(e);break;case s.UP:e.preventDefault(),i.prev();break;case s.DOWN:e.preventDefault(),i.next();break;case s.P:if(!e.ctrlKey)return;e.preventDefault(),i.prev();break;case s.N:if(!e.ctrlKey)return;e.preventDefault(),i.next();break;case s.TAB:case s.ENTER:if(!i.visible())return;e.preventDefault(),i.choose(e);break;default:t.noop()}},e}(),r=function(){function i(i,n){this.app=i,this.at=n,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.setting=null,this.query=null,this.pos=0,this.cur_rect=null,this.range=null,e.append(this.$el=t("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new a(this),this.view=new l(this)}return i.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},i.prototype.init=function(e){return this.setting=t.extend({},this.setting||t.fn.atwho["default"],e),this.view.init(),this.model.reload(this.setting.data)},i.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},i.prototype.call_default=function(){var e,i,n;n=arguments[0],e=2<=arguments.length?c.call(arguments,1):[];try{return o[n].apply(this,e)}catch(r){return i=r,t.error(""+i+" Or maybe At.js doesn't have function "+n)}},i.prototype.trigger=function(t,e){var i,n;return null==e&&(e=[]),e.push(this),i=this.get_opt("alias"),n=i?""+t+"-"+i+".atwho":""+t+".atwho",this.$inputor.trigger(n,e)},i.prototype.callbacks=function(t){return this.get_opt("callbacks")[t]||o[t]},i.prototype.get_opt=function(t){var e;try{return this.setting[t]}catch(i){return e=i,null}},i.prototype.content=function(){return this.$inputor.is("textarea, input")?this.$inputor.val():this.$inputor.text()},i.prototype.catch_query=function(){var t,e,i,n,r,o;return e=this.content(),t=this.$inputor.caret("pos",{iframe:this.app.iframe}),o=e.slice(0,t),n=this.callbacks("matcher").call(this,this.at,o,this.get_opt("start_with_space")),"string"==typeof n&&n.length<=this.get_opt("max_len",20)?(r=t-n.length,i=r+n.length,this.pos=r,n={text:n,head_pos:r,end_pos:i},this.trigger("matched",[this.at,n.text])):(n=null,this.view.hide()),this.query=n},i.prototype.rect=function(){var t,e;if(t=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))return"true"===this.$inputor.attr("contentEditable")&&(t=this.cur_rect||(this.cur_rect=t)||t),e=this.app.document.selection?0:2,{left:t.left,top:t.top,bottom:t.top+t.height+e}},i.prototype.reset_rect=function(){return"true"===this.$inputor.attr("contentEditable")?this.cur_rect=null:void 0},i.prototype.mark_range=function(){return"true"===this.$inputor.attr("contentEditable")&&(this.app.window.getSelection&&(this.range=this.app.window.getSelection().getRangeAt(0)),this.app.document.selection)?this.ie8_range=this.app.document.selection.createRange():void 0},i.prototype.insert_content_for=function(e){var i,n,r;return n=e.data("value"),r=this.get_opt("insert_tpl"),this.$inputor.is("textarea, input")||!r?n:(i=t.extend({},e.data("item-data"),{"atwho-data-value":n,"atwho-at":this.at}),this.callbacks("tpl_eval").call(this,r,i))},i.prototype.insert=function(e){var i,n,r,o,s,a,l,c,u;return i=this.$inputor,u=this.callbacks("inserting_wrapper").call(this,i,e,this.get_opt("suffix")),i.is("textarea, input")?(a=i.val(),l=a.slice(0,Math.max(this.query.head_pos-this.at.length,0)),c=""+l+u+a.slice(this.query.end_pos||0),i.val(c),i.caret("pos",l.length+u.length,{iframe:this.app.iframe})):(o=this.range)?(r=o.startOffset-(this.query.end_pos-this.query.head_pos)-this.at.length,o.setStart(o.endContainer,Math.max(r,0)),o.setEnd(o.endContainer,o.endOffset),o.deleteContents(),n=t(u,this.app.document)[0],o.insertNode(n),o.setEndAfter(n),o.collapse(!1),s=this.app.window.getSelection(),s.removeAllRanges(),s.addRange(o)):(o=this.ie8_range)&&(o.moveStart("character",this.query.end_pos-this.query.head_pos-this.at.length),o.pasteHTML(u),o.collapse(!1),o.select()),i.is(":focus")||i.focus(),i.change()},i.prototype.render_view=function(t){var e;return e=this.get_opt("search_key"),t=this.callbacks("sorter").call(this,this.query.text,t.slice(0,1001),e),this.view.render(t.slice(0,this.get_opt("limit")))},i.prototype.look_up=function(){var e,i;if(e=this.catch_query())return i=function(t){return t&&t.length>0?this.render_view(t):this.view.hide()},this.model.query(e.text,t.proxy(i,this)),e},i}(),a=function(){function e(t){this.context=t,this.at=this.context.at,this.storage=this.context.$inputor}return e.prototype.destroy=function(){return this.storage.data(this.at,null)},e.prototype.saved=function(){return this.fetch()>0},e.prototype.query=function(t,e){var i,n,r;return i=this.fetch(),n=this.context.get_opt("search_key"),i=this.context.callbacks("filter").call(this.context,t,i,n)||[],r=this.context.callbacks("remote_filter"),i.length>0||!r&&0===i.length?e(i):r.call(this.context,t,e)},e.prototype.fetch=function(){return this.storage.data(this.at)||[]},e.prototype.save=function(t){return this.storage.data(this.at,this.context.callbacks("before_save").call(this.context,t||[]))},e.prototype.load=function(t){return!this.saved()&&t?this._load(t):void 0},e.prototype.reload=function(t){return this._load(t)},e.prototype._load=function(e){return"string"==typeof e?t.ajax(e,{dataType:"json"}).done(function(t){return function(e){return t.save(e)}}(this)):this.save(e)},e}(),l=function(){function e(e){this.context=e,this.$el=t("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.timeout_id=null,this.context.$el.append(this.$el),this.bind_event()}return e.prototype.init=function(){var t;return t=this.context.get_opt("alias")||this.context.at.charCodeAt(0),this.$el.attr({id:"at-view-"+t})},e.prototype.destroy=function(){return this.$el.remove()},e.prototype.bind_event=function(){var e;return e=this.$el.find("ul"),e.on("mouseenter.atwho-view","li",function(i){return e.find(".cur").removeClass("cur"),t(i.currentTarget).addClass("cur")}).on("click",function(t){return function(e){return t.choose(e),e.preventDefault()}}(this))},e.prototype.visible=function(){return this.$el.is(":visible")},e.prototype.choose=function(t){var e,i;return(e=this.$el.find(".cur")).length&&(i=this.context.insert_content_for(e),this.context.insert(this.context.callbacks("before_insert").call(this.context,i,e),e),this.context.trigger("inserted",[e,t]),this.hide(t)),this.context.get_opt("hide_without_suffix")?this.stop_showing=!0:void 0},e.prototype.reposition=function(e){var i,n;return e.bottom+this.$el.height()-t(window).scrollTop()>t(window).height()&&(e.bottom=e.top-this.$el.height()),i={left:e.left,top:e.bottom},null!=(n=this.context.callbacks("before_reposition"))&&n.call(this.context,i),this.$el.offset(i),this.context.trigger("reposition",[i])},e.prototype.next=function(){var t,e;return t=this.$el.find(".cur").removeClass("cur"),e=t.next(),e.length||(e=this.$el.find("li:first")),e.addClass("cur")},e.prototype.prev=function(){var t,e;return t=this.$el.find(".cur").removeClass("cur"),e=t.prev(),e.length||(e=this.$el.find("li:last")),e.addClass("cur")},e.prototype.show=function(){var t;return this.stop_showing?void(this.stop_showing=!1):(this.context.mark_range(),this.visible()||(this.$el.show(),this.context.trigger("shown")),(t=this.context.rect())?this.reposition(t):void 0)},e.prototype.hide=function(t,e){var i;if(this.visible())return isNaN(e)?(this.context.reset_rect(),this.$el.hide(),this.context.trigger("hidden",[t])):(i=function(t){return function(){return t.hide()}}(this),clearTimeout(this.timeout_id),this.timeout_id=setTimeout(i,e))},e.prototype.render=function(e){var i,n,r,o,s,a,l;if(!(t.isArray(e)&&e.length>0))return void this.hide();for(this.$el.find("ul").empty(),n=this.$el.find("ul"),s=this.context.get_opt("tpl"),a=0,l=e.length;l>a;a++)r=e[a],r=t.extend({},r,{"atwho-at":this.context.at}),o=this.context.callbacks("tpl_eval").call(this.context,s,r),i=t(this.context.callbacks("highlighter").call(this.context,o,this.context.query.text)),i.data("item-data",r),n.append(i);return this.show(),this.context.get_opt("highlight_first")?n.find("li:first").addClass("cur"):void 0},e}(),s={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,P:80,N:78},o={before_save:function(e){var i,n,r,o;if(!t.isArray(e))return e;for(o=[],n=0,r=e.length;r>n;n++)i=e[n],o.push(t.isPlainObject(i)?i:{name:i});return o},matcher:function(t,e,i){var n,r;return t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),i&&(t="(?:^|\\s)"+t),r=new RegExp(t+"([A-Za-z0-9_+-]*)$|"+t+"([^\\x00-\\xff]*)$","gi"),n=r.exec(e),n?n[2]||n[1]:null},filter:function(t,e,i){var n,r,o,s;for(s=[],r=0,o=e.length;o>r;r++)n=e[r],~n[i].toLowerCase().indexOf(t.toLowerCase())&&s.push(n);return s},remote_filter:null,sorter:function(t,e,i){var n,r,o,s;if(!t)return e;for(s=[],r=0,o=e.length;o>r;r++)n=e[r],n.atwho_order=n[i].toLowerCase().indexOf(t.toLowerCase()),n.atwho_order>-1&&s.push(n);return s.sort(function(t,e){return t.atwho_order-e.atwho_order})},tpl_eval:function(t,e){var i;try{return t.replace(/\$\{([^\}]*)\}/g,function(t,i){return e[i]})}catch(n){return i=n,""}},highlighter:function(t,e){var i;return e?(i=new RegExp(">\\s*(\\w*?)("+e.replace("+","\\+")+")(\\w*)\\s*<","ig"),t.replace(i,function(t,e,i,n){return"> "+e+"<strong>"+i+"</strong>"+n+" <"})):t},before_insert:function(t){return t},inserting_wrapper:function(t,e,i){var n,r;return n=""===i?i:i||" ",t.is("textarea, input")?""+e+n:"true"===t.attr("contentEditable")?(n=""===i?i:i||"&nbsp;",/firefox/i.test(navigator.userAgent)?r="<span>"+e+n+"</span>":(i="<span contenteditable='false'>"+n+"<span>",r="<span contenteditable='false'>"+e+i+"</span>"),this.app.document.selection&&(r="<span contenteditable='true'>"+e+"</span>"),r):void 0}},i={load:function(t,e){var i;return(i=this.controller(t))?i.model.load(e):void 0},setIframe:function(t){return this.setIframe(t),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},e=t("<div id='atwho-container'></div>"),t.fn.atwho=function(r){var o,s;return s=arguments,t("body").append(e),o=null,this.filter("textarea, input, [contenteditable=true]").each(function(){var e,a;return(a=(e=t(this)).data("atwho"))||e.data("atwho",a=new n(this)),"object"!=typeof r&&r?i[r]&&a?o=i[r].apply(a,Array.prototype.slice.call(s,1)):t.error("Method "+r+" does not exist on jQuery.caret"):a.reg(r.at,r)}),o||this},t.fn.atwho["default"]={at:void 0,alias:void 0,data:null,tpl:"<li data-value='${atwho-at}${name}'>${name}</li>",insert_tpl:"<span id='${id}'>${atwho-data-value}</span>",callbacks:o,search_key:"name",suffix:void 0,hide_without_suffix:!1,start_with_space:!0,highlight_first:!0,limit:5,max_len:20,display_timeout:300,delay:null}})}.call(this),function(){var t=jQuery,e=function(){function t(){this.fadeDuration=150,this.fitImagesInViewport=!0,this.resizeDuration=350,this.positionFromTop=50,this.showImageNumberLabel=!0,this.alwaysShowNavOnTouchDevices=!1,this.wrapAround=!1}return t.prototype.albumLabel=function(t,e){return"Image "+t+" of "+e},t}(),i=function(){function e(t){this.options=t,this.album=[],this.currentImageIndex=void 0,this.init()}return e.prototype.init=function(){this.enable(),this.build()},e.prototype.enable=function(){var e=this;t("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(i){return e.start(t(i.currentTarget)),!1})},e.prototype.build=function(){var e=this;t("<div id='lightboxOverlay' class='lightboxOverlay'></div><div id='lightbox' class='lightbox'><div class='lb-outerContainer'><div class='lb-container'><img class='lb-image' src='' /><div class='lb-nav'><a class='lb-prev' href='' ></a><a class='lb-next' href='' ></a></div><div class='lb-loader'><a class='lb-cancel'></a></div></div></div><div class='lb-dataContainer'><div class='lb-data'><div class='lb-details'><span class='lb-caption'></span><span class='lb-number'></span></div><div class='lb-closeContainer'><a class='lb-close'></a></div></div></div></div>").appendTo(t("body")),this.$lightbox=t("#lightbox"),this.$overlay=t("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.containerTopPadding=parseInt(this.$container.css("padding-top"),10),this.containerRightPadding=parseInt(this.$container.css("padding-right"),10),this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10),this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10),this.$overlay.hide().on("click",function(){return e.end(),!1}),this.$lightbox.hide().on("click",function(i){return"lightbox"===t(i.target).attr("id")&&e.end(),!1}),this.$outerContainer.on("click",function(i){return"lightbox"===t(i.target).attr("id")&&e.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return e.changeImage(0===e.currentImageIndex?e.album.length-1:e.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return e.changeImage(e.currentImageIndex===e.album.length-1?0:e.currentImageIndex+1),!1}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return e.end(),!1})},e.prototype.start=function(e){function i(t){n.album.push({link:t.attr("href"),title:t.attr("data-title")||t.attr("title")})}var n=this,r=t(window);r.on("resize",t.proxy(this.sizeOverlay,this)),t("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var o,s=0,a=e.attr("data-lightbox");if(a){o=t(e.prop("tagName")+'[data-lightbox="'+a+'"]');for(var l=0;l<o.length;l=++l)i(t(o[l])),o[l]===e[0]&&(s=l)}else if("lightbox"===e.attr("rel"))i(e);else{o=t(e.prop("tagName")+'[rel="'+e.attr("rel")+'"]');for(var c=0;c<o.length;c=++c)i(t(o[c])),o[c]===e[0]&&(s=c)}var u=r.scrollTop()+this.options.positionFromTop,h=r.scrollLeft();this.$lightbox.css({top:u+"px",left:h+"px"}).fadeIn(this.options.fadeDuration),this.changeImage(s)},e.prototype.changeImage=function(e){var i=this;this.disableKeyboardNav();var n=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),t(".lb-loader").fadeIn("fast"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var r=new Image;r.onload=function(){var o,s,a,l,c,u,h;n.attr("src",i.album[e].link),o=t(r),n.width(r.width),n.height(r.height),i.options.fitImagesInViewport&&(h=t(window).width(),u=t(window).height(),c=h-i.containerLeftPadding-i.containerRightPadding-20,l=u-i.containerTopPadding-i.containerBottomPadding-120,(r.width>c||r.height>l)&&(r.width/c>r.height/l?(a=c,s=parseInt(r.height/(r.width/a),10),n.width(a),n.height(s)):(s=l,a=parseInt(r.width/(r.height/s),10),n.width(a),n.height(s)))),i.sizeContainer(n.width(),n.height())},r.src=this.album[e].link,this.currentImageIndex=e},e.prototype.sizeOverlay=function(){this.$overlay.width(t(window).width()).height(t(document).height())},e.prototype.sizeContainer=function(t,e){function i(){n.$lightbox.find(".lb-dataContainer").width(s),n.$lightbox.find(".lb-prevLink").height(a),n.$lightbox.find(".lb-nextLink").height(a),n.showImage()}var n=this,r=this.$outerContainer.outerWidth(),o=this.$outerContainer.outerHeight(),s=t+this.containerLeftPadding+this.containerRightPadding,a=e+this.containerTopPadding+this.containerBottomPadding;r!==s||o!==a?this.$outerContainer.animate({width:s,height:a},this.options.resizeDuration,"swing",function(){i()}):i()},e.prototype.showImage=function(){this.$lightbox.find(".lb-loader").hide(),this.$lightbox.find(".lb-image").fadeIn("fast"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},e.prototype.updateNav=function(){var t=!1;try{document.createEvent("TouchEvent"),t=this.options.alwaysShowNavOnTouchDevices?!0:!1}catch(e){}this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?(t&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(this.currentImageIndex>0&&(this.$lightbox.find(".lb-prev").show(),t&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),t&&this.$lightbox.find(".lb-next").css("opacity","1"))))},e.prototype.updateDetails=function(){var e=this;"undefined"!=typeof this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast").find("a").on("click",function(){location.href=t(this).attr("href")}),this.album.length>1&&this.options.showImageNumberLabel?this.$lightbox.find(".lb-number").text(this.options.albumLabel(this.currentImageIndex+1,this.album.length)).fadeIn("fast"):this.$lightbox.find(".lb-number").hide(),this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return e.sizeOverlay()})},e.prototype.preloadNeighboringImages=function(){if(this.album.length>this.currentImageIndex+1){var t=new Image;t.src=this.album[this.currentImageIndex+1].link}if(this.currentImageIndex>0){var e=new Image;e.src=this.album[this.currentImageIndex-1].link}},e.prototype.enableKeyboardNav=function(){t(document).on("keyup.keyboard",t.proxy(this.keyboardAction,this))},e.prototype.disableKeyboardNav=function(){t(document).off(".keyboard")},e.prototype.keyboardAction=function(t){var e=27,i=37,n=39,r=t.keyCode,o=String.fromCharCode(r).toLowerCase();r===e||o.match(/x|o|c/)?this.end():"p"===o||r===i?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1):("n"===o||r===n)&&(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0))},e.prototype.end=function(){this.disableKeyboardNav(),t(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),t("select, object, embed").css({visibility:"visible"})},e}();t(function(){{var t=new e;new i(t)}})}.call(this),function(t){function e(e){var i=t(this),n=null,r=[],o=null,s=null,a=t.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:t.noop,exit:t.noop,activate:t.noop,deactivate:t.noop,exitMenu:t.noop},e),l=3,c=300,u=function(t){r.push({x:t.pageX,y:t.pageY}),r.length>l&&r.shift()},h=function(){s&&clearTimeout(s),a.exitMenu(this)&&(n&&a.deactivate(n),n=null)},d=function(){s&&clearTimeout(s),a.enter(this),g(this)},p=function(){a.exit(this)},f=function(){m(this)},m=function(t){t!=n&&(n&&a.deactivate(n),a.activate(t),n=t)},g=function(t){var e=v();e?s=setTimeout(function(){g(t)},e):m(t)},v=function(){function e(t,e){return(e.y-t.y)/(e.x-t.x)}if(!n||!t(n).is(a.submenuSelector))return 0;var s=i.offset(),l={x:s.left,y:s.top-a.tolerance},u={x:s.left+i.outerWidth(),y:l.y},h={x:s.left,y:s.top+i.outerHeight()+a.tolerance},d={x:s.left+i.outerWidth(),y:h.y},p=r[r.length-1],f=r[0];if(!p)return 0;if(f||(f=p),f.x<s.left||f.x>d.x||f.y<s.top||f.y>d.y)return 0;if(o&&p.x==o.x&&p.y==o.y)return 0;var m=u,g=d;"left"==a.submenuDirection?(m=h,g=l):"below"==a.submenuDirection?(m=d,g=h):"above"==a.submenuDirection&&(m=l,g=u);var v=e(p,m),b=e(p,g),y=e(f,m),w=e(f,g);
return y>v&&b>w?(o=p,c):(o=null,0)};i.mouseleave(h).find(a.rowSelector).mouseenter(d).mouseleave(p).click(f),t(document).mousemove(u)}t.fn.menuAim=function(t){return this.each(function(){e.call(this,t)}),this}}(jQuery);var hljs=new function(){function t(t){return t.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function e(t){return t.nodeName.toLowerCase()}function i(t,e){var i=t&&t.exec(e);return i&&0==i.index}function n(t){var e=(t.className+" "+(t.parentNode?t.parentNode.className:"")).split(/\s+/);return e=e.map(function(t){return t.replace(/^lang(uage)?-/,"")}),e.filter(function(t){return v(t)||/no(-?)highlight/.test(t)})[0]}function r(t,e){var i={};for(var n in t)i[n]=t[n];if(e)for(var n in e)i[n]=e[n];return i}function o(t){var i=[];return function n(t,r){for(var o=t.firstChild;o;o=o.nextSibling)3==o.nodeType?r+=o.nodeValue.length:1==o.nodeType&&(i.push({event:"start",offset:r,node:o}),r=n(o,r),e(o).match(/br|hr|img|input/)||i.push({event:"stop",offset:r,node:o}));return r}(t,0),i}function s(i,n,r){function o(){return i.length&&n.length?i[0].offset!=n[0].offset?i[0].offset<n[0].offset?i:n:"start"==n[0].event?i:n:i.length?i:n}function s(i){function n(e){return" "+e.nodeName+'="'+t(e.value)+'"'}u+="<"+e(i)+Array.prototype.map.call(i.attributes,n).join("")+">"}function a(t){u+="</"+e(t)+">"}function l(t){("start"==t.event?s:a)(t.node)}for(var c=0,u="",h=[];i.length||n.length;){var d=o();if(u+=t(r.substr(c,d[0].offset-c)),c=d[0].offset,d==i){h.reverse().forEach(a);do l(d.splice(0,1)[0]),d=o();while(d==i&&d.length&&d[0].offset==c);h.reverse().forEach(s)}else"start"==d[0].event?h.push(d[0].node):h.pop(),l(d.splice(0,1)[0])}return u+t(r.substr(c))}function a(t){function e(t){return t&&t.source||t}function i(i,n){return RegExp(e(i),"m"+(t.cI?"i":"")+(n?"g":""))}function n(o,s){if(!o.compiled){if(o.compiled=!0,o.k=o.k||o.bK,o.k){var a={},l=function(e,i){t.cI&&(i=i.toLowerCase()),i.split(" ").forEach(function(t){var i=t.split("|");a[i[0]]=[e,i[1]?Number(i[1]):1]})};"string"==typeof o.k?l("keyword",o.k):Object.keys(o.k).forEach(function(t){l(t,o.k[t])}),o.k=a}o.lR=i(o.l||/\b[A-Za-z0-9_]+\b/,!0),s&&(o.bK&&(o.b="\\b("+o.bK.split(" ").join("|")+")\\b"),o.b||(o.b=/\B|\b/),o.bR=i(o.b),o.e||o.eW||(o.e=/\B|\b/),o.e&&(o.eR=i(o.e)),o.tE=e(o.e)||"",o.eW&&s.tE&&(o.tE+=(o.e?"|":"")+s.tE)),o.i&&(o.iR=i(o.i)),void 0===o.r&&(o.r=1),o.c||(o.c=[]);var c=[];o.c.forEach(function(t){t.v?t.v.forEach(function(e){c.push(r(t,e))}):c.push("self"==t?o:t)}),o.c=c,o.c.forEach(function(t){n(t,o)}),o.starts&&n(o.starts,s);var u=o.c.map(function(t){return t.bK?"\\.?("+t.b+")\\.?":t.b}).concat([o.tE,o.i]).map(e).filter(Boolean);o.t=u.length?i(u.join("|"),!0):{exec:function(){return null}}}}n(t)}function l(e,n,r,o){function s(t,e){for(var n=0;n<e.c.length;n++)if(i(e.c[n].bR,t))return e.c[n]}function u(t,e){return i(t.eR,e)?t:t.eW?u(t.parent,e):void 0}function h(t,e){return!r&&i(e.iR,t)}function d(t,e){var i=_.cI?e[0].toLowerCase():e[0];return t.k.hasOwnProperty(i)&&t.k[i]}function p(t,e,i,n){var r=n?"":b.classPrefix,o='<span class="'+r,s=i?"":"</span>";return o+=t+'">',o+e+s}function f(){if(!k.k)return t(E);var e="",i=0;k.lR.lastIndex=0;for(var n=k.lR.exec(E);n;){e+=t(E.substr(i,n.index-i));var r=d(k,n);r?(A+=r[1],e+=p(r[0],t(n[0]))):e+=t(n[0]),i=k.lR.lastIndex,n=k.lR.exec(E)}return e+t(E.substr(i))}function m(){if(k.sL&&!y[k.sL])return t(E);var e=k.sL?l(k.sL,E,!0,C):c(E);return k.r>0&&(A+=e.r),"continuous"==k.subLanguageMode&&(C=e.top),p(e.language,e.value,!1,!0)}function g(){return void 0!==k.sL?m():f()}function w(e,i){var n=e.cN?p(e.cN,"",!0):"";e.rB?($+=n,E=""):e.eB?($+=t(i)+n,E=""):($+=n,E=i),k=Object.create(e,{parent:{value:k}})}function x(e,i){if(E+=e,void 0===i)return $+=g(),0;var n=s(i,k);if(n)return $+=g(),w(n,i),n.rB?0:i.length;var r=u(k,i);if(r){var o=k;o.rE||o.eE||(E+=i),$+=g();do k.cN&&($+="</span>"),A+=k.r,k=k.parent;while(k!=r.parent);return o.eE&&($+=t(i)),E="",r.starts&&w(r.starts,""),o.rE?0:i.length}if(h(i,k))throw new Error('Illegal lexeme "'+i+'" for mode "'+(k.cN||"<unnamed>")+'"');return E+=i,i.length||1}var _=v(e);if(!_)throw new Error('Unknown language: "'+e+'"');a(_);for(var C,k=o||_,$="",T=k;T!=_;T=T.parent)T.cN&&($=p(T.cN,"",!0)+$);var E="",A=0;try{for(var S,D,N=0;;){if(k.t.lastIndex=N,S=k.t.exec(n),!S)break;D=x(n.substr(N,S.index-N),S[0]),N=S.index+D}x(n.substr(N));for(var T=k;T.parent;T=T.parent)T.cN&&($+="</span>");return{r:A,value:$,language:e,top:k}}catch(I){if(-1!=I.message.indexOf("Illegal"))return{r:0,value:t(n)};throw I}}function c(e,i){i=i||b.languages||Object.keys(y);var n={r:0,value:t(e)},r=n;return i.forEach(function(t){if(v(t)){var i=l(t,e,!1);i.language=t,i.r>r.r&&(r=i),i.r>n.r&&(r=n,n=i)}}),r.language&&(n.second_best=r),n}function u(t){return b.tabReplace&&(t=t.replace(/^((<[^>]+>|\t)+)/gm,function(t,e){return e.replace(/\t/g,b.tabReplace)})),b.useBR&&(t=t.replace(/\n/g,"<br>")),t}function h(t){var e=n(t);if(!/no(-?)highlight/.test(e)){var i;b.useBR?(i=document.createElementNS("http://www.w3.org/1999/xhtml","div"),i.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n")):i=t;var r=i.textContent,a=e?l(e,r,!0):c(r),h=o(i);if(h.length){var d=document.createElementNS("http://www.w3.org/1999/xhtml","div");d.innerHTML=a.value,a.value=s(h,o(d),r)}a.value=u(a.value),t.innerHTML=a.value,t.className+=" hljs "+(!e&&a.language||""),t.result={language:a.language,re:a.r},a.second_best&&(t.second_best={language:a.second_best.language,re:a.second_best.r})}}function d(t){b=r(b,t)}function p(){if(!p.called){p.called=!0;var t=document.querySelectorAll("pre code");Array.prototype.forEach.call(t,h)}}function f(){addEventListener("DOMContentLoaded",p,!1),addEventListener("load",p,!1)}function m(t,e){var i=y[t]=e(this);i.aliases&&i.aliases.forEach(function(e){w[e]=t})}function g(){return Object.keys(y)}function v(t){return y[t]||y[w[t]]}var b={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},y={},w={};this.highlight=l,this.highlightAuto=c,this.fixMarkup=u,this.highlightBlock=h,this.configure=d,this.initHighlighting=p,this.initHighlightingOnLoad=f,this.registerLanguage=m,this.listLanguages=g,this.getLanguage=v,this.inherit=r,this.IR="[a-zA-Z][a-zA-Z0-9_]*",this.UIR="[a-zA-Z_][a-zA-Z0-9_]*",this.NR="\\b\\d+(\\.\\d+)?",this.CNR="(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",this.BNR="\\b(0b[01]+)",this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",this.BE={b:"\\\\[\\s\\S]",r:0},this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE]},this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE]},this.PWM={b:/\b(a|an|the|are|I|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such)\b/},this.CLCM={cN:"comment",b:"//",e:"$",c:[this.PWM]},this.CBCM={cN:"comment",b:"/\\*",e:"\\*/",c:[this.PWM]},this.HCM={cN:"comment",b:"#",e:"$",c:[this.PWM]},this.NM={cN:"number",b:this.NR,r:0},this.CNM={cN:"number",b:this.CNR,r:0},this.BNM={cN:"number",b:this.BNR,r:0},this.CSSNM={cN:"number",b:this.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",r:0},this.RM={cN:"regexp",b:/\//,e:/\/[gim]*/,i:/\n/,c:[this.BE,{b:/\[/,e:/\]/,r:0,c:[this.BE]}]},this.TM={cN:"title",b:this.IR,r:0},this.UTM={cN:"title",b:this.UIR,r:0}};hljs.registerLanguage("bash",function(t){var e={cN:"variable",v:[{b:/\$[\w\d#@][\w\d_]*/},{b:/\$\{(.*?)\}/}]},i={cN:"string",b:/"/,e:/"/,c:[t.BE,e,{cN:"variable",b:/\$\(/,e:/\)/,c:[t.BE]}]},n={cN:"string",b:/'/,e:/'/};return{aliases:["sh","zsh"],l:/-?[a-z\.]+/,k:{keyword:"if then else elif fi for break continue while in do done exit return set declare case esac export exec",literal:"true false",built_in:"printf echo read cd pwd pushd popd dirs let eval unset typeset readonly getopts source shopt caller type hash bind help sudo",operator:"-ne -eq -lt -gt -f -d -e -s -l -a"},c:[{cN:"shebang",b:/^#![^\n]+sh\s*$/,r:10},{cN:"function",b:/\w[\w\d_]*\s*\(\s*\)\s*\{/,rB:!0,c:[t.inherit(t.TM,{b:/\w[\w\d_]*/})],r:0},t.HCM,t.NM,i,n,e]}}),hljs.registerLanguage("ruby",function(t){var e="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?",i="and false then defined module in return redo if BEGIN retry end for true self when next until do begin unless END rescue nil else break undef not super class case require yield alias while ensure elsif or include attr_reader attr_writer attr_accessor",n={cN:"yardoctag",b:"@[A-Za-z]+"},r={cN:"value",b:"#<",e:">"},o={cN:"comment",v:[{b:"#",e:"$",c:[n]},{b:"^\\=begin",e:"^\\=end",c:[n],r:10},{b:"^__END__",e:"\\n$"}]},s={cN:"subst",b:"#\\{",e:"}",k:i},a={cN:"string",c:[t.BE,s],v:[{b:/'/,e:/'/},{b:/"/,e:/"/},{b:"%[qw]?\\(",e:"\\)"},{b:"%[qw]?\\[",e:"\\]"},{b:"%[qw]?{",e:"}"},{b:"%[qw]?<",e:">"},{b:"%[qw]?/",e:"/"},{b:"%[qw]?%",e:"%"},{b:"%[qw]?-",e:"-"},{b:"%[qw]?\\|",e:"\\|"},{b:/\B\?(\\\d{1,3}|\\x[A-Fa-f0-9]{1,2}|\\u[A-Fa-f0-9]{4}|\\?\S)\b/}]},l={cN:"params",b:"\\(",e:"\\)",k:i},c=[a,r,o,{cN:"class",bK:"class module",e:"$|;",i:/=/,c:[t.inherit(t.TM,{b:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?"}),{cN:"inheritance",b:"<\\s*",c:[{cN:"parent",b:"("+t.IR+"::)?"+t.IR}]},o]},{cN:"function",bK:"def",e:" |$|;",r:0,c:[t.inherit(t.TM,{b:e}),l,o]},{cN:"constant",b:"(::)?(\\b[A-Z]\\w*(::)?)+",r:0},{cN:"symbol",b:t.UIR+"(\\!|\\?)?:",r:0},{cN:"symbol",b:":",c:[a,{b:e}],r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{cN:"variable",b:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},{b:"("+t.RSR+")\\s*",c:[r,o,{cN:"regexp",c:[t.BE,s],i:/\n/,v:[{b:"/",e:"/[a-z]*"},{b:"%r{",e:"}[a-z]*"},{b:"%r\\(",e:"\\)[a-z]*"},{b:"%r!",e:"![a-z]*"},{b:"%r\\[",e:"\\][a-z]*"}]}],r:0}];s.c=c,l.c=c;var u=[{b:/^\s*=>/,cN:"status",starts:{e:"$",c:c}},{cN:"prompt",b:/^\S[^=>\n]*>+/,starts:{e:"$",c:c}}];return{aliases:["rb","gemspec","podspec","thor","irb"],k:i,c:[o].concat(u).concat(c)}}),hljs.registerLanguage("diff",function(){return{aliases:["patch"],c:[{cN:"chunk",r:10,v:[{b:/^\@\@ +\-\d+,\d+ +\+\d+,\d+ +\@\@$/},{b:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{b:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{cN:"header",v:[{b:/Index: /,e:/$/},{b:/=====/,e:/=====$/},{b:/^\-\-\-/,e:/$/},{b:/^\*{3} /,e:/$/},{b:/^\+\+\+/,e:/$/},{b:/\*{5}/,e:/\*{5}$/}]},{cN:"addition",b:"^\\+",e:"$"},{cN:"deletion",b:"^\\-",e:"$"},{cN:"change",b:"^\\!",e:"$"}]}}),hljs.registerLanguage("javascript",function(t){return{aliases:["js"],k:{keyword:"in if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const class",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document"},c:[{cN:"pi",b:/^\s*('|")use strict('|")/,r:10},t.ASM,t.QSM,t.CLCM,t.CBCM,t.CNM,{b:"("+t.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[t.CLCM,t.CBCM,t.RM,{b:/</,e:/>;/,r:0,sL:"xml"}],r:0},{cN:"function",bK:"function",e:/\{/,eE:!0,c:[t.inherit(t.TM,{b:/[A-Za-z$_][0-9A-Za-z$_]*/}),{cN:"params",b:/\(/,e:/\)/,c:[t.CLCM,t.CBCM],i:/["'\(]/}],i:/\[|%/},{b:/\$[(.]/},{b:"\\."+t.IR,r:0}]}}),hljs.registerLanguage("xml",function(){var t="[A-Za-z0-9\\._:-]+",e={b:/<\?(php)?(?!\w)/,e:/\?>/,sL:"php",subLanguageMode:"continuous"},i={eW:!0,i:/</,r:0,c:[e,{cN:"attribute",b:t,r:0},{b:"=",r:0,c:[{cN:"value",v:[{b:/"/,e:/"/},{b:/'/,e:/'/},{b:/[^\s\/>]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xsl","plist"],cI:!0,c:[{cN:"doctype",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},{cN:"comment",b:"<!--",e:"-->",r:10},{cN:"cdata",b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{title:"style"},c:[i],starts:{e:"</style>",rE:!0,sL:"css"}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{title:"script"},c:[i],starts:{e:"</script>",rE:!0,sL:"javascript"}},{b:"<%",e:"%>",sL:"vbscript"},e,{cN:"pi",b:/<\?\w+/,e:/\?>/,r:10},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"title",b:/[^ \/><\n\t]+/,r:0},i]}]}}),hljs.registerLanguage("markdown",function(){return{aliases:["md","mkdown","mkd"],c:[{cN:"header",v:[{b:"^#{1,6}",e:"$"},{b:"^.+?\\n[=-]{2,}$"}]},{b:"<",e:">",sL:"xml",r:0},{cN:"bullet",b:"^([*+-]|(\\d+\\.))\\s+"},{cN:"strong",b:"[*_]{2}.+?[*_]{2}"},{cN:"emphasis",v:[{b:"\\*.+?\\*"},{b:"_.+?_",r:0}]},{cN:"blockquote",b:"^>\\s+",e:"$"},{cN:"code",v:[{b:"`.+?`"},{b:"^( {4}|	)",e:"$",r:0}]},{cN:"horizontal_rule",b:"^[-\\*]{3,}",e:"$"},{b:"\\[.+?\\][\\(\\[].*?[\\)\\]]",rB:!0,c:[{cN:"link_label",b:"\\[",e:"\\]",eB:!0,rE:!0,r:0},{cN:"link_url",b:"\\]\\(",e:"\\)",eB:!0,eE:!0},{cN:"link_reference",b:"\\]\\[",e:"\\]",eB:!0,eE:!0}],r:10},{b:"^\\[.+\\]:",rB:!0,c:[{cN:"link_reference",b:"\\[",e:"\\]:",eB:!0,eE:!0,starts:{cN:"link_url",e:"$"}}]}]}}),hljs.registerLanguage("css",function(t){var e="[a-zA-Z-][a-zA-Z0-9_-]*",i={cN:"function",b:e+"\\(",rB:!0,eE:!0,e:"\\("};return{cI:!0,i:"[=/|']",c:[t.CBCM,{cN:"id",b:"\\#[A-Za-z0-9_-]+"},{cN:"class",b:"\\.[A-Za-z0-9_-]+",r:0},{cN:"attr_selector",b:"\\[",e:"\\]",i:"$"},{cN:"pseudo",b:":(:)?[a-zA-Z0-9\\_\\-\\+\\(\\)\\\"\\']+"},{cN:"at_rule",b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{cN:"at_rule",b:"@",e:"[{;]",c:[{cN:"keyword",b:/\S+/},{b:/\s/,eW:!0,eE:!0,r:0,c:[i,t.ASM,t.QSM,t.CSSNM]}]},{cN:"tag",b:e,r:0},{cN:"rules",b:"{",e:"}",i:"[^\\s]",r:0,c:[t.CBCM,{cN:"rule",b:"[^\\s]",rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:"[A-Z\\_\\.\\-]+",e:":",eE:!0,i:"[^\\s]",starts:{cN:"value",eW:!0,eE:!0,c:[i,t.CSSNM,t.QSM,t.ASM,t.CBCM,{cN:"hexcolor",b:"#[0-9A-Fa-f]+"},{cN:"important",b:"!important"}]}}]}]}]}}),hljs.registerLanguage("http",function(){return{i:"\\S",c:[{cN:"status",b:"^HTTP/[0-9\\.]+",e:"$",c:[{cN:"number",b:"\\b\\d{3}\\b"}]},{cN:"request",b:"^[A-Z]+ (.*?) HTTP/[0-9\\.]+$",rB:!0,e:"$",c:[{cN:"string",b:" ",e:" ",eB:!0,eE:!0}]},{cN:"attribute",b:"^\\w",e:": ",eE:!0,i:"\\n|\\s|=",starts:{cN:"string",e:"$"}},{b:"\\n\\n",starts:{sL:"",eW:!0}}]}}),hljs.registerLanguage("swift",function(t){var e={keyword:"class deinit enum extension func import init let protocol static struct subscript typealias var break case continue default do else fallthrough if in for return switch where while as dynamicType is new super self Self Type __COLUMN__ __FILE__ __FUNCTION__ __LINE__ associativity didSet get infix inout left mutating none nonmutating operator override postfix precedence prefix right set unowned unowned safe unsafe weak willSet",literal:"true false nil",built_in:"abs advance alignof alignofValue assert bridgeFromObjectiveC bridgeFromObjectiveCUnconditional bridgeToObjectiveC bridgeToObjectiveCUnconditional c contains count countElements countLeadingZeros debugPrint debugPrintln distance dropFirst dropLast dump encodeBitsAsWords enumerate equal false filter find getBridgedObjectiveCType getVaList indices insertionSort isBridgedToObjectiveC isBridgedVerbatimToObjectiveC isUniquelyReferenced join lexicographicalCompare map max maxElement min minElement nil numericCast partition posix print println quickSort reduce reflect reinterpretCast reverse roundUpToAlignment sizeof sizeofValue sort split startsWith strideof strideofValue swap swift toString transcode true underestimateCount unsafeReflect withExtendedLifetime withObjectAtPlusZero withUnsafePointer withUnsafePointerToObject withUnsafePointers withVaList"},i={cN:"type",b:"\\b[A-Z][\\w']*",r:0},n={cN:"comment",b:"/\\*",e:"\\*/",c:[t.PWM,"self"]},r={cN:"subst",b:/\\\(/,e:"\\)",k:e,c:[]},o={cN:"number",b:"\\b([\\d_]+(\\.[\\deE_]+)?|0x[a-fA-F0-9_]+(\\.[a-fA-F0-9p_]+)?|0b[01_]+|0o[0-7_]+)\\b",r:0},s=t.inherit(t.QSM,{c:[r,t.BE]});return r.c=[o],{k:e,c:[s,t.CLCM,n,i,o,{cN:"func",bK:"func",e:"{",eE:!0,c:[t.inherit(t.TM,{b:/[A-Za-z$_][0-9A-Za-z$_]*/,i:/\(/}),{cN:"generics",b:/\</,e:/\>/,i:/\>/},{cN:"params",b:/\(/,e:/\)/,k:e,c:["self",o,s,t.CBCM,{b:":"}],i:/["']/}],i:/\[|%/},{cN:"class",k:"struct protocol class extension enum",b:"(struct|protocol|class(?! (func|var))|extension|enum)",e:"\\{",eE:!0,c:[t.inherit(t.TM,{b:/[A-Za-z$_][0-9A-Za-z$_]*/})]},{cN:"preprocessor",b:"(@assignment|@class_protocol|@exported|@final|@lazy|@noreturn|@NSCopying|@NSManaged|@objc|@optional|@required|@auto_closure|@noreturn|@IBAction|@IBDesignable|@IBInspectable|@IBOutlet|@infix|@prefix|@postfix)"}]}}),hljs.registerLanguage("sql",function(t){var e={cN:"comment",b:"--",e:"$"};return{cI:!0,i:/[<>]/,c:[{cN:"operator",bK:"begin end start commit rollback savepoint lock alter create drop rename call delete do handler insert load replace select truncate update set show pragma grant merge describe use explain help declare prepare execute deallocate savepoint release unlock purge reset change stop analyze cache flush optimize repair kill install uninstall checksum restore check backup",e:/;/,eW:!0,k:{keyword:"abs absolute acos action add adddate addtime aes_decrypt aes_encrypt after aggregate all allocate alter analyze and any are as asc ascii asin assertion at atan atan2 atn2 authorization authors avg backup before begin benchmark between bin binlog bit_and bit_count bit_length bit_or bit_xor both by cache call cascade cascaded case cast catalog ceil ceiling chain change changed char_length character_length charindex charset check checksum checksum_agg choose close coalesce coercibility collate collation collationproperty column columns columns_updated commit compress concat concat_ws concurrent connect connection connection_id consistent constraint constraints continue contributors conv convert convert_tz corresponding cos cot count count_big crc32 create cross cume_dist curdate current current_date current_time current_timestamp current_user cursor curtime data database databases datalength date_add date_format date_sub dateadd datediff datefromparts datename datepart datetime2fromparts datetimeoffsetfromparts day dayname dayofmonth dayofweek dayofyear deallocate declare decode default deferrable deferred degrees delayed delete des_decrypt des_encrypt des_key_file desc describe descriptor diagnostics difference disconnect distinct distinctrow div do domain double drop dumpfile each else elt enclosed encode encrypt end end-exec engine engines eomonth errors escape escaped event eventdata events except exception exec execute exists exp explain export_set extended external extract fast fetch field fields find_in_set first first_value floor flush for force foreign format found found_rows from from_base64 from_days from_unixtime full function get get_format get_lock getdate getutcdate global go goto grant grants greatest group group_concat grouping grouping_id gtid_subset gtid_subtract handler having help hex high_priority hosts hour ident_current ident_incr ident_seed identified identity if ifnull ignore iif ilike immediate in index indicator inet6_aton inet6_ntoa inet_aton inet_ntoa infile initially inner innodb input insert install instr intersect into is is_free_lock is_ipv4 is_ipv4_compat is_ipv4_mapped is_not is_not_null is_used_lock isdate isnull isolation join key kill language last last_day last_insert_id last_value lcase lead leading least leaves left len lenght level like limit lines ln load load_file local localtime localtimestamp locate lock log log10 log2 logfile logs low_priority lower lpad ltrim make_set makedate maketime master master_pos_wait match matched max md5 medium merge microsecond mid min minute mod mode module month monthname mutex name_const names national natural nchar next no no_write_to_binlog not now nullif nvarchar oct octet_length of old_password on only open optimize option optionally or ord order outer outfile output pad parse partial partition password patindex percent_rank percentile_cont percentile_disc period_add period_diff pi plugin position pow power pragma precision prepare preserve primary prior privileges procedure procedure_analyze processlist profile profiles public publishingservername purge quarter query quick quote quotename radians rand read references regexp relative relaylog release release_lock rename repair repeat replace replicate reset restore restrict return returns reverse revoke right rlike rollback rollup round row row_count rows rpad rtrim savepoint schema scroll sec_to_time second section select serializable server session session_user set sha sha1 sha2 share show sign sin size slave sleep smalldatetimefromparts snapshot some soname soundex sounds_like space sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sql_variant_property sqlstate sqrt square start starting status std stddev stddev_pop stddev_samp stdev stdevp stop str str_to_date straight_join strcmp string stuff subdate substr substring subtime subtring_index sum switchoffset sysdate sysdatetime sysdatetimeoffset system_user sysutcdatetime table tables tablespace tan temporary terminated tertiary_weights then time time_format time_to_sec timediff timefromparts timestamp timestampadd timestampdiff timezone_hour timezone_minute to to_base64 to_days to_seconds todatetimeoffset trailing transaction translation trigger trigger_nestlevel triggers trim truncate try_cast try_convert try_parse ucase uncompress uncompressed_length unhex unicode uninstall union unique unix_timestamp unknown unlock update upgrade upped upper usage use user user_resources using utc_date utc_time utc_timestamp uuid uuid_short validate_password_strength value values var var_pop var_samp variables variance varp version view warnings week weekday weekofyear weight_string when whenever where with work write xml xor year yearweek zon",literal:"true false null",built_in:"array bigint binary bit blob boolean char character date dec decimal float int integer interval number numeric real serial smallint varchar varying int8 serial8 text"},c:[{cN:"string",b:"'",e:"'",c:[t.BE,{b:"''"}]},{cN:"string",b:'"',e:'"',c:[t.BE,{b:'""'}]},{cN:"string",b:"`",e:"`",c:[t.BE]},t.CNM,t.CBCM,e]},t.CBCM,e]}}),hljs.registerLanguage("handlebars",function(){var t="each in with if else unless bindattr action collection debugger log outlet template unbound view yield";return{aliases:["hbs","html.hbs","html.handlebars"],cI:!0,sL:"xml",subLanguageMode:"continuous",c:[{cN:"expression",b:"{{",e:"}}",c:[{cN:"begin-block",b:"#[a-zA-Z- .]+",k:t},{cN:"string",b:'"',e:'"'},{cN:"end-block",b:"\\/[a-zA-Z- .]+",k:t},{cN:"variable",b:"[a-zA-Z-.]+",k:t}]}]}}),hljs.registerLanguage("objectivec",function(t){var e={keyword:"int float while char export sizeof typedef const struct for union unsigned long volatile static bool mutable if do return goto void enum else break extern asm case short default double register explicit signed typename this switch continue wchar_t inline readonly assign readwrite self @synchronized id typeof nonatomic super unichar IBOutlet IBAction strong weak copy in out inout bycopy byref oneway __strong __weak __block __autoreleasing @private @protected @public @try @property @end @throw @catch @finally @autoreleasepool @synthesize @dynamic @selector @optional @required",literal:"false true FALSE TRUE nil YES NO NULL",built_in:"NSString NSData NSDictionary CGRect CGPoint UIButton UILabel UITextView UIWebView MKMapView NSView NSViewController NSWindow NSWindowController NSSet NSUUID NSIndexSet UISegmentedControl NSObject UITableViewDelegate UITableViewDataSource NSThread UIActivityIndicator UITabbar UIToolBar UIBarButtonItem UIImageView NSAutoreleasePool UITableView BOOL NSInteger CGFloat NSException NSLog NSMutableString NSMutableArray NSMutableDictionary NSURL NSIndexPath CGSize UITableViewCell UIView UIViewController UINavigationBar UINavigationController UITabBarController UIPopoverController UIPopoverControllerDelegate UIImage NSNumber UISearchBar NSFetchedResultsController NSFetchedResultsChangeType UIScrollView UIScrollViewDelegate UIEdgeInsets UIColor UIFont UIApplication NSNotFound NSNotificationCenter NSNotification UILocalNotification NSBundle NSFileManager NSTimeInterval NSDate NSCalendar NSUserDefaults UIWindow NSRange NSArray NSError NSURLRequest NSURLConnection NSURLSession NSURLSessionDataTask NSURLSessionDownloadTask NSURLSessionUploadTask NSURLResponseUIInterfaceOrientation MPMoviePlayerController dispatch_once_t dispatch_queue_t dispatch_sync dispatch_async dispatch_once"},i=/[a-zA-Z@][a-zA-Z0-9_]*/,n="@interface @class @protocol @implementation";return{aliases:["m","mm","objc","obj-c"],k:e,l:i,i:"</",c:[t.CLCM,t.CBCM,t.CNM,t.QSM,{cN:"string",v:[{b:'@"',e:'"',i:"\\n",c:[t.BE]},{b:"'",e:"[^\\\\]'",i:"[^\\\\][^']"}]},{cN:"preprocessor",b:"#",e:"$",c:[{cN:"title",v:[{b:'"',e:'"'},{b:"<",e:">"}]}]},{cN:"class",b:"("+n.split(" ").join("|")+")\\b",e:"({|$)",eE:!0,k:n,l:i,c:[t.UTM]},{cN:"variable",b:"\\."+t.UIR,r:0}]}}),hljs.registerLanguage("coffeescript",function(t){var e={keyword:"in if for while finally new do return else break catch instanceof throw try this switch continue typeof delete debugger super then unless until loop of by when and or is isnt not",literal:"true false null undefined yes no on off",reserved:"case default function var void with const let enum export import native __hasProp __extends __slice __bind __indexOf",built_in:"npm require console print module global window document"},i="[A-Za-z$_][0-9A-Za-z$_]*",n=t.inherit(t.TM,{b:i}),r={cN:"subst",b:/#\{/,e:/}/,k:e},o=[t.BNM,t.inherit(t.CNM,{starts:{e:"(\\s*/)?",r:0}}),{cN:"string",v:[{b:/'''/,e:/'''/,c:[t.BE]},{b:/'/,e:/'/,c:[t.BE]},{b:/"""/,e:/"""/,c:[t.BE,r]},{b:/"/,e:/"/,c:[t.BE,r]}]},{cN:"regexp",v:[{b:"///",e:"///",c:[r,t.HCM]},{b:"//[gim]*",r:0},{b:/\/(?![ *])(\\\/|.)*?\/[gim]*(?=\W|$)/}]},{cN:"property",b:"@"+i},{b:"`",e:"`",eB:!0,eE:!0,sL:"javascript"}];return r.c=o,{aliases:["coffee","cson","iced"],k:e,i:/\/\*/,c:o.concat([{cN:"comment",b:"###",e:"###"},t.HCM,{cN:"function",b:"(^\\s*|\\B)("+i+"\\s*=\\s*)?(\\(.*\\))?\\s*\\B[-=]>",e:"[-=]>",rB:!0,c:[n,{cN:"params",b:"\\([^\\(]",rB:!0,c:[{b:/\(/,e:/\)/,k:e,c:["self"].concat(o)}]}]},{cN:"class",bK:"class",e:"$",i:/[:="\[\]]/,c:[{bK:"extends",eW:!0,i:/[:="\[\]]/,c:[n]},n]},{cN:"attribute",b:i+":",e:":",rB:!0,eE:!0,r:0}])}}),hljs.registerLanguage("nginx",function(t){var e={cN:"variable",v:[{b:/\$\d+/},{b:/\$\{/,e:/}/},{b:"[\\$\\@]"+t.UIR}]},i={eW:!0,l:"[a-z/_]+",k:{built_in:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},r:0,i:"=>",c:[t.HCM,{cN:"string",c:[t.BE,e],v:[{b:/"/,e:/"/},{b:/'/,e:/'/}]},{cN:"url",b:"([a-z]+):/",e:"\\s",eW:!0,eE:!0,c:[e]},{cN:"regexp",c:[t.BE,e],v:[{b:"\\s\\^",e:"\\s|{|;",rE:!0},{b:"~\\*?\\s+",e:"\\s|{|;",rE:!0},{b:"\\*(\\.[a-z\\-]+)+"},{b:"([a-z\\-]+\\.)+\\*"}]},{cN:"number",b:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{cN:"number",b:"\\b\\d+[kKmMgGdshdwy]*\\b",r:0},e]};return{aliases:["nginxconf"],c:[t.HCM,{b:t.UIR+"\\s",e:";|{",rB:!0,c:[{cN:"title",b:t.UIR,starts:i}],r:0}],i:"[^\\s\\}]"}}),hljs.registerLanguage("json",function(t){var e={literal:"true false null"},i=[t.QSM,t.CNM],n={cN:"value",e:",",eW:!0,eE:!0,c:i,k:e},r={b:"{",e:"}",c:[{cN:"attribute",b:'\\s*"',e:'"\\s*:\\s*',eB:!0,eE:!0,c:[t.BE],i:"\\n",starts:n}],i:"\\S"},o={b:"\\[",e:"\\]",c:[t.inherit(n,{cN:null})],i:"\\S"};return i.splice(i.length,0,r,o),{c:i,k:e,i:"\\S"}}),hljs.registerLanguage("apache",function(t){var e={cN:"number",b:"[\\$%]\\d+"};return{aliases:["apacheconf"],cI:!0,c:[t.HCM,{cN:"tag",b:"</?",e:">"},{cN:"keyword",b:/\w+/,r:0,k:{common:"order deny allow setenv rewriterule rewriteengine rewritecond documentroot sethandler errordocument loadmodule options header listen serverroot servername"},starts:{e:/$/,r:0,k:{literal:"on off all"},c:[{cN:"sqbracket",b:"\\s\\[",e:"\\]$"},{cN:"cbracket",b:"[\\$%]\\{",e:"\\}",c:["self",e]},e,t.QSM]}}],i:/\S/}}),hljs.registerLanguage("scss",function(t){{var e="[a-zA-Z-][a-zA-Z0-9_-]*",i={cN:"variable",b:"(\\$"+e+")\\b"},n={cN:"function",b:e+"\\(",rB:!0,eE:!0,e:"\\("},r={cN:"hexcolor",b:"#[0-9A-Fa-f]+"};({cN:"attribute",b:"[A-Z\\_\\.\\-]+",e:":",eE:!0,i:"[^\\s]",starts:{cN:"value",eW:!0,eE:!0,c:[n,r,t.CSSNM,t.QSM,t.ASM,t.CBCM,{cN:"important",b:"!important"}]}})}return{cI:!0,i:"[=/|']",c:[t.CLCM,t.CBCM,n,{cN:"id",b:"\\#[A-Za-z0-9_-]+",r:0},{cN:"class",b:"\\.[A-Za-z0-9_-]+",r:0},{cN:"attr_selector",b:"\\[",e:"\\]",i:"$"},{cN:"tag",b:"\\b(a|abbr|acronym|address|area|article|aside|audio|b|base|big|blockquote|body|br|button|canvas|caption|cite|code|col|colgroup|command|datalist|dd|del|details|dfn|div|dl|dt|em|embed|fieldset|figcaption|figure|footer|form|frame|frameset|(h[1-6])|head|header|hgroup|hr|html|i|iframe|img|input|ins|kbd|keygen|label|legend|li|link|map|mark|meta|meter|nav|noframes|noscript|object|ol|optgroup|option|output|p|param|pre|progress|q|rp|rt|ruby|samp|script|section|select|small|span|strike|strong|style|sub|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|tt|ul|var|video)\\b",r:0},{cN:"pseudo",b:":(visited|valid|root|right|required|read-write|read-only|out-range|optional|only-of-type|only-child|nth-of-type|nth-last-of-type|nth-last-child|nth-child|not|link|left|last-of-type|last-child|lang|invalid|indeterminate|in-range|hover|focus|first-of-type|first-line|first-letter|first-child|first|enabled|empty|disabled|default|checked|before|after|active)"},{cN:"pseudo",b:"::(after|before|choices|first-letter|first-line|repeat-index|repeat-item|selection|value)"},i,{cN:"attribute",b:"\\b(z-index|word-wrap|word-spacing|word-break|width|widows|white-space|visibility|vertical-align|unicode-bidi|transition-timing-function|transition-property|transition-duration|transition-delay|transition|transform-style|transform-origin|transform|top|text-underline-position|text-transform|text-shadow|text-rendering|text-overflow|text-indent|text-decoration-style|text-decoration-line|text-decoration-color|text-decoration|text-align-last|text-align|tab-size|table-layout|right|resize|quotes|position|pointer-events|perspective-origin|perspective|page-break-inside|page-break-before|page-break-after|padding-top|padding-right|padding-left|padding-bottom|padding|overflow-y|overflow-x|overflow-wrap|overflow|outline-width|outline-style|outline-offset|outline-color|outline|orphans|order|opacity|object-position|object-fit|normal|none|nav-up|nav-right|nav-left|nav-index|nav-down|min-width|min-height|max-width|max-height|mask|marks|margin-top|margin-right|margin-left|margin-bottom|margin|list-style-type|list-style-position|list-style-image|list-style|line-height|letter-spacing|left|justify-content|initial|inherit|ime-mode|image-orientation|image-resolution|image-rendering|icon|hyphens|height|font-weight|font-variant-ligatures|font-variant|font-style|font-stretch|font-size-adjust|font-size|font-language-override|font-kerning|font-feature-settings|font-family|font|float|flex-wrap|flex-shrink|flex-grow|flex-flow|flex-direction|flex-basis|flex|filter|empty-cells|display|direction|cursor|counter-reset|counter-increment|content|column-width|column-span|column-rule-width|column-rule-style|column-rule-color|column-rule|column-gap|column-fill|column-count|columns|color|clip-path|clip|clear|caption-side|break-inside|break-before|break-after|box-sizing|box-shadow|box-decoration-break|bottom|border-width|border-top-width|border-top-style|border-top-right-radius|border-top-left-radius|border-top-color|border-top|border-style|border-spacing|border-right-width|border-right-style|border-right-color|border-right|border-radius|border-left-width|border-left-style|border-left-color|border-left|border-image-width|border-image-source|border-image-slice|border-image-repeat|border-image-outset|border-image|border-color|border-collapse|border-bottom-width|border-bottom-style|border-bottom-right-radius|border-bottom-left-radius|border-bottom-color|border-bottom|border|background-size|background-repeat|background-position|background-origin|background-image|background-color|background-clip|background-attachment|background|backface-visibility|auto|animation-timing-function|animation-play-state|animation-name|animation-iteration-count|animation-fill-mode|animation-duration|animation-direction|animation-delay|animation|align-self|align-items|align-content)\\b",i:"[^\\s]"},{cN:"value",b:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{cN:"value",b:":",e:";",c:[n,i,r,t.CSSNM,t.QSM,t.ASM,{cN:"important",b:"!important"}]},{cN:"at_rule",b:"@",e:"[{;]",k:"mixin include extend for if else each while charset import debug media page content font-face namespace warn",c:[n,i,t.QSM,t.ASM,r,t.CSSNM,{cN:"preprocessor",b:"\\s[A-Za-z0-9_.-]+",r:0}]}]}
}),hljs.registerLanguage("makefile",function(t){var e={cN:"variable",b:/\$\(/,e:/\)/,c:[t.BE]};return{aliases:["mk","mak"],c:[t.HCM,{b:/^\w+\s*\W*=/,rB:!0,r:0,starts:{cN:"constant",e:/\s*\W*=/,eE:!0,starts:{e:/$/,r:0,c:[e]}}},{cN:"title",b:/^[\w]+:\s*$/},{cN:"phony",b:/^\.PHONY:/,e:/$/,k:".PHONY",l:/[\.\w]+/},{b:/^\t+/,e:/$/,r:0,c:[t.QSM,e]}]}}),function(t){"use strict";var e=function(e,i){this.options=t.extend({},t.fn.editableform.defaults,i),this.$div=t(e),this.options.scope||(this.options.scope=this)};e.prototype={constructor:e,initInput:function(){this.input=this.options.input,this.value=this.input.str2value(this.options.value),this.input.prerender()},initTemplate:function(){this.$form=t(t.fn.editableform.template)},initButtons:function(){var e=this.$form.find(".editable-buttons");e.append(t.fn.editableform.buttons),"bottom"===this.options.showbuttons&&e.addClass("editable-buttons-bottom")},render:function(){this.$loading=t(t.fn.editableform.loading),this.$div.empty().append(this.$loading),this.initTemplate(),this.options.showbuttons?this.initButtons():this.$form.find(".editable-buttons").remove(),this.showLoading(),this.isSaving=!1,this.$div.triggerHandler("rendering"),this.initInput(),this.$form.find("div.editable-input").append(this.input.$tpl),this.$div.append(this.$form),t.when(this.input.render()).then(t.proxy(function(){if(this.options.showbuttons||this.input.autosubmit(),this.$form.find(".editable-cancel").click(t.proxy(this.cancel,this)),this.input.error)this.error(this.input.error),this.$form.find(".editable-submit").attr("disabled",!0),this.input.$input.attr("disabled",!0),this.$form.submit(function(t){t.preventDefault()});else{this.error(!1),this.input.$input.removeAttr("disabled"),this.$form.find(".editable-submit").removeAttr("disabled");var e=null===this.value||void 0===this.value||""===this.value?this.options.defaultValue:this.value;this.input.value2input(e),this.$form.submit(t.proxy(this.submit,this))}this.$div.triggerHandler("rendered"),this.showForm(),this.input.postrender&&this.input.postrender()},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var t,e;this.$form?(t=this.$form.outerWidth(),e=this.$form.outerHeight(),t&&this.$loading.width(t),e&&this.$loading.height(e),this.$form.hide()):(t=this.$loading.parent().width(),t&&this.$loading.width(t)),this.$loading.show()},showForm:function(t){this.$loading.hide(),this.$form.show(),t!==!1&&this.input.activate(),this.$div.triggerHandler("show")},error:function(e){var i,n=this.$form.find(".control-group"),r=this.$form.find(".editable-error-block");if(e===!1)n.removeClass(t.fn.editableform.errorGroupClass),r.removeClass(t.fn.editableform.errorBlockClass).empty().hide();else{if(e){i=(""+e).split("\n");for(var o=0;o<i.length;o++)i[o]=t("<div>").text(i[o]).html();e=i.join("<br>")}n.addClass(t.fn.editableform.errorGroupClass),r.addClass(t.fn.editableform.errorBlockClass).html(e).show()}},submit:function(e){e.stopPropagation(),e.preventDefault();var i=this.input.input2value(),n=this.validate(i);if("object"===t.type(n)&&void 0!==n.newValue){if(i=n.newValue,this.input.value2input(i),"string"==typeof n.msg)return this.error(n.msg),void this.showForm()}else if(n)return this.error(n),void this.showForm();if(!this.options.savenochange&&this.input.value2str(i)==this.input.value2str(this.value))return void this.$div.triggerHandler("nochange");var r=this.input.value2submit(i);this.isSaving=!0,t.when(this.save(r)).done(t.proxy(function(t){this.isSaving=!1;var e="function"==typeof this.options.success?this.options.success.call(this.options.scope,t,i):null;return e===!1?(this.error(!1),void this.showForm(!1)):"string"==typeof e?(this.error(e),void this.showForm()):(e&&"object"==typeof e&&e.hasOwnProperty("newValue")&&(i=e.newValue),this.error(!1),this.value=i,void this.$div.triggerHandler("save",{newValue:i,submitValue:r,response:t}))},this)).fail(t.proxy(function(t){this.isSaving=!1;var e;e="function"==typeof this.options.error?this.options.error.call(this.options.scope,t,i):"string"==typeof t?t:t.responseText||t.statusText||"Unknown error!",this.error(e),this.showForm()},this))},save:function(e){this.options.pk=t.fn.editableutils.tryParseJson(this.options.pk,!0);var i,n="function"==typeof this.options.pk?this.options.pk.call(this.options.scope):this.options.pk,r=!!("function"==typeof this.options.url||this.options.url&&("always"===this.options.send||"auto"===this.options.send&&null!==n&&void 0!==n));return r?(this.showLoading(),i={name:this.options.name||"",value:e,pk:n},"function"==typeof this.options.params?i=this.options.params.call(this.options.scope,i):(this.options.params=t.fn.editableutils.tryParseJson(this.options.params,!0),t.extend(i,this.options.params)),"function"==typeof this.options.url?this.options.url.call(this.options.scope,i):t.ajax(t.extend({url:this.options.url,data:i,type:"POST"},this.options.ajaxOptions))):void 0},validate:function(t){return void 0===t&&(t=this.value),"function"==typeof this.options.validate?this.options.validate.call(this.options.scope,t):void 0},option:function(t,e){t in this.options&&(this.options[t]=e),"value"===t&&this.setValue(e)},setValue:function(t,e){this.value=e?this.input.str2value(t):t,this.$form&&this.$form.is(":visible")&&this.input.value2input(this.value)}},t.fn.editableform=function(i){var n=arguments;return this.each(function(){var r=t(this),o=r.data("editableform"),s="object"==typeof i&&i;o||r.data("editableform",o=new e(this,s)),"string"==typeof i&&o[i].apply(o,Array.prototype.slice.call(n,1))})},t.fn.editableform.Constructor=e,t.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:!0,scope:null,savenochange:!1},t.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>',t.fn.editableform.loading='<div class="editableform-loading"></div>',t.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>',t.fn.editableform.errorGroupClass=null,t.fn.editableform.errorBlockClass="editable-error",t.fn.editableform.engine="jquery"}(window.jQuery),function(t){"use strict";t.fn.editableutils={inherit:function(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.superclass=e.prototype},setCursorPosition:function(t,e){if(t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select()}},tryParseJson:function(t,e){if("string"==typeof t&&t.length&&t.match(/^[\{\[].*[\}\]]$/))if(e)try{t=new Function("return "+t)()}catch(i){}finally{return t}else t=new Function("return "+t)();return t},sliceObj:function(e,i,n){var r,o,s={};if(!t.isArray(i)||!i.length)return s;for(var a=0;a<i.length;a++)r=i[a],e.hasOwnProperty(r)&&(s[r]=e[r]),n!==!0&&(o=r.toLowerCase(),e.hasOwnProperty(o)&&(s[r]=e[o]));return s},getConfigData:function(e){var i={};return t.each(e.data(),function(t,e){("object"!=typeof e||e&&"object"==typeof e&&(e.constructor===Object||e.constructor===Array))&&(i[t]=e)}),i},objectKeys:function(t){if(Object.keys)return Object.keys(t);if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e,i=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push(e);return i},escape:function(e){return t("<div>").text(e).html()},itemsByValue:function(e,i,n){if(!i||null===e)return[];if("function"!=typeof n){var r=n||"value";n=function(t){return t[r]}}var o=t.isArray(e),s=[],a=this;return t.each(i,function(i,r){if(r.children)s=s.concat(a.itemsByValue(e,r.children,n));else if(o)t.grep(e,function(t){return t==(r&&"object"==typeof r?n(r):r)}).length&&s.push(r);else{var l=r&&"object"==typeof r?n(r):r;e==l&&s.push(r)}}),s},createInput:function(e){var i,n,r,o=e.type;return"date"===o&&("inline"===e.mode?t.fn.editabletypes.datefield?o="datefield":t.fn.editabletypes.dateuifield&&(o="dateuifield"):t.fn.editabletypes.date?o="date":t.fn.editabletypes.dateui&&(o="dateui"),"date"!==o||t.fn.editabletypes.date||(o="combodate")),"datetime"===o&&"inline"===e.mode&&(o="datetimefield"),"wysihtml5"!==o||t.fn.editabletypes[o]||(o="textarea"),"function"==typeof t.fn.editabletypes[o]?(i=t.fn.editabletypes[o],n=this.sliceObj(e,this.objectKeys(i.defaults)),r=new i(n)):(t.error("Unknown type: "+o),!1)},supportsTransitions:function(){var t=document.body||document.documentElement,e=t.style,i="transition",n=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof e[i])return!0;i=i.charAt(0).toUpperCase()+i.substr(1);for(var r=0;r<n.length;r++)if("string"==typeof e[n[r]+i])return!0;return!1}}}(window.jQuery),function(t){"use strict";var e=function(t,e){this.init(t,e)},i=function(t,e){this.init(t,e)};e.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(i,n){this.$element=t(i),this.options=t.extend({},t.fn.editableContainer.defaults,n),this.splitOptions(),this.formOptions.scope=this.$element[0],this.initContainer(),this.delayedHide=!1,this.$element.on("destroyed",t.proxy(function(){this.destroy()},this)),t(document).data("editable-handlers-attached")||(t(document).on("keyup.editable",function(e){27===e.which&&t(".editable-open").editableContainer("hide")}),t(document).on("click.editable",function(i){var n,r=t(i.target),o=[".editable-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];if(t.contains(document.documentElement,i.target)&&!r.is(document)){for(n=0;n<o.length;n++)if(r.is(o[n])||r.parents(o[n]).length)return;e.prototype.closeOthers(i.target)}}),t(document).data("editable-handlers-attached",!0))},splitOptions:function(){if(this.containerOptions={},this.formOptions={},!t.fn[this.containerName])throw new Error(this.containerName+" not found. Have you included corresponding js file?");for(var e in this.options)e in this.defaults?this.containerOptions[e]=this.options[e]:this.formOptions[e]=this.options[e]},tip:function(){return this.container()?this.container().$tip:null},container:function(){var t;return this.containerDataName&&(t=this.$element.data(this.containerDataName))?t:t=this.$element.data(this.containerName)},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:t.proxy(this.save,this),nochange:t.proxy(function(){this.hide("nochange")},this),cancel:t.proxy(function(){this.hide("cancel")},this),show:t.proxy(function(){this.delayedHide?(this.hide(this.delayedHide.reason),this.delayedHide=!1):this.setPosition()},this),rendering:t.proxy(this.setPosition,this),resize:t.proxy(this.setPosition,this),rendered:t.proxy(function(){this.$element.triggerHandler("shown",t(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(e){this.$element.addClass("editable-open"),e!==!1&&this.closeOthers(this.$element[0]),this.innerShow(),this.tip().addClass(this.containerClass),this.$form,this.$form=t("<div>"),this.tip().is(this.innerCss)?this.tip().append(this.$form):this.tip().find(this.innerCss).append(this.$form),this.renderForm()},hide:function(t){if(this.tip()&&this.tip().is(":visible")&&this.$element.hasClass("editable-open")){if(this.$form.data("editableform").isSaving)return void(this.delayedHide={reason:t});this.delayedHide=!1,this.$element.removeClass("editable-open"),this.innerHide(),this.$element.triggerHandler("hidden",t||"manual")}},innerShow:function(){},innerHide:function(){},toggle:function(t){this.container()&&this.tip()&&this.tip().is(":visible")?this.hide():this.show(t)},setPosition:function(){},save:function(t,e){this.$element.triggerHandler("save",e),this.hide("save")},option:function(t,e){this.options[t]=e,t in this.containerOptions?(this.containerOptions[t]=e,this.setContainerOption(t,e)):(this.formOptions[t]=e,this.$form&&this.$form.editableform("option",t,e))},setContainerOption:function(t,e){this.call("option",t,e)},destroy:function(){this.hide(),this.innerDestroy(),this.$element.off("destroyed"),this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(e){t(".editable-open").each(function(i,n){if(n!==e&&!t(n).find(e).length){var r=t(n),o=r.data("editableContainer");o&&("cancel"===o.options.onblur?r.data("editableContainer").hide("onblur"):"submit"===o.options.onblur&&r.data("editableContainer").tip().find("form").submit())}})},activate:function(){this.tip&&this.tip().is(":visible")&&this.$form&&this.$form.data("editableform").input.activate()}},t.fn.editableContainer=function(n){var r=arguments;return this.each(function(){var o=t(this),s="editableContainer",a=o.data(s),l="object"==typeof n&&n,c="inline"===l.mode?i:e;a||o.data(s,a=new c(this,l)),"string"==typeof n&&a[n].apply(a,Array.prototype.slice.call(r,1))})},t.fn.editableContainer.Popup=e,t.fn.editableContainer.Inline=i,t.fn.editableContainer.defaults={value:null,placement:"top",autohide:!0,onblur:"cancel",anim:!1,mode:"popup"},jQuery.event.special.destroyed={remove:function(t){t.handler&&t.handler()}}}(window.jQuery),function(t){"use strict";t.extend(t.fn.editableContainer.Inline.prototype,t.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=t("<span></span>"),this.options.anim||(this.options.anim=0)},splitOptions:function(){this.containerOptions={},this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide(),this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,t.proxy(function(){this.$element.show(),this.innerDestroy()},this))},innerDestroy:function(){this.tip()&&this.tip().empty().remove()}})}(window.jQuery),function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.editable.defaults,i,t.fn.editableutils.getConfigData(this.$element)),this.options.selector?this.initLive():this.init(),this.options.highlight&&!t.fn.editableutils.supportsTransitions()&&(this.options.highlight=!1)};e.prototype={constructor:e,init:function(){var e,i=!1;if(this.options.name=this.options.name||this.$element.attr("id"),this.options.scope=this.$element[0],this.input=t.fn.editableutils.createInput(this.options),this.input){switch(void 0===this.options.value||null===this.options.value?(this.value=this.input.html2value(t.trim(this.$element.html())),i=!0):(this.options.value=t.fn.editableutils.tryParseJson(this.options.value,!0),this.value="string"==typeof this.options.value?this.input.str2value(this.options.value):this.options.value),this.$element.addClass("editable"),"textarea"===this.input.type&&this.$element.addClass("editable-pre-wrapped"),"manual"!==this.options.toggle?(this.$element.addClass("editable-click"),this.$element.on(this.options.toggle+".editable",t.proxy(function(t){if(this.options.disabled||t.preventDefault(),"mouseenter"===this.options.toggle)this.show();else{var e="click"!==this.options.toggle;this.toggle(e)}},this))):this.$element.attr("tabindex",-1),"function"==typeof this.options.display&&(this.options.autotext="always"),this.options.autotext){case"always":e=!0;break;case"auto":e=!t.trim(this.$element.text()).length&&null!==this.value&&void 0!==this.value&&!i;break;default:e=!1}t.when(e?this.render():!0).then(t.proxy(function(){this.options.disabled?this.disable():this.enable(),this.$element.triggerHandler("init",this)},this))}},initLive:function(){var e=this.options.selector;this.options.selector=!1,this.options.autotext="never",this.$element.on(this.options.toggle+".editable",e,t.proxy(function(e){var i=t(e.target);i.data("editable")||(i.hasClass(this.options.emptyclass)&&i.empty(),i.editable(this.options).trigger(e))},this))},render:function(t){return this.options.display!==!1?this.input.value2htmlFinal?this.input.value2html(this.value,this.$element[0],this.options.display,t):"function"==typeof this.options.display?this.options.display.call(this.$element[0],this.value,t):this.input.value2html(this.value,this.$element[0]):void 0},enable:function(){this.options.disabled=!1,this.$element.removeClass("editable-disabled"),this.handleEmpty(this.isEmpty),"manual"!==this.options.toggle&&"-1"===this.$element.attr("tabindex")&&this.$element.removeAttr("tabindex")},disable:function(){this.options.disabled=!0,this.hide(),this.$element.addClass("editable-disabled"),this.handleEmpty(this.isEmpty),this.$element.attr("tabindex",-1)},toggleDisabled:function(){this.options.disabled?this.enable():this.disable()},option:function(e,i){return e&&"object"==typeof e?void t.each(e,t.proxy(function(e,i){this.option(t.trim(e),i)},this)):(this.options[e]=i,"disabled"===e?i?this.disable():this.enable():("value"===e&&this.setValue(i),this.container&&this.container.option(e,i),void(this.input.option&&this.input.option(e,i))))},handleEmpty:function(e){this.options.display!==!1&&(this.isEmpty=void 0!==e?e:"function"==typeof this.input.isEmpty?this.input.isEmpty(this.$element):""===t.trim(this.$element.html()),this.options.disabled?this.isEmpty&&(this.$element.empty(),this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass)):this.isEmpty?(this.$element.html(this.options.emptytext),this.options.emptyclass&&this.$element.addClass(this.options.emptyclass)):this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass))},show:function(e){if(!this.options.disabled){if(this.container){if(this.container.tip().is(":visible"))return}else{var i=t.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(i),this.$element.on("save.internal",t.proxy(this.save,this)),this.container=this.$element.data("editableContainer")}this.container.show(e)}},hide:function(){this.container&&this.container.hide()},toggle:function(t){this.container&&this.container.tip().is(":visible")?this.hide():this.show(t)},save:function(t,e){if(this.options.unsavedclass){var i=!1;i=i||"function"==typeof this.options.url,i=i||this.options.display===!1,i=i||void 0!==e.response,i=i||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(e.newValue),i?this.$element.removeClass(this.options.unsavedclass):this.$element.addClass(this.options.unsavedclass)}if(this.options.highlight){var n=this.$element,r=n.css("background-color");n.css("background-color",this.options.highlight),setTimeout(function(){"transparent"===r&&(r=""),n.css("background-color",r),n.addClass("editable-bg-transition"),setTimeout(function(){n.removeClass("editable-bg-transition")},1700)},10)}this.setValue(e.newValue,!1,e.response)},validate:function(){return"function"==typeof this.options.validate?this.options.validate.call(this,this.value):void 0},setValue:function(e,i,n){this.value=i?this.input.str2value(e):e,this.container&&this.container.option("value",this.value),t.when(this.render(n)).then(t.proxy(function(){this.handleEmpty()},this))},activate:function(){this.container&&this.container.activate()},destroy:function(){this.disable(),this.container&&this.container.destroy(),this.input.destroy(),"manual"!==this.options.toggle&&(this.$element.removeClass("editable-click"),this.$element.off(this.options.toggle+".editable")),this.$element.off("save.internal"),this.$element.removeClass("editable editable-open editable-disabled"),this.$element.removeData("editable")}},t.fn.editable=function(i){var n={},r=arguments,o="editable";switch(i){case"validate":return this.each(function(){var e,i=t(this),r=i.data(o);r&&(e=r.validate())&&(n[r.options.name]=e)}),n;case"getValue":return 2===arguments.length&&arguments[1]===!0?n=this.eq(0).data(o).value:this.each(function(){var e=t(this),i=e.data(o);i&&void 0!==i.value&&null!==i.value&&(n[i.options.name]=i.input.value2submit(i.value))}),n;case"submit":var s=arguments[1]||{},a=this,l=this.editable("validate");if(t.isEmptyObject(l)){var c={};if(1===a.length){var u=a.data("editable"),h={name:u.options.name||"",value:u.input.value2submit(u.value),pk:"function"==typeof u.options.pk?u.options.pk.call(u.options.scope):u.options.pk};"function"==typeof u.options.params?h=u.options.params.call(u.options.scope,h):(u.options.params=t.fn.editableutils.tryParseJson(u.options.params,!0),t.extend(h,u.options.params)),c={url:u.options.url,data:h,type:"POST"},s.success=s.success||u.options.success,s.error=s.error||u.options.error}else{var d=this.editable("getValue");c={url:s.url,data:d,type:"POST"}}c.success="function"==typeof s.success?function(t){s.success.call(a,t,s)}:t.noop,c.error="function"==typeof s.error?function(){s.error.apply(a,arguments)}:t.noop,s.ajaxOptions&&t.extend(c,s.ajaxOptions),s.data&&t.extend(c.data,s.data),t.ajax(c)}else"function"==typeof s.error&&s.error.call(a,l);return this}return this.each(function(){var n=t(this),s=n.data(o),a="object"==typeof i&&i;return a&&a.selector?void(s=new e(this,a)):(s||n.data(o,s=new e(this,a)),void("string"==typeof i&&s[i].apply(s,Array.prototype.slice.call(r,1))))})},t.fn.editable.defaults={type:"text",disabled:!1,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}}(window.jQuery),function(t){"use strict";t.fn.editabletypes={};var e=function(){};e.prototype={init:function(e,i,n){this.type=e,this.options=t.extend({},n,i)},prerender:function(){this.$tpl=t(this.options.tpl),this.$input=this.$tpl,this.$clear=null,this.error=null},render:function(){},value2html:function(e,i){t(i)[this.options.escape?"text":"html"](t.trim(e))},html2value:function(e){return t("<div>").html(e).text()},value2str:function(t){return t},str2value:function(t){return t},value2submit:function(t){return t},value2input:function(t){this.$input.val(t)},input2value:function(){return this.$input.val()},activate:function(){this.$input.is(":visible")&&this.$input.focus()},clear:function(){this.$input.val(null)},escape:function(e){return t("<div>").text(e).html()},autosubmit:function(){},destroy:function(){},setClass:function(){this.options.inputclass&&this.$input.addClass(this.options.inputclass)},setAttr:function(t){void 0!==this.options[t]&&null!==this.options[t]&&this.$input.attr(t,this.options[t])},option:function(t,e){this.options[t]=e}},e.defaults={tpl:"",inputclass:null,escape:!0,scope:null,showbuttons:!0},t.extend(t.fn.editabletypes,{abstractinput:e})}(window.jQuery),function(t){"use strict";var e=function(){};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){var e=t.Deferred();return this.error=null,this.onSourceReady(function(){this.renderList(),e.resolve()},function(){this.error=this.options.sourceError,e.resolve()}),e.promise()},html2value:function(){return null},value2html:function(e,i,n,r){var o=t.Deferred(),s=function(){"function"==typeof n?n.call(i,e,this.sourceData,r):this.value2htmlFinal(e,i),o.resolve()};return null===e?s.call(this):this.onSourceReady(s,function(){o.resolve()}),o.promise()},onSourceReady:function(e,i){var n;if(t.isFunction(this.options.source)?(n=this.options.source.call(this.options.scope),this.sourceData=null):n=this.options.source,this.options.sourceCache&&t.isArray(this.sourceData))return void e.call(this);try{n=t.fn.editableutils.tryParseJson(n,!1)}catch(r){return void i.call(this)}if("string"==typeof n){if(this.options.sourceCache){var o,s=n;if(t(document).data(s)||t(document).data(s,{}),o=t(document).data(s),o.loading===!1&&o.sourceData)return this.sourceData=o.sourceData,this.doPrepend(),void e.call(this);if(o.loading===!0)return o.callbacks.push(t.proxy(function(){this.sourceData=o.sourceData,this.doPrepend(),e.call(this)},this)),void o.err_callbacks.push(t.proxy(i,this));o.loading=!0,o.callbacks=[],o.err_callbacks=[]}var a=t.extend({url:n,type:"get",cache:!1,dataType:"json",success:t.proxy(function(n){o&&(o.loading=!1),this.sourceData=this.makeArray(n),t.isArray(this.sourceData)?(o&&(o.sourceData=this.sourceData,t.each(o.callbacks,function(){this.call()})),this.doPrepend(),e.call(this)):(i.call(this),o&&t.each(o.err_callbacks,function(){this.call()}))},this),error:t.proxy(function(){i.call(this),o&&(o.loading=!1,t.each(o.err_callbacks,function(){this.call()}))},this)},this.options.sourceOptions);t.ajax(a)}else this.sourceData=this.makeArray(n),t.isArray(this.sourceData)?(this.doPrepend(),e.call(this)):i.call(this)},doPrepend:function(){null!==this.options.prepend&&void 0!==this.options.prepend&&(t.isArray(this.prependData)||(t.isFunction(this.options.prepend)&&(this.options.prepend=this.options.prepend.call(this.options.scope)),this.options.prepend=t.fn.editableutils.tryParseJson(this.options.prepend,!0),"string"==typeof this.options.prepend&&(this.options.prepend={"":this.options.prepend}),this.prependData=this.makeArray(this.options.prepend)),t.isArray(this.prependData)&&t.isArray(this.sourceData)&&(this.sourceData=this.prependData.concat(this.sourceData)))},renderList:function(){},value2htmlFinal:function(){},makeArray:function(e){var i,n,r,o,s=[];if(!e||"string"==typeof e)return null;if(t.isArray(e)){o=function(t,e){return n={value:t,text:e},i++>=2?!1:void 0};for(var a=0;a<e.length;a++)r=e[a],"object"==typeof r?(i=0,t.each(r,o),1===i?s.push(n):i>1&&(r.children&&(r.children=this.makeArray(r.children)),s.push(r))):s.push({value:r,text:r})}else t.each(e,function(t,e){s.push({value:t,text:e})});return s},option:function(t,e){this.options[t]=e,"source"===t&&(this.sourceData=null),"prepend"===t&&(this.prependData=null)}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{source:null,prepend:!1,sourceError:"Error when loading list",sourceCache:!0,sourceOptions:null}),t.fn.editabletypes.list=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("text",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.renderClear(),this.setClass(),this.setAttr("placeholder")},activate:function(){this.$input.is(":visible")&&(this.$input.focus(),t.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length),this.toggleClear&&this.toggleClear())},renderClear:function(){this.options.clear&&(this.$clear=t('<span class="editable-clear-x"></span>'),this.$input.after(this.$clear).css("padding-right",24).keyup(t.proxy(function(e){if(!~t.inArray(e.keyCode,[40,38,9,13,27])){clearTimeout(this.t);var i=this;this.t=setTimeout(function(){i.toggleClear(e)},100)}},this)).parent().css("position","relative"),this.$clear.click(t.proxy(this.clear,this)))},postrender:function(){},toggleClear:function(){if(this.$clear){var t=this.$input.val().length,e=this.$clear.is(":visible");t&&!e&&this.$clear.show(),!t&&e&&this.$clear.hide()}},clear:function(){this.$clear.hide(),this.$input.val("").focus()}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:!0}),t.fn.editabletypes.text=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("textarea",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass(),this.setAttr("placeholder"),this.setAttr("rows"),this.$input.keydown(function(e){e.ctrlKey&&13===e.which&&t(this).closest("form").submit()})},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7}),t.fn.editabletypes.textarea=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("select",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.list),t.extend(e.prototype,{renderList:function(){this.$input.empty();var e=function(i,n){var r;if(t.isArray(n))for(var o=0;o<n.length;o++)r={},n[o].children?(r.label=n[o].text,i.append(e(t("<optgroup>",r),n[o].children))):(r.value=n[o].value,n[o].disabled&&(r.disabled=!0),i.append(t("<option>",r).text(n[o].text)));return i};e(this.$input,this.sourceData),this.setClass(),this.$input.on("keydown.editable",function(e){13===e.which&&t(this).closest("form").submit()})},value2htmlFinal:function(e,i){var n="",r=t.fn.editableutils.itemsByValue(e,this.sourceData);r.length&&(n=r[0].text),t.fn.editabletypes.abstractinput.prototype.value2html.call(this,n,i)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){t(this).closest("form").submit()})}}),e.defaults=t.extend({},t.fn.editabletypes.list.defaults,{tpl:"<select></select>"}),t.fn.editabletypes.select=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("checklist",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.list),t.extend(e.prototype,{renderList:function(){var e;if(this.$tpl.empty(),t.isArray(this.sourceData)){for(var i=0;i<this.sourceData.length;i++)e=t("<label>").append(t("<input>",{type:"checkbox",value:this.sourceData[i].value})).append(t("<span>").text(" "+this.sourceData[i].text)),t("<div>").append(e).appendTo(this.$tpl);this.$input=this.$tpl.find('input[type="checkbox"]'),this.setClass()}},value2str:function(e){return t.isArray(e)?e.sort().join(t.trim(this.options.separator)):""},str2value:function(e){var i,n=null;return"string"==typeof e&&e.length?(i=new RegExp("\\s*"+t.trim(this.options.separator)+"\\s*"),n=e.split(i)):n=t.isArray(e)?e:[e],n},value2input:function(e){this.$input.prop("checked",!1),t.isArray(e)&&e.length&&this.$input.each(function(i,n){var r=t(n);t.each(e,function(t,e){r.val()==e&&r.prop("checked",!0)})})},input2value:function(){var e=[];return this.$input.filter(":checked").each(function(i,n){e.push(t(n).val())}),e},value2htmlFinal:function(e,i){var n=[],r=t.fn.editableutils.itemsByValue(e,this.sourceData),o=this.options.escape;r.length?(t.each(r,function(e,i){var r=o?t.fn.editableutils.escape(i.text):i.text;n.push(r)}),t(i).html(n.join("<br>"))):t(i).empty()},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(e){13===e.which&&t(this).closest("form").submit()})}}),e.defaults=t.extend({},t.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","}),t.fn.editabletypes.checklist=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("password",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),t.extend(e.prototype,{value2html:function(e,i){e?t(i).text("[hidden]"):t(i).empty()},html2value:function(){return null}}),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="password">'}),t.fn.editabletypes.password=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("email",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="email">'}),t.fn.editabletypes.email=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("url",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="url">'}),t.fn.editabletypes.url=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("tel",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'}),t.fn.editabletypes.tel=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("number",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),t.extend(e.prototype,{render:function(){e.superclass.render.call(this),this.setAttr("min"),this.setAttr("max"),this.setAttr("step")},postrender:function(){this.$clear&&this.$clear.css({right:24})}}),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null}),t.fn.editabletypes.number=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("range",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.number),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.filter("input"),this.setClass(),this.setAttr("min"),this.setAttr("max"),this.setAttr("step"),this.$input.on("input",function(){t(this).siblings("output").text(t(this).val())})},activate:function(){this.$input.focus()}}),e.defaults=t.extend({},t.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"}),t.fn.editabletypes.range=e
}(window.jQuery),function(t){"use strict";var e=function(t){this.init("time",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass()}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'}),t.fn.editabletypes.time=e}(window.jQuery),function(t){"use strict";var e=function(i){if(this.init("select2",i,e.defaults),i.select2=i.select2||{},this.sourceData=null,i.placeholder&&(i.select2.placeholder=i.placeholder),!i.select2.tags&&i.source){var n=i.source;t.isFunction(i.source)&&(n=i.source.call(i.scope)),"string"==typeof n?(i.select2.ajax=i.select2.ajax||{},i.select2.ajax.data||(i.select2.ajax.data=function(t){return{query:t}}),i.select2.ajax.results||(i.select2.ajax.results=function(t){return{results:t}}),i.select2.ajax.url=n):(this.sourceData=this.convertSource(n),i.select2.data=this.sourceData)}if(this.options.select2=t.extend({},e.defaults.select2,i.select2),this.isMultiple=this.options.select2.tags||this.options.select2.multiple,this.isRemote="ajax"in this.options.select2,this.idFunc=this.options.select2.id,"function"!=typeof this.idFunc){var r=this.idFunc||"id";this.idFunc=function(t){return t[r]}}this.formatSelection=this.options.select2.formatSelection,"function"!=typeof this.formatSelection&&(this.formatSelection=function(t){return t.text})};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass(),this.isRemote&&this.$input.on("select2-loaded",t.proxy(function(t){this.sourceData=t.items.results},this)),this.isMultiple&&this.$input.on("change",function(){t(this).closest("form").parent().triggerHandler("resize")})},value2html:function(i,n){var r,o="",s=this;this.options.select2.tags?r=i:this.sourceData&&(r=t.fn.editableutils.itemsByValue(i,this.sourceData,this.idFunc)),t.isArray(r)?(o=[],t.each(r,function(t,e){o.push(e&&"object"==typeof e?s.formatSelection(e):e)})):r&&(o=s.formatSelection(r)),o=t.isArray(o)?o.join(this.options.viewseparator):o,e.superclass.value2html.call(this,o,n)},html2value:function(t){return this.options.select2.tags?this.str2value(t,this.options.viewseparator):null},value2input:function(e){if(t.isArray(e)&&(e=e.join(this.getSeparator())),this.$input.data("select2")?this.$input.val(e).trigger("change",!0):(this.$input.val(e),this.$input.select2(this.options.select2)),this.isRemote&&!this.isMultiple&&!this.options.select2.initSelection){var i=this.options.select2.id,n=this.options.select2.formatSelection;if(!i&&!n){var r=t(this.options.scope);if(!r.data("editable").isEmpty){var o={id:e,text:r.text()};this.$input.select2("data",o)}}}},input2value:function(){return this.$input.select2("val")},str2value:function(e,i){if("string"!=typeof e||!this.isMultiple)return e;i=i||this.getSeparator();var n,r,o;if(null===e||e.length<1)return null;for(n=e.split(i),r=0,o=n.length;o>r;r+=1)n[r]=t.trim(n[r]);return n},autosubmit:function(){this.$input.on("change",function(e,i){i||t(this).closest("form").submit()})},getSeparator:function(){return this.options.select2.separator||t.fn.select2.defaults.separator},convertSource:function(e){if(t.isArray(e)&&e.length&&void 0!==e[0].value)for(var i=0;i<e.length;i++)void 0!==e[i].value&&(e[i].id=e[i].value,delete e[i].value);return e},destroy:function(){this.$input.data("select2")&&this.$input.select2("destroy")}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "}),t.fn.editabletypes.select2=e}(window.jQuery),function(t){var e=function(e,i){return this.$element=t(e),this.$element.is("input")?(this.options=t.extend({},t.fn.combodate.defaults,i,this.$element.data()),void this.init()):void t.error("Combodate should be applied to INPUT element")};e.prototype={constructor:e,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=t('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.$widget.on("change","select",t.proxy(function(e){this.$element.val(this.getValue()).change(),this.options.smartDays&&(t(e.target).is(".month")||t(e.target).is(".year"))&&this.fillCombo("day")},this)),this.$widget.find("select").css("width","auto"),this.$element.hide().after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var e=this.options.template;return t.each(this.map,function(t,i){i=i[0];var n=new RegExp(i+"+"),r=i.length>1?i.substring(1,2):i;e=e.replace(n,"{"+r+"}")}),e=e.replace(/ /g,"&nbsp;"),t.each(this.map,function(t,i){i=i[0];var n=i.length>1?i.substring(1,2):i;e=e.replace("{"+n+"}",'<select class="'+t+'"></select>')}),e},initCombos:function(){for(var t in this.map){var e=this.$widget.find("."+t);this["$"+t]=e.length?e:null,this.fillCombo(t)}},fillCombo:function(t){var e=this["$"+t];if(e){var i="fill"+t.charAt(0).toUpperCase()+t.slice(1),n=this[i](),r=e.val();e.empty();for(var o=0;o<n.length;o++)e.append('<option value="'+n[o][0]+'">'+n[o][1]+"</option>");e.val(r)}},fillCommon:function(t){var e,i=[];if("name"===this.options.firstItem){e=moment.relativeTime||moment.langData()._relativeTime;var n="function"==typeof e[t]?e[t](1,!0,t,!1):e[t];n=n.split(" ").reverse()[0],i.push(["",n])}else"empty"===this.options.firstItem&&i.push(["",""]);return i},fillDay:function(){var t,e,i=this.fillCommon("d"),n=-1!==this.options.template.indexOf("DD"),r=31;if(this.options.smartDays&&this.$month&&this.$year){var o=parseInt(this.$month.val(),10),s=parseInt(this.$year.val(),10);isNaN(o)||isNaN(s)||(r=moment([s,o]).daysInMonth())}for(e=1;r>=e;e++)t=n?this.leadZero(e):e,i.push([e,t]);return i},fillMonth:function(){var t,e,i=this.fillCommon("M"),n=-1!==this.options.template.indexOf("MMMM"),r=-1!==this.options.template.indexOf("MMM"),o=-1!==this.options.template.indexOf("MM");for(e=0;11>=e;e++)t=n?moment().date(1).month(e).format("MMMM"):r?moment().date(1).month(e).format("MMM"):o?this.leadZero(e+1):e+1,i.push([e,t]);return i},fillYear:function(){var t,e,i=[],n=-1!==this.options.template.indexOf("YYYY");for(e=this.options.maxYear;e>=this.options.minYear;e--)t=n?e:(e+"").substring(2),i[this.options.yearDescending?"push":"unshift"]([e,t]);return i=this.fillCommon("y").concat(i)},fillHour:function(){var t,e,i=this.fillCommon("h"),n=-1!==this.options.template.indexOf("h"),r=(-1!==this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),o=n?1:0,s=n?12:23;for(e=o;s>=e;e++)t=r?this.leadZero(e):e,i.push([e,t]);return i},fillMinute:function(){var t,e,i=this.fillCommon("m"),n=-1!==this.options.template.indexOf("mm");for(e=0;59>=e;e+=this.options.minuteStep)t=n?this.leadZero(e):e,i.push([e,t]);return i},fillSecond:function(){var t,e,i=this.fillCommon("s"),n=-1!==this.options.template.indexOf("ss");for(e=0;59>=e;e+=this.options.secondStep)t=n?this.leadZero(e):e,i.push([e,t]);return i},fillAmpm:function(){var t=-1!==this.options.template.indexOf("a"),e=(-1!==this.options.template.indexOf("A"),[["am",t?"am":"AM"],["pm",t?"pm":"PM"]]);return e},getValue:function(e){var i,n={},r=this,o=!1;return t.each(this.map,function(t){if("ampm"!==t){var e="day"===t?1:0;return n[t]=r["$"+t]?parseInt(r["$"+t].val(),10):e,isNaN(n[t])?(o=!0,!1):void 0}}),o?"":(this.$ampm&&(n.hour=12===n.hour?"am"===this.$ampm.val()?0:12:"am"===this.$ampm.val()?n.hour:n.hour+12),i=moment([n.year,n.month,n.day,n.hour,n.minute,n.second]),this.highlight(i),e=void 0===e?this.options.format:e,null===e?i.isValid()?i:null:i.isValid()?i.format(e):"")},setValue:function(e){function i(e,i){var n={};return e.children("option").each(function(e,r){var o,s=t(r).attr("value");""!==s&&(o=Math.abs(s-i),("undefined"==typeof n.distance||o<n.distance)&&(n={value:s,distance:o}))}),n.value}if(e){var n="string"==typeof e?moment(e,this.options.format):moment(e),r=this,o={};n.isValid()&&(t.each(this.map,function(t,e){"ampm"!==t&&(o[t]=n[e[1]]())}),this.$ampm&&(o.hour>=12?(o.ampm="pm",o.hour>12&&(o.hour-=12)):(o.ampm="am",0===o.hour&&(o.hour=12))),t.each(o,function(t,e){r["$"+t]&&("minute"===t&&r.options.minuteStep>1&&r.options.roundTime&&(e=i(r["$"+t],e)),"second"===t&&r.options.secondStep>1&&r.options.roundTime&&(e=i(r["$"+t],e)),r["$"+t].val(e))}),this.options.smartDays&&this.fillCombo("day"),this.$element.val(n.format(this.options.format)).change())}},highlight:function(t){t.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(t){return 9>=t?"0"+t:t},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},t.fn.combodate=function(i){var n,r=Array.apply(null,arguments);return r.shift(),"getValue"===i&&this.length&&(n=this.eq(0).data("combodate"))?n.getValue.apply(n,r):this.each(function(){var n=t(this),o=n.data("combodate"),s="object"==typeof i&&i;o||n.data("combodate",o=new e(this,s)),"string"==typeof i&&"function"==typeof o[i]&&o[i].apply(o,r)})},t.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:!0,smartDays:!1}}(window.jQuery),function(t){"use strict";var e=function(i){this.init("combodate",i,e.defaults),this.options.viewformat||(this.options.viewformat=this.options.format),i.combodate=t.fn.editableutils.tryParseJson(i.combodate,!0),this.options.combodate=t.extend({},e.defaults.combodate,i.combodate,{format:this.options.format,template:this.options.template})};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.$input.combodate(this.options.combodate),"bs3"===t.fn.editableform.engine&&this.$input.siblings().find("select").addClass("form-control"),this.options.inputclass&&this.$input.siblings().find("select").addClass(this.options.inputclass)},value2html:function(t,i){var n=t?t.format(this.options.viewformat):"";e.superclass.value2html.call(this,n,i)},html2value:function(t){return t?moment(t,this.options.viewformat):null},value2str:function(t){return t?t.format(this.options.format):""},str2value:function(t){return t?moment(t,this.options.format):null},value2submit:function(t){return this.value2str(t)},value2input:function(t){this.$input.combodate("setValue",t)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null}),t.fn.editabletypes.combodate=e}(window.jQuery),function(t){"use strict";var e=t.fn.editableform.Constructor.prototype.initInput;t.extend(t.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=t(t.fn.editableform.template),this.$form.find(".control-group").addClass("form-group"),this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){e.apply(this);var i=null===this.input.options.inputclass||this.input.options.inputclass===!1,n="input-sm",r="text,select,textarea,password,email,url,tel,number,range,time,typeaheadjs".split(",");~t.inArray(this.input.type,r)&&(this.input.$input.addClass("form-control"),i&&(this.input.options.inputclass=n,this.input.$input.addClass(n)));for(var o=this.$form.find(".editable-buttons"),s=i?[n]:this.input.options.inputclass.split(" "),a=0;a<s.length;a++)"input-lg"===s[a].toLowerCase()&&o.find("button").removeClass("btn-sm").addClass("btn-lg")}}),t.fn.editableform.buttons='<button type="submit" class="btn btn-primary btn-sm editable-submit"><i class="glyphicon glyphicon-ok"></i></button><button type="button" class="btn btn-default btn-sm editable-cancel"><i class="glyphicon glyphicon-remove"></i></button>',t.fn.editableform.errorGroupClass="has-error",t.fn.editableform.errorBlockClass=null,t.fn.editableform.engine="bs3"}(window.jQuery),function(t){"use strict";t.extend(t.fn.editableContainer.Popup.prototype,{containerName:"popover",containerDataName:"bs.popover",innerCss:".popover-content",defaults:t.fn.popover.Constructor.DEFAULTS,initContainer:function(){t.extend(this.containerOptions,{trigger:"manual",selector:!1,content:" ",template:this.defaults.template});var e;this.$element.data("template")&&(e=this.$element.data("template"),this.$element.removeData("template")),this.call(this.containerOptions),e&&this.$element.data("template",e)},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(t,e){this.container().options[t]=e},setPosition:function(){(function(){var t=this.tip(),e="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,n=i.test(e);n&&(e=e.replace(i,"")||"top");var r=this.getPosition(),o=t[0].offsetWidth,s=t[0].offsetHeight;if(n){var a=this.$element.parent(),l=e,c=document.documentElement.scrollTop||document.body.scrollTop,u="body"==this.options.container?window.innerWidth:a.outerWidth(),h="body"==this.options.container?window.innerHeight:a.outerHeight(),d="body"==this.options.container?0:a.offset().left;e="bottom"==e&&r.top+r.height+s-c>h?"top":"top"==e&&r.top-c-s<0?"bottom":"right"==e&&r.right+o>u?"left":"left"==e&&r.left-o<d?"right":e,t.removeClass(l).addClass(e)}var p=this.getCalculatedOffset(e,r,o,s);this.applyPlacement(p,e)}).call(this.container())}})}(window.jQuery),function(t){function e(){return new Date(Date.UTC.apply(Date,arguments))}function i(e,i){var n,r=t(e).data(),o={},s=new RegExp("^"+i.toLowerCase()+"([A-Z])"),i=new RegExp("^"+i.toLowerCase());for(var a in r)i.test(a)&&(n=a.replace(s,function(t,e){return e.toLowerCase()}),o[n]=r[a]);return o}function n(e){var i={};if(u[e]||(e=e.split("-")[0],u[e])){var n=u[e];return t.each(c,function(t,e){e in n&&(i[e]=n[e])}),i}}var r=function(e,i){this._process_options(i),this.element=t(e),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=t(h.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this.o.startDate),this.setEndDate(this.o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};r.prototype={constructor:r,_process_options:function(e){this._o=t.extend({},this._o,e);var i=this.o=t.extend({},this._o),n=i.language;switch(u[n]||(n=n.split("-")[0],u[n]||(n=l.language)),i.language=n,i.startView){case 2:case"decade":i.startView=2;break;case 1:case"year":i.startView=1;break;default:i.startView=0}switch(i.minViewMode){case 1:case"months":i.minViewMode=1;break;case 2:case"years":i.minViewMode=2;break;default:i.minViewMode=0}i.startView=Math.max(i.startView,i.minViewMode),i.weekStart%=7,i.weekEnd=(i.weekStart+6)%7;var r=h.parseFormat(i.format);i.startDate!==-1/0&&(i.startDate=h.parseDate(i.startDate,r,i.language)),1/0!==i.endDate&&(i.endDate=h.parseDate(i.endDate,r,i.language)),i.daysOfWeekDisabled=i.daysOfWeekDisabled||[],t.isArray(i.daysOfWeekDisabled)||(i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/)),i.daysOfWeekDisabled=t.map(i.daysOfWeekDisabled,function(t){return parseInt(t,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var e,i,n=0;n<t.length;n++)e=t[n][0],i=t[n][1],e.on(i)},_unapplyEvents:function(t){for(var e,i,n=0;n<t.length;n++)e=t[n][0],i=t[n][1],e.off(i)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{mousedown:t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).size()||this.picker.is(t.target)||this.picker.find(t.target).size()||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,i){var n=i||this.date,r=new Date(n.getTime()+6e4*n.getTimezoneOffset());this.element.trigger({type:e,date:r,format:t.proxy(function(t){var e=t||this.o.format;return h.formatDate(n,e,this.o.language)},this)})},show:function(t){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),this._attachSecondaryEvents(),t&&t.preventDefault(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},getDate:function(){var t=this.getUTCDate();return new Date(t.getTime()+6e4*t.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(t){this.setUTCDate(new Date(t.getTime()-6e4*t.getTimezoneOffset()))},setUTCDate:function(t){this.date=t,this.setValue()},setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t):this.component&&this.element.find("input").val(t)},getFormattedDate:function(t){return void 0===t&&(t=this.o.format),h.formatDate(this.date,t,this.o.language)},setStartDate:function(t){this._process_options({startDate:t}),this.update(),this.updateNavArrows()},setEndDate:function(t){this._process_options({endDate:t}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(t){this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=parseInt(this.element.parents().filter(function(){return"auto"!=t(this).css("z-index")}).first().css("z-index"))+10,i=this.component?this.component.parent().offset():this.element.offset(),n=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:i.top+n,left:i.left,zIndex:e})}},_allow_update:!0,update:function(){if(this._allow_update){var t,e=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(t=arguments[0],e=!0):(t=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date),this.date=h.parseDate(t,this.o.format,this.o.language),e&&this.setValue(),this.viewDate=new Date(this.date<this.o.startDate?this.o.startDate:this.date>this.o.endDate?this.o.endDate:this.date),this.fill()}},fillDow:function(){var t=this.o.weekStart,e="<tr>";if(this.o.calendarWeeks){var i='<th class="cw">&nbsp;</th>';e+=i,this.picker.find(".datepicker-days thead tr:first-child").prepend(i)}for(;t<this.o.weekStart+7;)e+='<th class="dow">'+u[this.o.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+u[this.o.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var i=[],n=this.viewDate.getUTCFullYear(),r=this.viewDate.getUTCMonth(),o=this.date.valueOf(),s=new Date;return e.getUTCFullYear()<n||e.getUTCFullYear()==n&&e.getUTCMonth()<r?i.push("old"):(e.getUTCFullYear()>n||e.getUTCFullYear()==n&&e.getUTCMonth()>r)&&i.push("new"),this.o.todayHighlight&&e.getUTCFullYear()==s.getFullYear()&&e.getUTCMonth()==s.getMonth()&&e.getUTCDate()==s.getDate()&&i.push("today"),o&&e.valueOf()==o&&i.push("active"),(e.valueOf()<this.o.startDate||e.valueOf()>this.o.endDate||-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled))&&i.push("disabled"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&i.push("range"),-1!=t.inArray(e.valueOf(),this.range)&&i.push("selected")),i},fill:function(){{var i,n=new Date(this.viewDate),r=n.getUTCFullYear(),o=n.getUTCMonth(),s=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,a=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,l=1/0!==this.o.endDate?this.o.endDate.getUTCFullYear():1/0,c=1/0!==this.o.endDate?this.o.endDate.getUTCMonth():1/0;this.date&&this.date.valueOf()}this.picker.find(".datepicker-days thead th.datepicker-switch").text(u[this.o.language].months[o]+" "+r),this.picker.find("tfoot th.today").text(u[this.o.language].today).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(u[this.o.language].clear).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var d=e(r,o-1,28,0,0,0,0),p=h.getDaysInMonth(d.getUTCFullYear(),d.getUTCMonth());d.setUTCDate(p),d.setUTCDate(p-(d.getUTCDay()-this.o.weekStart+7)%7);var f=new Date(d);f.setUTCDate(f.getUTCDate()+42),f=f.valueOf();for(var m,g=[];d.valueOf()<f;){if(d.getUTCDay()==this.o.weekStart&&(g.push("<tr>"),this.o.calendarWeeks)){var v=new Date(+d+(this.o.weekStart-d.getUTCDay()-7)%7*864e5),b=new Date(+v+(11-v.getUTCDay())%7*864e5),y=new Date(+(y=e(b.getUTCFullYear(),0,1))+(11-y.getUTCDay())%7*864e5),w=(b-y)/864e5/7+1;g.push('<td class="cw">'+w+"</td>")}m=this.getClassNames(d),m.push("day");var x=this.o.beforeShowDay(d);void 0===x?x={}:"boolean"==typeof x?x={enabled:x}:"string"==typeof x&&(x={classes:x}),x.enabled===!1&&m.push("disabled"),x.classes&&(m=m.concat(x.classes.split(/\s+/))),x.tooltip&&(i=x.tooltip),m=t.unique(m),g.push('<td class="'+m.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+d.getUTCDate()+"</td>"),d.getUTCDay()==this.o.weekEnd&&g.push("</tr>"),d.setUTCDate(d.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(g.join(""));var _=this.date&&this.date.getUTCFullYear(),C=this.picker.find(".datepicker-months").find("th:eq(1)").text(r).end().find("span").removeClass("active");_&&_==r&&C.eq(this.date.getUTCMonth()).addClass("active"),(s>r||r>l)&&C.addClass("disabled"),r==s&&C.slice(0,a).addClass("disabled"),r==l&&C.slice(c+1).addClass("disabled"),g="",r=10*parseInt(r/10,10);var k=this.picker.find(".datepicker-years").find("th:eq(1)").text(r+"-"+(r+9)).end().find("td");r-=1;for(var $=-1;11>$;$++)g+='<span class="year'+(-1==$?" old":10==$?" new":"")+(_==r?" active":"")+(s>r||r>l?" disabled":"")+'">'+r+"</span>",r+=1;k.html(g)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.picker.find(".prev").css(this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.o.endDate&&e>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"});break;case 1:case 2:this.picker.find(".prev").css(this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.o.endDate&&e>=this.o.endDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"})}}},click:function(i){i.preventDefault();var n=t(i.target).closest("span, td, th");if(1==n.length)switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var r=h.modes[this.viewMode].navStep*("prev"==n[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,r);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,r)}this.fill();break;case"today":var o=new Date;o=e(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0),this.showMode(-2);var s="linked"==this.o.todayBtn?null:"view";this._setDate(o,s);break;case"clear":var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.val("").change(),this._trigger("changeDate"),this.update(),this.o.autoclose&&this.hide()}break;case"span":if(!n.is(".disabled")){if(this.viewDate.setUTCDate(1),n.is(".month")){var l=1,c=n.parent().find("span").index(n),u=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(c),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(e(u,c,l,0,0,0,0))}else{var u=parseInt(n.text(),10)||0,l=1,c=0;this.viewDate.setUTCFullYear(u),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(e(u,c,l,0,0,0,0))}this.showMode(-1),this.fill()}break;case"td":if(n.is(".day")&&!n.is(".disabled")){var l=parseInt(n.text(),10)||1,u=this.viewDate.getUTCFullYear(),c=this.viewDate.getUTCMonth();n.is(".old")?0===c?(c=11,u-=1):c-=1:n.is(".new")&&(11==c?(c=0,u+=1):c+=1),this._setDate(e(u,c,l,0,0,0,0))}}},_setDate:function(t,e){e&&"date"!=e||(this.date=new Date(t)),e&&"view"!=e||(this.viewDate=new Date(t)),this.fill(),this.setValue(),this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&(i.change(),!this.o.autoclose||e&&"date"!=e||this.hide())},moveMonth:function(t,e){if(!e)return t;var i,n,r=new Date(t.valueOf()),o=r.getUTCDate(),s=r.getUTCMonth(),a=Math.abs(e);if(e=e>0?1:-1,1==a)n=-1==e?function(){return r.getUTCMonth()==s}:function(){return r.getUTCMonth()!=i},i=s+e,r.setUTCMonth(i),(0>i||i>11)&&(i=(i+12)%12);else{for(var l=0;a>l;l++)r=this.moveMonth(r,e);i=r.getUTCMonth(),r.setUTCDate(o),n=function(){return i!=r.getUTCMonth()}}for(;n();)r.setUTCDate(--o),r.setUTCMonth(i);return r},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))return void(27==t.keyCode&&this.show());var e,i,n,r=!1;switch(t.keyCode){case 27:this.hide(),t.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;e=37==t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.date,e),n=this.moveYear(this.viewDate,e)):t.shiftKey?(i=this.moveMonth(this.date,e),n=this.moveMonth(this.viewDate,e)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+e),n=new Date(this.viewDate),n.setUTCDate(this.viewDate.getUTCDate()+e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),t.preventDefault(),r=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;e=38==t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.date,e),n=this.moveYear(this.viewDate,e)):t.shiftKey?(i=this.moveMonth(this.date,e),n=this.moveMonth(this.viewDate,e)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+7*e),n=new Date(this.viewDate),n.setUTCDate(this.viewDate.getUTCDate()+7*e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),t.preventDefault(),r=!0);break;case 13:this.hide(),t.preventDefault();break;case 9:this.hide()}if(r){this._trigger("changeDate");var o;this.isInput?o=this.element:this.component&&(o=this.element.find("input")),o&&o.change()}},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+h.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var o=function(e,i){this.element=t(e),this.inputs=t.map(i.inputs,function(t){return t.jquery?t[0]:t}),delete i.inputs,t(this.inputs).datepicker(i).bind("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")}),this.updateDates()};o.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.date}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,i){i.setRange(e)})},dateUpdated:function(e){var i=t(e.target).data("datepicker"),n=i.getUTCDate(),r=t.inArray(e.target,this.inputs),o=this.inputs.length;if(-1!=r){if(n<this.dates[r])for(;r>=0&&n<this.dates[r];)this.pickers[r--].setUTCDate(n);else if(n>this.dates[r])for(;o>r&&n>this.dates[r];)this.pickers[r++].setUTCDate(n);this.updateDates()}},remove:function(){t.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var s=t.fn.datepicker,a=t.fn.datepicker=function(e){var s=Array.apply(null,arguments);s.shift();var a;return this.each(function(){var c=t(this),u=c.data("datepicker"),h="object"==typeof e&&e;if(!u){var d=i(this,"date"),p=t.extend({},l,d,h),f=n(p.language),m=t.extend({},l,f,d,h);if(c.is(".input-daterange")||m.inputs){var g={inputs:m.inputs||c.find("input").toArray()};c.data("datepicker",u=new o(this,t.extend(m,g)))}else c.data("datepicker",u=new r(this,m))}return"string"==typeof e&&"function"==typeof u[e]&&(a=u[e].apply(u,s),void 0!==a)?!1:void 0}),void 0!==a?a:this},l=t.fn.datepicker.defaults={autoclose:!1,beforeShowDay:t.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},c=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=r;var u=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},h={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,h.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\x00").split("\x00"),i=t.match(this.validParts);if(!e||!e.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:e,parts:i}},parseDate:function(i,n,o){if(i instanceof Date)return i;if("string"==typeof n&&(n=h.parseFormat(n)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){var s,a,l=/([\-+]\d+)([dmwy])/,c=i.match(/([\-+]\d+)([dmwy])/g);i=new Date;for(var d=0;d<c.length;d++)switch(s=l.exec(c[d]),a=parseInt(s[1]),s[2]){case"d":i.setUTCDate(i.getUTCDate()+a);break;case"m":i=r.prototype.moveMonth.call(r.prototype,i,a);break;case"w":i.setUTCDate(i.getUTCDate()+7*a);break;case"y":i=r.prototype.moveYear.call(r.prototype,i,a)}return e(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}var p,f,s,c=i&&i.match(this.nonpunctuation)||[],i=new Date,m={},g=["yyyy","yy","M","MM","m","mm","d","dd"],v={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){for(e-=1;0>e;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!=e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)
}};v.M=v.MM=v.mm=v.m,v.dd=v.d,i=e(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var b=n.parts.slice();if(c.length!=b.length&&(b=t(b).filter(function(e,i){return-1!==t.inArray(i,g)}).toArray()),c.length==b.length){for(var d=0,y=b.length;y>d;d++){if(p=parseInt(c[d],10),s=b[d],isNaN(p))switch(s){case"MM":f=t(u[o].months).filter(function(){var t=this.slice(0,c[d].length),e=c[d].slice(0,t.length);return t==e}),p=t.inArray(f[0],u[o].months)+1;break;case"M":f=t(u[o].monthsShort).filter(function(){var t=this.slice(0,c[d].length),e=c[d].slice(0,t.length);return t==e}),p=t.inArray(f[0],u[o].monthsShort)+1}m[s]=p}for(var w,d=0;d<g.length;d++)w=g[d],w in m&&!isNaN(m[w])&&v[w](i,m[w])}return i},formatDate:function(e,i,n){"string"==typeof i&&(i=h.parseFormat(i));var r={d:e.getUTCDate(),D:u[n].daysShort[e.getUTCDay()],DD:u[n].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:u[n].monthsShort[e.getUTCMonth()],MM:u[n].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};r.dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m;for(var e=[],o=t.extend([],i.separators),s=0,a=i.parts.length;a>=s;s++)o.length&&e.push(o.shift()),e.push(r[i.parts[s]]);return e.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};h.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+h.headTemplate+"<tbody></tbody>"+h.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+h.headTemplate+h.contTemplate+h.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+h.headTemplate+h.contTemplate+h.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=h,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=s,this},t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var i=t(this);i.data("datepicker")||(e.preventDefault(),a.call(i,"show"))}),t(function(){a.call(t('[data-provide="datepicker-inline"]'))})}(window.jQuery),function(t){"use strict";t.fn.bdatepicker=t.fn.datepicker.noConflict(),t.fn.datepicker||(t.fn.datepicker=t.fn.bdatepicker);var e=function(t){this.init("date",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{initPicker:function(e,i){this.options.viewformat||(this.options.viewformat=this.options.format),e.datepicker=t.fn.editableutils.tryParseJson(e.datepicker,!0),this.options.datepicker=t.extend({},i.datepicker,e.datepicker,{format:this.options.viewformat}),this.options.datepicker.language=this.options.datepicker.language||"en",this.dpg=t.fn.bdatepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker),this.options.clear&&(this.$clear=t('<a href="#"></a>').html(this.options.clear).click(t.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(t('<div class="editable-clear">').append(this.$clear)))},value2html:function(t,i){var n=t?this.dpg.formatDate(t,this.parsedViewFormat,this.options.datepicker.language):"";e.superclass.value2html.call(this,n,i)},html2value:function(t){return this.parseDate(t,this.parsedViewFormat)},value2str:function(t){return t?this.dpg.formatDate(t,this.parsedFormat,this.options.datepicker.language):""},str2value:function(t){return this.parseDate(t,this.parsedFormat)},value2submit:function(t){return this.value2str(t)},value2input:function(t){this.$input.bdatepicker("update",t)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".day",function(e){if(!t(e.currentTarget).is(".old")&&!t(e.currentTarget).is(".new")){var i=t(this).closest("form");setTimeout(function(){i.submit()},200)}})},parseDate:function(t,e){var i,n=null;return t&&(n=this.dpg.parseDate(t,e,this.options.datepicker.language),"string"==typeof t&&(i=this.dpg.formatDate(n,e,this.options.datepicker.language),t!==i&&(n=null))),n}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!1},clear:"&times; clear"}),t.fn.editabletypes.date=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("datefield",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.date),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.bdatepicker(this.options.datepicker),this.$input.off("focus keydown"),this.$input.keyup(t.proxy(function(){this.$tpl.removeData("date"),this.$tpl.bdatepicker("update")},this))},value2input:function(t){this.$input.val(t?this.dpg.formatDate(t,this.parsedViewFormat,this.options.datepicker.language):""),this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!0}}),t.fn.editabletypes.datefield=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("datetime",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{initPicker:function(e,i){this.options.viewformat||(this.options.viewformat=this.options.format),e.datetimepicker=t.fn.editableutils.tryParseJson(e.datetimepicker,!0),this.options.datetimepicker=t.extend({},i.datetimepicker,e.datetimepicker,{format:this.options.viewformat}),this.options.datetimepicker.language=this.options.datetimepicker.language||"en",this.dpg=t.fn.datetimepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker),this.$input.on("changeMode",function(){var e=t(this).closest("form").parent();setTimeout(function(){e.triggerHandler("resize")},0)}),this.options.clear&&(this.$clear=t('<a href="#"></a>').html(this.options.clear).click(t.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(t('<div class="editable-clear">').append(this.$clear)))},value2html:function(t,i){var n=t?this.dpg.formatDate(this.toUTC(t),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";return i?void e.superclass.value2html.call(this,n,i):n},html2value:function(t){var e=this.parseDate(t,this.parsedViewFormat);return e?this.fromUTC(e):null},value2str:function(t){return t?this.dpg.formatDate(this.toUTC(t),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(t){var e=this.parseDate(t,this.parsedFormat);return e?this.fromUTC(e):null},value2submit:function(t){return this.value2str(t)},value2input:function(t){t&&this.$input.data("datetimepicker").setDate(t)},input2value:function(){var t=this.$input.data("datetimepicker");return t.date?t.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".minute",function(){var e=t(this).closest("form");setTimeout(function(){e.submit()},200)})},toUTC:function(t){return t?new Date(t.valueOf()-6e4*t.getTimezoneOffset()):t},fromUTC:function(t){return t?new Date(t.valueOf()+6e4*t.getTimezoneOffset()):t},parseDate:function(t,e){var i,n=null;return t&&(n=this.dpg.parseDate(t,e,this.options.datetimepicker.language,this.options.formatType),"string"==typeof t&&(i=this.dpg.formatDate(n,e,this.options.datetimepicker.language,this.options.formatType),t!==i&&(n=null))),n}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:!1,autoclose:!1},clear:"&times; clear"}),t.fn.editabletypes.datetime=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("datetimefield",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.datetime),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.datetimepicker(this.options.datetimepicker),this.$input.off("focus keydown"),this.$input.keyup(t.proxy(function(){this.$tpl.removeData("date"),this.$tpl.datetimepicker("update")},this))},value2input:function(t){this.$input.val(this.value2html(t)),this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:!1,autoclose:!0}}),t.fn.editabletypes.datetimefield=e}(window.jQuery),function(){jQuery(function(t){var e;return e=t.fn.editableform.Constructor,e.prototype.saveWithUrlHook=function(e){var i,n,r,o,s;return s=this.options.url,i=this.options.model,o=this.options.nested,n=this.options.nid,r=this.options.locale,this.options.url=function(e){return function(a){var l,c,u,h;return"function"==typeof s?s.call(e.options.scope,a):null!=s&&"never"!==e.options.send?(l=a.name,c=a.value,"[object Array]"===Object.prototype.toString.call(a.value)&&0===a.value.length&&a.value.push(""),h={},o?(u={},u[l]=c,u.id=n,r&&(u.locale=r),h[o+"_attributes"]=u):h[l]=c,a[i]=h,delete a.name,delete a.value,delete a.pk,t.ajax(t.extend({url:s,data:a,type:"PUT",dataType:"json"},e.options.ajaxOptions))):void 0}}(this),this.saveWithoutUrlHook(e)},e.prototype.saveWithoutUrlHook=e.prototype.save,e.prototype.save=e.prototype.saveWithUrlHook})}.call(this),function(){jQuery(function(t){return t("[data-classes]").on("save",function(e,i){var n,r,o,s,a;a=i.newValue,o=t(this),r=o.data("classes")||{};for(s in r)n=r[s],o.removeClass(n);return o.addClass(r[a]),o.css("background-color","")})})}.call(this),function(){$.fn.editable.defaults.error=function(t){var e,i;return i=$(this).data("name"),e=t.responseJSON.errors[i],e.join("; ")}}.call(this),function(){}.call(this),function(){!function($){return $.fn.china_city=function(){return this.each(function(){var $selects;return $selects=$(this).find(".city-select"),$selects.on("change.city",function(){var $this,select,select_index;return $this=$(this),select_index=$selects.index($this)+1,select=$selects.eq(select_index),$selects.slice($selects.index(this)+1).each(function(){return $(this).children().slice(1).remove()}),select[0]&&$(this).val()?$.get("/china_city/"+$(this).val(),function(data){var options,result;return result=eval(data),options=select[0].options,$.each(result,function(t,e){return options.add(new Option(e[0],e[1]))})}):void 0})})},$(function(){var t;return(t=$(".city-group")).length&&t.china_city()})}(jQuery)}.call(this),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(){if(!t.contains(document.documentElement,this))return t(this).timeago("dispose"),this;var e=i(this),s=o.settings;return isNaN(e.datetime)||(0==s.cutoff||Math.abs(r(e.datetime))<s.cutoff)&&t(this).text(n(e.datetime,t(this).attr("lang")?t(this).attr("lang"):o.settings.lang)),this}function i(e){if(e=t(e),!e.data("timeago")){e.data("timeago",{datetime:o.datetime(e)});var i=t.trim(e.text());o.settings.localeTitle?e.attr("title",e.data("timeago").datetime.toLocaleString()):!(i.length>0)||o.isTime(e)&&e.attr("title")||e.attr("title",i)}return e.data("timeago")}function n(t,e){return o.inWords(r(t),e)}function r(t){return(new Date).getTime()-t.getTime()}t.timeago=function(e){return n(e instanceof Date?e:"string"==typeof e?t.timeago.parse(e):"number"==typeof e?new Date(e):t.timeago.datetime(e))};var o=t.timeago;t.extend(t.timeago,{settings:{refreshMillis:6e4,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,lang:"en",strings:{en:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",inPast:"any moment now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}}},inWords:function(e,i){function n(i,n){var o=t.isFunction(i)?i(n,e):i,s=r.numbers&&r.numbers[n]||n;return o.replace(/%d/i,s)}if(!this.settings.allowPast&&!this.settings.allowFuture)throw"timeago allowPast and allowFuture settings can not both be set to false.";var r=this.settings.strings[i]||this.settings.strings[this.settings.lang]||this.settings.strings.en,o=r.prefixAgo,s=r.suffixAgo;if(this.settings.allowFuture&&0>e&&(o=r.prefixFromNow,s=r.suffixFromNow),!this.settings.allowPast&&e>=0)return this.settings.strings[i].inPast;var a=Math.abs(e)/1e3,l=a/60,c=l/60,u=c/24,h=u/365,d=45>a&&n(r.seconds,Math.round(a))||90>a&&n(r.minute,1)||45>l&&n(r.minutes,Math.round(l))||90>l&&n(r.hour,1)||24>c&&n(r.hours,Math.round(c))||42>c&&n(r.day,1)||30>u&&n(r.days,Math.round(u))||45>u&&n(r.month,1)||365>u&&n(r.months,Math.round(u/30))||1.5>h&&n(r.year,1)||n(r.years,Math.round(h)),p=r.wordSeparator||"";return void 0===r.wordSeparator&&(p=" "),t.trim([o,d,s].join(p))},parse:function(e){var i=t.trim(e);return i=i.replace(/\.\d+/,""),i=i.replace(/-/,"/").replace(/-/,"/"),i=i.replace(/T/," ").replace(/Z/," UTC"),i=i.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),i=i.replace(/([\+\-]\d\d)$/," $100"),new Date(i)},datetime:function(e){var i=t(e).attr(o.isTime(e)?"datetime":"title");return o.parse(i)},isTime:function(e){return"time"===t(e).get(0).tagName.toLowerCase()}});var s={init:function(){var i=t.proxy(e,this);i();var n=o.settings;n.refreshMillis>0&&(this._timeagoInterval=setInterval(i,n.refreshMillis))},update:function(i){var n=o.parse(i);t(this).data("timeago",{datetime:n}),o.settings.localeTitle&&t(this).attr("title",n.toLocaleString()),e.apply(this)},updateFromDOM:function(){t(this).data("timeago",{datetime:o.parse(t(this).attr(o.isTime(this)?"datetime":"title"))}),e.apply(this)},dispose:function(){this._timeagoInterval&&(window.clearInterval(this._timeagoInterval),this._timeagoInterval=null)}};t.fn.timeago=function(t,e){var i=t?s[t]:s.init;if(!i)throw new Error("Unknown function name '"+t+"' for timeago");return this.each(function(){i.call(this,e)}),this},document.createElement("abbr"),document.createElement("time")}),function(t){t(document).on("ready page:load",function(){t("time[data-time-ago]").timeago()})}(jQuery),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["editor/draft"]=Handlebars.template(function(t,e,i,n,r){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers),r=r||{};var o,s,a="",l="function",c=this.escapeExpression;return a+="<header>\n  <h5>",(s=i.draft_title)?o=s.call(e,{hash:{},data:r}):(s=e&&e.draft_title,o=typeof s===l?s.call(e,{hash:{},data:r}):s),a+=c(o)+"</h5>\n</header>\n<section>\n  <p>",(s=i.draft_summary)?o=s.call(e,{hash:{},data:r}):(s=e&&e.draft_summary,o=typeof s===l?s.call(e,{hash:{},data:r}):s),a+=c(o)+"</p>\n</section>\n<footer>\n  <time>",(s=i.draft_timestamp)?o=s.call(e,{hash:{},data:r}):(s=e&&e.draft_timestamp,o=typeof s===l?s.call(e,{hash:{},data:r}):s),a+=c(o)+'</time>\n  <span class="separator">|</span>\n  <a href="',(s=i.link)?o=s.call(e,{hash:{},data:r}):(s=e&&e.link,o=typeof s===l?s.call(e,{hash:{},data:r}):s),a+=c(o)+'" target="_blank">\u7f16\u8f91</a>\n  <span class="separator">|</span>\n  <a class="destory" href="#" data-id="',(s=i.id)?o=s.call(e,{hash:{},data:r}):(s=e&&e.id,o=typeof s===l?s.call(e,{hash:{},data:r}):s),a+=c(o)+'">\u5220\u9664</a>\n</footer>\n'}),this.HandlebarsTemplates["editor/draft"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["editor/review"]=Handlebars.template(function(t,e,i,n,r){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers),r=r||{};var o,s,a="",l="function",c=this.escapeExpression;return a+='<header>\n  <input class="title" type="text" value="',(s=i.title)?o=s.call(e,{hash:{},data:r}):(s=e&&e.title,o=typeof s===l?s.call(e,{hash:{},data:r}):s),a+=c(o)+'" placeholder="\u6807\u9898">\n</header>\n<div class="body">',(s=i.body)?o=s.call(e,{hash:{},data:r}):(s=e&&e.body,o=typeof s===l?s.call(e,{hash:{},data:r}):s),(o||0===o)&&(a+=o),a+="</div>\n"}),this.HandlebarsTemplates["editor/review"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["groups/group"]=Handlebars.template(function(t,e,i,n,r){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers),r=r||{};var o,s="",a="function",l=this.escapeExpression;return s+='<img src="',(o=i.avatar)?o=o.call(e,{hash:{},data:r}):(o=e&&e.avatar,o=typeof o===a?o.call(e,{hash:{},data:r}):o),s+=l(o)+'" height="20" width="20">\n',(o=i.value)?o=o.call(e,{hash:{},data:r}):(o=e&&e.value,o=typeof o===a?o.call(e,{hash:{},data:r}):o),s+=l(o)+"\n"}),this.HandlebarsTemplates["groups/group"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["photos/photo"]=Handlebars.template(function(t,e,i,n,r){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers),r=r||{};var o,s="",a="function",l=this.escapeExpression;return s+='<figure class="uploader_item photo">\n  <img src="',(o=i.small_url)?o=o.call(e,{hash:{},data:r}):(o=e&&e.small_url,o=typeof o===a?o.call(e,{hash:{},data:r}):o),s+=l(o)+'" height="80" width="80" title="\u62d6\u52a8\u4ee5\u6539\u53d8\u987a\u5e8f">\n  <a class="destroy" title="\u5220\u9664" href="#">\n    <i class="fa fa-times-circle-o"></i>\n  </a>\n</figure>\n'}),this.HandlebarsTemplates["photos/photo"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["photos/preview"]=Handlebars.template(function(t,e,i,n,r){return this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers),r=r||{},'<figure class="uploader_item photo" data-preview-width="80" data-preview-height="80">\n  <div class="progress progress-striped active">\n    <div class="progress-bar" style="width: 0%;"></div>\n  </div>\n</figure>\n'}),this.HandlebarsTemplates["photos/preview"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["search/loading"]=Handlebars.template(function(t,e,i,n,r){return this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers),r=r||{},'<div class="search_menu-loading">\n  <p>\u66f4\u591a\u7ed3\u679c\u52a0\u8f7d\u4e2d...</p>\n  <div class="search_menu-progress"></div>\n</div>'}),this.HandlebarsTemplates["search/loading"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["search/suggestions"]=Handlebars.template(function(t,e,i,n,r){function o(t,e){var n,r="";return r+='\n  <h5>\n    <i class="fa fa-eye"></i>\u731c\u4f60\u5728\u627e\n  </h5>\n  <ul>\n    ',n=i.each.call(t,t&&t.suggestions,{hash:{},inverse:d.noop,fn:d.programWithDepth(2,s,e,t),data:e}),(n||0===n)&&(r+=n),r+="\n  </ul>\n"}function s(t,e,n){var r,o="";return o+="\n      ",r=i["if"].call(t,null==e||e===!1?e:e.index,{hash:{},inverse:d.noop,fn:d.programWithDepth(3,a,e,n),data:e}),(r||0===r)&&(o+=r),o+="\n    "}function a(t,e,n){var r,o,s,a="";return a+="\n        <li",o=i.ifCond||n&&n.ifCond,s={hash:{},inverse:d.noop,fn:d.program(4,l,e),data:e},r=o?o.call(t,null==e||e===!1?e:e.index,"==",n&&n.selectedIndex,s):p.call(t,"ifCond",null==e||e===!1?e:e.index,"==",n&&n.selectedIndex,s),(r||0===r)&&(a+=r),a+=' data-index="'+m((r=null==e||e===!1?e:e.index,typeof r===f?r.apply(t):r))+'">'+m(typeof t===f?t.apply(t):t)+"</li>\n      "}function l(){return' class="selected"'}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers),r=r||{};var c,u,h,d=this,p=i.helperMissing,f="function",m=this.escapeExpression;return u=i.ifCond||e&&e.ifCond,h={hash:{},inverse:d.noop,fn:d.program(1,o,r),data:r},c=u?u.call(e,(c=e&&e.suggestions,null==c||c===!1?c:c.length),">",1,h):p.call(e,"ifCond",(c=e&&e.suggestions,null==c||c===!1?c:c.length),">",1,h),c||0===c?c:""}),this.HandlebarsTemplates["search/suggestions"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["shared/alert"]=Handlebars.template(function(t,e,i,n,r){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers),r=r||{};var o,s="",a="function",l=this.escapeExpression;return s+='<div class="alert alert-',(o=i.level)?o=o.call(e,{hash:{},data:r}):(o=e&&e.level,o=typeof o===a?o.call(e,{hash:{},data:r}):o),s+=l(o)+' alert-dismissable">\n  <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>\n  ',(o=i.content)?o=o.call(e,{hash:{},data:r}):(o=e&&e.content,o=typeof o===a?o.call(e,{hash:{},data:r}):o),s+=l(o)+"\n</div>\n"}),this.HandlebarsTemplates["shared/alert"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["shared/loading"]=Handlebars.template(function(t,e,i,n,r){return this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers),r=r||{},'<div class="spinning">\n  <i class="fa fa-spinner fa-spin fa-3x"></i>\n</div>'}),this.HandlebarsTemplates["shared/loading"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["shared/message_on_top"]=Handlebars.template(function(t,e,i,n,r){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers),r=r||{};var o,s,a="",l="function",c=this.escapeExpression;return a+='<div class="message-on-top">\n  <p class="alert alert-',(s=i.type)?o=s.call(e,{hash:{},data:r}):(s=e&&e.type,o=typeof s===l?s.call(e,{hash:{},data:r}):s),a+=c(o)+' fade in">\n    ',(s=i.content)?o=s.call(e,{hash:{},data:r}):(s=e&&e.content,o=typeof s===l?s.call(e,{hash:{},data:r}):s),a+=c(o)+'\n    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>\n  </p>\n</div>\n'}),this.HandlebarsTemplates["shared/message_on_top"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["thing_lists/add_to_list_modal"]=Handlebars.template(function(t,e,i,n,r){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers),r=r||{};var o,s,a="",l="function",c=this.escapeExpression;return a+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal">X</button>\n      <h4>\n        <i class="fa fa-list"></i>\n        \u6dfb\u52a0\u5230\u6536\u85cf\u5217\u8868\n        <span class="title">',(s=i.title)?o=s.call(e,{hash:{},data:r}):(s=e&&e.title,o=typeof s===l?s.call(e,{hash:{},data:r}):s),a+=c(o)+'</span>\n      </h4>\n    </div>\n\n    <div class="modal-body">\n      <img alt="',(s=i.title)?o=s.call(e,{hash:{},data:r}):(s=e&&e.title,o=typeof s===l?s.call(e,{hash:{},data:r}):s),a+=c(o)+'" src="',(s=i.photo)?o=s.call(e,{hash:{},data:r}):(s=e&&e.photo,o=typeof s===l?s.call(e,{hash:{},data:r}):s),a+=c(o)+'">\n\n      <header>\n        <h5>',(s=i.title)?o=s.call(e,{hash:{},data:r}):(s=e&&e.title,o=typeof s===l?s.call(e,{hash:{},data:r}):s),a+=c(o)+'</h5>\n      </header>\n\n      <form class="new-thing-list-form form-inline" action="#">\n        <h5>\u8bf7\u9009\u62e9\u8be5\u4ea7\u54c1\u8981\u6dfb\u52a0\u8fdb\u7684\u5217\u8868</h5>\n        <ul class="thing-lists"></ul>\n\n        <fieldset>\n          <div class="input-group">\n            <input class="form-control" name="name" type="text" placeholder="\u6dfb\u52a0\u4e00\u4e2a\u5217\u8868">\n            <span class="input-group-btn">\n              <button class="btn btn-primary disabled" type="submit">\u6dfb\u52a0</button>\n            </span>\n          </div>\n        </fieldset>\n      </form>\n    </div>\n\n    <div class="modal-footer">\n      <form class="new-thing-list-items-form" action="#">\n        <input class="form-control" name="description" type="text" placeholder="\u8bf4\u70b9\u4ec0\u4e48\u5427\uff08140\u5b57\u4ee5\u5185\u54e6\uff09" maxlength=140>\n        <button class="btn btn-primary" type="submit" data-category="thing" data-action="list" data-label="',(s=i.title)?o=s.call(e,{hash:{},data:r}):(s=e&&e.title,o=typeof s===l?s.call(e,{hash:{},data:r}):s),a+=c(o)+'">\u5b8c\u6210</button>\n      </form>\n    </div>\n  </div>\n</div>'}),this.HandlebarsTemplates["thing_lists/add_to_list_modal"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["thing_lists/list"]=Handlebars.template(function(t,e,i,n,r){function o(){return'class="selected"'}function s(t){var e,i="";return i+="("+p((e=t&&t.items,e=null==e||e===!1?e:e.length,typeof e===d?e.apply(t):e))+")"}function a(){return"checked"}function l(){return'<i class="fa fa-fw fa-check"></i>'}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers),r=r||{};var c,u,h="",d="function",p=this.escapeExpression,f=this;return h+="<label ",c=i["if"].call(e,e&&e.selected,{hash:{},inverse:f.noop,fn:f.program(1,o,r),data:r}),(c||0===c)&&(h+=c),h+='>\n  <span class="thing-list-name">',(u=i.name)?c=u.call(e,{hash:{},data:r}):(u=e&&e.name,c=typeof u===d?u.call(e,{hash:{},data:r}):u),h+=p(c)+" ",c=i["if"].call(e,(c=e&&e.items,null==c||c===!1?c:c.length),{hash:{},inverse:f.noop,fn:f.program(3,s,r),data:r}),(c||0===c)&&(h+=c),h+='</span>\n  <input type="checkbox" ',c=i["if"].call(e,e&&e.selected,{hash:{},inverse:f.noop,fn:f.program(5,a,r),data:r}),(c||0===c)&&(h+=c),h+=">\n  ",c=i["if"].call(e,e&&e.selected,{hash:{},inverse:f.noop,fn:f.program(7,l,r),data:r}),(c||0===c)&&(h+=c),h+="\n</label>"}),this.HandlebarsTemplates["thing_lists/list"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["users/user"]=Handlebars.template(function(t,e,i,n,r){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers),r=r||{};var o,s="",a="function",l=this.escapeExpression;return s+='<img src="',(o=i.avatar)?o=o.call(e,{hash:{},data:r}):(o=e&&e.avatar,o=typeof o===a?o.call(e,{hash:{},data:r}):o),s+=l(o)+'" height="20" width="20">\n',(o=i.value)?o=o.call(e,{hash:{},data:r}):(o=e&&e.value,o=typeof o===a?o.call(e,{hash:{},data:r}):o),s+=l(o)+"\n"}),this.HandlebarsTemplates["users/user"]}.call(this),function(){!function(t){t.Making={Models:{},View:{},Views:{},Collections:{},Routers:{},Events:_.clone(Backbone.Events)},t.$document=$(document),t.$window=$(window),t.$html=$("html"),t.$docbody=$("body"),t.EventBus={trigger:function(t,e){var i;return i=$.Event(t),i.param=e,$document.trigger(i)},on:function(t,e){return $document.on(t,e)},off:function(t){return $document.off(t)}}}(this)}.call(this),function(){!function(t){_.extend(t,{InitUIThings:function(t){return t.length&&t.each(function(){var t;return t=$(this),t.find("h5").tooltip()})},FeelingsNew:function(){return $(function(){var t;return t=new Making.Views.FeelingNew({el:".feeling_form > .editor_compact"})})},FormLink:function(t,e){return $(function(){return $(e).click(function(){var e;return e=$("#check_provider_sync input").prop("checked"),$("<input name='provider_sync' type='hidden' value="+e+">").appendTo(t),$(t).submit()})})},Editor:function(t,e){return null==e&&(e=!1),$(function(){return $("#editor").wysiwyg({dragAndDropImages:!1}).html($(t).val()).fadeIn().on("drop",function(t){return t.stopPropagation()}),$("#editor-toolbar").fadeIn().find(".btn-group > a").tooltip({container:"body"}).end().find(".dropdown-menu input").click(function(){return!1}).change(function(){return $(this).parent(".dropdown-menu").siblings(".dropdown-toggle").dropdown("toggle")}).end().find('input[type="file"]').each(function(){var t,e;return t=$(this),e=$(t.data("target")),t.css("opacity",0).css("position","absolute").attr("title","\u63d2\u5165\u56fe\u50cf(\u53ef\u4ee5\u62d6\u62fd)").tooltip().offset(e.offset()).width(e.outerWidth()).height(e.outerHeight())}),$(t).closest("form").on("submit",function(){var i,n,r;return n=$("#editor"),e&&n.text().length<140?($("<p>").addClass("alert alert-danger").text("\u5185\u5bb9\u6709\u70b9\u5c11\uff0c\u5efa\u8bae\u518d\u8be6\u7ec6\u63cf\u8ff0\u4e0b\uff08\u81f3\u5c11 140 \u5b57\uff09\u3002").insertAfter(n),!1):(i=n.next("p.alert"),i.length&&i.remove(),n.find("a").attr("target","_blank"),r=n.html(),$(t).val(r.replace(/<!--.*?-->/g,"")))})})},Share:function(){var t,e,i;return i=function(t){var e,i,n,r,o;for(e=0,o=t.val().replace(/http:\/\/[a-z]+\.[^ \u4e00-\u9fa5]+/g,"urlurlhereurlurlhere"),n=0,r=o.length;r>n;n++)i=o[n],e+=/[\x00-\xff]/.test(i)?.5:1;return Math.ceil(e)},e=function(t){var e;return e=140-i(t.find("textarea")),e>0?t.find('input[type="submit"]').removeAttr("disabled"):t.find('input[type="submit"]').attr("disabled","disabled"),t.find(".words-check").text("\u8fd8\u53ef\u4ee5\u8f93\u5165"+e+"\u5b57")},t=$(".share_modal"),t.on("propertychange input","textarea",function(){return e($(this).closest(".share_modal"))}),t.on("shown",function(){return e($(this))}),t.on("submit form",function(){return t.modal("hide")})},Comments:function(t){var e;return e=$(t),e.data("comments")?void 0:(new Making.Views.CommentsIndex({el:t,url:e.data("url")}),e.data("comments",!0))},InfiniteScroll:function(e,i){return $(".pagination").hide(),$(e).infinitescroll({navSelector:".pagination",nextSelector:'.pagination a[rel="next"]',contentSelector:e+" .infinite",itemSelector:".infinite > li, .infinite > article",pixelsFromNavToBottom:150,loading:{msg:$("<div class='loading-things'><i class='fa fa-spinner fa-spin fa-2x'></i></div>")},errorCallback:function(){return $(e).find(".loading-things").html('<em class="nomore">\u6ca1\u6709\u66f4\u591a\u4e86\u3002</em>')}},function(e){return $(".loading-things").remove(),t.lazyLoadImages(e),null!=i?i():void 0})},CalculatePrice:function(t){var e,i;return e=parseFloat(t.children(".price").attr("data-price")),i=parseFloat(t.children(".item_quantity").val()),t.children(".price").text("\uffe5 "+e*i)}})}(Making)}.call(this),function(){window.Making=function(t){return t.GetScrollbarWidth=function(){var t,e,i,n;return t=document.createElement("p"),t.style.width="100%",t.style.height="200px",e=document.createElement("div"),e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),document.body.appendChild(e),i=t.offsetWidth,e.style.overflow="scroll",n=t.offsetWidth,i===n&&(n=e.clientWidth),document.body.removeChild(e),i-n+"px"},t.GetParameterByKey=function(t){var e,i;return t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),e=new RegExp("[\\?&]"+t+"=([^&#]*)"),i=e.exec(location.search),null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))},t.ReadMore=function(t){var e,i,n;return e=$(t),i=e.next(".more"),n=parseInt(e.css("maxHeight"))-1,e.height()<n&&e.removeClass("is_folded").next(".more").remove(),i.on("click",function(t){return t.preventDefault(),$(this).toggleClass("shown").prev(".post_content").toggleClass("is_folded")})},t.htmlEntities=function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},t.prefixEvent=function(t){var e,i,n,r,o,s;for(e="",s=["","webkit","moz","MS"],n=function(i){return e+=i?i+t+" ":t.toLowerCase()+" "},r=0,o=s.length;o>r;r++)i=s[r],n(i);return e.trim()},t}(window.Making||{})}.call(this),function(){!function(t,e){return window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),e.url=window.location.origin+window.location.pathname,e.user=$("#user").data("id"),e.Breakpoints={screenXSMin:"480px",screenXSMax:"767px",screenSMMin:"768px",screenSMMax:"991px",screenMDMin:"992px",screenMDMax:"1439px",screenLGMin:"1440px",screenLGMax:"1919px",screenXLMin:"1920px"},e.keycode={ENTER:13,ESC:27,TAB:9,LEFT:37,UP:38,RIGHT:39,DOWN:40},$html.hasClass("mobile")?e.device="mobile":$html.hasClass("tablet")?e.device="tablet":$html.hasClass("desktop")&&(e.device="desktop"),window.navigator.userAgent.toLowerCase().indexOf("micromessenger")>=0&&(e.browser="wechat"),e.infiniteScroll=function(t,i,n){var r,o,s;
r=$(t),s=1,o=!1,$window.on("scroll.infiniteScroll",function(){o||$document.height()-$window.scrollTop()-$window.height()>200||$.ajax({url:i,data:{page:++s},dataType:"html",beforeSend:function(){return o=!0,r.append("<div class='loading-things'><i class='fa fa-spinner fa-spin fa-2x'></i></div>")}}).done(function(t,i,s){switch(r.children(".loading-things").remove(),i){case"success":r.append(e.lazyLoadImages(t));break;case"nocontent":r.append('<em class="nomore">\u6ca1\u6709\u66f4\u591a\u4e86\u3002</em>'),$window.off("scroll.infiniteScroll")}return null!=n&&n.call(r,t,s),o=!1}).fail(function(){return r.children(".loading-things").remove().end().append('<em class="nomore">\u51fa\u9519\u4e86\uff0c\u8bf7\u5237\u65b0\u540e\u91cd\u8bd5\u3002</em>')})}),$window.height()>=$docbody.height()&&$window.trigger("scroll.infiniteScroll")},e.selectCategories=function(t,e){var i;return i={},$(t).find(".tags").on("click","a",function(){var t,n;return t=$(this),n=$.trim($(this).data("slug")),$.ajax({url:"/settings/interests/"+n,method:"patch"}),t.hasClass("is-active")?void 0:(i[n]||(i[n]=$.ajax({url:"/things/category/"+n+"?sort_by=fanciers_count",dataType:"html",data:{per:12}})),i[n].done(function(t){return $(e).empty().append(t)}))})},e.shareOnWechat=function(){var t,i;return t=$(".js-share"),"wechat"===e.browser&&t.length?(i=$("#share--wechat-tip"),t.removeAttr("data-toggle").attr("href","#").on("click",function(t){return t.preventDefault(),i.fadeIn("fast")}),i.on("click",function(){return $(this).fadeOut("fast")})):void 0},e.loadEmbed=function(){var t,i;return t=$(".knewone-embed:empty"),i="http://"+location.host+"/embed",t.each(function(t,n){var r,o;return r=$(n),o={type:r.data("knewoneEmbedType"),key:r.data("knewoneEmbedKey")||r.data("knewoneEmbedId")},r.data("knewoneEmbedOptions")&&(o.options=r.data("knewoneEmbedOptions")),$.ajax({url:i,data:o,dataType:"html",beforeSend:function(){return r.append('<div class="spinner"><i class="fa fa-spinner fa-2x fa-spin"></i></div>')}}).done(function(t){return r.empty().append(e.lazyLoadImages(t)).attr("contenteditable",!1)}).fail(function(){return r.empty().append('<p class="knewone-embed-tip">\u65e0\u6548\u7684\u8d44\u6e90\u3002</p>').attr("contenteditable",!1)})})},e.lazyLoadImages=function(t){var e,i;return null==t&&(t="body"),e=$(t),i=e.find("img.js-lazy"),i.length&&i.css("visibility","visible").lazyload({delay:300,threshold:200}),e},e.isDebugging=function(){return Boolean(Making.GetParameterByKey("debug"))},$(function(){var t,i,n,r;return i=$(".navbar"),t=$("#go_top"),n=t.css("right"),r=e.GetScrollbarWidth(),$docbody.on("freeze",function(){return $docbody.addClass("is-frozen"),parseInt(r)>0&&$document.height()>$window.height()?($html.css("margin-right",r),i.css("padding-right",r),t.css("right","calc("+n+" + "+r+")")):void 0}).on("unfreeze",function(){return $docbody.removeClass("is-frozen"),parseInt(r)>0&&$document.height()>$window.height()?($html.css("margin-right",0),i.css("padding-right",0),t.css("right",n)):void 0})}),e}(this,Making)}.call(this),function(){!function(t){return t.carousel=function(t){var e;return e=this,this.defaults={element:".carousel"},this.options=_.extend({},this.defaults,t),$(this.options.element).each(function(){var i,n,r,o,s,a;return i=$(this),n=i.find(".carousel-control"),i.data("carousel")?!0:(t={horizontal:!0,itemNav:"forceCentered",smart:!0,activateMiddle:!0,mouseDragging:!0,touchDragging:!0,releaseSwing:!0,cycleBy:"items",pauseOnHover:!0,speed:300,disabledClass:"is-disabled"},n.length&&(o=n.filter(".left"),r=n.filter(".right"),_.extend(t,{prev:o,next:r})),s=new Sly(this,t),i.data("carousel",s),a=function(){var t;return t=i.css("width"),i.find(".item").css("width",t)},$window.on("resize",function(){return e.options.isResetItemWidth&&a(),s.reload()}),e.options.isResetItemWidth&&a(),s.init())})},t.extendCarousel=function(){return $(".carousel--extend").each(function(){var t,e,i,n,r,o,s,a;return t=$(this),e=t.find(".carousel-inner"),i=e.children(".item"),n=t.next(".carousel_overview"),a=_.min([parseInt(i.css("max-height")),.75*t.width()])+"px",$html.hasClass("mobile")||i.css({fontSize:0,height:a,lineHeight:a}),n.length&&Modernizr.mq("(min-width: "+Making.Breakpoints.screenSMMin+")")&&(r=n.children(".slideshow_body"),r.is(":visible"))?(s=t.data("carousel"),o=r.find("[data-slide-to]"),r.sly({horizontal:1,itemNav:"centered",smart:1,activateOn:"click",mouseDragging:1,touchDragging:1,releaseSwing:1,speed:300,elasticBounds:1,dragHandle:1,dynamicHandle:1,clickBar:1,prevPage:n.find(".slideshow_control.left"),nextPage:n.find(".slideshow_control.right")}),o.on("click",function(){return s.activate(this.getAttribute("data-slide-to"))}),s.on("active",function(){var e;return e=t.find(".carousel-inner").children(".item").filter(".active").index(),n.find(".slideshow_inner").children("li").eq(e).addClass("active").siblings().removeClass("active")})):void 0})},t}(Making)}.call(this),function(){Making.CartItemNew=function(){return $(function(){var t,e,i,n,r,o,s,a,l,c,u;return Modernizr.mq("(max-width: "+Making.Breakpoints.screenSMMax+")")?$("#thing_actions").remove():Modernizr.mq("(min-width: "+Making.Breakpoints.screenMDMin+")")&&$("#thing_actions_compact").remove(),t=$("#new_cart_item"),o=t.find('button[type="submit"]'),n=$("#price"),e=t.find("select#cart_item_kind_id"),r=t.find(".cart_item_quantity").children('input[type="number"]'),u=n.text(),l=function(t){return n.html(t||u)},s=function(t){var e;return e=$(".cart_estimated_prompt").hide(),t?e.find("time").replaceWith(t).end().show():void 0},c=function(t){var e;return e=$(".cart_item_quantity .help-block").hide(),r=$("#cart_item_quantity").attr("max",100),t>0?e.find("strong").text(t):e.text("\u6682\u65f6\u7f3a\u8d27"),e.css("display","inline-block"),r.prop("max",t)},a=function(t){var e;(e=$("#thing_photos .carousel")).length&&e.data("carousel").activate(t)},e.change(function(){var t;return t=$(this).find("option:selected"),l(t.data("price")),s(t.data("estimated")),c(t.data("max")),a(t.data("photo")),t.val()?(r.removeAttr("disabled"),o.removeAttr("disabled"),$(this).find("option").filter(function(t){return 0===t&&""===this.value&&!$(this).attr("disabled")}).attr("disabled",!0)):(r.attr("disabled",!0),o.attr("disabled",!0))}),$("#mobile_buy_modal").on("show.bs.modal",function(){var e;return t=t.find('button[type="submit"]').remove().end(),e=$("#mobile_buy_modal .modal-body").empty(),t.appendTo(e).removeClass("hidden").show(),$("#mobile_buy_modal .modal-footer .buy_button").one("click",function(){return t.trigger("submit"),$("#mobile_buy_modal").modal("hide")})}),i=t.find("option.kind_option:enabled"),i.length&&i.first().prop("selected",!0),e.trigger("change")})},Making.CartItemCreate=function(t){var e,i;return i=$("#new_cart_item .cart_success").show(),e=$($(".navbar-toggle").is(":visible")?".navbar-toggle":".navbar .cart"),e.popover({content:i[0].outerHTML,trigger:"manual",html:!0,placement:"bottom"}).popover("show"),setTimeout(function(){return e.popover("hide")},5e3),$(".navbar .cart .cart_items_count").text(t)},Making.CartCheck=function(){return 0===$(".cart_item:not([disabled])").length?$('button[type="submit"]').attr("disabled",!0):$('button[type="submit"]').removeAttr("disabled")}}.call(this),function(){!function(t,e){var i;i=e(".dropdown-menu"),i.find(".dropdown-submenu").length&&i.menuAim({activate:function(t){return e(t).addClass("is-active")},deactivate:function(t){return e(t).removeClass("is-active")},enter:function(){return i.addClass("is-expand")},exitMenu:function(){return i.removeClass("is-expand"),!0}})}(Making,jQuery),function(t,e){var i,n,r,o;o='[data-toggle="dropdown_box"]',i=function(){function t(t,i){this.$element=e(t),this.$parent=this.$element.closest(".dropdown"),this.$box=this.$element.next(".dropdown_box"),this.options=i,this.$box.on("click",function(t){return e(t.target).hasClass("dropdown_box_propagate")?void 0:t.stopPropagation()}).on("mouseenter",function(){return $docbody.trigger("freeze")}).on("mouseleave",function(){return $docbody.trigger("unfreeze")})}return t.prototype.toggle=function(){return this.$parent.toggleClass("open")},t}(),n=function(){return e(o).each(function(){return e(this).closest(".dropdown").removeClass("open")})},r=e.fn.dropdownbox,e.fn.dropdownbox=function(t){return this.each(function(){var n,r,o;n=e(this),r=n.data("dropdownbox"),o=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t),r||n.data("dropdownbox",r=new i(this,o)),"string"==typeof t&&r[t]()})},e.fn.dropdownbox.Constructor=i,e.fn.dropdownbox.noConflict=function(){return e.fn.dropdownbox=r,this},e(document).on("click.dropdownbox.data-api",'[data-toggle="dropdown_box"]',function(){return e(this).dropdownbox("toggle"),!1}).on("click.dropdownbox.data-api",function(t){return e(t.target).hasClass("dropdown_box_propagate")?void 0:n()})}(Making,jQuery)}.call(this),function(){$.fn.editable.defaults.mode="inline",$.fn.editable.defaults.onblur="submit",$.fn.editable.defaults.showbuttons=!1,$.fn.editable.defaults.clear=!1,$.fn.editable.defaults.unsavedclass=null}.call(this),function(){window.Making=function(t){return t.EditorCompact=function(e){var i,n,r,o,s,a,l,c,u,h,d,p;return a=$(e),s=a.children(".editor_compact"),r=s.find(".editor_content"),l=r.children("textarea"),c=a.children(".uploader"),u=a.find("#photo_image"),h=a.find(".uploader_queue"),o=s.find(".counter"),n=s.find('[type="submit"]'),i=new $.Deferred,d=function(t){return t.done(function(){var t;return s[0].reset(),c[0].reset(),s.find(".rating").children(".star").removeClass("selected").find('[name*="[photo_ids]"]').remove(),r.removeAttr("style"),0!==(t=parseInt(l.data("maxlength")))&&o.text(t),h.removeAttr("style").children("ul").empty(),n.button("reset")})},p=function(){var t;return t=h.outerHeight(),h.css({marginTop:-(70+t)}),r.css({paddingBottom:t})},t.Rating(),a.on("click",".uploader_button",function(){return s.hasClass("uploading")?void 0:s.addClass("uploading")}).on("fileuploadsubmit",p).on("submit",".editor_compact",function(){return i=new $.Deferred,d(i),a.data("reset",i)}),c.on("fail.validation",p),d(i),a.data("reset",i)},t}(window.Making||{})}.call(this),function(){!function(t){return t.embedThing=function(t){var e,i,n,r,o,s,a,l,c;return e=$(t),i=$("#thing--embed_form"),a=i.find(".js-submit"),o=i.find(".fieldset--photo"),s=o.children("figure"),n=o.children("footer").children("button"),r=o.find('input[type="file"]'),c="",l=e.attr("data-article-id")||e.find(".article").attr("data-article-id"),e.on("mouseenter.embed",".thing--embed",function(t){return $(t.currentTarget).append('<button class="knewone-embed-edit" type="button" data-toggle="modal" data-target="#thing--embed_form"><i class="fa fa-pencil"></i></button>')}).on("mouseleave.embed",".thing--embed",function(t){return $(t.currentTarget).children(".knewone-embed-edit").remove()}).on("click.embed",".knewone-embed-edit",function(){return i.data("embedEditTarget",$(this).parent())}),i.on("click",".js-submit",function(){var t,n,r,o,a;return t=i.data("embedEditTarget"),n=t.closest(".knewone-embed--thing"),r=JSON.parse(n.attr("data-knewone-embed-options")||"{}"),a=Array.isArray(r.photos)?r.photos:r.photos?new Array(r.photos):[],o=t.index(),a[o]=c,r.photos=a.join(","),n.attr("data-knewone-embed-options",JSON.stringify(r)),t.children("a").children("img").attr("src",c+"!middle"),e.trigger("input"),i.modal("hide"),s.empty()}),r.removeAttr("id").attr("accept","image/*").fileupload({dataType:"json",dropZone:null,formData:function(){return[{name:"policy",value:r.attr("data-policy")},{name:"signature",value:r.attr("data-signature")}]},beforeSend:function(){return n.button("loading")},done:function(t,e){return c=r.data("domain")+e.jqXHR.responseJSON.url,s.empty().append("<img src="+c+">"),n.button("reset"),a.enable()}})},t}(Making)}.call(this),function(){!function(t,e){t.validator=function(t,i){var n,r,o,s,a;return null==t&&(t="form:not(novalidate)"),n=e(t),a="[required]",r=e(a),o=n.find('[type="submit"]'),s={validator:{identifie:a,error:"is-invalid",isErrorOnParent:!0}},i=_.extend({},s,i),r.attr("data-event","validate"),n.validator(i.validator),n.on("change keyup focusin focusout",".form-control",function(t){var i,r;switch(i=e(t.currentTarget),r=i.closest(".form-group"),t.type){case"focusin":return r.addClass("is-focused").removeClass("is-invalid").find("ul.help-block").empty(),n.find(".form-results").addClass("hidden");case"change":case"keyup":return r[""===i.val()?"removeClass":"addClass"]("is-filled");case"focusout":return r.removeClass("is-focused")}}),r.on("after:validate",function(t,i){var r,s,a,l,c;return r=e(i),s=r.closest(".form-group"),s.hasClass("is-invalid")?(l=s.children("label"),a=s.find("ul.help-block"),c="",c=s.hasClass("empty")?l.text()+"\u4e0d\u80fd\u4e3a\u7a7a":r.data("message-error"),a.empty().html("<li>"+c+"</li>"),o.disable()):0===n.find(".is-invalid").length?o.enable():void 0})},t.showValidateResults=function(t,i){var n,r,o,s;n=e(t);for(r in i)o=i[r],s="",o.forEach(function(t){return s+="<li>"+t+"</li>"}),n.find('[name="'+r+'"]').closest(".form-group").addClass("is-invalid").find("ul.help-block").empty().html(s);return n.find('[type="submit"]').disable()},t.validatePhone=function(t){return e(t).on("change",function(){return isNaN(this.value)||11!==this.value.length?(alert("\u8bf7\u586b\u5199\u6709\u6548\u7684\u624b\u673a\u53f7\u7801\u3002"),this.value=""):void 0})}}(Making,jQuery)}.call(this),function(){Making.UserFuzzy=function(t,e){var i;return i=new Bloodhound({datumTokenizer:function(t){return Bloodhound.tokenizers.whitespace(t.value)},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:10,remote:{url:"/users/fuzzy.json?query=%QUERY"}}),i.initialize(),$(t).typeahead({autoselect:!0,highlight:!0,minLength:2},{name:"users",displayKey:"value",source:i.ttAdapter(),templates:{suggestion:HandlebarsTemplates["users/user"],empty:'<em class="tt-no-suggestion">\u6ca1\u6709\u7ed3\u679c</em>'}}).on("typeahead:selected",function(t,i){return $(e).val(i.data)})},Making.GroupFuzzy=function(t,e,i){var n;return null==i&&(i=!0),n=new Bloodhound({datumTokenizer:function(t){return Bloodhound.tokenizers.whitespace(t.value)},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:10,remote:{url:"/groups/fuzzy.json?query=%QUERY&current_user="+i}}),n.initialize(),$(t).typeahead({autoselect:!0,highlight:!0,minLength:1},{name:"groups",displayKey:"value",source:n.ttAdapter(),templates:{suggestion:HandlebarsTemplates["groups/group"],empty:'<em class="tt-no-suggestion">\u6ca1\u6709\u7ed3\u679c</em>'}}).on("typeahead:selected",function(t,i){return $(e).val(i.data)})},Making.TagFuzzy=function(t,e){var i;return i=new Bloodhound({datumTokenizer:function(t){return Bloodhound.tokenizers.whitespace(t.value)},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:10,remote:{url:"/tags/fuzzy.json?query=%QUERY"}}),i.initialize(),$(t).typeahead({autoselect:!0,highlight:!0,minLength:2},{name:"tags",displayKey:"value",source:i.ttAdapter(),templates:{suggestion:HandlebarsTemplates["tags/tag"],empty:'<em class="tt-no-suggestion">\u6ca1\u6709\u7ed3\u679c</em>'}}).on("typeahead:selected",function(t,i){return $(e).val(i.data)})},Making.AtUser=function(t){return $(t).atwho({at:"@",callbacks:{remote_filter:function(t,e){t.length>0&&$.getJSON("/users/fuzzy.json",{query:t},function(t){var i;i=[],t.forEach(function(t){i.push({name:t.value})}),e(i)})}}})}}.call(this),function(){Handlebars.registerHelper("ifCond",function(t,e,i,n){switch(e){case"==":return t===i?n.fn(this):n.inverse(this);case"<":return i>t?n.fn(this):n.inverse(this);case"<=":return i>=t?n.fn(this):n.inverse(this);case">":return t>i?n.fn(this):n.inverse(this);case">=":return t>=i?n.fn(this):n.inverse(this);case"&&":return t&&i?n.fn(this):n.inverse(this);case"||":return t||i?n.fn(this):n.inverse(this);default:return n.inverse(this)}})}.call(this),function(){!function(t){return t.loginModal=function(){var e,i,n,r,o;return o=$("#login-modal"),n=o.find(".modal-dialog_wrapper"),e=n.find(".modal-dialog--signin"),i=n.find(".modal-dialog--signup"),r=o.find(".modal-flipper"),r.on("click",function(t){return t.preventDefault(),n.toggleClass("is-flipped")}),o.on("show.bs.modal",function(t){var r,o,s;return r=$(t.relatedTarget),o=r.data("action-type"),s=r.data("signin-legend")||"\u767b\u5f55",e.find("legend").text(s),"signup"===o?(n.hasClass("is-flipped")&&n.removeClass("is-flipped"),e.removeClass("modal-dialog--front").addClass("modal-dialog--back"),i.removeClass("modal-dialog--back").addClass("modal-dialog--front")):void 0}),o.find(".button--clear").on("click",function(t){return t.preventDefault(),$(this).closest(".form-group").removeClass("is-filled").children(".form-control").val("").focus()}),t.validator("#signup_form"),t.validator("#signin_form"),t.validator("#find_password_form")}}(Making)}.call(this),function(){!function(t){t.View.Menu=function(){function t(t,e,i){this.$element=$(t),this.$container=$(e),this.$toggle=$(i),this.$close=this.$element.find(".menu-close"),this.$backdrop=$('<div class="menu-backdrop"></div>'),this.activeClass="menu-open",_.bindAll(this,"show","hide"),this.$toggle.on("tap click",this.show),this.$close.on("tap click",this.hide)}return t.prototype.show=function(t){return t.preventDefault(),this.$backdrop.clone().on("tap click",this.hide).addClass("in").appendTo(this.$container),this.$container.addClass(this.activeClass)},t.prototype.hide=function(t){return t.preventDefault(),this.$container.removeClass(this.activeClass).find(".menu-backdrop").remove()},t}()}(Making)}.call(this),function(){Making.ShowMessageOnTop=function(t,e,i){var n;return null==e&&(e="success"),null==i&&(i=2e3),n=HandlebarsTemplates["shared/message_on_top"]({content:t,type:e}),$(".message-on-top").replaceWith(n),setTimeout(function(){return $(".message-on-top .alert").alert("close")},i)}}.call(this),function(){Making.PrivateMessage=function(){var t,e;return e="[data-private-message]",t=$("#new_private_message_modal"),$(document).on("click",e,function(){var e,i,n,r;return e=$(this),n=e.attr("data-user-id"),r=e.attr("data-user-name"),i=e.attr("data-content"),t.find("#dialog_user_id").val(n),t.find("#dialog_user_name").val(r),i&&t.find("#dialog_content").val(i),t.find("#dialog_user_name").prop("disabled",!0),t.modal("show"),setTimeout(function(){return t.find("#dialog_content").focus()},1e3)})}}.call(this),function(){Making.ProfilePopovers=function(){var t,e,i,n,r;return e=function(t,e){var i,n,r,o;return n=$(t),i=$(e),o=n.appendTo($("body")).outerWidth(),n.detach(),r=i.offset().left+i.outerWidth(),r+o<$(window).width()?"right":i.offset().left>o?"left":i.offset().top>o?"top":"bottom"},i=function(t){return t.data("bs.popover")?void 0:(t.popover({container:"body",content:'<i class="fa fa-spinner fa-spin"></i> \u52a0\u8f7d\u4e2d',html:!0,placement:e,trigger:"manual",template:'<div class="popover profile_popover"><div class="arrow"></div><div class="popover-content"></div></div>'}),t.on("mouseleave",function(){return setTimeout(function(){return 0===$(".popover:hover").length?t.popover("hide"):void 0},200)}))},r=_.debounce(function(e,i){return $(".popover").remove(),e.is(":hover")?(e.data("bs.popover").options.content=i,e.popover("show"),$(".popover").on("mouseleave",function(){return e.popover("hide")}).on("click",".follow_btn",function(){var i;return i=e.attr("data-profile-popover"),delete t[i]})):void 0},200),t=Object.create(null),n="[data-profile-popover]",$(document).on("mouseenter",n,function(){var e,n;if(!$("html").is(".mobile"))return e=$(this),i(e),n=e.attr("data-profile-popover"),t[n]?r(e,t[n]):$.get("/users/"+n+"/profile",function(i){return t[n]=i,r(e,i)})})}}.call(this),function(){!function(){return $.fn.rating=function(){return this.each(function(){var t,e,i,n,r,o,s;for(t=$(this),i=$(),r=o=s=parseInt(t.attr("max"));1>=s?1>=o:o>=1;r=1>=s?++o:--o)i=i.add($("<span />").addClass("star").data("val",r));return e=$("<div />").addClass("rating").append(i).insertAfter(t).data("score",t.val()).on("click",".star",function(){var e;return e=$(this),e.addClass("selected").siblings().removeClass("selected"),t.val(e.data("val")).trigger("change"),e.parents(".rating").data("score",t.val())}),n=parseInt(t.val()),n>0?e.find(".star").eq(-n).addClass("selected"):void 0})},$.fn.score=function(){return this.each(function(t,e){var i,n,r,o,s,a;if(i=$(e),o=i.data("score"),r=$(),!(i.find(".star").length>0)){for(s=a=5;a>=1;s=--a)n=$("<span />").addClass("star").data("val",s),n.data("val")<=parseInt(o)&&n.addClass("active"),r=r.add(n);return $("<div />").addClass("rate").data("score",o).append(r).appendTo(i)}})}}(),Making.Rating=function(){var t;return t=function(){var t,e,i,n,r,o,s;for(t=$(this),i=$(),r=o=s=parseInt(t.attr("max"));1>=s?1>=o:o>=1;r=1>=s?++o:--o)i=i.add($("<span />").addClass("star").data("val",r));return e=$("<div />").addClass("rating").append(i).insertAfter(t).data("score",t.val()).on("click",".star",function(){var e;return e=$(this),e.addClass("selected").siblings().removeClass("selected"),t.val(e.data("val")),e.parents(".rating").data("score",t.val())}),n=parseInt(t.val()),n>0?e.find(".star").eq(-n).addClass("selected"):void 0},$(function(){return $('[type="range"].range_rating').each(t)})}}.call(this),function(){Making.initSearchForm=function(t){return new Making.Views.SearchForm({el:t})},$("html").hasClass("desktop")&&$(function(){var t,e,i;return t=$("#navbar_search"),i=$("#nav_primary"),e=t.find('input[type="search"]'),0!==t.length?(e.on("focus",function(){return i.hide(),t.addClass("focus")}).on("blur",function(){return Making.isDebugging()?void 0:(t.removeClass("focus"),Modernizr.csstransitions?t.one($.support.transition.end,function(){return i.fadeIn()}):i.show())}),Making.initSearchForm(t)):void 0})}.call(this),function(){!function(t){t.View.Stream=function(){function t(t){this.$el=$(t),this.$content=$(".stream_content",this.$el),this.$btn_load=$(".stream_more",this.$el),this.$hint=this.$btn_load.find(".fa"),this.page=1,this.per=this.$content.children().length||1,this.status="",_.bindAll(this,"render","load","success","fail"),this.$el.on("click",".stream_more",this.load)}return t.prototype.render=function(){switch(this.status){case"success":if(1===this.page)return this.$btn_load.removeClass("hidden");break;case"nocontent":return 1===this.page&&this.$content.next(".nomore").removeClass("hidden"),this.$btn_load.disable().text("\u6ca1\u6709\u66f4\u591a");case"fail":return this.$btn_load.text("\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5\u3002")}},t.prototype.load=function(t){t.preventDefault(),this.$hint.addClass("fa-spin"),$.ajax({url:this.$content.data("url"),data:{page:this.page+1,per:this.per},dataType:"html",contentType:"application/x-www-form-urlencoded;charset=UTF-8"}).done(this.success).fail(this.fail)},t.prototype.success=function(t,e,i){return this.status=e,200===i.status?(t.length?this.$content.append(t):this.status="nocontent",this.page+=1,this.$hint.removeClass("fa-spin"),this.render()):void 0},t.prototype.fail=function(t,e){return this.status=e,this.render()},t}()}(Making)}.call(this),function(){$(function(){var t,e,i,n;return t=Object.create(null),i="[data-add-to-list]",$("body").append('<div id="add-to-list-modal-container"></div>'),e=new Backbone.Marionette.Region({el:"#add-to-list-modal-container"}),n=function(t){var i;return i=new Making.Views.AddToListModal({model:new Backbone.Model(t),collection:new Making.Collections.ThingLists}),e.show(i)},$(document).on("click",i,function(){var e,i;return e=$(this),e.is(".fancied")?void 0:(i=e.data("thing-id"),t[i]?n(t[i]):$.getJSON("/things/"+i,function(e){return t[i]=e,n(e)}))})})}.call(this),function(){jQuery.timeago.settings.strings["zh-CN"]={prefixAgo:null,prefixFromNow:null,suffixAgo:null,suffixFromNow:null,seconds:"\u521a\u521a",minute:"\u521a\u521a",minutes:"%d\u5206\u949f\u524d",hour:"1\u5c0f\u65f6\u524d",hours:"\u7ea6%d\u5c0f\u65f6\u524d",day:"1\u5929\u524d",days:"%d\u5929\u524d",month:"\u7ea61\u4e2a\u6708\u524d",months:"%d\u6708\u524d",year:"\u7ea61\u5e74\u524d",years:"%d\u5e74\u524d",numbers:[],wordSeparator:""},jQuery.timeago.settings.lang=$("html").attr("lang")||"zh-CN"}.call(this),function(){!function(t,e){return t.InitCategories=function(){return e(".category_block").each(function(){var t,i,n,r,o,s,a,l;return t=e(this),o=t.find(".tags_container"),r=o.find(".tags"),n=t.find('footer a[rel="prev"]'),i=t.find('footer a[rel="next"]'),a=o.height(),l=r.height(),s=function(t){n[0>t?"show":"hide"](),i[l+t>a?"show":"hide"]()},s(0),t.on("click","footer a[rel]",function(t){var i,n,o,l;switch(t.preventDefault(),i=e(t.target),n=i.attr("rel"),l=parseInt(r.css("marginTop")),n){case"prev":o=a;break;case"next":o=-a}return r.hide().css("marginTop",l+o+"px").fadeIn(),s(parseInt(r.css("marginTop")))})})},t}(Making,jQuery)}.call(this),function(){!function(t){return t.InitHits=function(){return t.infiniteScroll("#wrapper .hits","/hits")},t}(window.Making||{})}.call(this),function(){window.Making=function(t){return t.InitHome=function(){return Making.InfiniteScroll("#wrapper"),Making.Feeling("#feeds"),$(document).on("click",".feed-feeling .feed-comments",function(){return $(this).toggleClass("active")}).on("click",".feed-operations .feed-lovers",function(t){var e,i,n;return e=$(this),t.preventDefault(),e.hasClass("active")?(i="unvote",n=-1):(i="vote",n=1),$.post(""+$(this).data("url")+"/"+i).done(function(){return e.toggleClass("active").find(".lovers-count").text(function(){return(parseInt($(this).text())||0)+n})})})},t.InitHomeGuest=function(){switch(t.device){case"mobile":case"tablet":return t.infiniteScroll("#wrapper > .hits","/hits");default:return t.initSearchForm("#search_form")}},t}(window.Making||{})}.call(this),function(){Making.OrderPage={InitNew:function(){return $(function(){var t;return $(".use_sf").on("change",function(){var t;return t=parseFloat($(".total_price").attr("data-things-price"))+parseFloat($(".total_price").attr("data-rebates-price"))+parseFloat($(".total_price").attr("data-deliver-price")),$(this).prop("checked")&&(t+=parseFloat($(this).attr("data-price"))),0>t&&(t=0),$(".total_price strong span").text(t.toFixed(1))}),0===$('[name^="order[address_id]"]:enabled').length&&$(".make_order").attr("disabled","disabled"),$(".order_coupon_radio").click(function(){return window.location.href=$(this).attr("data-href")}),t=function(t){return $(["#order_address_province_code","#order_address_city_code","#order_address_district_code","#order_address_street","#order_address_name","#order_address_phone"].join(", ")).prop("required",t)},$('[name="order[address_id]"]').on("change",function(){var e;return e=$("#order_address_id_new").prop("checked"),t(e)}),$('[name^="order[address]"]').on("focus",function(){return $("#order_address_id_new").prop("checked",!0),t(!0)}),$('[name^="order[address_id]"]:enabled').first().prop("checked",!0)})}}}.call(this),function(){!function(t){return t.InitStyleguide=function(){return hljs.configure({tabReplace:"  "}),hljs.initHighlightingOnLoad()},t}(Making,jQuery)}.call(this),function(){window.Making=function(t){return t.InitNewThing=function(){return new t.Views.ThingsNew({el:"form.thing_form"}),new t.Views.Editor({el:"#form-thing",model:new t.Models.Editor,mode:"standalone",type:"thing",bodyField:'[name="thing[content]"]',excludeField:'[name="utf8"], [name="authenticity_token"], [name="photo[image]"]',placeholder:"\u4ea7\u54c1\u8be6\u7ec6\u4fe1\u606f"})},t.InitThings=function(){t.infiniteScroll(".infinite",window.location.href,function(t){$(t).find(".lazy").css("visibility","visible").lazyload({threshold:400})})},t.InitThing=function(){switch(t.carousel({isResetItemWidth:!0}),$html.hasClass("mobile")||t.extendCarousel(),t.ReadMore(".post_content"),t.InitAdoption(),$html.hasClass("touch")&&$window.on("load",function(){var t;return t=$(".is_folded .embed-responsive"),t.css({height:t.css("height"),width:t.css("width"),position:"absolute",left:"-1000%",overflow:"hidden"}),$(".post_content").next(".more").on("click",function(){return t.css({position:"relative",left:0})})}),t.device){case"mobile":return new t.View.Stream("#tab--mobile-feelings"),new t.View.Stream("#tab--mobile-reviews"),new t.View.Stream("#tab--mobile-activities")}},t.InitShop=function(){return t.infiniteScroll(".js-infinite",window.location.pathname+window.location.search),$("#things_nav select").on("change",function(){return window.location=$(this).find(":selected").data("url")})},t.InitAdoption=function(){var t,e,i;return $html.hasClass("mobile")||(t=$("#thing_actions #adoption-modal"),e=t.find('[name="adoption[kind]"]'),$('[data-target="#adoption-modal"]').on("click",function(){var t;return t=$('[name="cart_item[kind_id]"]'),e.val(t.val())})),i=function(t){return $(["#adoption_address_province_code","#adoption_address_city_code","#adoption_address_district_code","#adoption_address_street","#adoption_address_name","#adoption_address_phone"].join(", ")).prop("required",t)},$('[name="adoption[address_id]"]').on("change",function(){var t;return t=$("#adoption_address_id_new").prop("checked"),i(t)}),$('[name^="adoption[address]"]').on("focus",function(){return $("#adoption_address_id_new").prop("checked",!0),i(!0)}),$('[name^="adoption[address_id]"]:enabled').first().prop("checked",!0)},t.InitReview=function(){return t.Comments("#comments")},t.InitFeelings=function(){return t.EditorCompact(".feeling_form"),t.FeelingsNew(),t.Feeling(".feelings")},t.Feeling=function(e){var i;return i=$(e),i.on("click",".comments_toggle",function(e){var i,n,r;return e.preventDefault(),r="#"+$(this).data("id"),i=$(r),n=i.parents(".comments_wrap"),n.is(":hidden")?(t.Comments(r),i.show(),n.show()):n.hide()})},t}(window.Making||{})}.call(this),function(){Making.InitThingList=function(){var t,e;return e=$(".thing_list_items").attr("class"),$(".thing_list_name .editable").editable(),$(".thing_list_description .editable").editable({emptytext:"\u63cf\u8ff0\u4e00\u4e0b\u5427"}),$(".thing_list_item-description .editable").editable({emptytext:"\u8bf4\u70b9\u4ec0\u4e48\u5427\uff08140\u5b57\u4ee5\u5185\u54e6\uff09",tpl:'<textarea maxlength="140"></textarea>'}).on("shown",function(t,e){return setTimeout(function(){return e.input.$input.autosize()},0)}),$(".thing_list_item-description").on("keydown",function(t){return 13===t.which?(t.preventDefault(),$(this).find(".editableform").submit()):void 0}),$(".editable").editable("disable"),$(".thing_list_description.hide, .thing_list_item-description.hide").each(function(){return $(this).removeClass("hide").hide()}),$(".thing_list_items").sortable({disabled:!0,helper:"clone",start:function(t,e){return e.placeholder.height(0)},update:function(t,e){var i,n,r,o;return i=e.item,i.prev().length&&(o=parseFloat(i.prev().data("order"))),i.next().length&&(r=parseFloat(i.next().data("order"))),null==o&&(o=r+1),null==r&&(r=o-1),n=(o+r)/2,i.data("order",n),$.ajax({url:i.data("url"),type:"PATCH",data:{thing_list_item:{order:n}}})}}),$(".thing_list_edit_button").on("click",function(t){var i;return t.preventDefault(),i=$(this),"\u7ba1\u7406"===i.text()?(i.text("\u5b8c\u6210"),$(".thing_list_description, .thing_list_item-description").show(),$(".thing_list_items").attr("class","thing_list_items thing_list_items--editing").sortable("enable")):(i.text("\u7ba1\u7406"),$(".editableform").submit(),$(".thing_list_description, .thing_list_item-description").each(function(){return $(this).find(".editable-empty").length?$(this).hide():void 0},$(".thing_list_items").attr("class",e).sortable("disable"))),i.toggleClass("thing_list_edit_button--editing"),$(".editable").editable("toggleDisabled")}),t=function(t){return $("#thing_list_background").css("background-image","url("+t+")")},$("#change_list_background_modal").on("click",".thing_list_background_wrapper",function(e){var i;return e.preventDefault(),i=$(this),i.addClass("thing_list_background_wrapper--active").siblings().removeClass("thing_list_background_wrapper--active"),t(i.data("url")),$.ajax({url:window.location.pathname,type:"PATCH",data:{thing_list:{background_id:i.data("id")}}})})}}.call(this),function(){$("#new_topic").on("submit",function(){return $(this).find('button[type="submit"]').attr("disabled","disabled").text("\u63d0\u4ea4\u4e2d")})}.call(this),function(){!function(exports){var _hash;return _hash="",exports.InitWelcome=function(){return $(function(){var $tags,$things,step,visibleCount;return step=location.hash,$tags=$("#step2").find(".tags"),$things=$("#step2 .things"),visibleCount=$html.hasClass("mobile")?6:12,""===step&&(step="#step1"),$(step).addClass("is-active"),$window.on("hashchange",function(){return _hash=location.hash,$(_hash).addClass("is-active").siblings().removeClass("is-active"),$window.scrollTop(0)}).on("load",function(){return $window.trigger("hashchange")}),exports.selectCategories("#step2","#step2 .things"),$(".js-friendship").on("click",".js-friendship-follow-all",function(event){var userIds;
return event.preventDefault(),userIds=$(event.delegateTarget).find('.follow_btn[data-method="post"]').map(function(){return $(this).attr("id").replace(/^follow_btn_/,"")}).toArray().slice(0,"step3"!==location.hash||$html.hasClass("mobile")?visibleCount:void 0),$.post("/users/"+Making.user+"/followings",{user_ids:userIds},eval)}).on("click",".js-friendship-refresh",function(t){var e,i;return t.preventDefault(),e=$(t.delegateTarget).find(".js-friendship-users"),i=e.children().slice(visibleCount),e.prepend(_.sample(i,visibleCount))}),$html.hasClass("mobile")?$("#step2").find(".things").find(".thing_fancy_backdrop").removeAttr("href").removeAttr("target").end().find("figcaption h5 a").removeAttr("href").removeAttr("target"):void 0})},exports}(window.Making||{})}.call(this),function(){!function(t){return t.Models.Draft=Backbone.Model.extend({urlRoot:"/drafts"})}(Making)}.call(this),function(){Making.Models.Editor=Backbone.Model.extend({defaults:{status:"",persisten:null},updateStatus:function(t){switch(t){case"load":return this.set("status","\u6b63\u5728\u52a0\u8f7d");case"edit":return this.set("status","");case"save":return this.set("status","\u6b63\u5728\u4fdd\u5b58");case"drop":return this.set("status","\u6b63\u5728\u5220\u9664");case"submit":return this.set("status","\u6b63\u5728\u53d1\u5e03");case"error":return this.set("status","\u9047\u5230\u9519\u8bef")}}})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};Making.Models.Feeling=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i}(Backbone.Model)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};Making.Models.Photo=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i}(Backbone.Model)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};Making.Models.Thing=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i}(Backbone.Model)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};Making.Models.ThingList=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i}(Backbone.Model)}.call(this),function(){!function(t){return t.Collections.Drafts=Backbone.Collection.extend({model:t.Models.Draft,url:"/drafts/"})}(Making)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};Making.Collections.Feelings=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.model=Making.Models.Feeling,i}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};Making.Collections.Photos=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.model=Making.Models.Photo,i.prototype.url="/photos",i}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};Making.Collections.ThingLists=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.url="/lists",i.prototype.model=Making.Models.ThingList,i.prototype.comparator=function(t,e){var i,n;return i=(new Date(t.get("updated_at"))||Date.now()).getTime(),n=(new Date(e.get("updated_at"))||Date.now()).getTime(),t.get("selected")?e.get("selected")?i>n?-1:1:-1:e.get("selected")?1:i>n?-1:1},i}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};Making.Collections.Things=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.model=Making.Models.Thing,i.prototype.url="/things",i}(Backbone.Collection)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};Making.Views.CommentsIndex=function(e){function n(){return this.jumpTo=t(this.jumpTo,this),this.getCommentId=t(this.getCommentId,this),this.getAnchor=t(this.getAnchor,this),this.prepend=t(this.prepend,this),this.render=t(this.render,this),this.fetch=t(this.fetch,this),n.__super__.constructor.apply(this,arguments)}return i(n,e),n.prototype.events={"submit .comment_form":"create","click .comments_more":"fetch","click .reply":"reply"},n.prototype.initialize=function(t){var e;return e=t.url,this.url=e,this.anchor=this.getAnchor(),this.commentId=this.getCommentId(),this.render(),this.commentId||this.$el.data("count")>0&&0===this.getCommentsCount()?(this.$("ul").empty(),this.fetch(this.commentId)):void 0},n.prototype.fetch=function(t){var e;return e="string"==typeof t?{from_id:t}:{page:this.getNextPageNumber()},$.ajax({url:this.url,data:e,beforeSend:function(t){return function(){return t.$("ul").append(HandlebarsTemplates["shared/loading"])}}(this)}).success(function(t){return function(e){var i;return $(".spinning").remove(),t.$("ul").append(e),t.anchor.length>0&&(i=$(t.anchor),t.anchor="","complete"===document.readyState?t.jumpTo(i):$(window).one("load",function(){return t.jumpTo(i)})),!e||t.getCommentsCount()>=t.$el.data("count")?t.$(".comments_more").remove():void 0}}(this))},n.prototype.render=function(){return Making.AtUser(".comments textarea"),this.$submit=this.$('[type="submit"]'),this},n.prototype.create=function(t){return t.preventDefault(),this.$submit.disable(),$.ajax({url:this.url,type:"POST",data:{comment:{content:this.$("textarea").val()}}}).success(function(t){return function(e){var i,n,r;return t.prepend(e),t.$("textarea").val(""),i=t.$el.parents(".feed_article, .feed-feeling").find(".comments_count, .comments-count"),0===i.length&&(i=$('<span class="comments_count"></span>'),i.appendTo(t.$el.parents(".feed_article").find(".comments_toggle"))),n=parseInt(i.text()),r=isNaN(n)?1:n+1,i.text(r),t.$submit.enable()}}(this))},n.prototype.prepend=function(t){return $(t).hide().prependTo(this.$("ul")).fadeIn()},n.prototype.getCommentsCount=function(){return this.$("ul > li").length},n.prototype.getNextPageNumber=function(){return Math.floor(this.getCommentsCount()/this.$el.data("per"))+1},n.prototype.getAnchor=function(){var t,e;return e=location.hash,-1===e.indexOf("#comment-")?"":(t=e.indexOf("?"),0>t?e:e.slice(0,t))},n.prototype.getCommentId=function(){return this.anchor.replace("#comment-","")},n.prototype.jumpTo=function(t){return(null!=t?t.length:void 0)?($window.scrollTop(t.offset().top),t.parent().addClass("is-targeted")):void 0},n.prototype.reply=function(t){var e,i,n;return t.preventDefault(),e=$(t.currentTarget),n=e.siblings(".author_name").text(),i=e.closest(".comments").find(".comment_form textarea"),i.focus().val(i.val()+(" @"+n+" "))},n}(Backbone.View)}.call(this),function(){!function(t){return t.Views.Draft=Backbone.View.extend({tagName:"li",template:HandlebarsTemplates["editor/draft"],initialize:function(){return this.listenTo(this.model,"destroy",this.destroy)},render:function(){return this.$el.html(this.template(this.model.attributes)),this},destroy:function(){return this.$el.fadeOut(200)}}),Handlebars.registerHelper("draft_title",function(){var t;switch(t=this[this.type+"[title]"],(""===t||void 0===t)&&(t="\u65e0\u6807\u9898\u6587\u6863"),this.type){case"review":t="[\u8bc4\u6d4b] "+t;break;case"thing":t="[\u4ea7\u54c1] "+t;break;case"topic":t="[\u8bdd\u9898] "+t}return t}),Handlebars.registerHelper("draft_summary",function(){var t,e;return t=$("<div>"+this[this.type+"[content]"]+"</div>").text(),e="",e=t.length>140?t.slice(0,140)+"......":t}),Handlebars.registerHelper("draft_timestamp",function(){var t;return t=new Date(this.updated_at),t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()})}(Making)}.call(this),function(){!function(t){return t.Views.Drafts=Backbone.View.extend({el:".drafts",events:{"click .destory":"destory"},initialize:function(){return this.drafts=new t.Collections.Drafts,this.listenTo(this.drafts,"sync",this.render),this.drafts.fetch()},render:function(){return this.list=[],_.each(this.drafts.models,function(e){var i;return i=new t.Views.Draft({model:e}),this.list.push(i.render().el)},this),this.$el.append(this.list)},destory:function(t){var e;return t.preventDefault(),e=$(t.target),this.drafts.findWhere({id:e.data("id")}).destroy()}})}(Making)}.call(this),function(){!function(t){return t.Views.Editor=Backbone.View.extend({events:{input:"autoSave","click .editor-close":"close","click .editor-drop":"drop","click .editor-save":"save","click .editor-submit":"submit","submit .editor-form":"submit"},defaults:{buttons:["anchor","bold","italic","strikethrough","quote"],imageSize:"review"},initialize:function(e){var i;return this.options=$.extend({},this.defaults,e),this.$spinner=$(".spinner-fullscreen"),this.$submit=this.$(".editor-submit"),this.$drop=this.$(".editor-drop"),this.$close=this.$(".editor-close"),this.$output=this.$(".editor-menu output"),this.$content=this.$(".editor-content"),this.$body=this.$content.children(".body"),this.$fields=this.$content.find("[name]").filter(":not("+this.options.excludeField+")"),this.$bodyField=null!=this.options.bodyField?$(this.options.bodyField):this.$('[name$="[content]"]'),this.$help=$(".editor-help"),this.$helpToggle=this.$(".editor-help-toggle"),this.$imageField=$("#file"),this.$form=$(this.$bodyField[0].form),this.draft=new t.Models.Draft({type:this.options.type,id:t.user+"+draft+"+encodeURIComponent(location.pathname)+"+#"+(null!=(i=this.el.id)?i:""),link:location.href}),this.beforeSubmit=this.options.beforeSubmit,this.delay=1500,this.typingTime=0,"complemental"===this.options.mode&&(this.$origin=$(e.origin),this.$toggle=$(e.toggle)),this.listenTo(this.model,"change:status",this.showStatus),this.listenTo(this.$bodyField,"change",this.autoSave),this.render()},render:function(){var e;switch(this.options.mode){case"standalone":e=this,this.$drop.addClass("hidden"),$.ajax({url:this.draft.url(),type:"get"}).done(function(t){return e.getContent(t)}).always(function(){return e.show(),e.initWidget(),e.appendDraftId(),e.initHelp()});break;case"complemental":e=this,this.$drop.addClass("hidden"),this.$submit.addClass("hidden"),$.ajax({url:this.draft.url(),type:"get"}).done(function(t){return e.setBody(t[e.type+"[content]"])}).always(function(){return e.$origin.html(e.$bodyField.val()),e.appendDraftId()}),this.$origin.on("keydown",_.bind(function(t){return 13===t.keyCode&&document.execCommand("formatblock",!1,"<p>"),0===this.$origin.html().length?(this.$origin.empty(),document.execCommand("formatblock",!1,"<p>")):void 0},this)).on("paste",_.bind(function(e){var i,n,r;return e.preventDefault(),i=e.originalEvent.clipboardData||window.clipboardData,r=i.getData("text").split(/[\r\n]/g),n="",_.each(r,function(e,i){return""!==e?n+=navigator.userAgent.match(/firefox/i)&&0===i?t.htmlEntities(e):"<p>"+t.htmlEntities(e)+"</p>":void 0}),document.execCommand("insertHTML",!1,n)},this)).on("blur",_.bind(function(){return this.setBody(this.$origin.html())},this)),this.$toggle.on("click",_.bind(function(t){return t.preventDefault(),this.getBody(),this.show(),this.initHelp(),$docbody.trigger("freeze")},this)),this.$form.on("submit",_.bind(this.submit,this))}return this},reset:function(){return console.log("TODO: reset.")},show:function(){var t;return t=this,this.getBody(),this.activatePlugin(),this.$el.show(),this.$spinner.addClass("hidden"),$docbody.trigger("freeze"),$window.on("beforeunload",_.bind(this.beforeunload,this))},hide:function(){return this.$el.hide(),$docbody.trigger("unfreeze"),this.deactivatePlugin(),$window.off("beforeunload")},showStatus:function(){return this.$output.text(this.model.get("status"))},activatePlugin:function(){var t,e;return this.editor?(this.editor.activate(),"function"==typeof MutationObserver?this.observer.observe():void 0):(t=this,this.editor=new MediumEditor(this.$body,{buttons:this.options.buttons,buttonLabels:"fontawesome",placeholder:this.options.placeholder,anchorInputPlaceholder:"\u5728\u8fd9\u91cc\u63d2\u5165\u94fe\u63a5",targetBlank:!0}),("function"==(e=typeof MutationObserver)||"object"===e)&&(this.observer=new MutationObserver(function(t){return t.forEach(function(t){var e,i,n,r,o;if(e=t.addedNodes,e.length){for(o=[],n=0,r=e.length;r>n;n++)i=e[n],o.push(function(t){var e,i;return"SPAN"===t.nodeName?(i=window.getSelection(),e=i.getRangeAt(0),$(t).contents().unwrap(),i.removeAllRanges(),i.addRange(e)):void 0}(i));return o}})}),this.observer.observe(this.$body[0],{childList:!0,subtree:!0})),this.$body.minsert({actions:{videos:{placeholder:"\u5728\u8fd9\u91cc\u8f93\u5165\u89c6\u9891\u7f51\u5740\u6216\u4ee3\u7801\uff08\u901a\u7528\u4ee3\u7801\uff09\u7136\u540e\u6309\u56de\u8f66"},embeds:{placeholder:"\u63d2\u5165\u4ea7\u54c1\u3001\u8bc4\u6d4b\u6216\u5217\u8868\u94fe\u63a5\u7136\u540e\u56de\u8f66"}}}),this.$insertImageButton=this.$('.minsert [data-action="insert-image"]').on("click",function(){return t.$imageField.clone(!0).click()}),this.$imageField.removeAttr("id").attr("multiple",!0).attr("accept","image/*").fileupload({dataType:"json",dropZone:null,formData:function(){return[{name:"policy",value:t.$imageField.attr("data-policy")},{name:"signature",value:t.$imageField.attr("data-signature")}]},beforeSend:function(e){var i;return i=e.requestid=(new Date).getTime(),t.$body.trigger("loading.minsert",i)},done:function(e,i){var n,r;return r=t.$imageField.data("domain")+i.jqXHR.responseJSON.url+("!"+t.options.imageSize),n=i.jqXHR.requestid,t.$body.trigger("done:image.minsert",{url:r,id:n})},fail:function(e,i){var n;switch(n=i.jqXHR.responseJSON.message.trim()){case"Authorize has expired":n="Authorize has expired. \u8bf7\u4fdd\u5b58\u8349\u7a3f\u540e\u5237\u65b0\u4e00\u4e0b\u9875\u9762\uff0c\u7136\u540e\u91cd\u8bd5\u4e0b\u3002"}return t.$body.trigger("fail:image.minsert",n)},always:function(e,i){var n;return n=i.jqXHR.requestid,t.$body.trigger("loaded.minsert",n)}}))},deactivatePlugin:function(){return"function"==typeof MutationObserver&&this.observer.disconnect(),this.editor.deactivate()},initHelp:function(){var e,i,n,r;return r=this,n=t.user+"+hide-editor-help+v1",i=localStorage[n],e=$("#show-editor-help"),this.$helpToggle.one("click",function(){return r.$help.find("img[data-src]").each(function(){var t;return t=this.getAttribute("data-src"),this.setAttribute("src",t)})}),"true"===i?e.attr("checked",!0):e.removeAttr("checked"),e.prop("checked")!==!0&&this.$helpToggle.trigger("click"),e.on("change",function(){return localStorage[n]=$(this).prop("checked")})},initWidget:function(){return!this.$rating&&(this.$rating=this.$(".range-rating")).length&&this.$rating.rating(),t.AtUser("#form-review-body"),$(".knewone-embed:empty").length&&t.loadEmbed()},getBody:function(){return this.$body.html(this.$bodyField.val())},setBody:function(t){return null==t&&(t=this.editor.serialize()[this.$body.attr("id")].value),this.$bodyField.val(t)},setContent:function(){return this.setBody(),_.each(this.$fields,function(t){var e;switch(e=$(t),e.attr("type")){case"checkbox":case"radio":return this.draft.set(e.attr("name")+e.val(),e.prop("checked"));default:return this.draft.set(e.attr("name"),e.prop("value"))}},this)},getContent:function(t){return _.each(this.$fields,function(e){var i,n;switch(i=$(e),n=i.prop("name"),i.attr("type")){case"checkbox":case"radio":return i.prop("checked",t[n+i.val()]);default:return i.prop("value",t[n])}},this),this.getBody()},appendDraftId:function(){return this.$form.append($("<input>",{type:"hidden",name:"draft[key]",value:this.draft.get("id")}))},save:function(t){var e,i;switch(this.options.mode){case"standalone":this.setContent();break;case"complemental":this.setBody(),this.draft.set(this.$bodyField.attr("name"),this.$bodyField.prop("value"))}return i=this,e=this.draft.toJSON(),this.model.updateStatus("save"),this.draft.save(null,{success:function(){return i.model.updateStatus("edit"),i.model.set("persisten",!0),"function"==typeof t?t():void 0},error:function(t,e){return null!=e.responseJSON.error?(i.model.updateStatus("error"),alert("\u676f\u5177\uff0c\u51fa\u9519\u4e86\uff0c\u8bf7\u628a\u5185\u5bb9\u4fdd\u5b58\u5230\u7535\u8111\u540e\u5237\u65b0\u9875\u9762\u518d\u8bd5\u8bd5\u3002\u7ed9\u60a8\u5e26\u6765\u7684\u4e0d\u4fbf\uff0c\u6211\u4eec\u6df1\u8868\u6b49\u610f\uff01")):void 0}})},autoSave:function(){var t;return t=this,this.typingTime=new Date,this.model.set("persisten",!1),this.timeout=setTimeout(function(){return new Date-t.typingTime>t.delay?t.save():void 0},this.delay)},close:function(){var t;return t=this,this.save(function(){switch(t.mode){case"standalone":return window.close();case"complemental":return t.hide(),t.$origin.empty().html(t.$bodyField.val())}})},drop:function(){var t;if(confirm("\u786e\u5b9a\u5220\u9664\u8349\u7a3f\u5417\uff1f")){switch(t=null,this.options.mode){case"standalone":t=function(){return window.close()};break;case"complemental":t=function(){return this.hide(),this.reset(),this.$el.data("editor",null)}}return this.model.updateStatus("drop"),$window.off("beforeunload"),this.draft.destroy({success:t})}},submit:function(t){var e,i;switch(this.options.mode){case"standalone":if(clearTimeout(this.timeout),e=$("<div>").append(this.editor.serialize()[this.$body.attr("id")].value).find(".knewone-embed").empty().removeAttr("contenteditable").end()[0].innerHTML,this.setBody(e),null!=this.beforeSubmit&&(i=this.beforeSubmit(t),i===!1))return!1;this.model.updateStatus("submit"),$window.off("beforeunload")}return!0},beforeunload:function(){return this.model.get("persisten")===!1?"\u6587\u6863\u8fd8\u672a\u4fdd\u5b58\uff0c\u786e\u5b9a\u8981\u79bb\u5f00\u5417\uff1f":void 0}})}(Making)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};Making.Views.FeelingNew=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.events={"input textarea":"count",submit:"on_submit"},i.prototype.initialize=function(){return this.photo_view=new Making.Views.PhotosUpload,this.max=140,this.$submit=this.$('[type="submit"]'),this.$counter=this.$(".counter"),this.photo_view.render(),this.$submit.disable()},i.prototype.count=function(t){var e;e=this.max-t.target.value.length,this.$counter.text(e),e===this.max?this.$submit.disable():e>0?this.$submit.hasClass("disabled")&&(this.$submit.enable(),this.$counter.removeClass("error")):(this.$submit.disable(),this.$counter.addClass("error"))},i.prototype.on_submit=function(){var t;return this.$submit.button("loading"),t=this.photo_view.$(".uploaded"),_.each(t,function(t){return function(e){return $("<input>").attr({name:"feeling[photo_ids][]",value:$(e).data("photo-id"),type:"hidden"}).appendTo(t.$el)}}(this)),this.$el.find('[type="submit"]').disable()},i}(Backbone.View)}.call(this),function(){Making.Views.Notification=Backbone.View.extend({el:"#notification_box",events:{"click #notification_trigger":"openNotification","click .nav > li":"openTab"},initialize:function(){return this.url="/notifications",this.spinner_template=$("#notification_box .dropdown_box").html(),this.$content=$("#notification_box .dropdown_box"),this.$count=this.$("#notification_count"),this.$trigger=this.$("#notification_trigger"),Making.Events.on("notifications:loaded",this.loaded,this),this.$count.text()?this.fetch():this.$trigger.one("click",function(t){return function(){return t.fetch()}}(this))},fetch:function(){return this.$content.html(this.spinner_template),$.ajax({url:this.url,dataType:"html",contentType:"application/x-www-form-urlencoded;charset=UTF-8"}).success(function(t){return function(e){return t.$content.html(e)}}(this))},markRead:function(t,e){return $.ajax({type:"POST",url:""+this.url+"/mark",data:{type:t},dataType:"json"}).success(function(t){return function(){var i;return i=t.$count.text()-e,i>0?t.$count.text(i):(t.$count.text(""),t.$trigger.attr("title","\u6ca1\u6709\u672a\u8bfb\u6d88\u606f"))}}(this))},openNotification:function(){return this.markRead($("#notification_box .tab-pane.active").attr("id"),$("li.active").attr("data-unread-count"))},openTab:function(t){var e,i,n;return i=$(t.target.parentElement).attr("href"),e=t.target.parentElement,$(e).find("span.unread").remove(),n=$(t.target).parents("li").attr("data-unread-count"),this.markRead(i,n)}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};Making.Views.Photo=function(e){function n(){return this.destroy=t(this.destroy,this),this.render=t(this.render,this),n.__super__.constructor.apply(this,arguments)}return i(n,e),n.prototype.tagName="li",n.prototype.className="uploaded",n.prototype.template=HandlebarsTemplates["photos/photo"],n.prototype.events={"click .destroy":"destroy"},n.prototype.render=function(){return this.$el.html(this.template(this.model.attributes)),this},n.prototype.destroy=function(t){return t.preventDefault(),this.$el.remove(),this.remove()},n}(Backbone.View)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};Making.Views.PhotoPreview=function(e){function n(){return this.validate=t(this.validate,this),this.render=t(this.render,this),n.__super__.constructor.apply(this,arguments)}return i(n,e),n.prototype.tagName="li",n.prototype.className="uploading",n.prototype.template=HandlebarsTemplates["photos/preview"],n.prototype.events={"click .destroy":"remove"},n.prototype.initialize=function(){return this.model.readable_size=this._formatSize(this.model.size)},n.prototype.render=function(){return this.$el.html(this.template(this.model)),loadImage(this.model,function(t){return function(e){return t.$(".uploader_item").prepend(e)}}(this),{canvas:!0,maxWidth:this.$(".uploader_item").data("preview-width"),maxHeight:this.$(".uploader_item").data("preview-height")}),this},n.prototype.validate=function(){var t,e;return e=/(\.|\/)(gif|jpe?g|png)$/i,t=5e6,e.test(this.model.type)||e.test(this.model.name)?_.isNumber(this.model.size)&&this.model.size>t?this.fail("\u56fe\u7247\u5927\u5c0f\u9650\u5236\u4e3a"+this._formatSize(t)):!0:this.fail("\u9700\u8981\u56fe\u7247\u683c\u5f0f\u6587\u4ef6")},n.prototype.progress=function(t){var e;return e=parseInt(t.loaded/t.total*100,10),this.$(".progress .progress-bar").css("width",e+"%")},n.prototype.fail=function(t){return this.$el.removeClass("uploading").addClass("fail").html('<p class="fail">'+t+'<a class="destroy" title="\u5220\u9664" href="javascript:;"><i class="fa fa-trash-o"></i></a></p>').closest("form").trigger("fail.validation"),!1},n.prototype._formatSize=function(t){return _.isNumber(t)?t>=1e6?(t/1e6).toFixed(2)+" MB":(t/1e3).toFixed(2)+" KB":""},n}(Backbone.View)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};Making.Views.PhotosUpload=function(e){function n(){return this.checkQueue=t(this.checkQueue,this),this.removePhoto=t(this.removePhoto,this),this.addPhoto=t(this.addPhoto,this),this.fail=t(this.fail,this),this.done=t(this.done,this),this.progress=t(this.progress,this),this.drop=t(this.drop,this),this.dragover=t(this.dragover,this),this.addFile=t(this.addFile,this),this.render=t(this.render,this),n.__super__.constructor.apply(this,arguments)}return i(n,e),n.prototype.tagName="ul",n.prototype.events={"click .destroy":"checkQueue"},n.prototype.initialize=function(){return this.$container=$("#photos"),this.$label=this.$container.closest(".uploader").find(".uploader_label"),this.collection=new Making.Collections.Photos(this.$container.data("photos")),this.collection.on({add:this.addPhoto,remove:this.removePhoto}),$("#new_photo").fileupload({dataType:"json",paramName:"photo[image]",add:this.addFile,dragover:this.dragover,drop:this.drop,progress:this.progress,done:this.done,fail:this.fail})},n.prototype.render=function(){return this.collection.each(this.addPhoto),this.$container.prepend(this.el),this},n.prototype.addFile=function(t,e){var i;return this.$container.find(".help-block").hide(),i=e.files[0],e.view=new Making.Views.PhotoPreview({model:i}),this.$el.prepend(e.view.render().el),e.view.validate()?e.submit():void 0},n.prototype.dragover=function(){return this.$container.addClass("dragover")},n.prototype.drop=function(){return this.$container.removeClass("dragover")},n.prototype.progress=function(t,e){return e.view.progress(e)},n.prototype.done=function(t,e){return e.view.remove(),this.collection.add(e.result)},n.prototype.fail=function(t,e){return e.view.$el.removeClass("uploading").addClass("fail").html('<p class="fail">\u51fa\u9519\u4e86\uff0c\u518d\u8bd5\u8bd5\u3002<a class="destroy" title="\u5220\u9664" href="#"><i class="fa fa-trash-o"></i></a></p>'),this.checkUploaderButton(),!1},n.prototype.addPhoto=function(t,e,i){var n;return n=new Making.Views.Photo({model:t,attributes:{"data-photo-id":t.id}}),i.add?this.$el.prepend(n.render().el):this.$el.append(n.render().el),this.checkQueue(),this.$el.sortable({items:".uploaded"})},n.prototype.removePhoto=function(){return 0===this.$el.children("li").length?this.$el.prev(".help-block").show():void 0},n.prototype.checkQueue=function(){var t,e,i;return i=this,0===this.$el.children("li:not(.uploader_button)").length?(this.$el.children(".uploader_button").remove(),this.$label.removeClass("is-valid")):(e=this.$el.children(".uploader_button"),this.$label.addClass("is-valid"),0===e.length?(t=$('<li class="uploader_button">+</li>'),t.on("click",function(){return i.$el.closest(".uploader").find(".uploader_label").click()}),this.$el.append(t)):this.$el.append(e))},n}(Backbone.View)}.call(this),function(){var t,e,i={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};e=HandlebarsTemplates["search/suggestions"],t=HandlebarsTemplates["search/loading"],Making.Views.SearchForm=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return n(r,i),r.prototype.ui={input:'input[type="search"]',status:".fa-search",clear:".fa-times",menu:".search_menu",suggestions:".search_menu-suggestions",result:".search_menu-result"},r.prototype.events={"keydown @ui.input":"onKeyDown","mousedown .search_menu-suggestions li":"onClick","mousedown .search_menu-result a":"onClick","keyup @ui.input":"onKeyUp","focus @ui.input":"onFocus","blur @ui.input":"onBlur","click @ui.clear":"onClear",submit:"onSubmit"},r.prototype.modelEvents={change:"render"},r.prototype.initialize=function(){return this.bindUIElements(),this.model=new Backbone.Model,this.reset(),this.ui.input.is(":focus")?this.ui.input.trigger("focus"):void 0},r.prototype.inputValue=function(){return this.ui.input.val().trim()},r.prototype.reset=function(){return this.model.set({loading:!1,query:this.inputValue(),suggestions:[],selectedIndex:0,result:""})},r.prototype.render=function(){return this.model.get("suggestions").length||this.model.get("result")?this.ui.menu.show():this.ui.menu.hide(),this.model.hasChanged("loading")?this.model.get("loading")?(this.ui.status.removeClass("fa-search").addClass("fa-spinner fa-spin"),this.ui.result.html(t()),this.ui.result.find(".search_menu-progress").animate({width:"100%"},500)):(this.ui.status.addClass("fa-search").removeClass("fa-spinner fa-spin"),this.ui.result.find(".search_menu-progress").animate({width:"100%"},50,function(t){return function(){return t.ui.result.hide().html(t.model.get("result")).fadeIn()}}(this))):!this.model.get("loading")&&this.model.hasChanged("result")&&this.ui.result.hide().html(this.model.get("result")).fadeIn(),this.model.get("query")!==this.inputValue()&&this.ui.input.val(this.model.get("query")),this.model.hasChanged("suggestions")||this.model.hasChanged("selectedIndex")?this.ui.suggestions.html(e({suggestions:this.model.get("suggestions"),selectedIndex:this.model.get("selectedIndex")})):void 0},r.prototype.updateSuggestions=function(t){return null==this._cachedSuggestions&&(this._cachedSuggestions=Object.create(null)),null!=this._cachedSuggestions[t]?this.model.set({suggestions:this._cachedSuggestions[t],selectedIndex:0}):$.ajax({url:"/search/suggestions",data:{q:t},dateType:"json"}).done(function(e){return function(i){return i.unshift(t),e._cachedSuggestions[t]=i,t===e.inputValue()?e.model.set({suggestions:i,selectedIndex:0}):void 0}}(this))},r.prototype.updateResult=function(t){return null==this._cachedResults&&(this._cachedResults=Object.create(null)),null!=this._cachedResults[t]?this.model.set({loading:!1,result:this._cachedResults[t]}):(this.model.set({loading:!0}),$.ajax({url:"/search",data:{q:t},dateType:"html"}).done(function(e){return function(i){return e._cachedResults[t]=i,t===e.inputValue()?e.model.set({loading:!1,result:i}):void 0}}(this)))},r.prototype.selectSuggestion=function(t){var e;return e=this.model.get("suggestions")[t],this.model.set({query:e,selectedIndex:t}),this.updateResult(e)},r.prototype.moveBy=function(t){var e,i;return i=this.model.get("suggestions").length,e=(this.model.get("selectedIndex")+t+i)%i,this.selectSuggestion(e)},r.prototype.onKeyDown=function(t){switch(t.which){case Making.keycode.UP:this.moveBy(-1);break;case Making.keycode.DOWN:case Making.keycode.TAB:this.moveBy(t.shiftKey?-1:1);break;default:return}return t.preventDefault()},r.prototype.onClick=function(t){var e;return t.preventDefault(),e=$(t.currentTarget).data("index"),null!=e?this.selectSuggestion(e):void 0},r.prototype.onKeyUp=_.debounce(function(){var t;return t=this.inputValue(),t!==this.model.get("query")?(this.model.set({query:t}),0===t.length?this.model.set({suggestions:[],result:""}):(this.updateSuggestions(t),this.updateResult(t))):void 0},200),r.prototype.onFocus=function(){var t;return this.ui.input.select(),t=this.model.get("query"),0!==t.length?(this.updateSuggestions(t),this.updateResult(t)):void 0},r.prototype.onBlur=function(){return Making.isDebugging()?void 0:this.model.set({loading:!1,suggestions:[],selectedIndex:0,result:""})},r.prototype.onClear=function(){return this.ui.input.val(""),this.reset()},r.prototype.onSubmit=function(t){return 0===this.inputValue().length?t.preventDefault():void 0},r}(Backbone.Marionette.ItemView)}.call(this),function(){Making.Views.Share=Backbone.View.extend({el:".tiny_share",events:{"mouseenter .weixin":"weixin","mouseleave .weixin":"weixin","click .weixin":"prevent_default","click .weibo":"weibo","click .twitter":"twitter"},initialize:function(){return this.$weixin=this.$(".weixin"),this.$weixin.popover({html:!0,content:$("<div />").qrcode({render:"image",ecLevel:"L",text:document.URL.indexOf("#")>0?Making.url:document.URL})})},prevent_default:function(t){return t.preventDefault()},weixin:function(t){return this.$weixin.popover("mouseenter"===t.type?"show":"hide")},weibo:function(t){var e,i;return t.preventDefault(),e=$('meta[name="sharing_content"]').attr("content"),(void 0===e||0===e.length)&&(e=document.title+" "+location.href),i=$(".sharing_cover").attr("src"),void 0===i&&(i=""),window.open("http://v.t.sina.com.cn/share/share.php?appkey=3754720038&title="+encodeURIComponent(e)+"&url="+encodeURIComponent(location.href)+"&pic="+encodeURIComponent(i)+"&source=bookmark&content=utf-8","_blank","width=500,height=500")
},twitter:function(t){var e;return t.preventDefault(),e=$('meta[name="sharing_content"]').attr("content"),(void 0===e||0===e.length)&&(e=document.title),window.open("http://twitter.com/share?text="+e+"&url="+encodeURIComponent(location.href)+"&amp;source=bookmark","_blank","width=500,height=500")}})}.call(this),function(){var t,e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};t=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.tagName="li",e.prototype.className="thing-list",e.prototype.template=HandlebarsTemplates["thing_lists/list"],e.prototype.events={"change input":"toggle"},e.prototype.modelEvents={change:"render"},e.prototype.toggle=function(t){return this.model.set("selected",t.currentTarget.checked)},e}(Backbone.Marionette.ItemView),Making.Views.AddToListModal=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return i(n,e),n.prototype.id="add-to-list-modal",n.prototype.className="modal fade",n.prototype.template=HandlebarsTemplates["thing_lists/add_to_list_modal"],n.prototype.ui={name:'input[name="name"]',description:'input[name="description"]'},n.prototype.events={"show.bs.modal":"reset","hidden.bs.modal":"destroy","keyup @ui.name":"editName","submit .new-thing-list-form":"addThingList","submit .new-thing-list-items-form":"done"},n.prototype.collectionEvents={reset:"initSelected","change:selected":"addToChangedLists"},n.prototype.childView=t,n.prototype.childViewContainer="ul.thing-lists",n.prototype.initialize=function(){return this.model.set("photo",this.model.get("photo").replace(/!huge$/,"!square"))},n.prototype.onShow=function(){return this.$el.modal("show")},n.prototype.reset=function(){return this.collection.fetch({reset:!0,success:function(t){return function(){return t.model.get("categories").forEach(function(e){return t.collection.findWhere({name:e})||t.collection.unshift({name:e})})}}(this)}),this._changedLists={}},n.prototype.initSelected=function(){var t;return t=this.model.id,this.collection.each(function(e){return e.set("selected",_.any(e.get("items"),function(e){return e.thing_id===t}),{slient:!0})}),this.collection.sort()},n.prototype.editName=function(t){return t.currentTarget.value.trim()?this.$(".new-thing-list-form button").removeClass("disabled"):this.$(".new-thing-list-form button").addClass("disabled")},n.prototype.addThingList=function(t){var e,i;return t.preventDefault(),(i=this.ui.name.val().trim())?(e=this.collection.findWhere({name:i})||this.collection.unshift({name:i}),e.set("selected",!0),this.addToChangedLists(e),this.ui.name.val("")):void 0},n.prototype.done=function(t){var e,i;return t.preventDefault(),this.addThingList(t),i=this.model.id,e=this.ui.description.val().trim(),_.any(this._changedLists,function(t){return t.get("selected")})?(this.ui.description.val(""),_.each(this._changedLists,function(t){var n,r,o;return o=new Backbone.Collection(t.get("items")),o.url=""+t.url()+"/items",r=o.findWhere({thing_id:i}),n=function(){return o.create({thing_id:i,description:e})},t.isNew()?void(t.get("selected")&&t.save(null,{success:function(){return o.url=""+t.url()+"/items",o.create({thing_id:i,description:e})}})):t.get("selected")?r?e?r.save({description:e}):void 0:n():null!=r?r.destroy():void 0}),_.size(this._changedLists)&&this.$el.one("hidden.bs.modal",function(){return Making.ShowMessageOnTop("\u64cd\u4f5c\u6210\u529f")}),this.$el.modal("hide")):this.$("form > h5").css({color:"#8cadca"}).fadeTo("fast",.7).fadeTo("fast",1)},n.prototype.addToChangedLists=function(t){return this._changedLists[t.cid]=t},n}(Backbone.Marionette.CompositeView)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};Making.Views.ThingsNew=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.events={submit:"validate"},i.prototype.initialize=function(){var t;return t=this,this.$title=this.$('[name="thing[title]"]'),this.$content=this.$('[name="thing[content]"]'),this.$submit=$("#form-thing-submit"),this.photo_view=new Making.Views.PhotosUpload,this.photo_view.render(),this.$submit.on("click",function(){return t.$el.submit()}),$('[name="file"]').prop("accept","image/*")},i.prototype.validate_unicity=function(t){var e,i,n,r,o,s,a,l;return $("html").hasClass("things_new")?(l=$("#navbar_search").attr("action")+".js?type=things",a=$.trim(t.target.value),s=!1,o=$("#thing_candidate"),r=o.children(".slideshow_body"),e=o.children(".close"),n=o.find(".slideshow_control.left"),i=o.find(".slideshow_control.right"),$.ajax({url:l,data:{q:a},dataType:"html",contentType:"application/x-www-form-urlencoded;charset=UTF-8"}).done(function(t,a,l){var c,u,h;return 200===l.status?(c=$(t),0===c.children().length?void e.trigger("click"):(u=o.is(":hidden"),r.empty().append(c.addClass("slideshow_inner")),u&&o.css("height",0).show(),r.css("width",function(){return o.width()}),u&&o.css("height","auto").hide(),s?(slideshow_body.slideTo(0),h.reload()):(h=new Sly(r,{horizontal:1,itemNav:"centered",activateMiddle:1,activateOn:"click",mouseDragging:1,touchDragging:1,releaseSwing:1,speed:300,elasticBounds:1,dragHandle:1,dynamicHandle:1,clickBar:1,prevPage:n,nextPage:i}).init(),s=!0),o.slideDown())):e.trigger("click")}),e.on("click",function(t){return t.preventDefault(),o.slideUp()})):void 0},i.prototype.validate_photos=function(){return console.log("validate")},i.prototype.collect_photos=function(){var t;return t=this.photo_view.$(".uploaded"),_.each(t,function(t){return function(e){return $("<input>").attr({name:"thing[photo_ids][]",value:$(e).data("photo-id"),type:"hidden"}).appendTo(t.$el)}}(this))},i.prototype.validate=function(){var t;return t=this.photo_view.$(".uploaded"),""!==$.trim(this.$title.val())&&""!==$.trim(this.$content.val())&&t.length>0?(this.collect_photos(),this.$submit.disable(),!0):(0===t.length&&$(".uploader_label").tooltip("show"),""===this.$title.val().trim()&&this.$title.tooltip("show"),""===this.$content.val().trim()&&this.$el.parents("#form-thing").find("#form-thing-body").tooltip("show"),!1)},i}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};Making.Routers.Photos=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.routes={"":"index"},i.prototype.initialize=function(){},i.prototype.index=function(){},i}(Backbone.Router)}.call(this),function(){!function(t){var e;return e=function(){var t,e,i;return e=$("#new-thing-modal"),t=$("#new-thing-from-url-modal"),t.on("click",'button[type="submit"]',function(){var e;return e=t.find("#new-thing-url").val(),e&&!/^https?:\/\//.test(e)&&(e="http://"+e),t.find("#new-thing-url").val(e)}),i=function(){return t.find("input").val("").end().find("input, button").attr("disabled",!1).end().find(".progress").hide().end().find(".progress-bar").css({width:0})},$("#extract_url_form").on("ajax:beforeSend",function(){var e;return t.find("input, button").attr("disabled",!0),t.find(".progress").show(),e=t.find(".progress-bar"),e.animate({width:"100%"},3e3),$("#new-thing-edit-modal").html(""),$("#new-thing-similar-modal").html(""),!0}),t.on("show.bs.modal",function(){return i(),t.find(".alert").addClass("hidden")}),$("#new-thing-url").on("focus",function(){return t.find(".alert").addClass("hidden")})},t.init_new_thing_modal=function(){var e,i,n,r,o,s,a;return n=$("#new-thing-edit-modal"),n.on("loaded.carousel",function(){return t.carousel({element:"#new-thing-edit-modal .carousel",isResetItemWidth:!0}),$("#new-thing-edit-modal .carousel").css({maxHeight:"none",visibility:"visible"})}),$("#create_thing_modal_form").on("ajax:beforeSend",function(){var t;return n.find("button").attr("disabled",!0).end().find(".progress").show(),t=n.find(".progress-bar"),t.animate({width:"100%"},3e3)}).on("submit",function(){var t,e;return t=$(this),e=t.find("[required]"),e.each(function(){var t;return t=$(this),""===t.val().trim()?t.tooltip("show"):void 0})}),e=$("#new-thing-edit-modal-images .carousel-inner"),r=$("#new-thing-edit-modal-sortable"),r.sortable(),s=0,a=0,o=!0,i=$("#new-thing-edit-modal-images-container .image .item").find("img"),$.each(i,function(t,l){return $(l).one("load",function(){var t,l,c,u,h;return a+=1,c=$(this),u=c.prop("naturalHeight"),h=c.prop("naturalWidth"),(u>=300||h>=300)&&(t=c.parent(),t.find("a").on("click",function(t){var e,i,n,r;t.preventDefault(),r=$(this),n=$("#"+r.attr("data-selector-id")),i=n.children("input"),e=n.children(".selected_icon"),"disabled"===i.attr("disabled")?(i.removeAttr("disabled"),e.removeClass("hidden")):(i.attr("disabled","disabled"),e.addClass("hidden")),"modal"!==r.data("toggle")&&(r.hasClass("selected")?r.removeClass("selected").addClass("unselect").attr("title","\u53d6\u6d88\u9009\u62e9").children(".fa").removeClass("fa-circle").addClass("fa-circle-o heartbeat").one($.support.transition.end,function(){return $(this).removeClass("heartbeat")}).emulateTransitionEnd(750):r.removeClass("unselect").addClass("selected").attr("title","\u9009\u62e9").children(".fa").removeClass("fa-circle-o").addClass("fa-check-circle-o heartbeat").one($.support.transition.end,function(){return $(this).removeClass("heartbeat")}).emulateTransitionEnd(750))}),0===s?($("#new-thing-edit-modal-images").removeClass("more-than-one"),e.append(t.addClass("active")),t.find("a").click()):($("#new-thing-edit-modal-images").addClass("more-than-one"),e.append(t)),l=$("#"+c.attr("data-selector-id")).attr("data-slide-to",s).attr("draggable",!0),r.append(l),$("#new-thing-edit-modal-sortable").sortable("refresh"),$("#new-thing-edit-modal-sortable").children().size()>0&&o&&(o=!1,0!==$("#new-thing-similar-modal").html().length?$("#new-thing-similar-modal").modal("show"):$("#new-thing-edit-modal").modal("show"),$("#new-thing-from-url-modal").find("input").val("").end().find("input, button").attr("disabled",!1).end().find(".progress").hide().end().find(".progress-bar").css({width:0})),s+=1),a===i.length?n.trigger("loaded.carousel"):void 0}).each(function(){return this.complete?$(this).load():void 0}),setTimeout(function(){return 0===$("#new-thing-edit-modal-sortable").children().size()?($("#new-thing-from-url-modal").find(".alert").removeClass("hidden"),$("#new-thing-from-url-modal").find("input").val("").end().find("input, button").attr("disabled",!1).end().find(".progress").hide().end().find(".progress-bar").css({width:0})):void 0},2e4)}).each($("#new-thing-edit-modal-sortable").children(),function(t,e){var i;return i=$(e),i.attr("data-slide-to",t)}),$(".select_btn_container > a").on("click",function(t){var e,i,n,r;t.preventDefault(),r=$(this),n=$("#"+r.attr("data-selector-id")),i=n.children("input"),e=n.children(".selected_icon"),"disabled"===i.attr("disabled")?(i.removeAttr("disabled"),e.removeClass("hidden")):(i.attr("disabled","disabled"),e.addClass("hidden")),"modal"!==r.data("toggle")&&(r.hasClass("selected")?r.removeClass("selected").addClass("unselect").attr("title","\u53d6\u6d88\u9009\u62e9").children(".fa").removeClass("fa-circle").addClass("fa-circle-o heartbeat").one($.support.transition.end,function(){return $(this).removeClass("heartbeat")}).emulateTransitionEnd(750):r.removeClass("unselect").addClass("selected").attr("title","\u9009\u62e9").children(".fa").removeClass("fa-circle-o").addClass("fa-check-circle-o heartbeat").one($.support.transition.end,function(){return $(this).removeClass("heartbeat")}).emulateTransitionEnd(750))})},t.SetupCustomerServices=function(t){var e,i,n;return e=$(t),i=$("#feedback_modal"),n=!1,$window.on("load",function(){return n=!0}),e.click(function(t){var e;return t.preventDefault(),"function"==(e=typeof mechatClick)||"object"===e?mechatClick():n?i.modal("show"):void 0})},t.GoTop=function(){return $(window).on("scroll",function(){if($(window).scrollTop()>$(window).height()/2){if($("#go_top").is(":hidden"))return $("#go_top").fadeIn()}else if($("#go_top").is(":visible"))return $("#go_top").fadeOut()}),$("#go_top").click(function(t){return t.preventDefault(),$(this).fadeOut(),$("html,body").animate({scrollTop:0},"slow")})},t.ToggleFixedNavbar=function(){var t,e,i,n;return $("html").hasClass("touch")?(t=$("#header"),e=$(window),i=0,n=0,$document.on("focusin",":input",function(){return n=t.css("top"),t.css({position:"absolute",top:0})}).on("focusout",":input",function(){return t.css({position:"fixed",top:n})})):void 0},t.AjaxComplete=function(){return $(document).ajaxComplete(function(){var t;return $(".spinning").remove(),t=$(".thing").filter(function(){return"_blank"!==$(this).attr("target")}),Making.InitUIThings(t),!0})},t.TrackEvent=function(t,e,i){var n;try{return _hmt.push(["_trackEvent",t,e,i])}catch(r){n=r}},t.SaveFormState=function(t){return window.localStorage["saved|"+window.location.pathname+"|"+t.attr("id")]=t.serialize()},t.LoadFormState=function(t){var e,i;return e=t.attr("id"),i=window.localStorage["saved|"+window.location.pathname+"|"+e],void 0!==i?(t.deserialize(i,{except:["authenticity_token"]}),delete window.localStorage["saved|"+window.location.pathname+"|"+e]):void 0},t.analytics=function(){return $document.on("click","[data-action]",function(t){var e,i,n,r;return e=$(t.currentTarget),n=e.attr("data-category"),i=e.attr("data-action"),r=e.attr("data-label"),ga("send","event",n,i,r)})},$(function(){var i,n,r,o,s,a,l,c,u,h,d;if(u=$("#user"),o=$(".navbar .dropdown").not(".notification"),c=$("textarea"),l=$("select.selectpicker"),h=t.keycode,t.lazyLoadImages(),t.InitUIThings($(".thing")),t.Share(),t.AjaxComplete(),t.ToggleFixedNavbar(),t.SetupCustomerServices('[href="#customer_services"]'),t.GoTop(),t.ProfilePopovers(),t.PrivateMessage(),t.AtUser("textarea"),t.shareOnWechat(),$("html").hasClass("production")&&t.analytics(),(s=$(".popover-toggle")).length&&s.popover(),(a=$(".score")).length&&a.score(),$(".knewone-embed:empty").length&&t.loadEmbed(),(i=$(".entry_compact")).length&&i.on("click",".entry_email_toggle",function(){var t;return t=$(this).parents(".entry").find(".entry_email"),t.stop()[t.is(":hidden")?"fadeIn":"fadeOut"](160),$(this).toggleClass("active")}),void 0===t.user){switch(t.device){case"mobile":case"tablet":n=$('#header [data-target="#login-modal"]');break;case"desktop":n=$('#header .user_link[data-target="#login-modal"]')}$document.on("click",".js-require_login",function(t){return $(t.currentTarget).find("textarea").length?n.trigger("click"):void 0})}return $(document).on("click","a.disabled",function(){return!1}).on("click",".tags > a",function(t){var e;return e=$(this),"#"===e.attr("href")?(t.preventDefault(),e.toggleClass("is-active")):void 0}).on("click",".fanciers > a, .fancy-button > a, .fancy_button > a",function(t){var e,i,n,r,o;i=$(this),"modal"!==i.data("toggle")&&"wechat_login"!==i.data("toggle")&&(t.preventDefault(),e=i.find(".fanciers_count").is(":visible")?i.find(".fanciers_count"):i.parents(".thing").length>0?i.parents(".thing").find(".figure_detail").find(".fanciers_count"):i.parents(".feed-thing").find(".fanciers-count"),o=function(t){var i;return i=e.find(".humanized_number"),i.length?i.attr("title",parseInt(i.attr("title"))+t):e.text(parseInt(e.text(),10)+t)},i.hasClass("fancied")?(r=function(){return i.removeClass("fancied").addClass("unfancied").attr("title","\u53d6\u6d88\u559c\u6b22").children(".fa").removeClass("fa-heart").addClass("fa-heart-o heartbeat").one($.support.transition.end,function(){return $(this).removeClass("heartbeat")}).emulateTransitionEnd(750),o(-1)},n=""+Making.user+"+unfancy-confirmed",!i.data("has-lists")||localStorage.getItem(n)?r():(localStorage.setItem(n,!0),confirm("\u5982\u679c\u65bd\u4e86\u201c\u53d6\u6d88\u559c\u6b22\u201d\u7684\u795e\u5947\u9b54\u6cd5\uff0c\u8be5\u4ea7\u54c1\u5c06\u4ece\u5217\u8868\u4e2d\u6d88\u5931")&&r())):(i.removeClass("unfancied").addClass("fancied").attr("title","\u559c\u6b22").children(".fa").removeClass("fa-heart-o").addClass("fa-heart heartbeat").one($.support.transition.end,function(){return $(this).removeClass("heartbeat")}).emulateTransitionEnd(750),o(1)),$.ajax({url:i.data("url"),type:"post"}))}).on("keydown","textarea",function(t){return(t.metaKey||t.ctrlKey)&&t.keyCode===h.ENTER?$(this).parents("form").find('button[type="submit"]').trigger("click"):void 0}),$(".form-group.search").on("click",".fa-times",function(){return $(this).hide().parents(".search").find("input").val("")}).on("keyup focus","input",function(){var t;return t=$(this).parents(".search").find(".fa-times"),$.trim(this.value).length?t.show():t.hide()}),$(".js_auto_submit").on("change",function(){return $(this).parents("form").trigger("submit")}),$(".entry").on("click",'[data-toggle="tab"]',function(t){var e,i;return t.preventDefault(),i=$(this),e=i.parents(".entry").find(i.attr("href")),e.addClass("active").siblings(".tab-pane").removeClass("active")}),e(),$(document).on("click",".share_btn",function(){return $("#share_modal_form").find('textarea[name="share[content]"]').val($(this).attr("data-content")).end().find('input[name="share[pic]"]').val($(this).attr("data-pic")).end(),$(this).attr("data-preview-pic")?$("#share_modal_form").find(".pic_preview").find("img").attr("src",$(this).attr("data-preview-pic")).end().removeClass("hide"):void 0}),$(".save_form_state").on("click",function(){return $.each($("form"),function(e,i){return t.SaveFormState($(i))})}),$.each($("form"),function(e,i){return t.LoadFormState($(i))}),r=$("#"+Making.GetParameterByKey("open_modal")).first(),0!==r.size()&&r.modal("toggle"),$html.hasClass("touch")&&$document.on("touchstart",function(){console.log("What happened?")}),$(".article > .body, .post_content").find("iframe, embed").filter(function(){var t,e,i;return t=$(this),e=!0,i=t.attr("src"),i.indexOf("www.xiami.com")>0&&i.indexOf("singlePlayer")>0&&(t.css("width",t.attr("width")),e=!1),e}).addClass("embed-responsive-item").wrap('<div class="embed-responsive embed-responsive-16by9"></div>'),($html.hasClass("mobile")||$html.hasClass("tablet"))&&(d=new t.View.Menu(".menu","body",".menu-toggle")),Modernizr.mq("(min-width: "+Making.Breakpoints.screenMDMin+")")&&($("#notification_box").children("a").attr("data-toggle","dropdown_box"),Making.user&&new Making.Views.Notification,o.each(function(){var t;return t=$(this),t.on("mouseenter",function(){return t.addClass("open")}).on("mouseleave",function(){return t.removeClass("open")}),t.is(".nav_flyout")?t.on("mouseenter",function(){return $docbody.trigger("freeze")}).on("mouseleave",function(){return $docbody.trigger("unfreeze")}):void 0}),u.children(".dropdown").children(".dropdown-toggle").on("click",function(){var t;return t=$(this).attr("href"),"#"!==t?window.location.href=t:void 0}),$("#new_thing_trigger").attr("data-target","#new-thing-modal"),l.length)?l.selectpicker():void 0})}(Making)}.call(this);